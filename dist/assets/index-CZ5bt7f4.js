import{r as f,a as jb,g as wb,R as Os,u as mo,b as Nb,L as Ws,N as wi,c as Ed,O as kb,B as _b,d as Eb,e as es}from"./react-vendor-C1CKHd5q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Ax={exports:{}},go={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b=f,Tb=Symbol.for("react.element"),Sb=Symbol.for("react.fragment"),Ab=Object.prototype.hasOwnProperty,Ib=$b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cb={key:!0,ref:!0,__self:!0,__source:!0};function Ix(s,t,r){var a,n={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(a in t)Ab.call(t,a)&&!Cb.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Tb,type:s,key:i,ref:l,props:n,_owner:Ib.current}}go.Fragment=Sb;go.jsx=Ix;go.jsxs=Ix;Ax.exports=go;var e=Ax.exports,Pc={},Eu=jb;Pc.createRoot=Eu.createRoot,Pc.hydrateRoot=Eu.hydrateRoot;const Db={},$u=s=>{let t;const r=new Set,a=(u,m)=>{const g=typeof u=="function"?u(t):u;if(!Object.is(g,t)){const y=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(v=>v(t,y))}},n=()=>t,d={setState:a,getState:n,getInitialState:()=>h,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Db?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},h=t=s(a,n,d);return d},Rb=s=>s?$u(s):$u;var Cx={exports:{}},Dx={},Rx={exports:{}},Px={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=f;function Pb(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Mb=typeof Object.is=="function"?Object.is:Pb,Ob=jn.useState,Lb=jn.useEffect,Vb=jn.useLayoutEffect,Fb=jn.useDebugValue;function Ub(s,t){var r=t(),a=Ob({inst:{value:r,getSnapshot:t}}),n=a[0].inst,i=a[1];return Vb(function(){n.value=r,n.getSnapshot=t,oc(n)&&i({inst:n})},[s,r,t]),Lb(function(){return oc(n)&&i({inst:n}),s(function(){oc(n)&&i({inst:n})})},[s]),Fb(r),r}function oc(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!Mb(s,r)}catch{return!0}}function Bb(s,t){return t()}var zb=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bb:Ub;Px.useSyncExternalStore=jn.useSyncExternalStore!==void 0?jn.useSyncExternalStore:zb;Rx.exports=Px;var qb=Rx.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=f,Hb=qb;function Wb(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Gb=typeof Object.is=="function"?Object.is:Wb,Kb=Hb.useSyncExternalStore,Yb=po.useRef,Qb=po.useEffect,Xb=po.useMemo,Jb=po.useDebugValue;Dx.useSyncExternalStoreWithSelector=function(s,t,r,a,n){var i=Yb(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=Xb(function(){function d(y){if(!h){if(h=!0,u=y,y=a(y),n!==void 0&&l.hasValue){var v=l.value;if(n(v,y))return m=v}return m=y}if(v=m,Gb(u,y))return v;var E=a(y);return n!==void 0&&n(v,E)?(u=y,v):(u=y,m=E)}var h=!1,u,m,g=r===void 0?null:r;return[function(){return d(t())},g===null?void 0:function(){return d(g())}]},[t,r,a,n]);var c=Kb(s,i[0],i[1]);return Qb(function(){l.hasValue=!0,l.value=c},[c]),Jb(c),c};Cx.exports=Dx;var Zb=Cx.exports;const ef=wb(Zb),Mx={},{useDebugValue:tf}=Os,{useSyncExternalStoreWithSelector:sf}=ef;let Tu=!1;const rf=s=>s;function af(s,t=rf,r){(Mx?"production":void 0)!=="production"&&r&&!Tu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Tu=!0);const a=sf(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,r);return tf(a),a}const nf=s=>{(Mx?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?Rb(s):s,r=(a,n)=>af(t,a,n);return Object.assign(r,t),r},Mi=s=>nf,lf={};function of(s,t){let r;try{r=s()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),c=(i=r.getItem(n))!=null?i:null;return c instanceof Promise?c.then(l):l(c)},setItem:(n,i)=>r.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>r.removeItem(n)}}const Ni=s=>t=>{try{const r=s(t);return r instanceof Promise?r:{then(a){return Ni(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return Ni(a)(r)}}}},cf=(s,t)=>(r,a,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:I=>I,version:0,merge:(I,C)=>({...C,...I}),...t},l=!1;const c=new Set,d=new Set;let h;try{h=i.getStorage()}catch{}if(!h)return s((...I)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...I)},a,n);const u=Ni(i.serialize),m=()=>{const I=i.partialize({...a()});let C;const T=u({state:I,version:i.version}).then(D=>h.setItem(i.name,D)).catch(D=>{C=D});if(C)throw C;return T},g=n.setState;n.setState=(I,C)=>{g(I,C),m()};const y=s((...I)=>{r(...I),m()},a,n);let v;const E=()=>{var I;if(!h)return;l=!1,c.forEach(T=>T(a()));const C=((I=i.onRehydrateStorage)==null?void 0:I.call(i,a()))||void 0;return Ni(h.getItem.bind(h))(i.name).then(T=>{if(T)return i.deserialize(T)}).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==i.version){if(i.migrate)return i.migrate(T.state,T.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return T.state}).then(T=>{var D;return v=i.merge(T,(D=a())!=null?D:y),r(v,!0),m()}).then(()=>{C==null||C(v,void 0),l=!0,d.forEach(T=>T(v))}).catch(T=>{C==null||C(void 0,T)})};return n.persist={setOptions:I=>{i={...i,...I},I.getStorage&&(h=I.getStorage())},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>E(),hasHydrated:()=>l,onHydrate:I=>(c.add(I),()=>{c.delete(I)}),onFinishHydration:I=>(d.add(I),()=>{d.delete(I)})},E(),v||y},df=(s,t)=>(r,a,n)=>{let i={storage:of(()=>localStorage),partialize:E=>E,version:0,merge:(E,I)=>({...I,...E}),...t},l=!1;const c=new Set,d=new Set;let h=i.storage;if(!h)return s((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...E)},a,n);const u=()=>{const E=i.partialize({...a()});return h.setItem(i.name,{state:E,version:i.version})},m=n.setState;n.setState=(E,I)=>{m(E,I),u()};const g=s((...E)=>{r(...E),u()},a,n);n.getInitialState=()=>g;let y;const v=()=>{var E,I;if(!h)return;l=!1,c.forEach(T=>{var D;return T((D=a())!=null?D:g)});const C=((I=i.onRehydrateStorage)==null?void 0:I.call(i,(E=a())!=null?E:g))||void 0;return Ni(h.getItem.bind(h))(i.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==i.version){if(i.migrate)return[!0,i.migrate(T.state,T.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var D;const[M,se]=T;if(y=i.merge(se,(D=a())!=null?D:g),r(y,!0),M)return u()}).then(()=>{C==null||C(y,void 0),y=a(),l=!0,d.forEach(T=>T(y))}).catch(T=>{C==null||C(void 0,T)})};return n.persist={setOptions:E=>{i={...i,...E},E.storage&&(h=E.storage)},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(d.add(E),()=>{d.delete(E)})},i.skipHydration||v(),y||g},hf=(s,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((lf?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),cf(s,t)):df(s,t),Oi=hf,uf=["Founder","Co-Founder","Caller Ultima","Caller PRO","Caller Base","Analyst Ultima","Analyst PRO","Analyst Base","Trader Ultima","Trader Pro","Trader Base","Developer"],_s={memecoins:{label:"Мемкоины",accent:"emerald",icon:"rocket"},futures:{label:"Фьючерсы",accent:"blue",icon:"trending"},nft:{label:"NFT",accent:"purple",icon:"image"},spot:{label:"Спот",accent:"amber",icon:"coins"},airdrop:{label:"AirDrop",accent:"cyan",icon:"gift"},polymarket:{label:"Polymarket",accent:"pink",icon:"barchart"},staking:{label:"Стейкинг",accent:"indigo",icon:"shield"},other:{label:"Крипто-рынок",accent:"gray",icon:"sparkles"}},oa={memecoins:{label:"Мемкоины",accent:"emerald",icon:"rocket",gradient:"from-emerald-500 to-teal-600",shortName:"Мемы"},futures:{label:"Фьючерсы",accent:"blue",icon:"line",gradient:"from-blue-500 to-indigo-600",shortName:"Фьюч"},nft:{label:"NFT",accent:"purple",icon:"image",gradient:"from-purple-500 to-pink-600",shortName:"NFT"},spot:{label:"Спот",accent:"amber",icon:"coins",gradient:"from-amber-500 to-orange-600",shortName:"Спот"},airdrop:{label:"AirDrop",accent:"cyan",icon:"gift",gradient:"from-cyan-500 to-blue-600",shortName:"Airdrop"},polymarket:{label:"PolyMarket",accent:"pink",icon:"barchart",gradient:"from-pink-500 to-rose-600",shortName:"Poly"},staking:{label:"Стейкинг",accent:"indigo",icon:"shield",gradient:"from-indigo-500 to-violet-600",shortName:"Stake"},other:{label:"Другое",accent:"gray",icon:"sparkles",gradient:"from-gray-500 to-gray-600",shortName:"Другое"}},Fe=[{id:"1",name:"Артём",login:"dexim03@ava-apex.io",password:"095deximadmpro.03",recoveryCode:"20035009",avatar:"/avatars/artyom.jpg",phone:"79778730513"},{id:"2",name:"Адель",login:"enowk05@ava-apex.io",password:"101enowk.05",recoveryCode:"2005100",avatar:"/avatars/adel.jpg",phone:"79172480769"},{id:"3",name:"Ксения",login:"ksen03@ava-apex.io",password:"03ksen.03-@!",recoveryCode:"20037958",avatar:"/avatars/kseniya.jpg",phone:"79378159355"},{id:"4",name:"Ольга",login:"lelik-304@ava-apex.io",password:"040lelik.04",recoveryCode:"200423",avatar:"/avatars/olga.jpg",phone:"79393035770"}],Pl={trading:{label:"Торговля",icon:"candles",color:"green"},learning:{label:"Обучение",icon:"book",color:"blue"},technical:{label:"ТЧ",icon:"cpu",color:"purple"},stream:{label:"Стрим",icon:"broadcast",color:"red"},research:{label:"Изучение",icon:"flask",color:"yellow"},organization:{label:"Ресёрч",icon:"clipboard",color:"indigo"}},xf={in_progress:{label:"В работе",color:"blue"},completed:{label:"Выполнено",color:"green"},closed:{label:"Закрыто",color:"gray"}},mn={memecoins:{label:"Мемкоины",gradient:"from-emerald-400 via-teal-500 to-cyan-400",gradientDark:"from-emerald-500 via-teal-600 to-cyan-500",icon:"rocket",cardGradient:"from-emerald-500/20 via-teal-400/10 to-cyan-500/5"},polymarket:{label:"Polymarket",gradient:"from-rose-400 to-red-500",gradientDark:"from-rose-600 to-red-500",icon:"barchart",cardGradient:"from-rose-500/20 via-red-500/10 to-transparent"},nft:{label:"NFT",gradient:"from-purple-400 to-pink-500",gradientDark:"from-purple-600 to-pink-500",icon:"image",cardGradient:"from-purple-500/20 via-pink-500/10 to-transparent"},staking:{label:"Стейкинг",gradient:"from-emerald-400 to-green-500",gradientDark:"from-emerald-600 to-green-500",icon:"shield",cardGradient:"from-emerald-500/20 via-green-500/10 to-transparent"},spot:{label:"Спот",gradient:"from-amber-400 to-orange-500",gradientDark:"from-amber-600 to-orange-500",icon:"coins",cardGradient:"from-amber-500/20 via-orange-500/10 to-transparent"},futures:{label:"Фьючерсы",gradient:"from-blue-400 to-indigo-500",gradientDark:"from-blue-600 to-indigo-500",icon:"trending",cardGradient:"from-blue-500/20 via-indigo-500/10 to-transparent"},airdrop:{label:"Airdrop",gradient:"from-gray-300 to-gray-400",gradientDark:"from-gray-400 to-gray-300",icon:"gift",cardGradient:"from-gray-500/20 via-gray-400/10 to-transparent"}};var Su={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=function(s){const t=[];let r=0;for(let a=0;a<s.length;a++){let n=s.charCodeAt(a);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(n=65536+((n&1023)<<10)+(s.charCodeAt(++a)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},mf=function(s){const t=[];let r=0,a=0;for(;r<s.length;){const n=s[r++];if(n<128)t[a++]=String.fromCharCode(n);else if(n>191&&n<224){const i=s[r++];t[a++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=s[r++],l=s[r++],c=s[r++],d=((n&7)<<18|(i&63)<<12|(l&63)<<6|c&63)-65536;t[a++]=String.fromCharCode(55296+(d>>10)),t[a++]=String.fromCharCode(56320+(d&1023))}else{const i=s[r++],l=s[r++];t[a++]=String.fromCharCode((n&15)<<12|(i&63)<<6|l&63)}}return t.join("")},Lx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let n=0;n<s.length;n+=3){const i=s[n],l=n+1<s.length,c=l?s[n+1]:0,d=n+2<s.length,h=d?s[n+2]:0,u=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,y=h&63;d||(y=64,l||(g=64)),a.push(r[u],r[m],r[g],r[y])}return a.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Ox(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):mf(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let n=0;n<s.length;){const i=r[s.charAt(n++)],c=n<s.length?r[s.charAt(n)]:0;++n;const h=n<s.length?r[s.charAt(n)]:64;++n;const m=n<s.length?r[s.charAt(n)]:64;if(++n,i==null||c==null||h==null||m==null)throw new gf;const g=i<<2|c>>4;if(a.push(g),h!==64){const y=c<<4&240|h>>2;if(a.push(y),m!==64){const v=h<<6&192|m;a.push(v)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class gf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pf=function(s){const t=Ox(s);return Lx.encodeByteArray(t,!0)},Ml=function(s){return pf(s).replace(/\./g,"")},Vx=function(s){try{return Lx.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=()=>bf().__FIREBASE_DEFAULTS__,yf=()=>{if(typeof process>"u"||typeof Su>"u")return;const s=Su.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},vf=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Vx(s[1]);return t&&JSON.parse(t)},bo=()=>{try{return ff()||yf()||vf()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Fx=s=>{var t,r;return(r=(t=bo())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[s]},Ux=s=>{const t=Fx(s);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),a]:[t.substring(0,r),a]},Bx=()=>{var s;return(s=bo())===null||s===void 0?void 0:s.config},zx=s=>{var t;return(t=bo())===null||t===void 0?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,a)=>{r?this.reject(r):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},a=t||"demo-project",n=s.iat||0,i=s.sub||s.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Ml(JSON.stringify(r)),Ml(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ts())}function Nf(){var s;const t=(s=bo())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kf(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _f(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Ef(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $f(){const s=Ts();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Tf(){return!Nf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sf(){try{return typeof indexedDB=="object"}catch{return!1}}function Af(){return new Promise((s,t)=>{try{let r=!0;const a="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(a);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(a),s(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var i;t(((i=n.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="FirebaseError";class Tr extends Error{constructor(t,r,a){super(r),this.code=t,this.customData=a,this.name=If,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Li.prototype.create)}}class Li{constructor(t,r,a){this.service=t,this.serviceName=r,this.errors=a}create(t,...r){const a=r[0]||{},n=`${this.service}/${t}`,i=this.errors[t],l=i?Cf(i,a):"Error",c=`${this.serviceName}: ${l} (${n}).`;return new Tr(n,c,a)}}function Cf(s,t){return s.replace(Df,(r,a)=>{const n=t[a];return n!=null?String(n):`<${a}?>`})}const Df=/\{\$([^}]+)}/g;function Rf(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Ol(s,t){if(s===t)return!0;const r=Object.keys(s),a=Object.keys(t);for(const n of r){if(!a.includes(n))return!1;const i=s[n],l=t[n];if(Au(i)&&Au(l)){if(!Ol(i,l))return!1}else if(i!==l)return!1}for(const n of a)if(!r.includes(n))return!1;return!0}function Au(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(s){const t=[];for(const[r,a]of Object.entries(s))Array.isArray(a)?a.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(a));return t.length?"&"+t.join("&"):""}function Pf(s,t){const r=new Mf(s,t);return r.subscribe.bind(r)}class Mf{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(a=>{this.error(a)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,a){let n;if(t===void 0&&r===void 0&&a===void 0)throw new Error("Missing Observer.");Of(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:a},n.next===void 0&&(n.next=cc),n.error===void 0&&(n.error=cc),n.complete===void 0&&(n.complete=cc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Of(s,t){if(typeof s!="object"||s===null)return!1;for(const r of t)if(r in s&&typeof s[r]=="function")return!0;return!1}function cc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(s){return s&&s._delegate?s._delegate:s}class pa{constructor(t,r,a){this.name=t,this.instanceFactory=r,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const a=new jf;if(this.instancesDeferred.set(r,a),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&a.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Ff(t))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[r,a]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:n});a.resolve(i)}catch{}}}}clearInstance(t=Aa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Aa){return this.instances.has(t)}getOptions(t=Aa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:a,options:r});for(const[i,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);a===c&&l.resolve(n)}return n}onInit(t,r){var a;const n=this.normalizeInstanceIdentifier(r),i=(a=this.onInitCallbacks.get(n))!==null&&a!==void 0?a:new Set;i.add(t),this.onInitCallbacks.set(n,i);const l=this.instances.get(n);return l&&t(l,n),()=>{i.delete(t)}}invokeOnInitCallbacks(t,r){const a=this.onInitCallbacks.get(r);if(a)for(const n of a)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Vf(t),options:r}),this.instances.set(t,a),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Aa){return this.component?this.component.multipleInstances?t:Aa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vf(s){return s===Aa?void 0:s}function Ff(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Lf(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Je||(Je={}));const Bf={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},zf=Je.INFO,qf={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Hf=(s,t,...r)=>{if(t<s.logLevel)return;const a=new Date().toISOString(),n=qf[t];if(n)console[n](`[${a}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class $d{constructor(t){this.name=t,this._logLevel=zf,this._logHandler=Hf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Je))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Bf[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...t),this._logHandler(this,Je.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...t),this._logHandler(this,Je.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...t),this._logHandler(this,Je.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...t),this._logHandler(this,Je.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...t),this._logHandler(this,Je.ERROR,...t)}}const Wf=(s,t)=>t.some(r=>s instanceof r);let Iu,Cu;function Gf(){return Iu||(Iu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kf(){return Cu||(Cu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hx=new WeakMap,Mc=new WeakMap,Wx=new WeakMap,dc=new WeakMap,Td=new WeakMap;function Yf(s){const t=new Promise((r,a)=>{const n=()=>{s.removeEventListener("success",i),s.removeEventListener("error",l)},i=()=>{r(ha(s.result)),n()},l=()=>{a(s.error),n()};s.addEventListener("success",i),s.addEventListener("error",l)});return t.then(r=>{r instanceof IDBCursor&&Hx.set(r,s)}).catch(()=>{}),Td.set(t,s),t}function Qf(s){if(Mc.has(s))return;const t=new Promise((r,a)=>{const n=()=>{s.removeEventListener("complete",i),s.removeEventListener("error",l),s.removeEventListener("abort",l)},i=()=>{r(),n()},l=()=>{a(s.error||new DOMException("AbortError","AbortError")),n()};s.addEventListener("complete",i),s.addEventListener("error",l),s.addEventListener("abort",l)});Mc.set(s,t)}let Oc={get(s,t,r){if(s instanceof IDBTransaction){if(t==="done")return Mc.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Wx.get(s);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ha(s[t])},set(s,t,r){return s[t]=r,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Xf(s){Oc=s(Oc)}function Jf(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const a=s.call(hc(this),t,...r);return Wx.set(a,t.sort?t.sort():[t]),ha(a)}:Kf().includes(s)?function(...t){return s.apply(hc(this),t),ha(Hx.get(this))}:function(...t){return ha(s.apply(hc(this),t))}}function Zf(s){return typeof s=="function"?Jf(s):(s instanceof IDBTransaction&&Qf(s),Wf(s,Gf())?new Proxy(s,Oc):s)}function ha(s){if(s instanceof IDBRequest)return Yf(s);if(dc.has(s))return dc.get(s);const t=Zf(s);return t!==s&&(dc.set(s,t),Td.set(t,s)),t}const hc=s=>Td.get(s);function ey(s,t,{blocked:r,upgrade:a,blocking:n,terminated:i}={}){const l=indexedDB.open(s,t),c=ha(l);return a&&l.addEventListener("upgradeneeded",d=>{a(ha(l.result),d.oldVersion,d.newVersion,ha(l.transaction),d)}),r&&l.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),n&&d.addEventListener("versionchange",h=>n(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const ty=["get","getKey","getAll","getAllKeys","count"],sy=["put","add","delete","clear"],uc=new Map;function Du(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(uc.get(t))return uc.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,n=sy.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||ty.includes(r)))return;const i=async function(l,...c){const d=this.transaction(l,n?"readwrite":"readonly");let h=d.store;return a&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),n&&d.done]))[0]};return uc.set(t,i),i}Xf(s=>({...s,get:(t,r,a)=>Du(t,r)||s.get(t,r,a),has:(t,r)=>!!Du(t,r)||s.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(ay(r)){const a=r.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(r=>r).join(" ")}}function ay(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Lc="@firebase/app",Ru="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new $d("@firebase/app"),ny="@firebase/app-compat",iy="@firebase/analytics-compat",ly="@firebase/analytics",oy="@firebase/app-check-compat",cy="@firebase/app-check",dy="@firebase/auth",hy="@firebase/auth-compat",uy="@firebase/database",xy="@firebase/data-connect",my="@firebase/database-compat",gy="@firebase/functions",py="@firebase/functions-compat",by="@firebase/installations",fy="@firebase/installations-compat",yy="@firebase/messaging",vy="@firebase/messaging-compat",jy="@firebase/performance",wy="@firebase/performance-compat",Ny="@firebase/remote-config",ky="@firebase/remote-config-compat",_y="@firebase/storage",Ey="@firebase/storage-compat",$y="@firebase/firestore",Ty="@firebase/vertexai-preview",Sy="@firebase/firestore-compat",Ay="firebase",Iy="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="[DEFAULT]",Cy={[Lc]:"fire-core",[ny]:"fire-core-compat",[ly]:"fire-analytics",[iy]:"fire-analytics-compat",[cy]:"fire-app-check",[oy]:"fire-app-check-compat",[dy]:"fire-auth",[hy]:"fire-auth-compat",[uy]:"fire-rtdb",[xy]:"fire-data-connect",[my]:"fire-rtdb-compat",[gy]:"fire-fn",[py]:"fire-fn-compat",[by]:"fire-iid",[fy]:"fire-iid-compat",[yy]:"fire-fcm",[vy]:"fire-fcm-compat",[jy]:"fire-perf",[wy]:"fire-perf-compat",[Ny]:"fire-rc",[ky]:"fire-rc-compat",[_y]:"fire-gcs",[Ey]:"fire-gcs-compat",[$y]:"fire-fst",[Sy]:"fire-fst-compat",[Ty]:"fire-vertex","fire-js":"fire-js",[Ay]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Map,Dy=new Map,Fc=new Map;function Pu(s,t){try{s.container.addComponent(t)}catch(r){zr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,r)}}function La(s){const t=s.name;if(Fc.has(t))return zr.debug(`There were multiple attempts to register component ${t}.`),!1;Fc.set(t,s);for(const r of Ll.values())Pu(r,s);for(const r of Dy.values())Pu(r,s);return!0}function fo(s,t){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(t)}function ca(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new Li("app","Firebase",Ry);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t,r,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=Iy;function Gx(s,t={}){let r=s;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Vc,automaticDataCollectionEnabled:!1},t),n=a.name;if(typeof n!="string"||!n)throw ua.create("bad-app-name",{appName:String(n)});if(r||(r=Bx()),!r)throw ua.create("no-options");const i=Ll.get(n);if(i){if(Ol(r,i.options)&&Ol(a,i.config))return i;throw ua.create("duplicate-app",{appName:n})}const l=new Uf(n);for(const d of Fc.values())l.addComponent(d);const c=new Py(r,a,l);return Ll.set(n,c),c}function Sd(s=Vc){const t=Ll.get(s);if(!t&&s===Vc&&Bx())return Gx();if(!t)throw ua.create("no-app",{appName:s});return t}function wr(s,t,r){var a;let n=(a=Cy[s])!==null&&a!==void 0?a:s;r&&(n+=`-${r}`);const i=n.match(/\s|\//),l=t.match(/\s|\//);if(i||l){const c=[`Unable to register library "${n}" with version "${t}":`];i&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zr.warn(c.join(" "));return}La(new pa(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="firebase-heartbeat-database",Oy=1,ki="firebase-heartbeat-store";let xc=null;function Kx(){return xc||(xc=ey(My,Oy,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(ki)}catch(r){console.warn(r)}}}}).catch(s=>{throw ua.create("idb-open",{originalErrorMessage:s.message})})),xc}async function Ly(s){try{const r=(await Kx()).transaction(ki),a=await r.objectStore(ki).get(Yx(s));return await r.done,a}catch(t){if(t instanceof Tr)zr.warn(t.message);else{const r=ua.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});zr.warn(r.message)}}}async function Mu(s,t){try{const a=(await Kx()).transaction(ki,"readwrite");await a.objectStore(ki).put(t,Yx(s)),await a.done}catch(r){if(r instanceof Tr)zr.warn(r.message);else{const a=ua.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});zr.warn(a.message)}}}function Yx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=1024,Fy=30*24*60*60*1e3;class Uy{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new zy(r),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ou();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=Fy}),this._storage.overwrite(this._heartbeatsCache))}catch(a){zr.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Ou(),{heartbeatsToSend:a,unsentEntries:n}=By(this._heartbeatsCache.heartbeats),i=Ml(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return zr.warn(r),""}}}function Ou(){return new Date().toISOString().substring(0,10)}function By(s,t=Vy){const r=[];let a=s.slice();for(const n of s){const i=r.find(l=>l.agent===n.agent);if(i){if(i.dates.push(n.date),Lu(r)>t){i.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),Lu(r)>t){r.pop();break}a=a.slice(1)}return{heartbeatsToSend:r,unsentEntries:a}}class zy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sf()?Af().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ly(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return Mu(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return Mu(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Lu(s){return Ml(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(s){La(new pa("platform-logger",t=>new ry(t),"PRIVATE")),La(new pa("heartbeat",t=>new Uy(t),"PRIVATE")),wr(Lc,Ru,s),wr(Lc,Ru,"esm2017"),wr("fire-js","")}qy("");var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ra,Qx;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function w(){}w.prototype=b.prototype,N.D=b.prototype,N.prototype=new w,N.prototype.constructor=N,N.C=function(j,$,_){for(var k=Array(arguments.length-2),H=2;H<arguments.length;H++)k[H-2]=arguments[H];return b.prototype[$].apply(j,k)}}function r(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,r),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(N,b,w){w||(w=0);var j=Array(16);if(typeof b=="string")for(var $=0;16>$;++$)j[$]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for($=0;16>$;++$)j[$]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=N.g[0],w=N.g[1],$=N.g[2];var _=N.g[3],k=b+(_^w&($^_))+j[0]+3614090360&4294967295;b=w+(k<<7&4294967295|k>>>25),k=_+($^b&(w^$))+j[1]+3905402710&4294967295,_=b+(k<<12&4294967295|k>>>20),k=$+(w^_&(b^w))+j[2]+606105819&4294967295,$=_+(k<<17&4294967295|k>>>15),k=w+(b^$&(_^b))+j[3]+3250441966&4294967295,w=$+(k<<22&4294967295|k>>>10),k=b+(_^w&($^_))+j[4]+4118548399&4294967295,b=w+(k<<7&4294967295|k>>>25),k=_+($^b&(w^$))+j[5]+1200080426&4294967295,_=b+(k<<12&4294967295|k>>>20),k=$+(w^_&(b^w))+j[6]+2821735955&4294967295,$=_+(k<<17&4294967295|k>>>15),k=w+(b^$&(_^b))+j[7]+4249261313&4294967295,w=$+(k<<22&4294967295|k>>>10),k=b+(_^w&($^_))+j[8]+1770035416&4294967295,b=w+(k<<7&4294967295|k>>>25),k=_+($^b&(w^$))+j[9]+2336552879&4294967295,_=b+(k<<12&4294967295|k>>>20),k=$+(w^_&(b^w))+j[10]+4294925233&4294967295,$=_+(k<<17&4294967295|k>>>15),k=w+(b^$&(_^b))+j[11]+2304563134&4294967295,w=$+(k<<22&4294967295|k>>>10),k=b+(_^w&($^_))+j[12]+1804603682&4294967295,b=w+(k<<7&4294967295|k>>>25),k=_+($^b&(w^$))+j[13]+4254626195&4294967295,_=b+(k<<12&4294967295|k>>>20),k=$+(w^_&(b^w))+j[14]+2792965006&4294967295,$=_+(k<<17&4294967295|k>>>15),k=w+(b^$&(_^b))+j[15]+1236535329&4294967295,w=$+(k<<22&4294967295|k>>>10),k=b+($^_&(w^$))+j[1]+4129170786&4294967295,b=w+(k<<5&4294967295|k>>>27),k=_+(w^$&(b^w))+j[6]+3225465664&4294967295,_=b+(k<<9&4294967295|k>>>23),k=$+(b^w&(_^b))+j[11]+643717713&4294967295,$=_+(k<<14&4294967295|k>>>18),k=w+(_^b&($^_))+j[0]+3921069994&4294967295,w=$+(k<<20&4294967295|k>>>12),k=b+($^_&(w^$))+j[5]+3593408605&4294967295,b=w+(k<<5&4294967295|k>>>27),k=_+(w^$&(b^w))+j[10]+38016083&4294967295,_=b+(k<<9&4294967295|k>>>23),k=$+(b^w&(_^b))+j[15]+3634488961&4294967295,$=_+(k<<14&4294967295|k>>>18),k=w+(_^b&($^_))+j[4]+3889429448&4294967295,w=$+(k<<20&4294967295|k>>>12),k=b+($^_&(w^$))+j[9]+568446438&4294967295,b=w+(k<<5&4294967295|k>>>27),k=_+(w^$&(b^w))+j[14]+3275163606&4294967295,_=b+(k<<9&4294967295|k>>>23),k=$+(b^w&(_^b))+j[3]+4107603335&4294967295,$=_+(k<<14&4294967295|k>>>18),k=w+(_^b&($^_))+j[8]+1163531501&4294967295,w=$+(k<<20&4294967295|k>>>12),k=b+($^_&(w^$))+j[13]+2850285829&4294967295,b=w+(k<<5&4294967295|k>>>27),k=_+(w^$&(b^w))+j[2]+4243563512&4294967295,_=b+(k<<9&4294967295|k>>>23),k=$+(b^w&(_^b))+j[7]+1735328473&4294967295,$=_+(k<<14&4294967295|k>>>18),k=w+(_^b&($^_))+j[12]+2368359562&4294967295,w=$+(k<<20&4294967295|k>>>12),k=b+(w^$^_)+j[5]+4294588738&4294967295,b=w+(k<<4&4294967295|k>>>28),k=_+(b^w^$)+j[8]+2272392833&4294967295,_=b+(k<<11&4294967295|k>>>21),k=$+(_^b^w)+j[11]+1839030562&4294967295,$=_+(k<<16&4294967295|k>>>16),k=w+($^_^b)+j[14]+4259657740&4294967295,w=$+(k<<23&4294967295|k>>>9),k=b+(w^$^_)+j[1]+2763975236&4294967295,b=w+(k<<4&4294967295|k>>>28),k=_+(b^w^$)+j[4]+1272893353&4294967295,_=b+(k<<11&4294967295|k>>>21),k=$+(_^b^w)+j[7]+4139469664&4294967295,$=_+(k<<16&4294967295|k>>>16),k=w+($^_^b)+j[10]+3200236656&4294967295,w=$+(k<<23&4294967295|k>>>9),k=b+(w^$^_)+j[13]+681279174&4294967295,b=w+(k<<4&4294967295|k>>>28),k=_+(b^w^$)+j[0]+3936430074&4294967295,_=b+(k<<11&4294967295|k>>>21),k=$+(_^b^w)+j[3]+3572445317&4294967295,$=_+(k<<16&4294967295|k>>>16),k=w+($^_^b)+j[6]+76029189&4294967295,w=$+(k<<23&4294967295|k>>>9),k=b+(w^$^_)+j[9]+3654602809&4294967295,b=w+(k<<4&4294967295|k>>>28),k=_+(b^w^$)+j[12]+3873151461&4294967295,_=b+(k<<11&4294967295|k>>>21),k=$+(_^b^w)+j[15]+530742520&4294967295,$=_+(k<<16&4294967295|k>>>16),k=w+($^_^b)+j[2]+3299628645&4294967295,w=$+(k<<23&4294967295|k>>>9),k=b+($^(w|~_))+j[0]+4096336452&4294967295,b=w+(k<<6&4294967295|k>>>26),k=_+(w^(b|~$))+j[7]+1126891415&4294967295,_=b+(k<<10&4294967295|k>>>22),k=$+(b^(_|~w))+j[14]+2878612391&4294967295,$=_+(k<<15&4294967295|k>>>17),k=w+(_^($|~b))+j[5]+4237533241&4294967295,w=$+(k<<21&4294967295|k>>>11),k=b+($^(w|~_))+j[12]+1700485571&4294967295,b=w+(k<<6&4294967295|k>>>26),k=_+(w^(b|~$))+j[3]+2399980690&4294967295,_=b+(k<<10&4294967295|k>>>22),k=$+(b^(_|~w))+j[10]+4293915773&4294967295,$=_+(k<<15&4294967295|k>>>17),k=w+(_^($|~b))+j[1]+2240044497&4294967295,w=$+(k<<21&4294967295|k>>>11),k=b+($^(w|~_))+j[8]+1873313359&4294967295,b=w+(k<<6&4294967295|k>>>26),k=_+(w^(b|~$))+j[15]+4264355552&4294967295,_=b+(k<<10&4294967295|k>>>22),k=$+(b^(_|~w))+j[6]+2734768916&4294967295,$=_+(k<<15&4294967295|k>>>17),k=w+(_^($|~b))+j[13]+1309151649&4294967295,w=$+(k<<21&4294967295|k>>>11),k=b+($^(w|~_))+j[4]+4149444226&4294967295,b=w+(k<<6&4294967295|k>>>26),k=_+(w^(b|~$))+j[11]+3174756917&4294967295,_=b+(k<<10&4294967295|k>>>22),k=$+(b^(_|~w))+j[2]+718787259&4294967295,$=_+(k<<15&4294967295|k>>>17),k=w+(_^($|~b))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+($+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+$&4294967295,N.g[3]=N.g[3]+_&4294967295}a.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var w=b-this.blockSize,j=this.B,$=this.h,_=0;_<b;){if($==0)for(;_<=w;)n(this,N,_),_+=this.blockSize;if(typeof N=="string"){for(;_<b;)if(j[$++]=N.charCodeAt(_++),$==this.blockSize){n(this,j),$=0;break}}else for(;_<b;)if(j[$++]=N[_++],$==this.blockSize){n(this,j),$=0;break}}this.h=$,this.o+=b},a.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var w=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=w&255,w/=256;for(this.u(N),N=Array(16),b=w=0;4>b;++b)for(var j=0;32>j;j+=8)N[w++]=this.g[b]>>>j&255;return N};function i(N,b){var w=c;return Object.prototype.hasOwnProperty.call(w,N)?w[N]:w[N]=b(N)}function l(N,b){this.h=b;for(var w=[],j=!0,$=N.length-1;0<=$;$--){var _=N[$]|0;j&&_==b||(w[$]=_,j=!1)}this.g=w}var c={};function d(N){return-128<=N&&128>N?i(N,function(b){return new l([b|0],0>b?-1:0)}):new l([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return I(h(-N));for(var b=[],w=1,j=0;N>=w;j++)b[j]=N/w|0,w*=4294967296;return new l(b,0)}function u(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return I(u(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(b,8)),j=m,$=0;$<N.length;$+=8){var _=Math.min(8,N.length-$),k=parseInt(N.substring($,$+_),b);8>_?(_=h(Math.pow(b,_)),j=j.j(_).add(h(k))):(j=j.j(w),j=j.add(h(k)))}return j}var m=d(0),g=d(1),y=d(16777216);s=l.prototype,s.m=function(){if(E(this))return-I(this).m();for(var N=0,b=1,w=0;w<this.g.length;w++){var j=this.i(w);N+=(0<=j?j:4294967296+j)*b,b*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(v(this))return"0";if(E(this))return"-"+I(this).toString(N);for(var b=h(Math.pow(N,6)),w=this,j="";;){var $=M(w,b).g;w=C(w,$.j(b));var _=((0<w.g.length?w.g[0]:w.h)>>>0).toString(N);if(w=$,v(w))return _+j;for(;6>_.length;)_="0"+_;j=_+j}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function v(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function E(N){return N.h==-1}s.l=function(N){return N=C(this,N),E(N)?-1:v(N)?0:1};function I(N){for(var b=N.g.length,w=[],j=0;j<b;j++)w[j]=~N.g[j];return new l(w,~N.h).add(g)}s.abs=function(){return E(this)?I(this):this},s.add=function(N){for(var b=Math.max(this.g.length,N.g.length),w=[],j=0,$=0;$<=b;$++){var _=j+(this.i($)&65535)+(N.i($)&65535),k=(_>>>16)+(this.i($)>>>16)+(N.i($)>>>16);j=k>>>16,_&=65535,k&=65535,w[$]=k<<16|_}return new l(w,w[w.length-1]&-2147483648?-1:0)};function C(N,b){return N.add(I(b))}s.j=function(N){if(v(this)||v(N))return m;if(E(this))return E(N)?I(this).j(I(N)):I(I(this).j(N));if(E(N))return I(this.j(I(N)));if(0>this.l(y)&&0>N.l(y))return h(this.m()*N.m());for(var b=this.g.length+N.g.length,w=[],j=0;j<2*b;j++)w[j]=0;for(j=0;j<this.g.length;j++)for(var $=0;$<N.g.length;$++){var _=this.i(j)>>>16,k=this.i(j)&65535,H=N.i($)>>>16,S=N.i($)&65535;w[2*j+2*$]+=k*S,T(w,2*j+2*$),w[2*j+2*$+1]+=_*S,T(w,2*j+2*$+1),w[2*j+2*$+1]+=k*H,T(w,2*j+2*$+1),w[2*j+2*$+2]+=_*H,T(w,2*j+2*$+2)}for(j=0;j<b;j++)w[j]=w[2*j+1]<<16|w[2*j];for(j=b;j<2*b;j++)w[j]=0;return new l(w,0)};function T(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function D(N,b){this.g=N,this.h=b}function M(N,b){if(v(b))throw Error("division by zero");if(v(N))return new D(m,m);if(E(N))return b=M(I(N),b),new D(I(b.g),I(b.h));if(E(b))return b=M(N,I(b)),new D(I(b.g),b.h);if(30<N.g.length){if(E(N)||E(b))throw Error("slowDivide_ only works with positive integers.");for(var w=g,j=b;0>=j.l(N);)w=se(w),j=se(j);var $=L(w,1),_=L(j,1);for(j=L(j,2),w=L(w,2);!v(j);){var k=_.add(j);0>=k.l(N)&&($=$.add(w),_=k),j=L(j,1),w=L(w,1)}return b=C(N,$.j(b)),new D($,b)}for($=m;0<=N.l(b);){for(w=Math.max(1,Math.floor(N.m()/b.m())),j=Math.ceil(Math.log(w)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),_=h(w),k=_.j(b);E(k)||0<k.l(N);)w-=j,_=h(w),k=_.j(b);v(_)&&(_=g),$=$.add(_),N=C(N,k)}return new D($,N)}s.A=function(N){return M(this,N).h},s.and=function(N){for(var b=Math.max(this.g.length,N.g.length),w=[],j=0;j<b;j++)w[j]=this.i(j)&N.i(j);return new l(w,this.h&N.h)},s.or=function(N){for(var b=Math.max(this.g.length,N.g.length),w=[],j=0;j<b;j++)w[j]=this.i(j)|N.i(j);return new l(w,this.h|N.h)},s.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),w=[],j=0;j<b;j++)w[j]=this.i(j)^N.i(j);return new l(w,this.h^N.h)};function se(N){for(var b=N.g.length+1,w=[],j=0;j<b;j++)w[j]=N.i(j)<<1|N.i(j-1)>>>31;return new l(w,N.h)}function L(N,b){var w=b>>5;b%=32;for(var j=N.g.length-w,$=[],_=0;_<j;_++)$[_]=0<b?N.i(_+w)>>>b|N.i(_+w+1)<<32-b:N.i(_+w);return new l($,N.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Qx=a,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=u,Ra=l}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});var cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xx,li,Jx,kl,Uc,Zx,em,tm;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,x,p){return o==Array.prototype||o==Object.prototype||(o[x]=p.value),o};function r(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof cl=="object"&&cl];for(var x=0;x<o.length;++x){var p=o[x];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var a=r(this);function n(o,x){if(x)e:{var p=a;o=o.split(".");for(var A=0;A<o.length-1;A++){var Q=o[A];if(!(Q in p))break e;p=p[Q]}o=o[o.length-1],A=p[o],x=x(A),x!=A&&x!=null&&t(p,o,{configurable:!0,writable:!0,value:x})}}function i(o,x){o instanceof String&&(o+="");var p=0,A=!1,Q={next:function(){if(!A&&p<o.length){var ee=p++;return{value:x(ee,o[ee]),done:!1}}return A=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}n("Array.prototype.values",function(o){return o||function(){return i(this,function(x,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(o){var x=typeof o;return x=x!="object"?x:o?Array.isArray(o)?"array":x:"null",x=="array"||x=="object"&&typeof o.length=="number"}function h(o){var x=typeof o;return x=="object"&&o!=null||x=="function"}function u(o,x,p){return o.call.apply(o.bind,arguments)}function m(o,x,p){if(!o)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,A),o.apply(x,Q)}}return function(){return o.apply(x,arguments)}}function g(o,x,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:m,g.apply(null,arguments)}function y(o,x){var p=Array.prototype.slice.call(arguments,1);return function(){var A=p.slice();return A.push.apply(A,arguments),o.apply(this,A)}}function v(o,x){function p(){}p.prototype=x.prototype,o.aa=x.prototype,o.prototype=new p,o.prototype.constructor=o,o.Qb=function(A,Q,ee){for(var ve=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)ve[Et-2]=arguments[Et];return x.prototype[Q].apply(A,ve)}}function E(o){const x=o.length;if(0<x){const p=Array(x);for(let A=0;A<x;A++)p[A]=o[A];return p}return[]}function I(o,x){for(let p=1;p<arguments.length;p++){const A=arguments[p];if(d(A)){const Q=o.length||0,ee=A.length||0;o.length=Q+ee;for(let ve=0;ve<ee;ve++)o[Q+ve]=A[ve]}else o.push(A)}}class C{constructor(x,p){this.i=x,this.j=p,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function T(o){return/^[\s\xa0]*$/.test(o)}function D(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function M(o){return M[" "](o),o}M[" "]=function(){};var se=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function L(o,x,p){for(const A in o)x.call(p,o[A],A,o)}function N(o,x){for(const p in o)x.call(void 0,o[p],p,o)}function b(o){const x={};for(const p in o)x[p]=o[p];return x}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(o,x){let p,A;for(let Q=1;Q<arguments.length;Q++){A=arguments[Q];for(p in A)o[p]=A[p];for(let ee=0;ee<w.length;ee++)p=w[ee],Object.prototype.hasOwnProperty.call(A,p)&&(o[p]=A[p])}}function $(o){var x=1;o=o.split(":");const p=[];for(;0<x&&o.length;)p.push(o.shift()),x--;return o.length&&p.push(o.join(":")),p}function _(o){c.setTimeout(()=>{throw o},0)}function k(){var o=P;let x=null;return o.g&&(x=o.g,o.g=o.g.next,o.g||(o.h=null),x.next=null),x}class H{constructor(){this.h=this.g=null}add(x,p){const A=S.get();A.set(x,p),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new C(()=>new F,o=>o.reset());class F{constructor(){this.next=this.g=this.h=null}set(x,p){this.h=x,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,P=new H,U=()=>{const o=c.Promise.resolve(void 0);Z=()=>{o.then(z)}};var z=()=>{for(var o;o=k();){try{o.h.call(o.g)}catch(p){_(p)}var x=S;x.j(o),100>x.h&&(x.h++,o.next=x.g,x.g=o)}ie=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(o,x){this.type=o,this.g=this.target=x,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,x=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};c.addEventListener("test",p,x),c.removeEventListener("test",p,x)}catch{}return o}();function V(o,x){if(G.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var p=this.type=o.type,A=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=x,x=o.relatedTarget){if(se){e:{try{M(x.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(x=null)}}else p=="mouseover"?x=o.fromElement:p=="mouseout"&&(x=o.toElement);this.relatedTarget=x,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:R[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&V.aa.h.call(this)}}v(V,G);var R={2:"touch",3:"pen",4:"mouse"};V.prototype.h=function(){V.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),K=0;function J(o,x,p,A,Q){this.listener=o,this.proxy=null,this.src=x,this.type=p,this.capture=!!A,this.ha=Q,this.key=++K,this.da=this.fa=!1}function ce(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function he(o){this.src=o,this.g={},this.h=0}he.prototype.add=function(o,x,p,A,Q){var ee=o.toString();o=this.g[ee],o||(o=this.g[ee]=[],this.h++);var ve=ae(o,x,A,Q);return-1<ve?(x=o[ve],p||(x.fa=!1)):(x=new J(x,this.src,ee,!!A,Q),x.fa=p,o.push(x)),x};function te(o,x){var p=x.type;if(p in o.g){var A=o.g[p],Q=Array.prototype.indexOf.call(A,x,void 0),ee;(ee=0<=Q)&&Array.prototype.splice.call(A,Q,1),ee&&(ce(x),o.g[p].length==0&&(delete o.g[p],o.h--))}}function ae(o,x,p,A){for(var Q=0;Q<o.length;++Q){var ee=o[Q];if(!ee.da&&ee.listener==x&&ee.capture==!!p&&ee.ha==A)return Q}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),le={};function W(o,x,p,A,Q){if(Array.isArray(x)){for(var ee=0;ee<x.length;ee++)W(o,x[ee],p,A,Q);return null}return p=Ge(p),o&&o[q]?o.K(x,p,h(A)?!!A.capture:!1,Q):ne(o,x,p,!1,A,Q)}function ne(o,x,p,A,Q,ee){if(!x)throw Error("Invalid event type");var ve=h(Q)?!!Q.capture:!!Q,Et=ye(o);if(Et||(o[ge]=Et=new he(o)),p=Et.add(x,p,A,ve,ee),p.proxy)return p;if(A=fe(),p.proxy=A,A.src=o,A.listener=p,o.addEventListener)O||(Q=ve),Q===void 0&&(Q=!1),o.addEventListener(x.toString(),A,Q);else if(o.attachEvent)o.attachEvent(ke(x.toString()),A);else if(o.addListener&&o.removeListener)o.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fe(){function o(p){return x.call(o.src,o.listener,p)}const x=$e;return o}function We(o,x,p,A,Q){if(Array.isArray(x))for(var ee=0;ee<x.length;ee++)We(o,x[ee],p,A,Q);else A=h(A)?!!A.capture:!!A,p=Ge(p),o&&o[q]?(o=o.i,x=String(x).toString(),x in o.g&&(ee=o.g[x],p=ae(ee,p,A,Q),-1<p&&(ce(ee[p]),Array.prototype.splice.call(ee,p,1),ee.length==0&&(delete o.g[x],o.h--)))):o&&(o=ye(o))&&(x=o.g[x.toString()],o=-1,x&&(o=ae(x,p,A,Q)),(p=-1<o?x[o]:null)&&Se(p))}function Se(o){if(typeof o!="number"&&o&&!o.da){var x=o.src;if(x&&x[q])te(x.i,o);else{var p=o.type,A=o.proxy;x.removeEventListener?x.removeEventListener(p,A,o.capture):x.detachEvent?x.detachEvent(ke(p),A):x.addListener&&x.removeListener&&x.removeListener(A),(p=ye(x))?(te(p,o),p.h==0&&(p.src=null,x[ge]=null)):ce(o)}}}function ke(o){return o in le?le[o]:le[o]="on"+o}function $e(o,x){if(o.da)o=!0;else{x=new V(x,this);var p=o.listener,A=o.ha||o.src;o.fa&&Se(o),o=p.call(A,x)}return o}function ye(o){return o=o[ge],o instanceof he?o:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(o){return typeof o=="function"?o:(o[Ce]||(o[Ce]=function(x){return o.handleEvent(x)}),o[Ce])}function ot(){B.call(this),this.i=new he(this),this.M=this,this.F=null}v(ot,B),ot.prototype[q]=!0,ot.prototype.removeEventListener=function(o,x,p,A){We(this,o,x,p,A)};function ue(o,x){var p,A=o.F;if(A)for(p=[];A;A=A.F)p.push(A);if(o=o.M,A=x.type||x,typeof x=="string")x=new G(x,o);else if(x instanceof G)x.target=x.target||o;else{var Q=x;x=new G(A,o),j(x,Q)}if(Q=!0,p)for(var ee=p.length-1;0<=ee;ee--){var ve=x.g=p[ee];Q=Y(ve,A,!0,x)&&Q}if(ve=x.g=o,Q=Y(ve,A,!0,x)&&Q,Q=Y(ve,A,!1,x)&&Q,p)for(ee=0;ee<p.length;ee++)ve=x.g=p[ee],Q=Y(ve,A,!1,x)&&Q}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var o=this.i,x;for(x in o.g){for(var p=o.g[x],A=0;A<p.length;A++)ce(p[A]);delete o.g[x],o.h--}}this.F=null},ot.prototype.K=function(o,x,p,A){return this.i.add(String(o),x,!1,p,A)},ot.prototype.L=function(o,x,p,A){return this.i.add(String(o),x,!0,p,A)};function Y(o,x,p,A){if(x=o.i.g[String(x)],!x)return!0;x=x.concat();for(var Q=!0,ee=0;ee<x.length;++ee){var ve=x[ee];if(ve&&!ve.da&&ve.capture==p){var Et=ve.listener,hs=ve.ha||ve.src;ve.fa&&te(o.i,ve),Q=Et.call(hs,A)!==!1&&Q}}return Q&&!A.defaultPrevented}function we(o,x,p){if(typeof o=="function")p&&(o=g(o,p));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:c.setTimeout(o,x||0)}function Oe(o){o.g=we(()=>{o.g=null,o.i&&(o.i=!1,Oe(o))},o.l);const x=o.h;o.h=null,o.m.apply(null,x)}class Ae extends B{constructor(x,p){super(),this.m=x,this.l=p,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(o){B.call(this),this.h=o,this.g={}}v(qe,B);var ut=[];function _t(o){L(o.g,function(x,p){this.g.hasOwnProperty(p)&&Se(x)},o),o.g={}}qe.prototype.N=function(){qe.aa.N.call(this),_t(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var at=c.JSON.stringify,de=c.JSON.parse,Ee=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function De(){}De.prototype.h=null;function mt(o){return o.h||(o.h=o.i())}function vt(){}var Re={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){G.call(this,"d")}v(gt,G);function $t(){G.call(this,"c")}v($t,G);var Mt={},cs=null;function Jt(){return cs=cs||new ot}Mt.La="serverreachability";function re(o){G.call(this,Mt.La,o)}v(re,G);function be(o){const x=Jt();ue(x,new re(x))}Mt.STAT_EVENT="statevent";function Te(o,x){G.call(this,Mt.STAT_EVENT,o),this.stat=x}v(Te,G);function Me(o){const x=Jt();ue(x,new Te(x,o))}Mt.Ma="timingevent";function xt(o,x){G.call(this,Mt.Ma,o),this.size=x}v(xt,G);function et(o,x){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},x)}function nt(){this.g=!0}nt.prototype.xa=function(){this.g=!1};function Ke(o,x,p,A,Q,ee){o.info(function(){if(o.g)if(ee)for(var ve="",Et=ee.split("&"),hs=0;hs<Et.length;hs++){var ct=Et[hs].split("=");if(1<ct.length){var fs=ct[0];ct=ct[1];var ys=fs.split("_");ve=2<=ys.length&&ys[1]=="type"?ve+(fs+"="+ct+"&"):ve+(fs+"=redacted&")}}else ve=null;else ve=ee;return"XMLHTTP REQ ("+A+") [attempt "+Q+"]: "+x+`
`+p+`
`+ve})}function Ye(o,x,p,A,Q,ee,ve){o.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Q+"]: "+x+`
`+p+`
`+ee+" "+ve})}function pt(o,x,p,A){o.info(function(){return"XMLHTTP TEXT ("+x+"): "+Zt(o,p)+(A?" "+A:"")})}function Ht(o,x){o.info(function(){return"TIMEOUT: "+x})}nt.prototype.info=function(){};function Zt(o,x){if(!o.g)return x;if(!x)return null;try{var p=JSON.parse(x);if(p){for(o=0;o<p.length;o++)if(Array.isArray(p[o])){var A=p[o];if(!(2>A.length)){var Q=A[1];if(Array.isArray(Q)&&!(1>Q.length)){var ee=Q[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ve=1;ve<Q.length;ve++)Q[ve]=""}}}}return at(p)}catch{return x}}var St={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ds;function Fs(){}v(Fs,De),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},ds=new Fs;function Cs(o,x,p,A){this.j=o,this.i=x,this.l=p,this.R=A||1,this.U=new qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bh}function Bh(){this.i=null,this.g="",this.h=!1}var zh={},Xo={};function Jo(o,x,p){o.L=1,o.v=el(Ar(x)),o.m=p,o.P=!0,qh(o,null)}function qh(o,x){o.F=Date.now(),Xi(o),o.A=Ar(o.v);var p=o.A,A=o.R;Array.isArray(A)||(A=[String(A)]),au(p.i,"t",A),o.C=0,p=o.j.J,o.h=new Bh,o.g=wu(o.j,p?x:null,!o.m),0<o.O&&(o.M=new Ae(g(o.Y,o,o.g),o.O)),x=o.U,p=o.g,A=o.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(ut[0]=Q.toString()),Q=ut);for(var ee=0;ee<Q.length;ee++){var ve=W(p,Q[ee],A||x.handleEvent,!1,x.h||x);if(!ve)break;x.g[ve.key]=ve}x=o.H?b(o.H):{},o.m?(o.u||(o.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,x)):(o.u="GET",o.g.ea(o.A,o.u,null,x)),be(),Ke(o.i,o.u,o.A,o.l,o.R,o.m)}Cs.prototype.ca=function(o){o=o.target;const x=this.M;x&&Ir(o)==3?x.j():this.Y(o)},Cs.prototype.Y=function(o){try{if(o==this.g)e:{const ys=Ir(this.g);var x=this.g.Ba();const Ja=this.g.Z();if(!(3>ys)&&(ys!=3||this.g&&(this.h.h||this.g.oa()||hu(this.g)))){this.J||ys!=4||x==7||(x==8||0>=Ja?be(3):be(2)),Zo(this);var p=this.g.Z();this.X=p;t:if(Hh(this)){var A=hu(this.g);o="";var Q=A.length,ee=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_a(this),Hn(this);var ve="";break t}this.h.i=new c.TextDecoder}for(x=0;x<Q;x++)this.h.h=!0,o+=this.h.i.decode(A[x],{stream:!(ee&&x==Q-1)});A.length=0,this.h.g+=o,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=p==200,Ye(this.i,this.u,this.A,this.l,this.R,ys,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,hs=this.g;if((Et=hs.g?hs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Et)){var ct=Et;break t}}ct=null}if(p=ct)pt(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ec(this,p);else{this.o=!1,this.s=3,Me(12),_a(this),Hn(this);break e}}if(this.P){p=!0;let nr;for(;!this.J&&this.C<ve.length;)if(nr=sb(this,ve),nr==Xo){ys==4&&(this.s=4,Me(14),p=!1),pt(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==zh){this.s=4,Me(15),pt(this.i,this.l,ve,"[Invalid Chunk]"),p=!1;break}else pt(this.i,this.l,nr,null),ec(this,nr);if(Hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ys!=4||ve.length!=0||this.h.h||(this.s=1,Me(16),p=!1),this.o=this.o&&p,!p)pt(this.i,this.l,ve,"[Invalid Chunked Response]"),_a(this),Hn(this);else if(0<ve.length&&!this.W){this.W=!0;var fs=this.j;fs.g==this&&fs.ba&&!fs.M&&(fs.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),ic(fs),fs.M=!0,Me(11))}}else pt(this.i,this.l,ve,null),ec(this,ve);ys==4&&_a(this),this.o&&!this.J&&(ys==4?fu(this.j,this):(this.o=!1,Xi(this)))}else yb(this.g),p==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),_a(this),Hn(this)}}}catch{}finally{}};function Hh(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function sb(o,x){var p=o.C,A=x.indexOf(`
`,p);return A==-1?Xo:(p=Number(x.substring(p,A)),isNaN(p)?zh:(A+=1,A+p>x.length?Xo:(x=x.slice(A,A+p),o.C=A+p,x)))}Cs.prototype.cancel=function(){this.J=!0,_a(this)};function Xi(o){o.S=Date.now()+o.I,Wh(o,o.I)}function Wh(o,x){if(o.B!=null)throw Error("WatchDog timer not null");o.B=et(g(o.ba,o),x)}function Zo(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Cs.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Ht(this.i,this.A),this.L!=2&&(be(),Me(17)),_a(this),this.s=2,Hn(this)):Wh(this,this.S-o)};function Hn(o){o.j.G==0||o.J||fu(o.j,o)}function _a(o){Zo(o);var x=o.M;x&&typeof x.ma=="function"&&x.ma(),o.M=null,_t(o.U),o.g&&(x=o.g,o.g=null,x.abort(),x.ma())}function ec(o,x){try{var p=o.j;if(p.G!=0&&(p.g==o||tc(p.h,o))){if(!o.K&&tc(p.h,o)&&p.G==3){try{var A=p.Da.g.parse(x)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Q=A;if(Q[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<o.F)il(p),al(p);else break e;nc(p),Me(18)}}else p.za=Q[1],0<p.za-p.T&&37500>Q[2]&&p.F&&p.v==0&&!p.C&&(p.C=et(g(p.Za,p),6e3));if(1>=Yh(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $a(p,11)}else if((o.K||p.g==o)&&il(p),!T(x))for(Q=p.Da.g.parse(x),x=0;x<Q.length;x++){let ct=Q[x];if(p.T=ct[0],ct=ct[1],p.G==2)if(ct[0]=="c"){p.K=ct[1],p.ia=ct[2];const fs=ct[3];fs!=null&&(p.la=fs,p.j.info("VER="+p.la));const ys=ct[4];ys!=null&&(p.Aa=ys,p.j.info("SVER="+p.Aa));const Ja=ct[5];Ja!=null&&typeof Ja=="number"&&0<Ja&&(A=1.5*Ja,p.L=A,p.j.info("backChannelRequestTimeoutMs_="+A)),A=p;const nr=o.g;if(nr){const ol=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var ee=A.h;ee.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(sc(ee,ee.h),ee.h=null))}if(A.D){const lc=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(A.ya=lc,At(A.I,A.D,lc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-o.F,p.j.info("Handshake RTT: "+p.R+"ms")),A=p;var ve=o;if(A.qa=ju(A,A.J?A.ia:null,A.W),ve.K){Qh(A.h,ve);var Et=ve,hs=A.L;hs&&(Et.I=hs),Et.B&&(Zo(Et),Xi(Et)),A.g=ve}else pu(A);0<p.i.length&&nl(p)}else ct[0]!="stop"&&ct[0]!="close"||$a(p,7);else p.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?$a(p,7):ac(p):ct[0]!="noop"&&p.l&&p.l.ta(ct),p.v=0)}}be(4)}catch{}}var rb=class{constructor(o,x){this.g=o,this.map=x}};function Gh(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Yh(o){return o.h?1:o.g?o.g.size:0}function tc(o,x){return o.h?o.h==x:o.g?o.g.has(x):!1}function sc(o,x){o.g?o.g.add(x):o.h=x}function Qh(o,x){o.h&&o.h==x?o.h=null:o.g&&o.g.has(x)&&o.g.delete(x)}Gh.prototype.cancel=function(){if(this.i=Xh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Xh(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let x=o.i;for(const p of o.g.values())x=x.concat(p.D);return x}return E(o.i)}function ab(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(d(o)){for(var x=[],p=o.length,A=0;A<p;A++)x.push(o[A]);return x}x=[],p=0;for(A in o)x[p++]=o[A];return x}function nb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(d(o)||typeof o=="string"){var x=[];o=o.length;for(var p=0;p<o;p++)x.push(p);return x}x=[],p=0;for(const A in o)x[p++]=A;return x}}}function Jh(o,x){if(o.forEach&&typeof o.forEach=="function")o.forEach(x,void 0);else if(d(o)||typeof o=="string")Array.prototype.forEach.call(o,x,void 0);else for(var p=nb(o),A=ab(o),Q=A.length,ee=0;ee<Q;ee++)x.call(void 0,A[ee],p&&p[ee],o)}var Zh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ib(o,x){if(o){o=o.split("&");for(var p=0;p<o.length;p++){var A=o[p].indexOf("="),Q=null;if(0<=A){var ee=o[p].substring(0,A);Q=o[p].substring(A+1)}else ee=o[p];x(ee,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Ea(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ea){this.h=o.h,Ji(this,o.j),this.o=o.o,this.g=o.g,Zi(this,o.s),this.l=o.l;var x=o.i,p=new Kn;p.i=x.i,x.g&&(p.g=new Map(x.g),p.h=x.h),eu(this,p),this.m=o.m}else o&&(x=String(o).match(Zh))?(this.h=!1,Ji(this,x[1]||"",!0),this.o=Wn(x[2]||""),this.g=Wn(x[3]||"",!0),Zi(this,x[4]),this.l=Wn(x[5]||"",!0),eu(this,x[6]||"",!0),this.m=Wn(x[7]||"")):(this.h=!1,this.i=new Kn(null,this.h))}Ea.prototype.toString=function(){var o=[],x=this.j;x&&o.push(Gn(x,tu,!0),":");var p=this.g;return(p||x=="file")&&(o.push("//"),(x=this.o)&&o.push(Gn(x,tu,!0),"@"),o.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&o.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Gn(p,p.charAt(0)=="/"?cb:ob,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Gn(p,hb)),o.join("")};function Ar(o){return new Ea(o)}function Ji(o,x,p){o.j=p?Wn(x,!0):x,o.j&&(o.j=o.j.replace(/:$/,""))}function Zi(o,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);o.s=x}else o.s=null}function eu(o,x,p){x instanceof Kn?(o.i=x,ub(o.i,o.h)):(p||(x=Gn(x,db)),o.i=new Kn(x,o.h))}function At(o,x,p){o.i.set(x,p)}function el(o){return At(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Wn(o,x){return o?x?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Gn(o,x,p){return typeof o=="string"?(o=encodeURI(o).replace(x,lb),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function lb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var tu=/[#\/\?@]/g,ob=/[#\?:]/g,cb=/[#\?]/g,db=/[#\?@]/g,hb=/#/g;function Kn(o,x){this.h=this.g=null,this.i=o||null,this.j=!!x}function Jr(o){o.g||(o.g=new Map,o.h=0,o.i&&ib(o.i,function(x,p){o.add(decodeURIComponent(x.replace(/\+/g," ")),p)}))}s=Kn.prototype,s.add=function(o,x){Jr(this),this.i=null,o=Qa(this,o);var p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(x),this.h+=1,this};function su(o,x){Jr(o),x=Qa(o,x),o.g.has(x)&&(o.i=null,o.h-=o.g.get(x).length,o.g.delete(x))}function ru(o,x){return Jr(o),x=Qa(o,x),o.g.has(x)}s.forEach=function(o,x){Jr(this),this.g.forEach(function(p,A){p.forEach(function(Q){o.call(x,Q,A,this)},this)},this)},s.na=function(){Jr(this);const o=Array.from(this.g.values()),x=Array.from(this.g.keys()),p=[];for(let A=0;A<x.length;A++){const Q=o[A];for(let ee=0;ee<Q.length;ee++)p.push(x[A])}return p},s.V=function(o){Jr(this);let x=[];if(typeof o=="string")ru(this,o)&&(x=x.concat(this.g.get(Qa(this,o))));else{o=Array.from(this.g.values());for(let p=0;p<o.length;p++)x=x.concat(o[p])}return x},s.set=function(o,x){return Jr(this),this.i=null,o=Qa(this,o),ru(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[x]),this.h+=1,this},s.get=function(o,x){return o?(o=this.V(o),0<o.length?String(o[0]):x):x};function au(o,x,p){su(o,x),0<p.length&&(o.i=null,o.g.set(Qa(o,x),E(p)),o.h+=p.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],x=Array.from(this.g.keys());for(var p=0;p<x.length;p++){var A=x[p];const ee=encodeURIComponent(String(A)),ve=this.V(A);for(A=0;A<ve.length;A++){var Q=ee;ve[A]!==""&&(Q+="="+encodeURIComponent(String(ve[A]))),o.push(Q)}}return this.i=o.join("&")};function Qa(o,x){return x=String(x),o.j&&(x=x.toLowerCase()),x}function ub(o,x){x&&!o.j&&(Jr(o),o.i=null,o.g.forEach(function(p,A){var Q=A.toLowerCase();A!=Q&&(su(this,A),au(this,Q,p))},o)),o.j=x}function xb(o,x){const p=new nt;if(c.Image){const A=new Image;A.onload=y(Zr,p,"TestLoadImage: loaded",!0,x,A),A.onerror=y(Zr,p,"TestLoadImage: error",!1,x,A),A.onabort=y(Zr,p,"TestLoadImage: abort",!1,x,A),A.ontimeout=y(Zr,p,"TestLoadImage: timeout",!1,x,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=o}else x(!1)}function mb(o,x){const p=new nt,A=new AbortController,Q=setTimeout(()=>{A.abort(),Zr(p,"TestPingServer: timeout",!1,x)},1e4);fetch(o,{signal:A.signal}).then(ee=>{clearTimeout(Q),ee.ok?Zr(p,"TestPingServer: ok",!0,x):Zr(p,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Q),Zr(p,"TestPingServer: error",!1,x)})}function Zr(o,x,p,A,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),A(p)}catch{}}function gb(){this.g=new Ee}function pb(o,x,p){const A=p||"";try{Jh(o,function(Q,ee){let ve=Q;h(Q)&&(ve=at(Q)),x.push(A+ee+"="+encodeURIComponent(ve))})}catch(Q){throw x.push(A+"type="+encodeURIComponent("_badmap")),Q}}function tl(o){this.l=o.Ub||null,this.j=o.eb||!1}v(tl,De),tl.prototype.g=function(){return new sl(this.l,this.j)},tl.prototype.i=function(o){return function(){return o}}({});function sl(o,x){ot.call(this),this.D=o,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(sl,ot),s=sl.prototype,s.open=function(o,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=x,this.readyState=1,Qn(this)},s.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(x.body=o),(this.D||c).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},s.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function nu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}s.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var x=o.value?o.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!o.done}))&&(this.response=this.responseText+=x)}o.done?Yn(this):Qn(this),this.readyState==3&&nu(this)}},s.Ra=function(o){this.g&&(this.response=this.responseText=o,Yn(this))},s.Qa=function(o){this.g&&(this.response=o,Yn(this))},s.ga=function(){this.g&&Yn(this)};function Yn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Qn(o)}s.setRequestHeader=function(o,x){this.u.append(o,x)},s.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],x=this.h.entries();for(var p=x.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=x.next();return o.join(`\r
`)};function Qn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function iu(o){let x="";return L(o,function(p,A){x+=A,x+=":",x+=p,x+=`\r
`}),x}function rc(o,x,p){e:{for(A in p){var A=!1;break e}A=!0}A||(p=iu(p),typeof o=="string"?p!=null&&encodeURIComponent(String(p)):At(o,x,p))}function Ft(o){ot.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ft,ot);var bb=/^https?$/i,fb=["POST","PUT"];s=Ft.prototype,s.Ha=function(o){this.J=o},s.ea=function(o,x,p,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);x=x?x.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ds.g(),this.v=this.o?mt(this.o):mt(ds),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(x,String(o),!0),this.B=!1}catch(ee){lu(this,ee);return}if(o=p||"",p=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Q in A)p.set(Q,A[Q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const ee of A.keys())p.set(ee,A.get(ee));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(p.keys()).find(ee=>ee.toLowerCase()=="content-type"),Q=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fb,x,void 0))||A||Q||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ve]of p)this.g.setRequestHeader(ee,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{du(this),this.u=!0,this.g.send(o),this.u=!1}catch(ee){lu(this,ee)}};function lu(o,x){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=x,o.m=5,ou(o),rl(o)}function ou(o){o.A||(o.A=!0,ue(o,"complete"),ue(o,"error"))}s.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ue(this,"complete"),ue(this,"abort"),rl(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Ft.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?cu(this):this.bb())},s.bb=function(){cu(this)};function cu(o){if(o.h&&typeof l<"u"&&(!o.v[1]||Ir(o)!=4||o.Z()!=2)){if(o.u&&Ir(o)==4)we(o.Ea,0,o);else if(ue(o,"readystatechange"),Ir(o)==4){o.h=!1;try{const ve=o.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var p;if(!(p=x)){var A;if(A=ve===0){var Q=String(o.D).match(Zh)[1]||null;!Q&&c.self&&c.self.location&&(Q=c.self.location.protocol.slice(0,-1)),A=!bb.test(Q?Q.toLowerCase():"")}p=A}if(p)ue(o,"complete"),ue(o,"success");else{o.m=6;try{var ee=2<Ir(o)?o.g.statusText:""}catch{ee=""}o.l=ee+" ["+o.Z()+"]",ou(o)}}finally{rl(o)}}}}function rl(o,x){if(o.g){du(o);const p=o.g,A=o.v[0]?()=>{}:null;o.g=null,o.v=null,x||ue(o,"ready");try{p.onreadystatechange=A}catch{}}}function du(o){o.I&&(c.clearTimeout(o.I),o.I=null)}s.isActive=function(){return!!this.g};function Ir(o){return o.g?o.g.readyState:0}s.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(o){if(this.g){var x=this.g.responseText;return o&&x.indexOf(o)==0&&(x=x.substring(o.length)),de(x)}};function hu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function yb(o){const x={};o=(o.g&&2<=Ir(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<o.length;A++){if(T(o[A]))continue;var p=$(o[A]);const Q=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const ee=x[Q]||[];x[Q]=ee,ee.push(p)}N(x,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(o,x,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||x}function uu(o){this.Aa=0,this.i=[],this.j=new nt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,o),this.cb=Xn("retryDelaySeedMs",1e4,o),this.Wa=Xn("forwardChannelMaxRetries",2,o),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Gh(o&&o.concurrentRequestLimit),this.Da=new gb,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=uu.prototype,s.la=8,s.G=1,s.connect=function(o,x,p,A){Me(0),this.W=o,this.H=x||{},p&&A!==void 0&&(this.H.OSID=p,this.H.OAID=A),this.F=this.X,this.I=ju(this,null,this.W),nl(this)};function ac(o){if(xu(o),o.G==3){var x=o.U++,p=Ar(o.I);if(At(p,"SID",o.K),At(p,"RID",x),At(p,"TYPE","terminate"),Jn(o,p),x=new Cs(o,o.j,x),x.L=2,x.v=el(Ar(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(x.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=x.v,p=!0),p||(x.g=wu(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Xi(x)}vu(o)}function al(o){o.g&&(ic(o),o.g.cancel(),o.g=null)}function xu(o){al(o),o.u&&(c.clearTimeout(o.u),o.u=null),il(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function nl(o){if(!Kh(o.h)&&!o.s){o.s=!0;var x=o.Ga;Z||U(),ie||(Z(),ie=!0),P.add(x,o),o.B=0}}function vb(o,x){return Yh(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=x.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=et(g(o.Ga,o,x),yu(o,o.B)),o.B++,!0)}s.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const Q=new Cs(this,this.j,o);let ee=this.o;if(this.S&&(ee?(ee=b(ee),j(ee,this.S)):ee=this.S),this.m!==null||this.O||(Q.H=ee,ee=null),this.P)e:{for(var x=0,p=0;p<this.i.length;p++){t:{var A=this.i[p];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(x+=A,4096<x){x=p;break e}if(x===4096||p===this.i.length-1){x=p+1;break e}}x=1e3}else x=1e3;x=gu(this,Q,x),p=Ar(this.I),At(p,"RID",o),At(p,"CVER",22),this.D&&At(p,"X-HTTP-Session-Id",this.D),Jn(this,p),ee&&(this.O?x="headers="+encodeURIComponent(String(iu(ee)))+"&"+x:this.m&&rc(p,this.m,ee)),sc(this.h,Q),this.Ua&&At(p,"TYPE","init"),this.P?(At(p,"$req",x),At(p,"SID","null"),Q.T=!0,Jo(Q,p,null)):Jo(Q,p,x),this.G=2}}else this.G==3&&(o?mu(this,o):this.i.length==0||Kh(this.h)||mu(this))};function mu(o,x){var p;x?p=x.l:p=o.U++;const A=Ar(o.I);At(A,"SID",o.K),At(A,"RID",p),At(A,"AID",o.T),Jn(o,A),o.m&&o.o&&rc(A,o.m,o.o),p=new Cs(o,o.j,p,o.B+1),o.m===null&&(p.H=o.o),x&&(o.i=x.D.concat(o.i)),x=gu(o,p,1e3),p.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),sc(o.h,p),Jo(p,A,x)}function Jn(o,x){o.H&&L(o.H,function(p,A){At(x,A,p)}),o.l&&Jh({},function(p,A){At(x,A,p)})}function gu(o,x,p){p=Math.min(o.i.length,p);var A=o.l?g(o.l.Na,o.l,o):null;e:{var Q=o.i;let ee=-1;for(;;){const ve=["count="+p];ee==-1?0<p?(ee=Q[0].g,ve.push("ofs="+ee)):ee=0:ve.push("ofs="+ee);let Et=!0;for(let hs=0;hs<p;hs++){let ct=Q[hs].g;const fs=Q[hs].map;if(ct-=ee,0>ct)ee=Math.max(0,Q[hs].g-100),Et=!1;else try{pb(fs,ve,"req"+ct+"_")}catch{A&&A(fs)}}if(Et){A=ve.join("&");break e}}}return o=o.i.splice(0,p),x.D=o,A}function pu(o){if(!o.g&&!o.u){o.Y=1;var x=o.Fa;Z||U(),ie||(Z(),ie=!0),P.add(x,o),o.v=0}}function nc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=et(g(o.Fa,o),yu(o,o.v)),o.v++,!0)}s.Fa=function(){if(this.u=null,bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=et(g(this.ab,this),o)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),al(this),bu(this))};function ic(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function bu(o){o.g=new Cs(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var x=Ar(o.qa);At(x,"RID","rpc"),At(x,"SID",o.K),At(x,"AID",o.T),At(x,"CI",o.F?"0":"1"),!o.F&&o.ja&&At(x,"TO",o.ja),At(x,"TYPE","xmlhttp"),Jn(o,x),o.m&&o.o&&rc(x,o.m,o.o),o.L&&(o.g.I=o.L);var p=o.g;o=o.ia,p.L=1,p.v=el(Ar(x)),p.m=null,p.P=!0,qh(p,o)}s.Za=function(){this.C!=null&&(this.C=null,al(this),nc(this),Me(19))};function il(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function fu(o,x){var p=null;if(o.g==x){il(o),ic(o),o.g=null;var A=2}else if(tc(o.h,x))p=x.D,Qh(o.h,x),A=1;else return;if(o.G!=0){if(x.o)if(A==1){p=x.m?x.m.length:0,x=Date.now()-x.F;var Q=o.B;A=Jt(),ue(A,new xt(A,p)),nl(o)}else pu(o);else if(Q=x.s,Q==3||Q==0&&0<x.X||!(A==1&&vb(o,x)||A==2&&nc(o)))switch(p&&0<p.length&&(x=o.h,x.i=x.i.concat(p)),Q){case 1:$a(o,5);break;case 4:$a(o,10);break;case 3:$a(o,6);break;default:$a(o,2)}}}function yu(o,x){let p=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(p*=2),p*x}function $a(o,x){if(o.j.info("Error code "+x),x==2){var p=g(o.fb,o),A=o.Xa;const Q=!A;A=new Ea(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ji(A,"https"),el(A),Q?xb(A.toString(),p):mb(A.toString(),p)}else Me(2);o.G=0,o.l&&o.l.sa(x),vu(o),xu(o)}s.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function vu(o){if(o.G=0,o.ka=[],o.l){const x=Xh(o.h);(x.length!=0||o.i.length!=0)&&(I(o.ka,x),I(o.ka,o.i),o.h.i.length=0,E(o.i),o.i.length=0),o.l.ra()}}function ju(o,x,p){var A=p instanceof Ea?Ar(p):new Ea(p);if(A.g!="")x&&(A.g=x+"."+A.g),Zi(A,A.s);else{var Q=c.location;A=Q.protocol,x=x?x+"."+Q.hostname:Q.hostname,Q=+Q.port;var ee=new Ea(null);A&&Ji(ee,A),x&&(ee.g=x),Q&&Zi(ee,Q),p&&(ee.l=p),A=ee}return p=o.D,x=o.ya,p&&x&&At(A,p,x),At(A,"VER",o.la),Jn(o,A),A}function wu(o,x,p){if(x&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=o.Ca&&!o.pa?new Ft(new tl({eb:p})):new Ft(o.pa),x.Ha(o.J),x}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}s=Nu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ll(){}ll.prototype.g=function(o,x){return new Hs(o,x)};function Hs(o,x){ot.call(this),this.g=new uu(x),this.l=o,this.h=x&&x.messageUrlParams||null,o=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(o?o["X-WebChannel-Content-Type"]=x.messageContentType:o={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(o?o["X-WebChannel-Client-Profile"]=x.va:o={"X-WebChannel-Client-Profile":x.va}),this.g.S=o,(o=x&&x.Sb)&&!T(o)&&(this.g.m=o),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!T(x)&&(this.g.D=x,o=this.h,o!==null&&x in o&&(o=this.h,x in o&&delete o[x])),this.j=new Xa(this)}v(Hs,ot),Hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hs.prototype.close=function(){ac(this.g)},Hs.prototype.o=function(o){var x=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.u&&(p={},p.__data__=at(o),o=p);x.i.push(new rb(x.Ya++,o)),x.G==3&&nl(x)},Hs.prototype.N=function(){this.g.l=null,delete this.j,ac(this.g),delete this.g,Hs.aa.N.call(this)};function ku(o){gt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var x=o.__sm__;if(x){e:{for(const p in x){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,x=x!==null&&o in x?x[o]:void 0),this.data=x}else this.data=o}v(ku,gt);function _u(){$t.call(this),this.status=1}v(_u,$t);function Xa(o){this.g=o}v(Xa,Nu),Xa.prototype.ua=function(){ue(this.g,"a")},Xa.prototype.ta=function(o){ue(this.g,new ku(o))},Xa.prototype.sa=function(o){ue(this.g,new _u)},Xa.prototype.ra=function(){ue(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Hs.prototype.send=Hs.prototype.o,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,tm=function(){return new ll},em=function(){return Jt()},Zx=Mt,Uc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,kl=St,Wt.COMPLETE="complete",Jx=Wt,vt.EventType=Re,Re.OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",ot.prototype.listen=ot.prototype.K,li=vt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Xx=Ft}).apply(typeof cl<"u"?cl:typeof self<"u"?self:typeof window<"u"?window:{});const Fu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ws=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};ws.UNAUTHENTICATED=new ws(null),ws.GOOGLE_CREDENTIALS=new ws("google-credentials-uid"),ws.FIRST_PARTY=new ws("first-party-uid"),ws.MOCK_USER=new ws("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let On="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new $d("@firebase/firestore");function Zn(){return Va.logLevel}function _e(s,...t){if(Va.logLevel<=Je.DEBUG){const r=t.map(Ad);Va.debug(`Firestore (${On}): ${s}`,...r)}}function qr(s,...t){if(Va.logLevel<=Je.ERROR){const r=t.map(Ad);Va.error(`Firestore (${On}): ${s}`,...r)}}function wn(s,...t){if(Va.logLevel<=Je.WARN){const r=t.map(Ad);Va.warn(`Firestore (${On}): ${s}`,...r)}}function Ad(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(s="Unexpected state"){const t=`FIRESTORE (${On}) INTERNAL ASSERTION FAILED: `+s;throw qr(t),new Error(t)}function ft(s,t){s||Ve()}function Be(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Tr{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Hy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(ws.UNAUTHENTICATED))}shutdown(){}}class Wy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Gy{constructor(t){this.t=t,this.currentUser=ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ft(this.o===void 0);let a=this.i;const n=d=>this.i!==a?(a=this.i,r(d)):Promise.resolve();let i=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lr,t.enqueueRetryable(()=>n(this.currentUser))};const l=()=>{const d=i;t.enqueueRetryable(async()=>{await d.promise,await n(this.currentUser)})},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lr)}},0),l()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==t?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ft(typeof a.accessToken=="string"),new sm(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ft(t===null||typeof t=="string"),new ws(t)}}class Ky{constructor(t,r,a){this.l=t,this.h=r,this.P=a,this.type="FirstParty",this.user=ws.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yy{constructor(t,r,a){this.l=t,this.h=r,this.P=a}getToken(){return Promise.resolve(new Ky(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(ws.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xy{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){ft(this.o===void 0);const a=i=>{i.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.R;return this.R=i.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?r(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>a(i))};const n=i=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?n(i):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ft(typeof r.token=="string"),this.R=r.token,new Qy(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let a=0;a<s;a++)r[a]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let a="";for(;a.length<20;){const n=Jy(40);for(let i=0;i<n.length;++i)a.length<20&&n[i]<r&&(a+=t.charAt(n[i]%t.length))}return a}}function dt(s,t){return s<t?-1:s>t?1:0}function Nn(s,t,r){return s.length===t.length&&s.every((a,n)=>r(a,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ne(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Ne(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return as.fromMillis(Date.now())}static fromDate(t){return as.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),a=Math.floor(1e6*(t-1e3*r));return new as(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ue(t)}static min(){return new Ue(new as(0,0))}static max(){return new Ue(new as(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,r,a){r===void 0?r=0:r>t.length&&Ve(),a===void 0?a=t.length-r:a>t.length-r&&Ve(),this.segments=t,this.offset=r,this.len=a}get length(){return this.len}isEqual(t){return _i.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof _i?t.forEach(a=>{r.push(a)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,a=this.limit();r<a;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const a=Math.min(t.length,r.length);for(let n=0;n<a;n++){const i=t.get(n),l=r.get(n);if(i<l)return-1;if(i>l)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class It extends _i{construct(t,r,a){return new It(t,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const a of t){if(a.indexOf("//")>=0)throw new Ne(xe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(n=>n.length>0))}return new It(r)}static emptyPath(){return new It([])}}const Zy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xs extends _i{construct(t,r,a){return new xs(t,r,a)}static isValidIdentifier(t){return Zy.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xs.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xs(["__name__"])}static fromServerFormat(t){const r=[];let a="",n=0;const i=()=>{if(a.length===0)throw new Ne(xe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let l=!1;for(;n<t.length;){const c=t[n];if(c==="\\"){if(n+1===t.length)throw new Ne(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[n+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ne(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=d,n+=2}else c==="`"?(l=!l,n++):c!=="."||l?(a+=c,n++):(i(),n++)}if(i(),l)throw new Ne(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xs(r)}static emptyPath(){return new xs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.path=t}static fromPath(t){return new Ie(It.fromString(t))}static fromName(t){return new Ie(It.fromString(t).popFirst(5))}static empty(){return new Ie(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return It.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ie(new It(t.slice()))}}function ev(s,t){const r=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,n=Ue.fromTimestamp(a===1e9?new as(r+1,0):new as(r,a));return new ba(n,Ie.empty(),t)}function tv(s){return new ba(s.readTime,s.key,-1)}class ba{constructor(t,r,a){this.readTime=t,this.documentKey=r,this.largestBatchId=a}static min(){return new ba(Ue.min(),Ie.empty(),-1)}static max(){return new ba(Ue.max(),Ie.empty(),-1)}}function sv(s,t){let r=s.readTime.compareTo(t.readTime);return r!==0?r:(r=Ie.comparator(s.documentKey,t.documentKey),r!==0?r:dt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class av{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(s){if(s.code!==xe.FAILED_PRECONDITION||s.message!==rv)throw s;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new me((a,n)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(a,n)},this.catchCallback=i=>{this.wrapFailure(r,i).next(a,n)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof me?r:me.resolve(r)}catch(r){return me.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):me.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):me.reject(r)}static resolve(t){return new me((r,a)=>{r(t)})}static reject(t){return new me((r,a)=>{a(t)})}static waitFor(t){return new me((r,a)=>{let n=0,i=0,l=!1;t.forEach(c=>{++n,c.next(()=>{++i,l&&i===n&&r()},d=>a(d))}),l=!0,i===n&&r()})}static or(t){let r=me.resolve(!1);for(const a of t)r=r.next(n=>n?me.resolve(n):a());return r}static forEach(t,r){const a=[];return t.forEach((n,i)=>{a.push(r.call(this,n,i))}),this.waitFor(a)}static mapArray(t,r){return new me((a,n)=>{const i=t.length,l=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(t[h]).next(u=>{l[h]=u,++c,c===i&&a(l)},u=>n(u))}})}static doWhile(t,r){return new me((a,n)=>{const i=()=>{t()===!0?r().next(()=>{i()},n):a()};i()})}}function nv(s){const t=s.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ui(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=a=>this.ie(a),this.se=a=>r.writeSequenceNumber(a))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Id.oe=-1;function yo(s){return s==null}function Vl(s){return s===0&&1/s==-1/0}function iv(s){return typeof s=="number"&&Number.isInteger(s)&&!Vl(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(s){let t=0;for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t++;return t}function Ga(s,t){for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&t(r,s[r])}function am(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,r){this.comparator=t,this.root=r||us.EMPTY}insert(t,r){return new Vt(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,us.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,us.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(t){let r=0,a=this.root;for(;!a.isEmpty();){const n=this.comparator(t,a.key);if(n===0)return r+a.left.size;n<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,a)=>(t(r,a),!1))}toString(){const t=[];return this.inorderTraversal((r,a)=>(t.push(`${r}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new dl(this.root,t,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new dl(this.root,t,this.comparator,!0)}}class dl{constructor(t,r,a,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=r?a(t.key,r):1,r&&n&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class us{constructor(t,r,a,n,i){this.key=t,this.value=r,this.color=a??us.RED,this.left=n??us.EMPTY,this.right=i??us.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,a,n,i){return new us(t??this.key,r??this.value,a??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,a){let n=this;const i=a(t,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(t,r,a),null):i===0?n.copy(null,r,null,null,null):n.copy(null,null,null,null,n.right.insert(t,r,a)),n.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let a,n=this;if(r(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),r(t,n.key)===0){if(n.right.isEmpty())return us.EMPTY;a=n.right.min(),n=n.copy(a.key,a.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const t=this.left.check();if(t!==this.right.check())throw Ve();return t+(this.isRed()?0:1)}}us.EMPTY=null,us.RED=!0,us.BLACK=!1;us.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(t,r,a,n,i){return this}insert(t,r,a){return new us(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,a)=>(t(r),!1))}forEachInRange(t,r){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const n=a.getNext();if(this.comparator(n.key,t[1])>=0)return;r(n.key)}}forEachWhile(t,r){let a;for(a=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bu(this.data.getIterator())}getIteratorFrom(t){return new Bu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(a=>{r=r.add(a)}),r}isEqual(t){if(!(t instanceof ms)||this.size!==t.size)return!1;const r=this.data.getIterator(),a=t.data.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new ms(this.comparator);return r.data=t,r}}class Bu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t){this.fields=t,t.sort(xs.comparator)}static empty(){return new Gs([])}unionWith(t){let r=new ms(xs.comparator);for(const a of this.fields)r=r.add(a);for(const a of t)r=r.add(a);return new Gs(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Nn(this.fields,t.fields,(r,a)=>r.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nm("Invalid base64 string: "+i):i}}(t);return new ps(r)}static fromUint8Array(t){const r=function(n){let i="";for(let l=0;l<n.length;++l)i+=String.fromCharCode(n[l]);return i}(t);return new ps(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const lv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(s){if(ft(!!s),typeof s=="string"){let t=0;const r=lv.exec(s);if(ft(!!r),r[1]){let n=r[1];n=(n+"000000000").substr(0,9),t=Number(n)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:zt(s.seconds),nanos:zt(s.nanos)}}function zt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Fa(s){return typeof s=="string"?ps.fromBase64String(s):ps.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Dd(s){const t=s.mapValue.fields.__previous_value__;return Cd(t)?Dd(t):t}function Ei(s){const t=fa(s.mapValue.fields.__local_write_time__.timestampValue);return new as(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t,r,a,n,i,l,c,d,h){this.databaseId=t,this.appId=r,this.persistenceKey=a,this.host=n,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class $i{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new $i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof $i&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl={mapValue:{}};function Ua(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cd(s)?4:dv(s)?9007199254740991:cv(s)?10:11:Ve()}function $r(s,t){if(s===t)return!0;const r=Ua(s);if(r!==Ua(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Ei(s).isEqual(Ei(t));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const l=fa(n.timestampValue),c=fa(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(n,i){return Fa(n.bytesValue).isEqual(Fa(i.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(n,i){return zt(n.geoPointValue.latitude)===zt(i.geoPointValue.latitude)&&zt(n.geoPointValue.longitude)===zt(i.geoPointValue.longitude)}(s,t);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return zt(n.integerValue)===zt(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const l=zt(n.doubleValue),c=zt(i.doubleValue);return l===c?Vl(l)===Vl(c):isNaN(l)&&isNaN(c)}return!1}(s,t);case 9:return Nn(s.arrayValue.values||[],t.arrayValue.values||[],$r);case 10:case 11:return function(n,i){const l=n.mapValue.fields||{},c=i.mapValue.fields||{};if(Uu(l)!==Uu(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!$r(l[d],c[d])))return!1;return!0}(s,t);default:return Ve()}}function Ti(s,t){return(s.values||[]).find(r=>$r(r,t))!==void 0}function kn(s,t){if(s===t)return 0;const r=Ua(s),a=Ua(t);if(r!==a)return dt(r,a);switch(r){case 0:case 9007199254740991:return 0;case 1:return dt(s.booleanValue,t.booleanValue);case 2:return function(i,l){const c=zt(i.integerValue||i.doubleValue),d=zt(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(s,t);case 3:return zu(s.timestampValue,t.timestampValue);case 4:return zu(Ei(s),Ei(t));case 5:return dt(s.stringValue,t.stringValue);case 6:return function(i,l){const c=Fa(i),d=Fa(l);return c.compareTo(d)}(s.bytesValue,t.bytesValue);case 7:return function(i,l){const c=i.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const u=dt(c[h],d[h]);if(u!==0)return u}return dt(c.length,d.length)}(s.referenceValue,t.referenceValue);case 8:return function(i,l){const c=dt(zt(i.latitude),zt(l.latitude));return c!==0?c:dt(zt(i.longitude),zt(l.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return qu(s.arrayValue,t.arrayValue);case 10:return function(i,l){var c,d,h,u;const m=i.fields||{},g=l.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,v=(d=g.value)===null||d===void 0?void 0:d.arrayValue,E=dt(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return E!==0?E:qu(y,v)}(s.mapValue,t.mapValue);case 11:return function(i,l){if(i===hl.mapValue&&l===hl.mapValue)return 0;if(i===hl.mapValue)return 1;if(l===hl.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=l.fields||{},u=Object.keys(h);d.sort(),u.sort();for(let m=0;m<d.length&&m<u.length;++m){const g=dt(d[m],u[m]);if(g!==0)return g;const y=kn(c[d[m]],h[u[m]]);if(y!==0)return y}return dt(d.length,u.length)}(s.mapValue,t.mapValue);default:throw Ve()}}function zu(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return dt(s,t);const r=fa(s),a=fa(t),n=dt(r.seconds,a.seconds);return n!==0?n:dt(r.nanos,a.nanos)}function qu(s,t){const r=s.values||[],a=t.values||[];for(let n=0;n<r.length&&n<a.length;++n){const i=kn(r[n],a[n]);if(i)return i}return dt(r.length,a.length)}function _n(s){return Bc(s)}function Bc(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(r){const a=fa(r);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(r){return Fa(r).toBase64()}(s.bytesValue):"referenceValue"in s?function(r){return Ie.fromName(r).toString()}(s.referenceValue):"geoPointValue"in s?function(r){return`geo(${r.latitude},${r.longitude})`}(s.geoPointValue):"arrayValue"in s?function(r){let a="[",n=!0;for(const i of r.values||[])n?n=!1:a+=",",a+=Bc(i);return a+"]"}(s.arrayValue):"mapValue"in s?function(r){const a=Object.keys(r.fields||{}).sort();let n="{",i=!0;for(const l of a)i?i=!1:n+=",",n+=`${l}:${Bc(r.fields[l])}`;return n+"}"}(s.mapValue):Ve()}function Hu(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function zc(s){return!!s&&"integerValue"in s}function Rd(s){return!!s&&"arrayValue"in s}function Wu(s){return!!s&&"nullValue"in s}function Gu(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function _l(s){return!!s&&"mapValue"in s}function cv(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ui(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return Ga(s.mapValue.fields,(r,a)=>t.mapValue.fields[r]=ui(a)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(s.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ui(s.arrayValue.values[r]);return t}return Object.assign({},s)}function dv(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t){this.value=t}static empty(){return new Bs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let a=0;a<t.length-1;++a)if(r=(r.mapValue.fields||{})[t.get(a)],!_l(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ui(r)}setAll(t){let r=xs.emptyPath(),a={},n=[];t.forEach((l,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,a,n),a={},n=[],r=c.popLast()}l?a[c.lastSegment()]=ui(l):n.push(c.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,a,n)}delete(t){const r=this.field(t.popLast());_l(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return $r(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<t.length;++a){let n=r.mapValue.fields[t.get(a)];_l(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},r.mapValue.fields[t.get(a)]=n),r=n}return r.mapValue.fields}applyChanges(t,r,a){Ga(r,(n,i)=>t[n]=i);for(const n of a)delete t[n]}clone(){return new Bs(ui(this.value))}}function im(s){const t=[];return Ga(s.fields,(r,a)=>{const n=new xs([r]);if(_l(a)){const i=im(a.mapValue).fields;if(i.length===0)t.push(n);else for(const l of i)t.push(n.child(l))}else t.push(n)}),new Gs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,r,a,n,i,l,c){this.key=t,this.documentType=r,this.version=a,this.readTime=n,this.createTime=i,this.data=l,this.documentState=c}static newInvalidDocument(t){return new ks(t,0,Ue.min(),Ue.min(),Ue.min(),Bs.empty(),0)}static newFoundDocument(t,r,a,n){return new ks(t,1,r,Ue.min(),a,n,0)}static newNoDocument(t,r){return new ks(t,2,r,Ue.min(),Ue.min(),Bs.empty(),0)}static newUnknownDocument(t,r){return new ks(t,3,r,Ue.min(),Ue.min(),Bs.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ks&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ks(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,r){this.position=t,this.inclusive=r}}function Ku(s,t,r){let a=0;for(let n=0;n<s.position.length;n++){const i=t[n],l=s.position[n];if(i.field.isKeyField()?a=Ie.comparator(Ie.fromName(l.referenceValue),r.key):a=kn(l,r.data.field(i.field)),i.dir==="desc"&&(a*=-1),a!==0)break}return a}function Yu(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let r=0;r<s.position.length;r++)if(!$r(s.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t,r="asc"){this.field=t,this.dir=r}}function hv(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm=class{};class Kt extends lm{constructor(t,r,a){super(),this.field=t,this.op=r,this.value=a}static create(t,r,a){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,a):new xv(t,r,a):r==="array-contains"?new pv(t,a):r==="in"?new bv(t,a):r==="not-in"?new fv(t,a):r==="array-contains-any"?new yv(t,a):new Kt(t,r,a)}static createKeyFieldInFilter(t,r,a){return r==="in"?new mv(t,a):new gv(t,a)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(kn(r,this.value)):r!==null&&Ua(this.value)===Ua(r)&&this.matchesComparison(kn(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends lm{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new ur(t,r)}matches(t){return om(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function om(s){return s.op==="and"}function cm(s){return uv(s)&&om(s)}function uv(s){for(const t of s.filters)if(t instanceof ur)return!1;return!0}function qc(s){if(s instanceof Kt)return s.field.canonicalString()+s.op.toString()+_n(s.value);if(cm(s))return s.filters.map(t=>qc(t)).join(",");{const t=s.filters.map(r=>qc(r)).join(",");return`${s.op}(${t})`}}function dm(s,t){return s instanceof Kt?function(a,n){return n instanceof Kt&&a.op===n.op&&a.field.isEqual(n.field)&&$r(a.value,n.value)}(s,t):s instanceof ur?function(a,n){return n instanceof ur&&a.op===n.op&&a.filters.length===n.filters.length?a.filters.reduce((i,l,c)=>i&&dm(l,n.filters[c]),!0):!1}(s,t):void Ve()}function hm(s){return s instanceof Kt?function(r){return`${r.field.canonicalString()} ${r.op} ${_n(r.value)}`}(s):s instanceof ur?function(r){return r.op.toString()+" {"+r.getFilters().map(hm).join(" ,")+"}"}(s):"Filter"}class xv extends Kt{constructor(t,r,a){super(t,r,a),this.key=Ie.fromName(a.referenceValue)}matches(t){const r=Ie.comparator(t.key,this.key);return this.matchesComparison(r)}}class mv extends Kt{constructor(t,r){super(t,"in",r),this.keys=um("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class gv extends Kt{constructor(t,r){super(t,"not-in",r),this.keys=um("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function um(s,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(a=>Ie.fromName(a.referenceValue))}class pv extends Kt{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Rd(r)&&Ti(r.arrayValue,this.value)}}class bv extends Kt{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Ti(this.value.arrayValue,r)}}class fv extends Kt{constructor(t,r){super(t,"not-in",r)}matches(t){if(Ti(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Ti(this.value.arrayValue,r)}}class yv extends Kt{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Rd(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Ti(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t,r=null,a=[],n=[],i=null,l=null,c=null){this.path=t,this.collectionGroup=r,this.orderBy=a,this.filters=n,this.limit=i,this.startAt=l,this.endAt=c,this.ue=null}}function Qu(s,t=null,r=[],a=[],n=null,i=null,l=null){return new vv(s,t,r,a,n,i,l)}function Pd(s){const t=Be(s);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(a=>qc(a)).join(","),r+="|ob:",r+=t.orderBy.map(a=>function(i){return i.field.canonicalString()+i.dir}(a)).join(","),yo(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>_n(a)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>_n(a)).join(",")),t.ue=r}return t.ue}function Md(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<s.orderBy.length;r++)if(!hv(s.orderBy[r],t.orderBy[r]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let r=0;r<s.filters.length;r++)if(!dm(s.filters[r],t.filters[r]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!Yu(s.startAt,t.startAt)&&Yu(s.endAt,t.endAt)}function Hc(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,r=null,a=[],n=[],i=null,l="F",c=null,d=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=n,this.limit=i,this.limitType=l,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jv(s,t,r,a,n,i,l,c){return new Ln(s,t,r,a,n,i,l,c)}function vo(s){return new Ln(s)}function Xu(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function xm(s){return s.collectionGroup!==null}function xi(s){const t=Be(s);if(t.ce===null){t.ce=[];const r=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),r.add(i.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new ms(xs.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(t).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||t.ce.push(new Si(i,a))}),r.has(xs.keyField().canonicalString())||t.ce.push(new Si(xs.keyField(),a))}return t.ce}function Nr(s){const t=Be(s);return t.le||(t.le=wv(t,xi(s))),t.le}function wv(s,t){if(s.limitType==="F")return Qu(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new Si(n.field,i)});const r=s.endAt?new Fl(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Fl(s.startAt.position,s.startAt.inclusive):null;return Qu(s.path,s.collectionGroup,t,s.filters,s.limit,r,a)}}function Wc(s,t){const r=s.filters.concat([t]);return new Ln(s.path,s.collectionGroup,s.explicitOrderBy.slice(),r,s.limit,s.limitType,s.startAt,s.endAt)}function Gc(s,t,r){return new Ln(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,r,s.startAt,s.endAt)}function jo(s,t){return Md(Nr(s),Nr(t))&&s.limitType===t.limitType}function mm(s){return`${Pd(Nr(s))}|lt:${s.limitType}`}function cn(s){return`Query(target=${function(r){let a=r.path.canonicalString();return r.collectionGroup!==null&&(a+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(a+=`, filters: [${r.filters.map(n=>hm(n)).join(", ")}]`),yo(r.limit)||(a+=", limit: "+r.limit),r.orderBy.length>0&&(a+=`, orderBy: [${r.orderBy.map(n=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(n)).join(", ")}]`),r.startAt&&(a+=", startAt: ",a+=r.startAt.inclusive?"b:":"a:",a+=r.startAt.position.map(n=>_n(n)).join(",")),r.endAt&&(a+=", endAt: ",a+=r.endAt.inclusive?"a:":"b:",a+=r.endAt.position.map(n=>_n(n)).join(",")),`Target(${a})`}(Nr(s))}; limitType=${s.limitType})`}function wo(s,t){return t.isFoundDocument()&&function(a,n){const i=n.key.path;return a.collectionGroup!==null?n.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(i):Ie.isDocumentKey(a.path)?a.path.isEqual(i):a.path.isImmediateParentOf(i)}(s,t)&&function(a,n){for(const i of xi(a))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(s,t)&&function(a,n){for(const i of a.filters)if(!i.matches(n))return!1;return!0}(s,t)&&function(a,n){return!(a.startAt&&!function(l,c,d){const h=Ku(l,c,d);return l.inclusive?h<=0:h<0}(a.startAt,xi(a),n)||a.endAt&&!function(l,c,d){const h=Ku(l,c,d);return l.inclusive?h>=0:h>0}(a.endAt,xi(a),n))}(s,t)}function Nv(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gm(s){return(t,r)=>{let a=!1;for(const n of xi(s)){const i=kv(n,t,r);if(i!==0)return i;a=a||n.field.isKeyField()}return 0}}function kv(s,t,r){const a=s.field.isKeyField()?Ie.comparator(t.key,r.key):function(i,l,c){const d=l.data.field(i),h=c.data.field(i);return d!==null&&h!==null?kn(d,h):Ve()}(s.field,t,r);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a!==void 0){for(const[n,i]of a)if(this.equalsFn(n,t))return i}}has(t){return this.get(t)!==void 0}set(t,r){const a=this.mapKeyFn(t),n=this.inner[a];if(n===void 0)return this.inner[a]=[[t,r]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return void(n[i]=[t,r]);n.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return!1;for(let n=0;n<a.length;n++)if(this.equalsFn(a[n][0],t))return a.length===1?delete this.inner[r]:a.splice(n,1),this.innerSize--,!0;return!1}forEach(t){Ga(this.inner,(r,a)=>{for(const[n,i]of a)t(n,i)})}isEmpty(){return am(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=new Vt(Ie.comparator);function Hr(){return _v}const pm=new Vt(Ie.comparator);function oi(...s){let t=pm;for(const r of s)t=t.insert(r.key,r);return t}function bm(s){let t=pm;return s.forEach((r,a)=>t=t.insert(r,a.overlayedDocument)),t}function Da(){return mi()}function fm(){return mi()}function mi(){return new Vn(s=>s.toString(),(s,t)=>s.isEqual(t))}const Ev=new Vt(Ie.comparator),$v=new ms(Ie.comparator);function Qe(...s){let t=$v;for(const r of s)t=t.add(r);return t}const Tv=new ms(dt);function Sv(){return Tv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vl(t)?"-0":t}}function ym(s){return{integerValue:""+s}}function Av(s,t){return iv(t)?ym(t):Od(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this._=void 0}}function Iv(s,t,r){return s instanceof Ul?function(n,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&Cd(i)&&(i=Dd(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(r,t):s instanceof Ai?jm(s,t):s instanceof Ii?wm(s,t):function(n,i){const l=vm(n,i),c=Ju(l)+Ju(n.Pe);return zc(l)&&zc(n.Pe)?ym(c):Od(n.serializer,c)}(s,t)}function Cv(s,t,r){return s instanceof Ai?jm(s,t):s instanceof Ii?wm(s,t):r}function vm(s,t){return s instanceof Bl?function(a){return zc(a)||function(i){return!!i&&"doubleValue"in i}(a)}(t)?t:{integerValue:0}:null}class Ul extends No{}class Ai extends No{constructor(t){super(),this.elements=t}}function jm(s,t){const r=Nm(t);for(const a of s.elements)r.some(n=>$r(n,a))||r.push(a);return{arrayValue:{values:r}}}class Ii extends No{constructor(t){super(),this.elements=t}}function wm(s,t){let r=Nm(t);for(const a of s.elements)r=r.filter(n=>!$r(n,a));return{arrayValue:{values:r}}}class Bl extends No{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function Ju(s){return zt(s.integerValue||s.doubleValue)}function Nm(s){return Rd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Dv(s,t){return s.field.isEqual(t.field)&&function(a,n){return a instanceof Ai&&n instanceof Ai||a instanceof Ii&&n instanceof Ii?Nn(a.elements,n.elements,$r):a instanceof Bl&&n instanceof Bl?$r(a.Pe,n.Pe):a instanceof Ul&&n instanceof Ul}(s.transform,t.transform)}class Rv{constructor(t,r){this.version=t,this.transformResults=r}}class Xs{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Xs}static exists(t){return new Xs(void 0,t)}static updateTime(t){return new Xs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function El(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class ko{}function km(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Ld(s.key,Xs.none()):new Bi(s.key,s.data,Xs.none());{const r=s.data,a=Bs.empty();let n=new ms(xs.comparator);for(let i of t.fields)if(!n.has(i)){let l=r.field(i);l===null&&i.length>1&&(i=i.popLast(),l=r.field(i)),l===null?a.delete(i):a.set(i,l),n=n.add(i)}return new wa(s.key,a,new Gs(n.toArray()),Xs.none())}}function Pv(s,t,r){s instanceof Bi?function(n,i,l){const c=n.value.clone(),d=e0(n.fieldTransforms,i,l.transformResults);c.setAll(d),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(s,t,r):s instanceof wa?function(n,i,l){if(!El(n.precondition,i))return void i.convertToUnknownDocument(l.version);const c=e0(n.fieldTransforms,i,l.transformResults),d=i.data;d.setAll(_m(n)),d.setAll(c),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(s,t,r):function(n,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,r)}function gi(s,t,r,a){return s instanceof Bi?function(i,l,c,d){if(!El(i.precondition,l))return c;const h=i.value.clone(),u=t0(i.fieldTransforms,d,l);return h.setAll(u),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(s,t,r,a):s instanceof wa?function(i,l,c,d){if(!El(i.precondition,l))return c;const h=t0(i.fieldTransforms,d,l),u=l.data;return u.setAll(_m(i)),u.setAll(h),l.convertToFoundDocument(l.version,u).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(s,t,r,a):function(i,l,c){return El(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(s,t,r)}function Mv(s,t){let r=null;for(const a of s.fieldTransforms){const n=t.data.field(a.field),i=vm(a.transform,n||null);i!=null&&(r===null&&(r=Bs.empty()),r.set(a.field,i))}return r||null}function Zu(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(a,n){return a===void 0&&n===void 0||!(!a||!n)&&Nn(a,n,(i,l)=>Dv(i,l))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Bi extends ko{constructor(t,r,a,n=[]){super(),this.key=t,this.value=r,this.precondition=a,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class wa extends ko{constructor(t,r,a,n,i=[]){super(),this.key=t,this.data=r,this.fieldMask=a,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _m(s){const t=new Map;return s.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=s.data.field(r);t.set(r,a)}}),t}function e0(s,t,r){const a=new Map;ft(s.length===r.length);for(let n=0;n<r.length;n++){const i=s[n],l=i.transform,c=t.data.field(i.field);a.set(i.field,Cv(l,c,r[n]))}return a}function t0(s,t,r){const a=new Map;for(const n of s){const i=n.transform,l=r.data.field(n.field);a.set(n.field,Iv(i,l,t))}return a}class Ld extends ko{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ov extends ko{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,r,a,n){this.batchId=t,this.localWriteTime=r,this.baseMutations=a,this.mutations=n}applyToRemoteDocument(t,r){const a=r.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(t.key)&&Pv(i,t,a[n])}}applyToLocalView(t,r){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(r=gi(a,t,r,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(r=gi(a,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const a=fm();return this.mutations.forEach(n=>{const i=t.get(n.key),l=i.overlayedDocument;let c=this.applyToLocalView(l,i.mutatedFields);c=r.has(n.key)?null:c;const d=km(l,c);d!==null&&a.set(n.key,d),l.isValidDocument()||l.convertToNoDocument(Ue.min())}),a}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Qe())}isEqual(t){return this.batchId===t.batchId&&Nn(this.mutations,t.mutations,(r,a)=>Zu(r,a))&&Nn(this.baseMutations,t.baseMutations,(r,a)=>Zu(r,a))}}class Vd{constructor(t,r,a,n){this.batch=t,this.commitVersion=r,this.mutationResults=a,this.docVersions=n}static from(t,r,a){ft(t.mutations.length===a.length);let n=function(){return Ev}();const i=t.mutations;for(let l=0;l<i.length;l++)n=n.insert(i[l].key,a[l].version);return new Vd(t,r,a,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,tt;function Uv(s){switch(s){default:return Ve();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function Em(s){if(s===void 0)return qr("GRPC error has no .code"),xe.UNKNOWN;switch(s){case Gt.OK:return xe.OK;case Gt.CANCELLED:return xe.CANCELLED;case Gt.UNKNOWN:return xe.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return xe.INTERNAL;case Gt.UNAVAILABLE:return xe.UNAVAILABLE;case Gt.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Gt.NOT_FOUND:return xe.NOT_FOUND;case Gt.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Gt.ABORTED:return xe.ABORTED;case Gt.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Gt.DATA_LOSS:return xe.DATA_LOSS;default:return Ve()}}(tt=Gt||(Gt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Ra([4294967295,4294967295],0);function s0(s){const t=Bv().encode(s),r=new Qx;return r.update(t),new Uint8Array(r.digest())}function r0(s){const t=new DataView(s.buffer),r=t.getUint32(0,!0),a=t.getUint32(4,!0),n=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ra([r,a],0),new Ra([n,i],0)]}class Fd{constructor(t,r,a){if(this.bitmap=t,this.padding=r,this.hashCount=a,r<0||r>=8)throw new ci(`Invalid padding: ${r}`);if(a<0)throw new ci(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${a}`);if(t.length===0&&r!==0)throw new ci(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Ra.fromNumber(this.Ie)}Ee(t,r,a){let n=t.add(r.multiply(Ra.fromNumber(a)));return n.compare(zv)===1&&(n=new Ra([n.getBits(0),n.getBits(1)],0)),n.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const r=s0(t),[a,n]=r0(r);for(let i=0;i<this.hashCount;i++){const l=this.Ee(a,n,i);if(!this.de(l))return!1}return!0}static create(t,r,a){const n=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),l=new Fd(i,n,r);return a.forEach(c=>l.insert(c)),l}insert(t){if(this.Ie===0)return;const r=s0(t),[a,n]=r0(r);for(let i=0;i<this.hashCount;i++){const l=this.Ee(a,n,i);this.Ae(l)}}Ae(t){const r=Math.floor(t/8),a=t%8;this.bitmap[r]|=1<<a}}class ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t,r,a,n,i){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,r,a){const n=new Map;return n.set(t,zi.createSynthesizedTargetChangeForCurrentChange(t,r,a)),new _o(Ue.min(),n,new Vt(dt),Hr(),Qe())}}class zi{constructor(t,r,a,n,i){this.resumeToken=t,this.current=r,this.addedDocuments=a,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,r,a){return new zi(a,r,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,r,a,n){this.Re=t,this.removedTargetIds=r,this.key=a,this.Ve=n}}class $m{constructor(t,r){this.targetId=t,this.me=r}}class Tm{constructor(t,r,a=ps.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=r,this.resumeToken=a,this.cause=n}}class a0{constructor(){this.fe=0,this.ge=i0(),this.pe=ps.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Qe(),r=Qe(),a=Qe();return this.ge.forEach((n,i)=>{switch(i){case 0:t=t.add(n);break;case 2:r=r.add(n);break;case 1:a=a.add(n);break;default:Ve()}}),new zi(this.pe,this.ye,t,r,a)}Ce(){this.we=!1,this.ge=i0()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qv{constructor(t){this.Le=t,this.Be=new Map,this.ke=Hr(),this.qe=n0(),this.Qe=new Vt(dt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const a=this.Ge(r);switch(t.state){case 0:this.ze(r)&&a.De(t.resumeToken);break;case 1:a.Oe(),a.Se||a.Ce(),a.De(t.resumeToken);break;case 2:a.Oe(),a.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(a.Ne(),a.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),a.De(t.resumeToken));break;default:Ve()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((a,n)=>{this.ze(n)&&r(n)})}He(t){const r=t.targetId,a=t.me.count,n=this.Je(r);if(n){const i=n.target;if(Hc(i))if(a===0){const l=new Ie(i.path);this.Ue(r,l,ks.newNoDocument(l,Ue.min()))}else ft(a===1);else{const l=this.Ye(r);if(l!==a){const c=this.Ze(t),d=c?this.Xe(c,t,l):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:a="",padding:n=0},hashCount:i=0}=r;let l,c;try{l=Fa(a).toUint8Array()}catch(d){if(d instanceof nm)return wn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Fd(l,n,i)}catch(d){return wn(d instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(t,r,a){return r.me.count===a-this.nt(t,r.targetId)?0:2}nt(t,r){const a=this.Le.getRemoteKeysForTarget(r);let n=0;return a.forEach(i=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;t.mightContain(c)||(this.Ue(r,i,null),n++)}),n}rt(t){const r=new Map;this.Be.forEach((i,l)=>{const c=this.Je(l);if(c){if(i.current&&Hc(c.target)){const d=new Ie(c.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,ks.newNoDocument(d,t))}i.be&&(r.set(l,i.ve()),i.Ce())}});let a=Qe();this.qe.forEach((i,l)=>{let c=!0;l.forEachWhile(d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(a=a.add(i))}),this.ke.forEach((i,l)=>l.setReadTime(t));const n=new _o(t,r,this.Qe,this.ke,a);return this.ke=Hr(),this.qe=n0(),this.Qe=new Vt(dt),n}$e(t,r){if(!this.ze(t))return;const a=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,a),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,a){if(!this.ze(t))return;const n=this.Ge(t);this.it(t,r)?n.Fe(r,1):n.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),a&&(this.ke=this.ke.insert(r,a))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new a0,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new ms(dt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=this.Je(t)!==null;return r||_e("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new a0),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function n0(){return new Vt(Ie.comparator)}function i0(){return new Vt(Ie.comparator)}const Hv={asc:"ASCENDING",desc:"DESCENDING"},Wv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gv={and:"AND",or:"OR"};class Kv{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Kc(s,t){return s.useProto3Json||yo(t)?t:{value:t}}function zl(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sm(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function Yv(s,t){return zl(s,t.toTimestamp())}function kr(s){return ft(!!s),Ue.fromTimestamp(function(r){const a=fa(r);return new as(a.seconds,a.nanos)}(s))}function Ud(s,t){return Yc(s,t).canonicalString()}function Yc(s,t){const r=function(n){return new It(["projects",n.projectId,"databases",n.database])}(s).child("documents");return t===void 0?r:r.child(t)}function Am(s){const t=It.fromString(s);return ft(Pm(t)),t}function Qc(s,t){return Ud(s.databaseId,t.path)}function mc(s,t){const r=Am(t);if(r.get(1)!==s.databaseId.projectId)throw new Ne(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+s.databaseId.projectId);if(r.get(3)!==s.databaseId.database)throw new Ne(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+s.databaseId.database);return new Ie(Cm(r))}function Im(s,t){return Ud(s.databaseId,t)}function Qv(s){const t=Am(s);return t.length===4?It.emptyPath():Cm(t)}function Xc(s){return new It(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Cm(s){return ft(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function l0(s,t,r){return{name:Qc(s,t),fields:r.value.mapValue.fields}}function Xv(s,t){let r;if("targetChange"in t){t.targetChange;const a=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ve()}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],i=function(h,u){return h.useProto3Json?(ft(u===void 0||typeof u=="string"),ps.fromBase64String(u||"")):(ft(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ps.fromUint8Array(u||new Uint8Array))}(s,t.targetChange.resumeToken),l=t.targetChange.cause,c=l&&function(h){const u=h.code===void 0?xe.UNKNOWN:Em(h.code);return new Ne(u,h.message||"")}(l);r=new Tm(a,n,i,c||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const n=mc(s,a.document.name),i=kr(a.document.updateTime),l=a.document.createTime?kr(a.document.createTime):Ue.min(),c=new Bs({mapValue:{fields:a.document.fields}}),d=ks.newFoundDocument(n,i,l,c),h=a.targetIds||[],u=a.removedTargetIds||[];r=new $l(h,u,d.key,d)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const n=mc(s,a.document),i=a.readTime?kr(a.readTime):Ue.min(),l=ks.newNoDocument(n,i),c=a.removedTargetIds||[];r=new $l([],c,l.key,l)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const n=mc(s,a.document),i=a.removedTargetIds||[];r=new $l([],i,n,null)}else{if(!("filter"in t))return Ve();{t.filter;const a=t.filter;a.targetId;const{count:n=0,unchangedNames:i}=a,l=new Fv(n,i),c=a.targetId;r=new $m(c,l)}}return r}function Jv(s,t){let r;if(t instanceof Bi)r={update:l0(s,t.key,t.value)};else if(t instanceof Ld)r={delete:Qc(s,t.key)};else if(t instanceof wa)r={update:l0(s,t.key,t.data),updateMask:lj(t.fieldMask)};else{if(!(t instanceof Ov))return Ve();r={verify:Qc(s,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(a=>function(i,l){const c=l.transform;if(c instanceof Ul)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ai)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ii)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bl)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Ve()}(0,a))),t.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:Yv(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ve()}(s,t.precondition)),r}function Zv(s,t){return s&&s.length>0?(ft(t!==void 0),s.map(r=>function(n,i){let l=n.updateTime?kr(n.updateTime):kr(i);return l.isEqual(Ue.min())&&(l=kr(i)),new Rv(l,n.transformResults||[])}(r,t))):[]}function ej(s,t){return{documents:[Im(s,t.path)]}}function tj(s,t){const r={structuredQuery:{}},a=t.path;let n;t.collectionGroup!==null?(n=a,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=a.popLast(),r.structuredQuery.from=[{collectionId:a.lastSegment()}]),r.parent=Im(s,n);const i=function(h){if(h.length!==0)return Rm(ur.create(h,"and"))}(t.filters);i&&(r.structuredQuery.where=i);const l=function(h){if(h.length!==0)return h.map(u=>function(g){return{field:dn(g.field),direction:aj(g.dir)}}(u))}(t.orderBy);l&&(r.structuredQuery.orderBy=l);const c=Kc(s,t.limit);return c!==null&&(r.structuredQuery.limit=c),t.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{_t:r,parent:n}}function sj(s){let t=Qv(s.parent);const r=s.structuredQuery,a=r.from?r.from.length:0;let n=null;if(a>0){ft(a===1);const u=r.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let i=[];r.where&&(i=function(m){const g=Dm(m);return g instanceof ur&&cm(g)?g.getFilters():[g]}(r.where));let l=[];r.orderBy&&(l=function(m){return m.map(g=>function(v){return new Si(hn(v.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(r.orderBy));let c=null;r.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,yo(g)?null:g}(r.limit));let d=null;r.startAt&&(d=function(m){const g=!!m.before,y=m.values||[];return new Fl(y,g)}(r.startAt));let h=null;return r.endAt&&(h=function(m){const g=!m.before,y=m.values||[];return new Fl(y,g)}(r.endAt)),jv(t,n,l,i,c,"F",d,h)}function rj(s,t){const r=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function Dm(s){return s.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const a=hn(r.unaryFilter.field);return Kt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const n=hn(r.unaryFilter.field);return Kt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hn(r.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=hn(r.unaryFilter.field);return Kt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(s):s.fieldFilter!==void 0?function(r){return Kt.create(hn(r.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(r.fieldFilter.op),r.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(r){return ur.create(r.compositeFilter.filters.map(a=>Dm(a)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ve()}}(r.compositeFilter.op))}(s):Ve()}function aj(s){return Hv[s]}function nj(s){return Wv[s]}function ij(s){return Gv[s]}function dn(s){return{fieldPath:s.canonicalString()}}function hn(s){return xs.fromServerFormat(s.fieldPath)}function Rm(s){return s instanceof Kt?function(r){if(r.op==="=="){if(Gu(r.value))return{unaryFilter:{field:dn(r.field),op:"IS_NAN"}};if(Wu(r.value))return{unaryFilter:{field:dn(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Gu(r.value))return{unaryFilter:{field:dn(r.field),op:"IS_NOT_NAN"}};if(Wu(r.value))return{unaryFilter:{field:dn(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dn(r.field),op:nj(r.op),value:r.value}}}(s):s instanceof ur?function(r){const a=r.getFilters().map(n=>Rm(n));return a.length===1?a[0]:{compositeFilter:{op:ij(r.op),filters:a}}}(s):Ve()}function lj(s){const t=[];return s.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Pm(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,r,a,n,i=Ue.min(),l=Ue.min(),c=ps.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=r,this.purpose=a,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(t){return new da(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(t){this.ct=t}}function cj(s){const t=sj({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Gc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.un=new hj}addToCollectionParentIndex(t,r){return this.un.add(r),me.resolve()}getCollectionParents(t,r){return me.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return me.resolve()}deleteFieldIndex(t,r){return me.resolve()}deleteAllFieldIndexes(t){return me.resolve()}createTargetIndexes(t,r){return me.resolve()}getDocumentsMatchingTarget(t,r){return me.resolve(null)}getIndexType(t,r){return me.resolve(0)}getFieldIndexes(t,r){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,r){return me.resolve(ba.min())}getMinOffsetFromCollectionGroup(t,r){return me.resolve(ba.min())}updateCollectionGroup(t,r,a){return me.resolve()}updateIndexEntries(t,r){return me.resolve()}}class hj{constructor(){this.index={}}add(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r]||new ms(It.comparator),i=!n.has(a);return this.index[r]=n.add(a),i}has(t){const r=t.lastSegment(),a=t.popLast(),n=this.index[r];return n&&n.has(a)}getEntries(t){return(this.index[t]||new ms(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new En(0)}static kn(){return new En(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.changes=new Vn(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,ks.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const a=this.changes.get(r);return a!==void 0?me.resolve(a):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(t,r,a,n){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=a,this.indexManager=n}getDocument(t,r){let a=null;return this.documentOverlayCache.getOverlay(t,r).next(n=>(a=n,this.remoteDocumentCache.getEntry(t,r))).next(n=>(a!==null&&gi(a.mutation,n,Gs.empty(),as.now()),n))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.getLocalViewOfDocuments(t,a,Qe()).next(()=>a))}getLocalViewOfDocuments(t,r,a=Qe()){const n=Da();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,a).next(i=>{let l=oi();return i.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(t,r){const a=Da();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,Qe()))}populateOverlays(t,r,a){const n=[];return a.forEach(i=>{r.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(t,n).next(i=>{i.forEach((l,c)=>{r.set(l,c)})})}computeViews(t,r,a,n){let i=Hr();const l=mi(),c=function(){return mi()}();return r.forEach((d,h)=>{const u=a.get(h.key);n.has(h.key)&&(u===void 0||u.mutation instanceof wa)?i=i.insert(h.key,h):u!==void 0?(l.set(h.key,u.mutation.getFieldMask()),gi(u.mutation,h,u.mutation.getFieldMask(),as.now())):l.set(h.key,Gs.empty())}),this.recalculateAndSaveOverlays(t,i).next(d=>(d.forEach((h,u)=>l.set(h,u)),r.forEach((h,u)=>{var m;return c.set(h,new xj(u,(m=l.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(t,r){const a=mi();let n=new Vt((l,c)=>l-c),i=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(l=>{for(const c of l)c.keys().forEach(d=>{const h=r.get(d);if(h===null)return;let u=a.get(d)||Gs.empty();u=c.applyToLocalView(h,u),a.set(d,u);const m=(n.get(c.batchId)||Qe()).add(d);n=n.insert(c.batchId,m)})}).next(()=>{const l=[],c=n.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,u=d.value,m=fm();u.forEach(g=>{if(!i.has(g)){const y=km(r.get(g),a.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),l.push(this.documentOverlayCache.saveOverlays(t,h,m))}return me.waitFor(l)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,r,a,n){return function(l){return Ie.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):xm(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,a,n):this.getDocumentsMatchingCollectionQuery(t,r,a,n)}getNextDocuments(t,r,a,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,a,n).next(i=>{const l=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,a.largestBatchId,n-i.size):me.resolve(Da());let c=-1,d=i;return l.next(h=>me.forEach(h,(u,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(u)?me.resolve():this.remoteDocumentCache.getEntry(t,u).next(g=>{d=d.insert(u,g)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,d,h,Qe())).next(u=>({batchId:c,changes:bm(u)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ie(r)).next(a=>{let n=oi();return a.isFoundDocument()&&(n=n.insert(a.key,a)),n})}getDocumentsMatchingCollectionGroupQuery(t,r,a,n){const i=r.collectionGroup;let l=oi();return this.indexManager.getCollectionParents(t,i).next(c=>me.forEach(c,d=>{const h=function(m,g){return new Ln(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,a,n).next(u=>{u.forEach((m,g)=>{l=l.insert(m,g)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,r,a,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,a.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,a,i,n))).next(l=>{i.forEach((d,h)=>{const u=h.getKey();l.get(u)===null&&(l=l.insert(u,ks.newInvalidDocument(u)))});let c=oi();return l.forEach((d,h)=>{const u=i.get(d);u!==void 0&&gi(u.mutation,h,Gs.empty(),as.now()),wo(r,h)&&(c=c.insert(d,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return me.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(n){return{id:n.id,version:n.version,createTime:kr(n.createTime)}}(r)),me.resolve()}getNamedQuery(t,r){return me.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(n){return{name:n.name,query:cj(n.bundledQuery),readTime:kr(n.readTime)}}(r)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.overlays=new Vt(Ie.comparator),this.Ir=new Map}getOverlay(t,r){return me.resolve(this.overlays.get(r))}getOverlays(t,r){const a=Da();return me.forEach(r,n=>this.getOverlay(t,n).next(i=>{i!==null&&a.set(n,i)})).next(()=>a)}saveOverlays(t,r,a){return a.forEach((n,i)=>{this.ht(t,r,i)}),me.resolve()}removeOverlaysForBatchId(t,r,a){const n=this.Ir.get(a);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(a)),me.resolve()}getOverlaysForCollection(t,r,a){const n=Da(),i=r.length+1,l=new Ie(r.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>a&&n.set(d.getKey(),d)}return me.resolve(n)}getOverlaysForCollectionGroup(t,r,a,n){let i=new Vt((h,u)=>h-u);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>a){let u=i.get(h.largestBatchId);u===null&&(u=Da(),i=i.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const c=Da(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,u)=>c.set(h,u)),!(c.size()>=n)););return me.resolve(c)}ht(t,r,a){const n=this.overlays.get(a.key);if(n!==null){const l=this.Ir.get(n.largestBatchId).delete(a.key);this.Ir.set(n.largestBatchId,l)}this.overlays=this.overlays.insert(a.key,new Vv(r,a));let i=this.Ir.get(r);i===void 0&&(i=Qe(),this.Ir.set(r,i)),this.Ir.set(r,i.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.sessionToken=ps.EMPTY_BYTE_STRING}getSessionToken(t){return me.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this.Tr=new ms(is.Er),this.dr=new ms(is.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const a=new is(t,r);this.Tr=this.Tr.add(a),this.dr=this.dr.add(a)}Rr(t,r){t.forEach(a=>this.addReference(a,r))}removeReference(t,r){this.Vr(new is(t,r))}mr(t,r){t.forEach(a=>this.removeReference(a,r))}gr(t){const r=new Ie(new It([])),a=new is(r,t),n=new is(r,t+1),i=[];return this.dr.forEachInRange([a,n],l=>{this.Vr(l),i.push(l.key)}),i}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Ie(new It([])),a=new is(r,t),n=new is(r,t+1);let i=Qe();return this.dr.forEachInRange([a,n],l=>{i=i.add(l.key)}),i}containsKey(t){const r=new is(t,0),a=this.Tr.firstAfterOrEqual(r);return a!==null&&t.isEqual(a.key)}}class is{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Ie.comparator(t.key,r.key)||dt(t.wr,r.wr)}static Ar(t,r){return dt(t.wr,r.wr)||Ie.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new ms(is.Er)}checkEmpty(t){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,a,n){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Lv(i,r,a,n);this.mutationQueue.push(l);for(const c of n)this.br=this.br.add(new is(c.key,i)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return me.resolve(l)}lookupMutationBatch(t,r){return me.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const a=r+1,n=this.vr(a),i=n<0?0:n;return me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const a=new is(r,0),n=new is(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([a,n],l=>{const c=this.Dr(l.wr);i.push(c)}),me.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,r){let a=new ms(dt);return r.forEach(n=>{const i=new is(n,0),l=new is(n,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,l],c=>{a=a.add(c.wr)})}),me.resolve(this.Cr(a))}getAllMutationBatchesAffectingQuery(t,r){const a=r.path,n=a.length+1;let i=a;Ie.isDocumentKey(i)||(i=i.child(""));const l=new is(new Ie(i),0);let c=new ms(dt);return this.br.forEachWhile(d=>{const h=d.key.path;return!!a.isPrefixOf(h)&&(h.length===n&&(c=c.add(d.wr)),!0)},l),me.resolve(this.Cr(c))}Cr(t){const r=[];return t.forEach(a=>{const n=this.Dr(a);n!==null&&r.push(n)}),r}removeMutationBatch(t,r){ft(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let a=this.br;return me.forEach(r.mutations,n=>{const i=new is(n.key,r.batchId);return a=a.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.br=a})}On(t){}containsKey(t,r){const a=new is(r,0),n=this.br.firstAfterOrEqual(a);return me.resolve(r.isEqual(n&&n.key))}performConsistencyCheck(t){return this.mutationQueue.length,me.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(t){this.Mr=t,this.docs=function(){return new Vt(Ie.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const a=r.key,n=this.docs.get(a),i=n?n.size:0,l=this.Mr(r);return this.docs=this.docs.insert(a,{document:r.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const a=this.docs.get(r);return me.resolve(a?a.document.mutableCopy():ks.newInvalidDocument(r))}getEntries(t,r){let a=Hr();return r.forEach(n=>{const i=this.docs.get(n);a=a.insert(n,i?i.document.mutableCopy():ks.newInvalidDocument(n))}),me.resolve(a)}getDocumentsMatchingQuery(t,r,a,n){let i=Hr();const l=r.path,c=new Ie(l.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:u}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||sv(tv(u),a)<=0||(n.has(u.key)||wo(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(t,r,a,n){Ve()}Or(t,r){return me.forEach(this.docs,a=>r(a))}newChangeBuffer(t){return new vj(this)}getSize(t){return me.resolve(this.size)}}class vj extends uj{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((a,n)=>{n.isValidDocument()?r.push(this.cr.addEntry(t,n)):this.cr.removeEntry(a)}),me.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(t){this.persistence=t,this.Nr=new Vn(r=>Pd(r),Md),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bd,this.targetCount=0,this.kr=En.Bn()}forEachTarget(t,r){return this.Nr.forEach((a,n)=>r(n)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Lr&&(this.Lr=r),me.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new En(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,me.resolve()}updateTargetData(t,r){return this.Kn(r),me.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,r,a){let n=0;const i=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=r&&a.get(c.targetId)===null&&(this.Nr.delete(l),i.push(this.removeMatchingKeysForTargetId(t,c.targetId)),n++)}),me.waitFor(i).next(()=>n)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,r){const a=this.Nr.get(r)||null;return me.resolve(a)}addMatchingKeys(t,r,a){return this.Br.Rr(r,a),me.resolve()}removeMatchingKeys(t,r,a){this.Br.mr(r,a);const n=this.persistence.referenceDelegate,i=[];return n&&r.forEach(l=>{i.push(n.markPotentiallyOrphaned(t,l))}),me.waitFor(i)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),me.resolve()}getMatchingKeysForTargetId(t,r){const a=this.Br.yr(r);return me.resolve(a)}containsKey(t,r){return me.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(t,r){this.qr={},this.overlays={},this.Qr=new Id(0),this.Kr=!1,this.Kr=!0,this.$r=new bj,this.referenceDelegate=t(this),this.Ur=new jj(this),this.indexManager=new dj,this.remoteDocumentCache=function(n){return new yj(n)}(a=>this.referenceDelegate.Wr(a)),this.serializer=new oj(r),this.Gr=new gj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new pj,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let a=this.qr[t.toKey()];return a||(a=new fj(r,this.referenceDelegate),this.qr[t.toKey()]=a),a}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,a){_e("MemoryPersistence","Starting transaction:",t);const n=new Nj(this.Qr.next());return this.referenceDelegate.zr(),a(n).next(i=>this.referenceDelegate.jr(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Hr(t,r){return me.or(Object.values(this.qr).map(a=>()=>a.containsKey(t,r)))}}class Nj extends av{constructor(t){super(),this.currentSequenceNumber=t}}class zd{constructor(t){this.persistence=t,this.Jr=new Bd,this.Yr=null}static Zr(t){return new zd(t)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(t,r,a){return this.Jr.addReference(a,r),this.Xr.delete(a.toString()),me.resolve()}removeReference(t,r,a){return this.Jr.removeReference(a,r),this.Xr.add(a.toString()),me.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),me.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(n=>this.Xr.add(n.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,r.targetId).next(n=>{n.forEach(i=>this.Xr.add(i.toString()))}).next(()=>a.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xr,a=>{const n=Ie.fromPath(a);return this.ei(t,n).next(i=>{i||r.removeEntry(n,Ue.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(a=>{a?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return me.or([()=>me.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,r,a,n){this.targetId=t,this.fromCache=r,this.$i=a,this.Ui=n}static Wi(t,r){let a=Qe(),n=Qe();for(const i of r.docChanges)switch(i.type){case 0:a=a.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new qd(t,r.fromCache,a,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Tf()?8:nv(Ts())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,a,n){const i={result:null};return this.Yi(t,r).next(l=>{i.result=l}).next(()=>{if(!i.result)return this.Zi(t,r,n,a).next(l=>{i.result=l})}).next(()=>{if(i.result)return;const l=new kj;return this.Xi(t,r,l).next(c=>{if(i.result=c,this.zi)return this.es(t,r,l,c.size)})}).next(()=>i.result)}es(t,r,a,n){return a.documentReadCount<this.ji?(Zn()<=Je.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",cn(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),me.resolve()):(Zn()<=Je.DEBUG&&_e("QueryEngine","Query:",cn(r),"scans",a.documentReadCount,"local documents and returns",n,"documents as results."),a.documentReadCount>this.Hi*n?(Zn()<=Je.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",cn(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Nr(r))):me.resolve())}Yi(t,r){if(Xu(r))return me.resolve(null);let a=Nr(r);return this.indexManager.getIndexType(t,a).next(n=>n===0?null:(r.limit!==null&&n===1&&(r=Gc(r,null,"F"),a=Nr(r)),this.indexManager.getDocumentsMatchingTarget(t,a).next(i=>{const l=Qe(...i);return this.Ji.getDocuments(t,l).next(c=>this.indexManager.getMinOffset(t,a).next(d=>{const h=this.ts(r,c);return this.ns(r,h,l,d.readTime)?this.Yi(t,Gc(r,null,"F")):this.rs(t,h,r,d)}))})))}Zi(t,r,a,n){return Xu(r)||n.isEqual(Ue.min())?me.resolve(null):this.Ji.getDocuments(t,a).next(i=>{const l=this.ts(r,i);return this.ns(r,l,a,n)?me.resolve(null):(Zn()<=Je.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),cn(r)),this.rs(t,l,r,ev(n,-1)).next(c=>c))})}ts(t,r){let a=new ms(gm(t));return r.forEach((n,i)=>{wo(t,i)&&(a=a.add(i))}),a}ns(t,r,a,n){if(t.limit===null)return!1;if(a.size!==r.size)return!0;const i=t.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Xi(t,r,a){return Zn()<=Je.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",cn(r)),this.Ji.getDocumentsMatchingQuery(t,r,ba.min(),a)}rs(t,r,a,n){return this.Ji.getDocumentsMatchingQuery(t,a,n).next(i=>(r.forEach(l=>{i=i.insert(l.key,l)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(t,r,a,n){this.persistence=t,this.ss=r,this.serializer=n,this.os=new Vt(dt),this._s=new Vn(i=>Pd(i),Md),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(a)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new mj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function $j(s,t,r,a){return new Ej(s,t,r,a)}async function Mm(s,t){const r=Be(s);return await r.persistence.runTransaction("Handle user change","readonly",a=>{let n;return r.mutationQueue.getAllMutationBatches(a).next(i=>(n=i,r.ls(t),r.mutationQueue.getAllMutationBatches(a))).next(i=>{const l=[],c=[];let d=Qe();for(const h of n){l.push(h.batchId);for(const u of h.mutations)d=d.add(u.key)}for(const h of i){c.push(h.batchId);for(const u of h.mutations)d=d.add(u.key)}return r.localDocuments.getDocuments(a,d).next(h=>({hs:h,removedBatchIds:l,addedBatchIds:c}))})})}function Tj(s,t){const r=Be(s);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const n=t.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,h,u){const m=h.batch,g=m.keys();let y=me.resolve();return g.forEach(v=>{y=y.next(()=>u.getEntry(d,v)).next(E=>{const I=h.docVersions.get(v);ft(I!==null),E.version.compareTo(I)<0&&(m.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),u.addEntry(E)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(d,m))}(r,a,t,i).next(()=>i.apply(a)).next(()=>r.mutationQueue.performConsistencyCheck(a)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(a,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(c){let d=Qe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(t))).next(()=>r.localDocuments.getDocuments(a,n))})}function Om(s){const t=Be(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function Sj(s,t){const r=Be(s),a=t.snapshotVersion;let n=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const l=r.cs.newChangeBuffer({trackRemovals:!0});n=r.os;const c=[];t.targetChanges.forEach((u,m)=>{const g=n.get(m);if(!g)return;c.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,m).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?y=y.withResumeToken(ps.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,a)),n=n.insert(m,y),function(E,I,C){return E.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,y,u)&&c.push(r.Ur.updateTargetData(i,y))});let d=Hr(),h=Qe();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),c.push(Aj(i,l,t.documentUpdates).next(u=>{d=u.Ps,h=u.Is})),!a.isEqual(Ue.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,a));c.push(u)}return me.waitFor(c).next(()=>l.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,d,h)).next(()=>d)}).then(i=>(r.os=n,i))}function Aj(s,t,r){let a=Qe(),n=Qe();return r.forEach(i=>a=a.add(i)),t.getEntries(s,a).next(i=>{let l=Hr();return r.forEach((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(n=n.add(c)),d.isNoDocument()&&d.version.isEqual(Ue.min())?(t.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(d),l=l.insert(c,d)):_e("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)}),{Ps:l,Is:n}})}function Ij(s,t){const r=Be(s);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function Cj(s,t){const r=Be(s);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let n;return r.Ur.getTargetData(a,t).next(i=>i?(n=i,me.resolve(n)):r.Ur.allocateTargetId(a).next(l=>(n=new da(t,l,"TargetPurposeListen",a.currentSequenceNumber),r.Ur.addTargetData(a,n).next(()=>n))))}).then(a=>{const n=r.os.get(a.targetId);return(n===null||a.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.os=r.os.insert(a.targetId,a),r._s.set(t,a.targetId)),a})}async function Jc(s,t,r){const a=Be(s),n=a.os.get(t),i=r?"readwrite":"readwrite-primary";try{r||await a.persistence.runTransaction("Release target",i,l=>a.persistence.referenceDelegate.removeTarget(l,n))}catch(l){if(!Ui(l))throw l;_e("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}a.os=a.os.remove(t),a._s.delete(n.target)}function o0(s,t,r){const a=Be(s);let n=Ue.min(),i=Qe();return a.persistence.runTransaction("Execute query","readwrite",l=>function(d,h,u){const m=Be(d),g=m._s.get(u);return g!==void 0?me.resolve(m.os.get(g)):m.Ur.getTargetData(h,u)}(a,l,Nr(t)).next(c=>{if(c)return n=c.lastLimboFreeSnapshotVersion,a.Ur.getMatchingKeysForTargetId(l,c.targetId).next(d=>{i=d})}).next(()=>a.ss.getDocumentsMatchingQuery(l,t,r?n:Ue.min(),r?i:Qe())).next(c=>(Dj(a,Nv(t),c),{documents:c,Ts:i})))}function Dj(s,t,r){let a=s.us.get(t)||Ue.min();r.forEach((n,i)=>{i.readTime.compareTo(a)>0&&(a=i.readTime)}),s.us.set(t,a)}class c0{constructor(){this.activeTargetIds=Sv()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Rj{constructor(){this.so=new c0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,a){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,a){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new c0,Promise.resolve()}handleUserChange(t,r,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function gc(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="WebChannelConnection";class Lj extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const a=r.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=a+"://"+r.host,this.vo=`projects/${n}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get Fo(){return!1}Mo(r,a,n,i,l){const c=gc(),d=this.xo(r,a.toUriEncodedString());_e("RestConnection",`Sending RPC '${r}' ${c}:`,d,n);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,l),this.No(r,d,h,n).then(u=>(_e("RestConnection",`Received RPC '${r}' ${c}: `,u),u),u=>{throw wn("RestConnection",`RPC '${r}' ${c} failed with error: `,u,"url: ",d,"request:",n),u})}Lo(r,a,n,i,l,c){return this.Mo(r,a,n,i,l)}Oo(r,a,n){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+On}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((i,l)=>r[l]=i),n&&n.headers.forEach((i,l)=>r[l]=i)}xo(r,a){const n=Mj[r];return`${this.Do}/v1/${a}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,a,n){const i=gc();return new Promise((l,c)=>{const d=new Xx;d.setWithCredentials(!0),d.listenOnce(Jx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case kl.NO_ERROR:const u=d.getResponseJson();_e(vs,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),l(u);break;case kl.TIMEOUT:_e(vs,`RPC '${t}' ${i} timed out`),c(new Ne(xe.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const m=d.getStatus();if(_e(vs,`RPC '${t}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let g=d.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const v=function(I){const C=I.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(C)>=0?C:xe.UNKNOWN}(y.status);c(new Ne(v,y.message))}else c(new Ne(xe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ne(xe.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{_e(vs,`RPC '${t}' ${i} completed.`)}});const h=JSON.stringify(n);_e(vs,`RPC '${t}' ${i} sending request:`,n),d.send(r,"POST",h,a,15)})}Bo(t,r,a){const n=gc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=tm(),c=em(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,a),d.encodeInitMessageHeaders=!0;const u=i.join("");_e(vs,`Creating RPC '${t}' stream ${n}: ${u}`,d);const m=l.createWebChannel(u,d);let g=!1,y=!1;const v=new Oj({Io:I=>{y?_e(vs,`Not sending because RPC '${t}' stream ${n} is closed:`,I):(g||(_e(vs,`Opening RPC '${t}' stream ${n} transport.`),m.open(),g=!0),_e(vs,`RPC '${t}' stream ${n} sending:`,I),m.send(I))},To:()=>m.close()}),E=(I,C,T)=>{I.listen(C,D=>{try{T(D)}catch(M){setTimeout(()=>{throw M},0)}})};return E(m,li.EventType.OPEN,()=>{y||(_e(vs,`RPC '${t}' stream ${n} transport opened.`),v.yo())}),E(m,li.EventType.CLOSE,()=>{y||(y=!0,_e(vs,`RPC '${t}' stream ${n} transport closed`),v.So())}),E(m,li.EventType.ERROR,I=>{y||(y=!0,wn(vs,`RPC '${t}' stream ${n} transport errored:`,I),v.So(new Ne(xe.UNAVAILABLE,"The operation could not be completed")))}),E(m,li.EventType.MESSAGE,I=>{var C;if(!y){const T=I.data[0];ft(!!T);const D=T,M=D.error||((C=D[0])===null||C===void 0?void 0:C.error);if(M){_e(vs,`RPC '${t}' stream ${n} received error:`,M);const se=M.status;let L=function(w){const j=Gt[w];if(j!==void 0)return Em(j)}(se),N=M.message;L===void 0&&(L=xe.INTERNAL,N="Unknown error status: "+se+" with message "+M.message),y=!0,v.So(new Ne(L,N)),m.close()}else _e(vs,`RPC '${t}' stream ${n} received:`,T),v.bo(T)}}),E(c,Zx.STAT_EVENT,I=>{I.stat===Uc.PROXY?_e(vs,`RPC '${t}' stream ${n} detected buffering proxy`):I.stat===Uc.NOPROXY&&_e(vs,`RPC '${t}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function pc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(s){return new Kv(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,r,a=1e3,n=1.5,i=6e4){this.ui=t,this.timerId=r,this.ko=a,this.qo=n,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),a=Math.max(0,Date.now()-this.Uo),n=Math.max(0,r-a);n>0&&_e("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,n,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,r,a,n,i,l,c,d){this.ui=t,this.Ho=a,this.Jo=n,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Lm(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===xe.RESOURCE_EXHAUSTED?(qr(r.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,n])=>{this.Yo===r&&this.P_(a,n)},a=>{t(()=>{const n=new Ne(xe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.I_(n)})})}P_(t,r){const a=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{a(()=>this.listener.Eo())}),this.stream.Ro(()=>{a(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(n=>{a(()=>this.I_(n))}),this.stream.onMessage(n=>{a(()=>++this.e_==1?this.E_(n):this.onNext(n))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return _e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vj extends Vm{constructor(t,r,a,n,i,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,n,l),this.serializer=i}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=Xv(this.serializer,t),a=function(i){if(!("targetChange"in i))return Ue.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?kr(l.readTime):Ue.min()}(t);return this.listener.d_(r,a)}A_(t){const r={};r.database=Xc(this.serializer),r.addTarget=function(i,l){let c;const d=l.target;if(c=Hc(d)?{documents:ej(i,d)}:{query:tj(i,d)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Sm(i,l.resumeToken);const h=Kc(i,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Ue.min())>0){c.readTime=zl(i,l.snapshotVersion.toTimestamp());const h=Kc(i,l.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,t);const a=rj(this.serializer,t);a&&(r.labels=a),this.a_(r)}R_(t){const r={};r.database=Xc(this.serializer),r.removeTarget=t,this.a_(r)}}class Fj extends Vm{constructor(t,r,a,n,i,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,n,l),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return ft(!!t.streamToken),this.lastStreamToken=t.streamToken,ft(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=Zv(t.writeResults,t.commitTime),a=kr(t.commitTime);return this.listener.g_(a,r)}p_(){const t={};t.database=Xc(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(a=>Jv(this.serializer,a))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj extends class{}{constructor(t,r,a,n){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=a,this.serializer=n,this.y_=!1}w_(){if(this.y_)throw new Ne(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,a,n){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Mo(t,Yc(r,a),n,i,l)).catch(i=>{throw i.name==="FirebaseError"?(i.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(xe.UNKNOWN,i.toString())})}Lo(t,r,a,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(t,Yc(r,a),n,l,c,i)).catch(l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(xe.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Bj{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(r),this.D_=!1):_e("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(t,r,a,n,i){this.localStore=t,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(l=>{a.enqueueAndForget(async()=>{Ka(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),await async function(d){const h=Be(d);h.L_.add(4),await qi(h),h.q_.set("Unknown"),h.L_.delete(4),await $o(h)}(this))})}),this.q_=new Bj(a,n)}}async function $o(s){if(Ka(s))for(const t of s.B_)await t(!0)}async function qi(s){for(const t of s.B_)await t(!1)}function Fm(s,t){const r=Be(s);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),Kd(r)?Gd(r):Fn(r).r_()&&Wd(r,t))}function Hd(s,t){const r=Be(s),a=Fn(r);r.N_.delete(t),a.r_()&&Um(r,t),r.N_.size===0&&(a.r_()?a.o_():Ka(r)&&r.q_.set("Unknown"))}function Wd(s,t){if(s.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ue.min())>0){const r=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Fn(s).A_(t)}function Um(s,t){s.Q_.xe(t),Fn(s).R_(t)}function Gd(s){s.Q_=new qv({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>s.N_.get(t)||null,tt:()=>s.datastore.serializer.databaseId}),Fn(s).start(),s.q_.v_()}function Kd(s){return Ka(s)&&!Fn(s).n_()&&s.N_.size>0}function Ka(s){return Be(s).L_.size===0}function Bm(s){s.Q_=void 0}async function qj(s){s.q_.set("Online")}async function Hj(s){s.N_.forEach((t,r)=>{Wd(s,t)})}async function Wj(s,t){Bm(s),Kd(s)?(s.q_.M_(t),Gd(s)):s.q_.set("Unknown")}async function Gj(s,t,r){if(s.q_.set("Online"),t instanceof Tm&&t.state===2&&t.cause)try{await async function(n,i){const l=i.cause;for(const c of i.targetIds)n.N_.has(c)&&(await n.remoteSyncer.rejectListen(c,l),n.N_.delete(c),n.Q_.removeTarget(c))}(s,t)}catch(a){_e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),a),await ql(s,a)}else if(t instanceof $l?s.Q_.Ke(t):t instanceof $m?s.Q_.He(t):s.Q_.We(t),!r.isEqual(Ue.min()))try{const a=await Om(s.localStore);r.compareTo(a)>=0&&await function(i,l){const c=i.Q_.rt(l);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const u=i.N_.get(h);u&&i.N_.set(h,u.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,h)=>{const u=i.N_.get(d);if(!u)return;i.N_.set(d,u.withResumeToken(ps.EMPTY_BYTE_STRING,u.snapshotVersion)),Um(i,d);const m=new da(u.target,d,h,u.sequenceNumber);Wd(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(s,r)}catch(a){_e("RemoteStore","Failed to raise snapshot:",a),await ql(s,a)}}async function ql(s,t,r){if(!Ui(t))throw t;s.L_.add(1),await qi(s),s.q_.set("Offline"),r||(r=()=>Om(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{_e("RemoteStore","Retrying IndexedDB access"),await r(),s.L_.delete(1),await $o(s)})}function zm(s,t){return t().catch(r=>ql(s,r,t))}async function To(s){const t=Be(s),r=ya(t);let a=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Kj(t);)try{const n=await Ij(t.localStore,a);if(n===null){t.O_.length===0&&r.o_();break}a=n.batchId,Yj(t,n)}catch(n){await ql(t,n)}qm(t)&&Hm(t)}function Kj(s){return Ka(s)&&s.O_.length<10}function Yj(s,t){s.O_.push(t);const r=ya(s);r.r_()&&r.V_&&r.m_(t.mutations)}function qm(s){return Ka(s)&&!ya(s).n_()&&s.O_.length>0}function Hm(s){ya(s).start()}async function Qj(s){ya(s).p_()}async function Xj(s){const t=ya(s);for(const r of s.O_)t.m_(r.mutations)}async function Jj(s,t,r){const a=s.O_.shift(),n=Vd.from(a,t,r);await zm(s,()=>s.remoteSyncer.applySuccessfulWrite(n)),await To(s)}async function Zj(s,t){t&&ya(s).V_&&await async function(a,n){if(function(l){return Uv(l)&&l!==xe.ABORTED}(n.code)){const i=a.O_.shift();ya(a).s_(),await zm(a,()=>a.remoteSyncer.rejectFailedWrite(i.batchId,n)),await To(a)}}(s,t),qm(s)&&Hm(s)}async function h0(s,t){const r=Be(s);r.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const a=Ka(r);r.L_.add(3),await qi(r),a&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await $o(r)}async function ew(s,t){const r=Be(s);t?(r.L_.delete(2),await $o(r)):t||(r.L_.add(2),await qi(r),r.q_.set("Unknown"))}function Fn(s){return s.K_||(s.K_=function(r,a,n){const i=Be(r);return i.w_(),new Vj(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(s.datastore,s.asyncQueue,{Eo:qj.bind(null,s),Ro:Hj.bind(null,s),mo:Wj.bind(null,s),d_:Gj.bind(null,s)}),s.B_.push(async t=>{t?(s.K_.s_(),Kd(s)?Gd(s):s.q_.set("Unknown")):(await s.K_.stop(),Bm(s))})),s.K_}function ya(s){return s.U_||(s.U_=function(r,a,n){const i=Be(r);return i.w_(),new Fj(a,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Qj.bind(null,s),mo:Zj.bind(null,s),f_:Xj.bind(null,s),g_:Jj.bind(null,s)}),s.B_.push(async t=>{t?(s.U_.s_(),await To(s)):(await s.U_.stop(),s.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,r,a,n,i){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=a,this.op=n,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,a,n,i){const l=Date.now()+a,c=new Yd(t,r,l,n,i);return c.start(a),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(xe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qd(s,t){if(qr("AsyncQueue",`${t}: ${s}`),Ui(s))return new Ne(xe.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.comparator=t?(r,a)=>t(r,a)||Ie.comparator(r.key,a.key):(r,a)=>Ie.comparator(r.key,a.key),this.keyedMap=oi(),this.sortedSet=new Vt(this.comparator)}static emptySet(t){return new gn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,a)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof gn)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;r.hasNext();){const n=r.getNext().key,i=a.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const a=new gn;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=r,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.W_=new Vt(Ie.comparator)}track(t){const r=t.doc.key,a=this.W_.get(r);a?t.type!==0&&a.type===3?this.W_=this.W_.insert(r,t):t.type===3&&a.type!==1?this.W_=this.W_.insert(r,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.W_=this.W_.remove(r):t.type===1&&a.type===2?this.W_=this.W_.insert(r,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):Ve():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,a)=>{t.push(a)}),t}}class $n{constructor(t,r,a,n,i,l,c,d,h){this.query=t,this.docs=r,this.oldDocs=a,this.docChanges=n,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(t,r,a,n,i){const l=[];return r.forEach(c=>{l.push({type:0,doc:c})}),new $n(t,r,gn.emptySet(r),l,a,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,a=t.docChanges;if(r.length!==a.length)return!1;for(let n=0;n<r.length;n++)if(r[n].type!==a[n].type||!r[n].doc.isEqual(a[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class sw{constructor(){this.queries=x0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,a){const n=Be(r),i=n.queries;n.queries=x0(),i.forEach((l,c)=>{for(const d of c.j_)d.onError(a)})})(this,new Ne(xe.ABORTED,"Firestore shutting down"))}}function x0(){return new Vn(s=>mm(s),jo)}async function Xd(s,t){const r=Be(s);let a=3;const n=t.query;let i=r.queries.get(n);i?!i.H_()&&t.J_()&&(a=2):(i=new tw,a=t.J_()?0:1);try{switch(a){case 0:i.z_=await r.onListen(n,!0);break;case 1:i.z_=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(l){const c=Qd(l,`Initialization of query '${cn(t.query)}' failed`);return void t.onError(c)}r.queries.set(n,i),i.j_.push(t),t.Z_(r.onlineState),i.z_&&t.X_(i.z_)&&Zd(r)}async function Jd(s,t){const r=Be(s),a=t.query;let n=3;const i=r.queries.get(a);if(i){const l=i.j_.indexOf(t);l>=0&&(i.j_.splice(l,1),i.j_.length===0?n=t.J_()?0:1:!i.H_()&&t.J_()&&(n=2))}switch(n){case 0:return r.queries.delete(a),r.onUnlisten(a,!0);case 1:return r.queries.delete(a),r.onUnlisten(a,!1);case 2:return r.onLastRemoteStoreUnlisten(a);default:return}}function rw(s,t){const r=Be(s);let a=!1;for(const n of t){const i=n.query,l=r.queries.get(i);if(l){for(const c of l.j_)c.X_(n)&&(a=!0);l.z_=n}}a&&Zd(r)}function aw(s,t,r){const a=Be(s),n=a.queries.get(t);if(n)for(const i of n.j_)i.onError(r);a.queries.delete(t)}function Zd(s){s.Y_.forEach(t=>{t.next()})}var Zc,m0;(m0=Zc||(Zc={})).ea="default",m0.Cache="cache";class eh{constructor(t,r,a){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=a||{}}X_(t){if(!this.options.includeMetadataChanges){const a=[];for(const n of t.docChanges)n.type!==3&&a.push(n);t=new $n(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){if(!t.fromCache||!this.J_())return!0;const a=r!=="Offline";return(!this.options._a||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(t){t=$n.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Zc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this.key=t}}class Gm{constructor(t){this.key=t}}class nw{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qe(),this.mutatedKeys=Qe(),this.Aa=gm(t),this.Ra=new gn(this.Aa)}get Va(){return this.Ta}ma(t,r){const a=r?r.fa:new u0,n=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,l=n,c=!1;const d=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,h=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,m)=>{const g=n.get(u),y=wo(this.query,m)?m:null,v=!!g&&this.mutatedKeys.has(g.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;g&&y?g.data.isEqual(y.data)?v!==E&&(a.track({type:3,doc:y}),I=!0):this.ga(g,y)||(a.track({type:2,doc:y}),I=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!g&&y?(a.track({type:0,doc:y}),I=!0):g&&!y&&(a.track({type:1,doc:g}),I=!0,(d||h)&&(c=!0)),I&&(y?(l=l.add(y),i=E?i.add(u):i.delete(u)):(l=l.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const u=this.query.limitType==="F"?l.last():l.first();l=l.delete(u.key),i=i.delete(u.key),a.track({type:1,doc:u})}return{Ra:l,fa:a,ns:c,mutatedKeys:i}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,a,n){const i=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const l=t.fa.G_();l.sort((u,m)=>function(y,v){const E=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return E(y)-E(v)}(u.type,m.type)||this.Aa(u.doc,m.doc)),this.pa(a),n=n!=null&&n;const c=r&&!n?this.ya():[],d=this.da.size===0&&this.current&&!n?1:0,h=d!==this.Ea;return this.Ea=d,l.length!==0||h?{snapshot:new $n(this.query,t.Ra,i,l,t.mutatedKeys,d===0,h,!1,!!a&&a.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Qe(),this.Ra.forEach(a=>{this.Sa(a.key)&&(this.da=this.da.add(a.key))});const r=[];return t.forEach(a=>{this.da.has(a)||r.push(new Gm(a))}),this.da.forEach(a=>{t.has(a)||r.push(new Wm(a))}),r}ba(t){this.Ta=t.Ts,this.da=Qe();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return $n.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class iw{constructor(t,r,a){this.query=t,this.targetId=r,this.view=a}}class lw{constructor(t){this.key=t,this.va=!1}}class ow{constructor(t,r,a,n,i,l){this.localStore=t,this.remoteStore=r,this.eventManager=a,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Vn(c=>mm(c),jo),this.Ma=new Map,this.xa=new Set,this.Oa=new Vt(Ie.comparator),this.Na=new Map,this.La=new Bd,this.Ba={},this.ka=new Map,this.qa=En.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function cw(s,t,r=!0){const a=Zm(s);let n;const i=a.Fa.get(t);return i?(a.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.Da()):n=await Km(a,t,r,!0),n}async function dw(s,t){const r=Zm(s);await Km(r,t,!0,!1)}async function Km(s,t,r,a){const n=await Cj(s.localStore,Nr(t)),i=n.targetId,l=s.sharedClientState.addLocalQueryTarget(i,r);let c;return a&&(c=await hw(s,t,i,l==="current",n.resumeToken)),s.isPrimaryClient&&r&&Fm(s.remoteStore,n),c}async function hw(s,t,r,a,n){s.Ka=(m,g,y)=>async function(E,I,C,T){let D=I.view.ma(C);D.ns&&(D=await o0(E.localStore,I.query,!1).then(({documents:N})=>I.view.ma(N,D)));const M=T&&T.targetChanges.get(I.targetId),se=T&&T.targetMismatches.get(I.targetId)!=null,L=I.view.applyChanges(D,E.isPrimaryClient,M,se);return p0(E,I.targetId,L.wa),L.snapshot}(s,m,g,y);const i=await o0(s.localStore,t,!0),l=new nw(t,i.Ts),c=l.ma(i.documents),d=zi.createSynthesizedTargetChangeForCurrentChange(r,a&&s.onlineState!=="Offline",n),h=l.applyChanges(c,s.isPrimaryClient,d);p0(s,r,h.wa);const u=new iw(t,r,l);return s.Fa.set(t,u),s.Ma.has(r)?s.Ma.get(r).push(t):s.Ma.set(r,[t]),h.snapshot}async function uw(s,t,r){const a=Be(s),n=a.Fa.get(t),i=a.Ma.get(n.targetId);if(i.length>1)return a.Ma.set(n.targetId,i.filter(l=>!jo(l,t))),void a.Fa.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(n.targetId),a.sharedClientState.isActiveQueryTarget(n.targetId)||await Jc(a.localStore,n.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(n.targetId),r&&Hd(a.remoteStore,n.targetId),ed(a,n.targetId)}).catch(Fi)):(ed(a,n.targetId),await Jc(a.localStore,n.targetId,!0))}async function xw(s,t){const r=Be(s),a=r.Fa.get(t),n=r.Ma.get(a.targetId);r.isPrimaryClient&&n.length===1&&(r.sharedClientState.removeLocalQueryTarget(a.targetId),Hd(r.remoteStore,a.targetId))}async function mw(s,t,r){const a=jw(s);try{const n=await function(l,c){const d=Be(l),h=as.now(),u=c.reduce((y,v)=>y.add(v.key),Qe());let m,g;return d.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=Hr(),E=Qe();return d.cs.getEntries(y,u).next(I=>{v=I,v.forEach((C,T)=>{T.isValidDocument()||(E=E.add(C))})}).next(()=>d.localDocuments.getOverlayedDocuments(y,v)).next(I=>{m=I;const C=[];for(const T of c){const D=Mv(T,m.get(T.key).overlayedDocument);D!=null&&C.push(new wa(T.key,D,im(D.value.mapValue),Xs.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,C,c)}).next(I=>{g=I;const C=I.applyToLocalDocumentSet(m,E);return d.documentOverlayCache.saveOverlays(y,I.batchId,C)})}).then(()=>({batchId:g.batchId,changes:bm(m)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(n.batchId),function(l,c,d){let h=l.Ba[l.currentUser.toKey()];h||(h=new Vt(dt)),h=h.insert(c,d),l.Ba[l.currentUser.toKey()]=h}(a,n.batchId,r),await Hi(a,n.changes),await To(a.remoteStore)}catch(n){const i=Qd(n,"Failed to persist write");r.reject(i)}}async function Ym(s,t){const r=Be(s);try{const a=await Sj(r.localStore,t);t.targetChanges.forEach((n,i)=>{const l=r.Na.get(i);l&&(ft(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?l.va=!0:n.modifiedDocuments.size>0?ft(l.va):n.removedDocuments.size>0&&(ft(l.va),l.va=!1))}),await Hi(r,a,t)}catch(a){await Fi(a)}}function g0(s,t,r){const a=Be(s);if(a.isPrimaryClient&&r===0||!a.isPrimaryClient&&r===1){const n=[];a.Fa.forEach((i,l)=>{const c=l.view.Z_(t);c.snapshot&&n.push(c.snapshot)}),function(l,c){const d=Be(l);d.onlineState=c;let h=!1;d.queries.forEach((u,m)=>{for(const g of m.j_)g.Z_(c)&&(h=!0)}),h&&Zd(d)}(a.eventManager,t),n.length&&a.Ca.d_(n),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function gw(s,t,r){const a=Be(s);a.sharedClientState.updateQueryState(t,"rejected",r);const n=a.Na.get(t),i=n&&n.key;if(i){let l=new Vt(Ie.comparator);l=l.insert(i,ks.newNoDocument(i,Ue.min()));const c=Qe().add(i),d=new _o(Ue.min(),new Map,new Vt(dt),l,c);await Ym(a,d),a.Oa=a.Oa.remove(i),a.Na.delete(t),th(a)}else await Jc(a.localStore,t,!1).then(()=>ed(a,t,r)).catch(Fi)}async function pw(s,t){const r=Be(s),a=t.batch.batchId;try{const n=await Tj(r.localStore,t);Xm(r,a,null),Qm(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),await Hi(r,n)}catch(n){await Fi(n)}}async function bw(s,t,r){const a=Be(s);try{const n=await function(l,c){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let u;return d.mutationQueue.lookupMutationBatch(h,c).next(m=>(ft(m!==null),u=m.keys(),d.mutationQueue.removeMutationBatch(h,m))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,u,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,u)).next(()=>d.localDocuments.getDocuments(h,u))})}(a.localStore,t);Xm(a,t,r),Qm(a,t),a.sharedClientState.updateMutationState(t,"rejected",r),await Hi(a,n)}catch(n){await Fi(n)}}function Qm(s,t){(s.ka.get(t)||[]).forEach(r=>{r.resolve()}),s.ka.delete(t)}function Xm(s,t,r){const a=Be(s);let n=a.Ba[a.currentUser.toKey()];if(n){const i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),a.Ba[a.currentUser.toKey()]=n}}function ed(s,t,r=null){s.sharedClientState.removeLocalQueryTarget(t);for(const a of s.Ma.get(t))s.Fa.delete(a),r&&s.Ca.$a(a,r);s.Ma.delete(t),s.isPrimaryClient&&s.La.gr(t).forEach(a=>{s.La.containsKey(a)||Jm(s,a)})}function Jm(s,t){s.xa.delete(t.path.canonicalString());const r=s.Oa.get(t);r!==null&&(Hd(s.remoteStore,r),s.Oa=s.Oa.remove(t),s.Na.delete(r),th(s))}function p0(s,t,r){for(const a of r)a instanceof Wm?(s.La.addReference(a.key,t),fw(s,a)):a instanceof Gm?(_e("SyncEngine","Document no longer in limbo: "+a.key),s.La.removeReference(a.key,t),s.La.containsKey(a.key)||Jm(s,a.key)):Ve()}function fw(s,t){const r=t.key,a=r.path.canonicalString();s.Oa.get(r)||s.xa.has(a)||(_e("SyncEngine","New document in limbo: "+r),s.xa.add(a),th(s))}function th(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const t=s.xa.values().next().value;s.xa.delete(t);const r=new Ie(It.fromString(t)),a=s.qa.next();s.Na.set(a,new lw(r)),s.Oa=s.Oa.insert(r,a),Fm(s.remoteStore,new da(Nr(vo(r.path)),a,"TargetPurposeLimboResolution",Id.oe))}}async function Hi(s,t,r){const a=Be(s),n=[],i=[],l=[];a.Fa.isEmpty()||(a.Fa.forEach((c,d)=>{l.push(a.Ka(d,t,r).then(h=>{var u;if((h||r)&&a.isPrimaryClient){const m=h?!h.fromCache:(u=r==null?void 0:r.targetChanges.get(d.targetId))===null||u===void 0?void 0:u.current;a.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){n.push(h);const m=qd.Wi(d.targetId,h);i.push(m)}}))}),await Promise.all(l),a.Ca.d_(n),await async function(d,h){const u=Be(d);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>me.forEach(h,g=>me.forEach(g.$i,y=>u.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>me.forEach(g.Ui,y=>u.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!Ui(m))throw m;_e("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const y=u.os.get(g),v=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(v);u.os=u.os.insert(g,E)}}}(a.localStore,i))}async function yw(s,t){const r=Be(s);if(!r.currentUser.isEqual(t)){_e("SyncEngine","User change. New user:",t.toKey());const a=await Mm(r.localStore,t);r.currentUser=t,function(i,l){i.ka.forEach(c=>{c.forEach(d=>{d.reject(new Ne(xe.CANCELLED,l))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Hi(r,a.hs)}}function vw(s,t){const r=Be(s),a=r.Na.get(t);if(a&&a.va)return Qe().add(a.key);{let n=Qe();const i=r.Ma.get(t);if(!i)return n;for(const l of i){const c=r.Fa.get(l);n=n.unionWith(c.view.Va)}return n}}function Zm(s){const t=Be(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ym.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gw.bind(null,t),t.Ca.d_=rw.bind(null,t.eventManager),t.Ca.$a=aw.bind(null,t.eventManager),t}function jw(s){const t=Be(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bw.bind(null,t),t}class Hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Eo(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return $j(this.persistence,new _j,t.initialUser,this.serializer)}Ga(t){return new wj(zd.Zr,this.serializer)}Wa(t){return new Rj}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hl.provider={build:()=>new Hl};class td{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>g0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=yw.bind(null,this.syncEngine),await ew(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new sw}()}createDatastore(t){const r=Eo(t.databaseInfo.databaseId),a=function(i){return new Lj(i)}(t.databaseInfo);return function(i,l,c,d){return new Uj(i,l,c,d)}(t.authCredentials,t.appCheckCredentials,a,r)}createRemoteStore(t){return function(a,n,i,l,c){return new zj(a,n,i,l,c)}(this.localStore,this.datastore,t.asyncQueue,r=>g0(this.syncEngine,r,0),function(){return d0.D()?new d0:new Pj}())}createSyncEngine(t,r){return function(n,i,l,c,d,h,u){const m=new ow(n,i,l,c,d,h);return u&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(n){const i=Be(n);_e("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await qi(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}td.provider={build:()=>new td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):qr("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,r,a,n,i){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=a,this.databaseInfo=n,this.user=ws.UNAUTHENTICATED,this.clientId=rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(a,async l=>{_e("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(a,l=>(_e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=Qd(r,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function bc(s,t){s.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const r=s.configuration;await t.initialize(r);let a=r.initialUser;s.setCredentialChangeListener(async n=>{a.isEqual(n)||(await Mm(t.localStore,n),a=n)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function b0(s,t){s.asyncQueue.verifyOperationInProgress();const r=await Nw(s);_e("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,s.configuration),s.setCredentialChangeListener(a=>h0(t.remoteStore,a)),s.setAppCheckTokenChangeListener((a,n)=>h0(t.remoteStore,n)),s._onlineComponents=t}async function Nw(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{await bc(s,s._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(n){return n.name==="FirebaseError"?n.code===xe.FAILED_PRECONDITION||n.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(r))throw r;wn("Error using user provided cache. Falling back to memory cache: "+r),await bc(s,new Hl)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),await bc(s,new Hl);return s._offlineComponents}async function eg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),await b0(s,s._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),await b0(s,new td))),s._onlineComponents}function kw(s){return eg(s).then(t=>t.syncEngine)}async function Wl(s){const t=await eg(s),r=t.eventManager;return r.onListen=cw.bind(null,t.syncEngine),r.onUnlisten=uw.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=dw.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=xw.bind(null,t.syncEngine),r}function _w(s,t,r={}){const a=new Lr;return s.asyncQueue.enqueueAndForget(async()=>function(i,l,c,d,h){const u=new sh({next:g=>{u.Za(),l.enqueueAndForget(()=>Jd(i,m));const y=g.docs.has(c);!y&&g.fromCache?h.reject(new Ne(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&d&&d.source==="server"?h.reject(new Ne(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new eh(vo(c.path),u,{includeMetadataChanges:!0,_a:!0});return Xd(i,m)}(await Wl(s),s.asyncQueue,t,r,a)),a.promise}function Ew(s,t,r={}){const a=new Lr;return s.asyncQueue.enqueueAndForget(async()=>function(i,l,c,d,h){const u=new sh({next:g=>{u.Za(),l.enqueueAndForget(()=>Jd(i,m)),g.fromCache&&d.source==="server"?h.reject(new Ne(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new eh(c,u,{includeMetadataChanges:!0,_a:!0});return Xd(i,m)}(await Wl(s),s.asyncQueue,t,r,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(s,t,r){if(!r)throw new Ne(xe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function $w(s,t,r,a){if(t===!0&&a===!0)throw new Ne(xe.INVALID_ARGUMENT,`${s} and ${r} cannot be used together.`)}function y0(s){if(!Ie.isDocumentKey(s))throw new Ne(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function v0(s){if(Ie.isDocumentKey(s))throw new Ne(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function So(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Ve()}function zs(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Ne(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=So(s);throw new Ne(xe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(t){var r,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Ne(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ne(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$w("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tg((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ne(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,n){return a.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ao{constructor(t,r,a,n){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=a,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ne(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(t),t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Hy;switch(a.type){case"firstParty":return new Yy(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ne(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const a=f0.get(r);a&&(_e("ComponentProvider","Removing Datastore"),f0.delete(r),a.terminate())}(this),Promise.resolve()}}function Tw(s,t,r,a={}){var n;const i=(s=zs(s,Ao))._getSettings(),l=`${t}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==l&&wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},i),{host:l,ssl:!1})),a.mockUserToken){let c,d;if(typeof a.mockUserToken=="string")c=a.mockUserToken,d=ws.MOCK_USER;else{c=qx(a.mockUserToken,(n=s._app)===null||n===void 0?void 0:n.options.projectId);const h=a.mockUserToken.sub||a.mockUserToken.user_id;if(!h)throw new Ne(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ws(h)}s._authCredentials=new Wy(new sm(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(t,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Na(this.firestore,t,this._query)}}class $s{constructor(t,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $s(this.firestore,t,this._key)}}class xa extends Na{constructor(t,r,a){super(t,r,vo(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $s(this.firestore,null,new Ie(t))}withConverter(t){return new xa(this.firestore,t,this._path)}}function rt(s,t,...r){if(s=qt(s),sg("collection","path",t),s instanceof Ao){const a=It.fromString(t,...r);return v0(a),new xa(s,null,a)}{if(!(s instanceof $s||s instanceof xa))throw new Ne(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(It.fromString(t,...r));return v0(a),new xa(s.firestore,null,a)}}function Ze(s,t,...r){if(s=qt(s),arguments.length===1&&(t=rm.newId()),sg("doc","path",t),s instanceof Ao){const a=It.fromString(t,...r);return y0(a),new $s(s,null,new Ie(a))}{if(!(s instanceof $s||s instanceof xa))throw new Ne(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(It.fromString(t,...r));return y0(a),new $s(s.firestore,s instanceof xa?s.converter:null,new Ie(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Lm(this,"async_queue_retry"),this.Vu=()=>{const a=pc();a&&_e("AsyncQueue","Visibility state changed to "+a.visibilityState),this.t_.jo()},this.mu=t;const r=pc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=pc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Lr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ui(t))throw t;_e("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(a=>{this.Eu=a,this.du=!1;const n=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(a);throw qr("INTERNAL UNHANDLED ERROR: ",n),a}).then(a=>(this.du=!1,a))));return this.mu=r,r}enqueueAfterDelay(t,r,a){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const n=Yd.createAndSchedule(this,t,r,a,i=>this.yu(i));return this.Tu.push(n),n}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}function N0(s){return function(r,a){if(typeof r!="object"||r===null)return!1;const n=r;for(const i of a)if(i in n&&typeof n[i]=="function")return!0;return!1}(s,["next","error","complete"])}class Wr extends Ao{constructor(t,r,a,n){super(t,r,a,n),this.type="firestore",this._queue=new w0,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w0(t),this._firestoreClient=void 0,await t}}}function Sw(s,t){const r=typeof s=="object"?s:Sd(),a=typeof s=="string"?s:"(default)",n=fo(r,"firestore").getImmediate({identifier:a});if(!n._initialized){const i=Ux("firestore");i&&Tw(n,...i)}return n}function Io(s){if(s._terminated)throw new Ne(xe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Aw(s),s._firestoreClient}function Aw(s){var t,r,a;const n=s._freezeSettings(),i=function(c,d,h,u){return new ov(c,d,h,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,tg(u.experimentalLongPollingOptions),u.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,n);s._componentsProvider||!((r=n.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((a=n.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),s._firestoreClient=new ww(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tn(ps.fromBase64String(t))}catch(r){throw new Ne(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Tn(ps.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ne(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xs(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ne(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ne(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,n){if(a.length!==n.length)return!1;for(let i=0;i<a.length;++i)if(a[i]!==n[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=/^__.*__$/;class Cw{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return this.fieldMask!==null?new wa(t,this.data,this.fieldMask,r,this.fieldTransforms):new Bi(t,this.data,r,this.fieldTransforms)}}class rg{constructor(t,r,a){this.data=t,this.fieldMask=r,this.fieldTransforms=a}toMutation(t,r){return new wa(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function ag(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class ih{constructor(t,r,a,n,i,l){this.settings=t,this.databaseId=r,this.serializer=a,this.ignoreUndefinedProperties=n,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new ih(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),n=this.Fu({path:a,xu:!1});return n.Ou(t),n}Nu(t){var r;const a=(r=this.path)===null||r===void 0?void 0:r.child(t),n=this.Fu({path:a,xu:!1});return n.vu(),n}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Gl(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(ag(this.Cu)&&Iw.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class Dw{constructor(t,r,a){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=a||Eo(t)}Qu(t,r,a,n=!1){return new ih({Cu:t,methodName:r,qu:a,path:xs.emptyPath(),xu:!1,ku:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Do(s){const t=s._freezeSettings(),r=Eo(s._databaseId);return new Dw(s._databaseId,!!t.ignoreUndefinedProperties,r)}function ng(s,t,r,a,n,i={}){const l=s.Qu(i.merge||i.mergeFields?2:0,t,r,n);lh("Data must be an object, but it was:",l,a);const c=ig(a,l);let d,h;if(i.merge)d=new Gs(l.fieldMask),h=l.fieldTransforms;else if(i.mergeFields){const u=[];for(const m of i.mergeFields){const g=sd(t,m,r);if(!l.contains(g))throw new Ne(xe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);og(u,g)||u.push(g)}d=new Gs(u),h=l.fieldTransforms.filter(m=>d.covers(m.field))}else d=null,h=l.fieldTransforms;return new Cw(new Bs(c),d,h)}class Ro extends rh{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ro}}function Rw(s,t,r,a){const n=s.Qu(1,t,r);lh("Data must be an object, but it was:",n,a);const i=[],l=Bs.empty();Ga(a,(d,h)=>{const u=oh(t,d,r);h=qt(h);const m=n.Nu(u);if(h instanceof Ro)i.push(u);else{const g=Wi(h,m);g!=null&&(i.push(u),l.set(u,g))}});const c=new Gs(i);return new rg(l,c,n.fieldTransforms)}function Pw(s,t,r,a,n,i){const l=s.Qu(1,t,r),c=[sd(t,a,r)],d=[n];if(i.length%2!=0)throw new Ne(xe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(sd(t,i[g])),d.push(i[g+1]);const h=[],u=Bs.empty();for(let g=c.length-1;g>=0;--g)if(!og(h,c[g])){const y=c[g];let v=d[g];v=qt(v);const E=l.Nu(y);if(v instanceof Ro)h.push(y);else{const I=Wi(v,E);I!=null&&(h.push(y),u.set(y,I))}}const m=new Gs(h);return new rg(u,m,l.fieldTransforms)}function Mw(s,t,r,a=!1){return Wi(r,s.Qu(a?4:3,t))}function Wi(s,t){if(lg(s=qt(s)))return lh("Unsupported field value:",t,s),ig(s,t);if(s instanceof rh)return function(a,n){if(!ag(n.Cu))throw n.Bu(`${a._methodName}() can only be used with update() and set()`);if(!n.path)throw n.Bu(`${a._methodName}() is not currently supported inside arrays`);const i=a._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(a,n){const i=[];let l=0;for(const c of a){let d=Wi(c,n.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),l++}return{arrayValue:{values:i}}}(s,t)}return function(a,n){if((a=qt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Av(n.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const i=as.fromDate(a);return{timestampValue:zl(n.serializer,i)}}if(a instanceof as){const i=new as(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:zl(n.serializer,i)}}if(a instanceof ah)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Tn)return{bytesValue:Sm(n.serializer,a._byteString)};if(a instanceof $s){const i=n.databaseId,l=a.firestore._databaseId;if(!l.isEqual(i))throw n.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ud(a.firestore._databaseId||n.databaseId,a._key.path)}}if(a instanceof nh)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return Od(c.serializer,d)})}}}}}}(a,n);throw n.Bu(`Unsupported field value: ${So(a)}`)}(s,t)}function ig(s,t){const r={};return am(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ga(s,(a,n)=>{const i=Wi(n,t.Mu(a));i!=null&&(r[a]=i)}),{mapValue:{fields:r}}}function lg(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof as||s instanceof ah||s instanceof Tn||s instanceof $s||s instanceof rh||s instanceof nh)}function lh(s,t,r){if(!lg(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const a=So(r);throw a==="an object"?t.Bu(s+" a custom object"):t.Bu(s+" "+a)}}function sd(s,t,r){if((t=qt(t))instanceof Co)return t._internalPath;if(typeof t=="string")return oh(s,t);throw Gl("Field path arguments must be of type string or ",s,!1,void 0,r)}const Ow=new RegExp("[~\\*/\\[\\]]");function oh(s,t,r){if(t.search(Ow)>=0)throw Gl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,r);try{return new Co(...t.split("."))._internalPath}catch{throw Gl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,r)}}function Gl(s,t,r,a,n){const i=a&&!a.isEmpty(),l=n!==void 0;let c=`Function ${t}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||l)&&(d+=" (found",i&&(d+=` in field ${a}`),l&&(d+=` in document ${n}`),d+=")"),new Ne(xe.INVALID_ARGUMENT,c+s+d)}function og(s,t){return s.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t,r,a,n,i){this._firestore=t,this._userDataWriter=r,this._key=a,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $s(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(Po("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Lw extends cg{data(){return super.data()}}function Po(s,t){return typeof t=="string"?oh(s,t):t instanceof Co?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ne(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ch{}class hg extends ch{}function ht(s,t,...r){let a=[];t instanceof ch&&a.push(t),a=a.concat(r),function(i){const l=i.filter(d=>d instanceof dh).length,c=i.filter(d=>d instanceof Mo).length;if(l>1||l>0&&c>0)throw new Ne(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const n of a)s=n._apply(s);return s}class Mo extends hg{constructor(t,r,a){super(),this._field=t,this._op=r,this._value=a,this.type="where"}static _create(t,r,a){return new Mo(t,r,a)}_apply(t){const r=this._parse(t);return ug(t._query,r),new Na(t.firestore,t.converter,Wc(t._query,r))}_parse(t){const r=Do(t.firestore);return function(i,l,c,d,h,u,m){let g;if(h.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ne(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){_0(m,u);const y=[];for(const v of m)y.push(k0(d,i,v));g={arrayValue:{values:y}}}else g=k0(d,i,m)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||_0(m,u),g=Mw(c,l,m,u==="in"||u==="not-in");return Kt.create(h,u,g)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function ss(s,t,r){const a=t,n=Po("where",s);return Mo._create(n,a,r)}class dh extends ch{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new dh(t,r)}_parse(t){const r=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return r.length===1?r[0]:ur.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(n,i){let l=n;const c=i.getFlattenedFilters();for(const d of c)ug(l,d),l=Wc(l,d)}(t._query,r),new Na(t.firestore,t.converter,Wc(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hh extends hg{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new hh(t,r)}_apply(t){const r=function(n,i,l){if(n.startAt!==null)throw new Ne(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Ne(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Si(i,l)}(t._query,this._field,this._direction);return new Na(t.firestore,t.converter,function(n,i){const l=n.explicitOrderBy.concat([i]);return new Ln(n.path,n.collectionGroup,l,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(t._query,r))}}function Gr(s,t="asc"){const r=t,a=Po("orderBy",s);return hh._create(a,r)}function k0(s,t,r){if(typeof(r=qt(r))=="string"){if(r==="")throw new Ne(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xm(t)&&r.indexOf("/")!==-1)throw new Ne(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=t.path.child(It.fromString(r));if(!Ie.isDocumentKey(a))throw new Ne(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Hu(s,new Ie(a))}if(r instanceof $s)return Hu(s,r._key);throw new Ne(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${So(r)}.`)}function _0(s,t){if(!Array.isArray(s)||s.length===0)throw new Ne(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ug(s,t){const r=function(n,i){for(const l of n)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(s.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Ne(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ne(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class Vw{convertValue(t,r="none"){switch(Ua(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Fa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Ve()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const a={};return Ga(t,(n,i)=>{a[n]=this.convertValue(i,r)}),a}convertVectorValue(t){var r,a,n;const i=(n=(a=(r=t.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||a===void 0?void 0:a.values)===null||n===void 0?void 0:n.map(l=>zt(l.doubleValue));return new nh(i)}convertGeoPoint(t){return new ah(zt(t.latitude),zt(t.longitude))}convertArray(t,r){return(t.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(t,r){switch(r){case"previous":const a=Dd(t);return a==null?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(Ei(t));default:return null}}convertTimestamp(t){const r=fa(t);return new as(r.seconds,r.nanos)}convertDocumentKey(t,r){const a=It.fromString(t);ft(Pm(a));const n=new $i(a.get(1),a.get(3)),i=new Ie(a.popFirst(5));return n.isEqual(r)||qr(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(s,t,r){let a;return a=s?r&&(r.merge||r.mergeFields)?s.toFirestore(t,r):s.toFirestore(t):t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class mg extends cg{constructor(t,r,a,n,i,l){super(t,r,a,n,l),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const a=this._document.data.field(Po("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class Tl extends mg{data(t={}){return super.data(t)}}class gg{constructor(t,r,a,n){this._firestore=t,this._userDataWriter=r,this._snapshot=n,this.metadata=new di(n.hasPendingWrites,n.fromCache),this.query=a}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(a=>{t.call(r,new Tl(this._firestore,this._userDataWriter,a.key,a,new di(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ne(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let l=0;return n._snapshot.docChanges.map(c=>{const d=new Tl(n._firestore,n._userDataWriter,c.doc.key,c.doc,new di(n._snapshot.mutatedKeys.has(c.doc.key),n._snapshot.fromCache),n.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const d=new Tl(n._firestore,n._userDataWriter,c.doc.key,c.doc,new di(n._snapshot.mutatedKeys.has(c.doc.key),n._snapshot.fromCache),n.query.converter);let h=-1,u=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),u=l.indexOf(c.doc.key)),{type:Fw(c.type),doc:d,oldIndex:h,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Fw(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(s){s=zs(s,$s);const t=zs(s.firestore,Wr);return _w(Io(t),s._key).then(r=>pg(t,s,r))}class uh extends Vw{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tn(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new $s(this.firestore,null,r)}}function bs(s){s=zs(s,Na);const t=zs(s.firestore,Wr),r=Io(t),a=new uh(t);return dg(s._query),Ew(r,s._query).then(n=>new gg(t,a,s,n))}function Uw(s,t,r){s=zs(s,$s);const a=zs(s.firestore,Wr),n=xg(s.converter,t,r);return Oo(a,[ng(Do(a),"setDoc",s._key,n,s.converter!==null,r).toMutation(s._key,Xs.none())])}function Is(s,t,r,...a){s=zs(s,$s);const n=zs(s.firestore,Wr),i=Do(n);let l;return l=typeof(t=qt(t))=="string"||t instanceof Co?Pw(i,"updateDoc",s._key,t,r,a):Rw(i,"updateDoc",s._key,t),Oo(n,[l.toMutation(s._key,Xs.exists(!0))])}function Ls(s){return Oo(zs(s.firestore,Wr),[new Ld(s._key,Xs.none())])}function Vs(s,t){const r=zs(s.firestore,Wr),a=Ze(s),n=xg(s.converter,t);return Oo(r,[ng(Do(s.firestore),"addDoc",a._key,n,s.converter!==null,{}).toMutation(a._key,Xs.exists(!1))]).then(()=>a)}function xh(s,...t){var r,a,n;s=qt(s);let i={includeMetadataChanges:!1,source:"default"},l=0;typeof t[l]!="object"||N0(t[l])||(i=t[l],l++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(N0(t[l])){const m=t[l];t[l]=(r=m.next)===null||r===void 0?void 0:r.bind(m),t[l+1]=(a=m.error)===null||a===void 0?void 0:a.bind(m),t[l+2]=(n=m.complete)===null||n===void 0?void 0:n.bind(m)}let d,h,u;if(s instanceof $s)h=zs(s.firestore,Wr),u=vo(s._key.path),d={next:m=>{t[l]&&t[l](pg(h,s,m))},error:t[l+1],complete:t[l+2]};else{const m=zs(s,Na);h=zs(m.firestore,Wr),u=m._query;const g=new uh(h);d={next:y=>{t[l]&&t[l](new gg(h,g,m,y))},error:t[l+1],complete:t[l+2]},dg(s._query)}return function(g,y,v,E){const I=new sh(E),C=new eh(y,I,v);return g.asyncQueue.enqueueAndForget(async()=>Xd(await Wl(g),C)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>Jd(await Wl(g),C))}}(Io(h),u,c,d)}function Oo(s,t){return function(a,n){const i=new Lr;return a.asyncQueue.enqueueAndForget(async()=>mw(await kw(a),n,i)),i.promise}(Io(s),t)}function pg(s,t,r){const a=r.docs.get(t._key),n=new uh(s);return new mg(s,n,t._key,a,new di(r.hasPendingWrites,r.fromCache),t.converter)}(function(t,r=!0){(function(n){On=n})(Wa),La(new pa("firestore",(a,{instanceIdentifier:n,options:i})=>{const l=a.getProvider("app").getImmediate(),c=new Wr(new Gy(a.getProvider("auth-internal")),new Xy(a.getProvider("app-check-internal")),function(h,u){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(h.options.projectId,u)}(l,n),l);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),wr(Fu,"4.7.3",t),wr(Fu,"4.7.3","esm2017")})();var Bw="firebase",zw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(Bw,zw,"app");function mh(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r}function bg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qw=bg,fg=new Li("auth","Firebase",bg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new $d("@firebase/auth");function Hw(s,...t){Kl.logLevel<=Je.WARN&&Kl.warn(`Auth (${Wa}): ${s}`,...t)}function Sl(s,...t){Kl.logLevel<=Je.ERROR&&Kl.error(`Auth (${Wa}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(s,...t){throw gh(s,...t)}function _r(s,...t){return gh(s,...t)}function yg(s,t,r){const a=Object.assign(Object.assign({},qw()),{[t]:r});return new Li("auth","Firebase",a).create(t,{appName:s.name})}function Pa(s){return yg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gh(s,...t){if(typeof s!="string"){const r=t[0],a=[...t.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(r,...a)}return fg.create(s,...t)}function Le(s,t,...r){if(!s)throw gh(t,...r)}function Pr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Sl(t),new Error(t)}function Yr(s,t){s||Pr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Ww(){return E0()==="http:"||E0()==="https:"}function E0(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ww()||_f()||"connection"in navigator)?navigator.onLine:!0}function Kw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,r){this.shortDelay=t,this.longDelay=r,Yr(r>t,"Short delay should be less than long delay!"),this.isMobile=wf()||Ef()}get(){return Gw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(s,t){Yr(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{static initialize(t,r,a){this.fetchImpl=t,r&&(this.headersImpl=r),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Gi(3e4,6e4);function bh(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function Un(s,t,r,a,n={}){return jg(s,n,async()=>{let i={},l={};a&&(t==="GET"?l=a:i={body:JSON.stringify(a)});const c=Vi(Object.assign({key:s.config.apiKey},l)).slice(1),d=await s._getAdditionalHeaders();d["Content-Type"]="application/json",s.languageCode&&(d["X-Firebase-Locale"]=s.languageCode);const h=Object.assign({method:t,headers:d},i);return kf()||(h.referrerPolicy="no-referrer"),vg.fetch()(wg(s,s.config.apiHost,r,c),h)})}async function jg(s,t,r){s._canInitEmulator=!1;const a=Object.assign(Object.assign({},Yw),t);try{const n=new Jw(s),i=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw xl(s,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const c=i.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(s,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw xl(s,"email-already-in-use",l);if(d==="USER_DISABLED")throw xl(s,"user-disabled",l);const u=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw yg(s,u,h);Kr(s,u)}}catch(n){if(n instanceof Tr)throw n;Kr(s,"network-request-failed",{message:String(n)})}}async function Xw(s,t,r,a,n={}){const i=await Un(s,t,r,a,n);return"mfaPendingCredential"in i&&Kr(s,"multi-factor-auth-required",{_serverResponse:i}),i}function wg(s,t,r,a){const n=`${t}${r}?${a}`;return s.config.emulator?ph(s.config,n):`${s.config.apiScheme}://${n}`}class Jw{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,a)=>{this.timer=setTimeout(()=>a(_r(this.auth,"network-request-failed")),Qw.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xl(s,t,r){const a={appName:s.name};r.email&&(a.email=r.email),r.phoneNumber&&(a.phoneNumber=r.phoneNumber);const n=_r(s,t,a);return n.customData._tokenResponse=r,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(s,t){return Un(s,"POST","/v1/accounts:delete",t)}async function Ng(s,t){return Un(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function eN(s,t=!1){const r=qt(s),a=await r.getIdToken(t),n=fh(a);Le(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,l=i==null?void 0:i.sign_in_provider;return{claims:n,token:a,authTime:pi(fc(n.auth_time)),issuedAtTime:pi(fc(n.iat)),expirationTime:pi(fc(n.exp)),signInProvider:l||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fc(s){return Number(s)*1e3}function fh(s){const[t,r,a]=s.split(".");if(t===void 0||r===void 0||a===void 0)return Sl("JWT malformed, contained fewer than 3 sections"),null;try{const n=Vx(r);return n?JSON.parse(n):(Sl("Failed to decode base64 JWT payload"),null)}catch(n){return Sl("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function $0(s){const t=fh(s);return Le(t,"internal-error"),Le(typeof t.exp<"u","internal-error"),Le(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(s,t,r=!1){if(r)return t;try{return await t}catch(a){throw a instanceof Tr&&tN(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function tN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const n=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=pi(this.lastLoginAt),this.creationTime=pi(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(s){var t;const r=s.auth,a=await s.getIdToken(),n=await Ci(s,Ng(r,{idToken:a}));Le(n==null?void 0:n.users.length,r,"internal-error");const i=n.users[0];s._notifyReloadListener(i);const l=!((t=i.providerUserInfo)===null||t===void 0)&&t.length?kg(i.providerUserInfo):[],c=aN(s.providerData,l),d=s.isAnonymous,h=!(s.email&&i.passwordHash)&&!(c!=null&&c.length),u=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new ad(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(s,m)}async function rN(s){const t=qt(s);await Yl(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function aN(s,t){return[...s.filter(a=>!t.some(n=>n.providerId===a.providerId)),...t]}function kg(s){return s.map(t=>{var{providerId:r}=t,a=mh(t,["providerId"]);return{providerId:r,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(s,t){const r=await jg(s,{},async()=>{const a=Vi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=s.config,l=wg(s,n,"/v1/token",`key=${i}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",vg.fetch()(l,{method:"POST",headers:c,body:a})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function iN(s,t){return Un(s,"POST","/v2/accounts:revokeToken",bh(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Le(t.idToken,"internal-error"),Le(typeof t.idToken<"u","internal-error"),Le(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Le(t.length!==0,"internal-error");const r=$0(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:a,refreshToken:n,expiresIn:i}=await nN(t,r);this.updateTokensAndExpiration(a,n,Number(i))}updateTokensAndExpiration(t,r,a){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(t,r){const{refreshToken:a,accessToken:n,expirationTime:i}=r,l=new pn;return a&&(Le(typeof a=="string","internal-error",{appName:t}),l.refreshToken=a),n&&(Le(typeof n=="string","internal-error",{appName:t}),l.accessToken=n),i&&(Le(typeof i=="number","internal-error",{appName:t}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pn,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(s,t){Le(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class Mr{constructor(t){var{uid:r,auth:a,stsTokenManager:n}=t,i=mh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=a,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ad(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const r=await Ci(this,this.stsTokenManager.getToken(this.auth,t));return Le(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return eN(this,t)}reload(){return rN(this)}_assign(t){this!==t&&(Le(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new Mr(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let a=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),a=!0),r&&await Yl(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ca(this.auth.app))return Promise.reject(Pa(this.auth));const t=await this.getIdToken();return await Ci(this,Zw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var a,n,i,l,c,d,h,u;const m=(a=r.displayName)!==null&&a!==void 0?a:void 0,g=(n=r.email)!==null&&n!==void 0?n:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(l=r.photoURL)!==null&&l!==void 0?l:void 0,E=(c=r.tenantId)!==null&&c!==void 0?c:void 0,I=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,C=(h=r.createdAt)!==null&&h!==void 0?h:void 0,T=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:M,isAnonymous:se,providerData:L,stsTokenManager:N}=r;Le(D&&N,t,"internal-error");const b=pn.fromJSON(this.name,N);Le(typeof D=="string",t,"internal-error"),ea(m,t.name),ea(g,t.name),Le(typeof M=="boolean",t,"internal-error"),Le(typeof se=="boolean",t,"internal-error"),ea(y,t.name),ea(v,t.name),ea(E,t.name),ea(I,t.name),ea(C,t.name),ea(T,t.name);const w=new Mr({uid:D,auth:t,email:g,emailVerified:M,displayName:m,isAnonymous:se,photoURL:v,phoneNumber:y,tenantId:E,stsTokenManager:b,createdAt:C,lastLoginAt:T});return L&&Array.isArray(L)&&(w.providerData=L.map(j=>Object.assign({},j))),I&&(w._redirectEventId=I),w}static async _fromIdTokenResponse(t,r,a=!1){const n=new pn;n.updateFromServerResponse(r);const i=new Mr({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:a});return await Yl(i),i}static async _fromGetAccountInfoResponse(t,r,a){const n=r.users[0];Le(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?kg(n.providerUserInfo):[],l=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),c=new pn;c.updateFromIdToken(a);const d=new Mr({uid:n.localId,auth:t,stsTokenManager:c,isAnonymous:l}),h={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new ad(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function Or(s){Yr(s instanceof Function,"Expected a class definition");let t=T0.get(s);return t?(Yr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,T0.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}_g.type="NONE";const S0=_g;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(s,t,r){return`firebase:${s}:${t}:${r}`}class bn{constructor(t,r,a){this.persistence=t,this.auth=r,this.userKey=a;const{config:n,name:i}=this.auth;this.fullUserKey=Al(this.userKey,n.apiKey,i),this.fullPersistenceKey=Al("persistence",n.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Mr._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,a="authUser"){if(!r.length)return new bn(Or(S0),t,a);const n=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=n[0]||Or(S0);const l=Al(a,t.config.apiKey,t.name);let c=null;for(const h of r)try{const u=await h._get(l);if(u){const m=Mr._fromJSON(t,u);h!==i&&(c=m),i=h;break}}catch{}const d=n.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new bn(i,t,a):(i=d[0],c&&await i._set(l,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(l)}catch{}})),new bn(i,t,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Eg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ig(t))return"Blackberry";if(Cg(t))return"Webos";if($g(t))return"Safari";if((t.includes("chrome/")||Tg(t))&&!t.includes("edge/"))return"Chrome";if(Ag(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(r);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function Eg(s=Ts()){return/firefox\//i.test(s)}function $g(s=Ts()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Tg(s=Ts()){return/crios\//i.test(s)}function Sg(s=Ts()){return/iemobile/i.test(s)}function Ag(s=Ts()){return/android/i.test(s)}function Ig(s=Ts()){return/blackberry/i.test(s)}function Cg(s=Ts()){return/webos/i.test(s)}function yh(s=Ts()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function lN(s=Ts()){var t;return yh(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function oN(){return $f()&&document.documentMode===10}function Dg(s=Ts()){return yh(s)||Ag(s)||Cg(s)||Ig(s)||/windows phone/i.test(s)||Sg(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(s,t=[]){let r;switch(s){case"Browser":r=A0(Ts());break;case"Worker":r=`${A0(Ts())}-${s}`;break;default:r=s}const a=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wa}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const a=i=>new Promise((l,c)=>{try{const d=t(i);l(d)}catch(d){c(d)}});a.onAbort=r,this.queue.push(a);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const a of this.queue)await a(t),a.onAbort&&r.push(a.onAbort)}catch(a){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(s,t={}){return Un(s,"GET","/v2/passwordPolicy",bh(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=6;class uN{constructor(t){var r,a,n,i;const l=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=l.minPasswordLength)!==null&&r!==void 0?r:hN,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(a=t.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(i=t.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,a,n,i,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(n=d.containsLowercaseLetter)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(t,r){const a=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;a&&(r.meetsMinPasswordLength=t.length>=a),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let a;for(let n=0;n<t.length;n++)a=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(t,r,a,n,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t,r,a,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=a,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I0(this),this.idTokenSubscription=new I0(this),this.beforeStateQueue=new cN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Or(r)),this._initializationPromise=this.queue(async()=>{var a,n;if(!this._deleted&&(this.persistenceManager=await bn.create(this,t),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((n=this.currentUser)===null||n===void 0?void 0:n.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await Ng(this,{idToken:t}),a=await Mr._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(a)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(ca(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let n=a,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(t);(!l||l===c)&&(d!=null&&d.user)&&(n=d.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await Yl(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Kw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ca(this.app))return Promise.reject(Pa(this));const r=t?qt(t):null;return r&&Le(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Le(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ca(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ca(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await dN(this),r=new uN(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Li("auth","Firebase",t())}onAuthStateChanged(t,r,a){return this.registerStateListener(this.authStateSubscription,t,r,a)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,a){return this.registerStateListener(this.idTokenSubscription,t,r,a)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const a=this.onAuthStateChanged(()=>{a(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(a.tenantId=this.tenantId),await iN(this,a)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const a=await this.getOrInitRedirectPersistenceManager(r);return t===null?a.removeCurrentUser():a.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Or(t)||this._popupRedirectResolver;Le(r,this,"argument-error"),this.redirectPersistenceManager=await bn.create(this,[Or(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,a;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,a,n){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(c,this,"internal-error"),c.then(()=>{l||i(this.currentUser)}),typeof r=="function"){const d=t.addObserver(r,a,n);return()=>{l=!0,d()}}else{const d=t.addObserver(r);return()=>{l=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Rg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const a=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());a&&(r["X-Firebase-Client"]=a);const n=await this._getAppCheckToken();return n&&(r["X-Firebase-AppCheck"]=n),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&Hw(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function vh(s){return qt(s)}class I0{constructor(t){this.auth=t,this.observer=null,this.addObserver=Pf(r=>this.observer=r)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mN(s){jh=s}function gN(s){return jh.loadJS(s)}function pN(){return jh.gapiScript}function bN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(s,t){const r=fo(s,"auth");if(r.isInitialized()){const n=r.getImmediate(),i=r.getOptions();if(Ol(i,t??{}))return n;Kr(n,"already-initialized")}return r.initialize({options:t})}function yN(s,t){const r=(t==null?void 0:t.persistence)||[],a=(Array.isArray(r)?r:[r]).map(Or);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(a,t==null?void 0:t.popupRedirectResolver)}function vN(s,t,r){const a=vh(s);Le(a._canInitEmulator,a,"emulator-config-failed"),Le(/^https?:\/\//.test(t),a,"invalid-emulator-scheme");const n=!1,i=Pg(t),{host:l,port:c}=jN(t),d=c===null?"":`:${c}`;a.config.emulator={url:`${i}//${l}${d}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:l,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})}),wN()}function Pg(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function jN(s){const t=Pg(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!r)return{host:"",port:null};const a=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(a);if(n){const i=n[1];return{host:i,port:C0(a.substr(i.length+1))}}else{const[i,l]=a.split(":");return{host:i,port:C0(l)}}}function C0(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function wN(){function s(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Pr("not implemented")}_getIdTokenResponse(t){return Pr("not implemented")}_linkToIdToken(t,r){return Pr("not implemented")}_getReauthenticationResolver(t){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fn(s,t){return Xw(s,"POST","/v1/accounts:signInWithIdp",bh(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="http://localhost";class Ba extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Ba(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Kr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:a,signInMethod:n}=r,i=mh(r,["providerId","signInMethod"]);if(!a||!n)return null;const l=new Ba(a,n);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(t){const r=this.buildRequest();return fn(t,r)}_linkToIdToken(t,r){const a=this.buildRequest();return a.idToken=r,fn(t,a)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,fn(t,r)}buildRequest(){const t={requestUri:NN,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Vi(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Og{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Ki{constructor(){super("facebook.com")}static credential(t){return Ba._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ra.credentialFromTaggedObject(t)}static credentialFromError(t){return ra.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ra.credential(t.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ba._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return aa.credentialFromTaggedObject(t)}static credentialFromError(t){return aa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:a}=t;if(!r&&!a)return null;try{return aa.credential(r,a)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Ki{constructor(){super("github.com")}static credential(t){return Ba._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return na.credentialFromTaggedObject(t)}static credentialFromError(t){return na.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return na.credential(t.oauthAccessToken)}catch{return null}}}na.GITHUB_SIGN_IN_METHOD="github.com";na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Ki{constructor(){super("twitter.com")}static credential(t,r){return Ba._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return ia.credentialFromTaggedObject(t)}static credentialFromError(t){return ia.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:a}=t;if(!r||!a)return null;try{return ia.credential(r,a)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,a,n=!1){const i=await Mr._fromIdTokenResponse(t,a,n),l=D0(a);return new An({user:i,providerId:l,_tokenResponse:a,operationType:r})}static async _forOperation(t,r,a){await t._updateTokensIfNecessary(a,!0);const n=D0(a);return new An({user:t,providerId:n,_tokenResponse:a,operationType:r})}}function D0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Tr{constructor(t,r,a,n){var i;super(r.code,r.message),this.operationType=a,this.user=n,Object.setPrototypeOf(this,Ql.prototype),this.customData={appName:t.name,tenantId:(i=t.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(t,r,a,n){return new Ql(t,r,a,n)}}function Lg(s,t,r,a){return(t==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ql._fromErrorAndOperation(s,i,t,a):i})}async function kN(s,t,r=!1){const a=await Ci(s,t._linkToIdToken(s.auth,await s.getIdToken()),r);return An._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(s,t,r=!1){const{auth:a}=s;if(ca(a.app))return Promise.reject(Pa(a));const n="reauthenticate";try{const i=await Ci(s,Lg(a,n,t,s),r);Le(i.idToken,a,"internal-error");const l=fh(i.idToken);Le(l,a,"internal-error");const{sub:c}=l;return Le(s.uid===c,a,"user-mismatch"),An._forOperation(s,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Kr(a,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(s,t,r=!1){if(ca(s.app))return Promise.reject(Pa(s));const a="signIn",n=await Lg(s,a,t),i=await An._fromIdTokenResponse(s,a,n);return r||await s._updateCurrentUser(i.user),i}function $N(s,t,r,a){return qt(s).onIdTokenChanged(t,r,a)}function TN(s,t,r){return qt(s).beforeAuthStateChanged(t,r)}const Xl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Xl,"1"),this.storage.removeItem(Xl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,AN=10;class Fg extends Vg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const a=this.storage.getItem(r),n=this.localCache[r];a!==n&&t(r,n,a)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const a=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const l=this.storage.getItem(a);!r&&this.localCache[a]===l||this.notifyListeners(a,l)},i=this.storage.getItem(a);oN()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,AN):n()}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:a}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}Fg.type="LOCAL";const IN=Fg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Vg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}Ug.type="SESSION";const Bg=Ug;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const a=new Lo(t);return this.receivers.push(a),a}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:a,eventType:n,data:i}=r.data,l=this.handlersMap[n];if(!(l!=null&&l.size))return;r.ports[0].postMessage({status:"ack",eventId:a,eventType:n});const c=Array.from(l).map(async h=>h(r.origin,i)),d=await CN(c);r.ports[0].postMessage({status:"done",eventId:a,eventType:n,response:d})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(s="",t=10){let r="";for(let a=0;a<t;a++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,a=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,l;return new Promise((c,d)=>{const h=wh("",20);n.port1.start();const u=setTimeout(()=>{d(new Error("unsupported_event"))},a);l={messageChannel:n,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(u),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(l),n.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:h,data:r},[n.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function RN(s){Er().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function PN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MN(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function ON(){return zg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="firebaseLocalStorageDb",LN=1,Jl="firebaseLocalStorage",Hg="fbase_key";class Yi{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Vo(s,t){return s.transaction([Jl],t?"readwrite":"readonly").objectStore(Jl)}function VN(){const s=indexedDB.deleteDatabase(qg);return new Yi(s).toPromise()}function nd(){const s=indexedDB.open(qg,LN);return new Promise((t,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Jl,{keyPath:Hg})}catch(n){r(n)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Jl)?t(a):(a.close(),await VN(),t(await nd()))})})}async function R0(s,t,r){const a=Vo(s,!0).put({[Hg]:t,value:r});return new Yi(a).toPromise()}async function FN(s,t){const r=Vo(s,!1).get(t),a=await new Yi(r).toPromise();return a===void 0?null:a.value}function P0(s,t){const r=Vo(s,!0).delete(t);return new Yi(r).toPromise()}const UN=800,BN=3;class Wg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nd(),this.db)}async _withRetries(t){let r=0;for(;;)try{const a=await this._openDb();return await t(a)}catch(a){if(r++>BN)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lo._getInstance(ON()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await PN(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((t=a[0])===null||t===void 0)&&t.fulfilled&&!((r=a[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||MN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nd();return await R0(t,Xl,"1"),await P0(t,Xl),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(a=>R0(a,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(a=>FN(a,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>P0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const i=Vo(n,!1).getAll();return new Yi(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],a=new Set;if(t.length!==0)for(const{fbase_key:n,value:i}of t)a.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!a.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const a=this.listeners[t];if(a)for(const n of Array.from(a))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wg.type="LOCAL";const zN=Wg;new Gi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(s,t){return t?Or(t):(Le(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Mg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fn(t,this._buildIdpRequest())}_linkToIdToken(t,r){return fn(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return fn(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function HN(s){return EN(s.auth,new Nh(s),s.bypassAuthState)}function WN(s){const{auth:t,user:r}=s;return Le(r,t,"internal-error"),_N(r,new Nh(s),s.bypassAuthState)}async function GN(s){const{auth:t,user:r}=s;return Le(r,t,"internal-error"),kN(r,new Nh(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,r,a,n,i=!1){this.auth=t,this.resolver=a,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:a,postBody:n,tenantId:i,error:l,type:c}=t;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:r,sessionId:a,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return HN;case"linkViaPopup":case"linkViaRedirect":return GN;case"reauthViaPopup":case"reauthViaRedirect":return WN;default:Kr(this.auth,"internal-error")}}resolve(t){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new Gi(2e3,1e4);class un extends Gg{constructor(t,r,a,n,i){super(t,r,n,i),this.provider=a,this.authWindow=null,this.pollId=null,un.currentPopupAction&&un.currentPopupAction.cancel(),un.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Le(t,this.auth,"internal-error"),t}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const t=wh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,un.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,a;if(!((a=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,KN.get())};t()}}un.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="pendingRedirect",Il=new Map;class QN extends Gg{constructor(t,r,a=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a),this.eventId=null}async execute(){let t=Il.get(this.auth._key());if(!t){try{const a=await XN(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(a)}catch(r){t=()=>Promise.reject(r)}Il.set(this.auth._key(),t)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XN(s,t){const r=e5(t),a=ZN(s);if(!await a._isAvailable())return!1;const n=await a._get(r)==="true";return await a._remove(r),n}function JN(s,t){Il.set(s._key(),t)}function ZN(s){return Or(s._redirectPersistence)}function e5(s){return Al(YN,s.config.apiKey,s.name)}async function t5(s,t,r=!1){if(ca(s.app))return Promise.reject(Pa(s));const a=vh(s),n=qN(a,t),l=await new QN(a,n,r).execute();return l&&!r&&(delete l.user._redirectEventId,await a._persistUserIfCurrent(l.user),await a._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=10*60*1e3;class r5{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(t,a)&&(r=!0,this.sendToConsumer(t,a),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!a5(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var a;if(t.error&&!Kg(t)){const n=((a=t.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";r.onError(_r(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const a=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&a}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=s5&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0(t))}saveEventToCache(t){this.cachedEventUids.add(M0(t)),this.lastProcessedEventTime=Date.now()}}function M0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Kg({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function a5(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kg(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(s,t={}){return Un(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l5=/^https?/;async function o5(s){if(s.config.emulator)return;const{authorizedDomains:t}=await n5(s);for(const r of t)try{if(c5(r))return}catch{}Kr(s,"unauthorized-domain")}function c5(s){const t=rd(),{protocol:r,hostname:a}=new URL(t);if(s.startsWith("chrome-extension://")){const l=new URL(s);return l.hostname===""&&a===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&l.hostname===a}if(!l5.test(r))return!1;if(i5.test(s))return a===s;const n=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new Gi(3e4,6e4);function O0(){const s=Er().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function h5(s){return new Promise((t,r)=>{var a,n,i;function l(){O0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{O0(),r(_r(s,"network-request-failed"))},timeout:d5.get()})}if(!((n=(a=Er().gapi)===null||a===void 0?void 0:a.iframes)===null||n===void 0)&&n.Iframe)t(gapi.iframes.getContext());else if(!((i=Er().gapi)===null||i===void 0)&&i.load)l();else{const c=bN("iframefcb");return Er()[c]=()=>{gapi.load?l():r(_r(s,"network-request-failed"))},gN(`${pN()}?onload=${c}`).catch(d=>r(d))}}).catch(t=>{throw Cl=null,t})}let Cl=null;function u5(s){return Cl=Cl||h5(s),Cl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new Gi(5e3,15e3),m5="__/auth/iframe",g5="emulator/auth/iframe",p5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f5(s){const t=s.config;Le(t.authDomain,s,"auth-domain-config-required");const r=t.emulator?ph(t,g5):`https://${s.config.authDomain}/${m5}`,a={apiKey:t.apiKey,appName:s.name,v:Wa},n=b5.get(s.config.apiHost);n&&(a.eid=n);const i=s._getFrameworks();return i.length&&(a.fw=i.join(",")),`${r}?${Vi(a).slice(1)}`}async function y5(s){const t=await u5(s),r=Er().gapi;return Le(r,s,"internal-error"),t.open({where:document.body,url:f5(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p5,dontclear:!0},a=>new Promise(async(n,i)=>{await a.restyle({setHideOnLeave:!1});const l=_r(s,"network-request-failed"),c=Er().setTimeout(()=>{i(l)},x5.get());function d(){Er().clearTimeout(c),n(a)}a.ping(d).then(d,()=>{i(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j5=500,w5=600,N5="_blank",k5="http://localhost";class L0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _5(s,t,r,a=j5,n=w5){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),l=Math.max((window.screen.availWidth-a)/2,0).toString();let c="";const d=Object.assign(Object.assign({},v5),{width:a.toString(),height:n.toString(),top:i,left:l}),h=Ts().toLowerCase();r&&(c=Tg(h)?N5:r),Eg(h)&&(t=t||k5,d.scrollbars="yes");const u=Object.entries(d).reduce((g,[y,v])=>`${g}${y}=${v},`,"");if(lN(h)&&c!=="_self")return E5(t||"",c),new L0(null);const m=window.open(t||"",c,u);Le(m,s,"popup-blocked");try{m.focus()}catch{}return new L0(m)}function E5(s,t){const r=document.createElement("a");r.href=s,r.target=t;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="__/auth/handler",T5="emulator/auth/handler",S5=encodeURIComponent("fac");async function V0(s,t,r,a,n,i){Le(s.config.authDomain,s,"auth-domain-config-required"),Le(s.config.apiKey,s,"invalid-api-key");const l={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:a,v:Wa,eventId:n};if(t instanceof Og){t.setDefaultLanguage(s.languageCode),l.providerId=t.providerId||"",Rf(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,m]of Object.entries({}))l[u]=m}if(t instanceof Ki){const u=t.getScopes().filter(m=>m!=="");u.length>0&&(l.scopes=u.join(","))}s.tenantId&&(l.tid=s.tenantId);const c=l;for(const u of Object.keys(c))c[u]===void 0&&delete c[u];const d=await s._getAppCheckToken(),h=d?`#${S5}=${encodeURIComponent(d)}`:"";return`${A5(s)}?${Vi(c).slice(1)}${h}`}function A5({config:s}){return s.emulator?ph(s,T5):`https://${s.authDomain}/${$5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="webStorageSupport";class I5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bg,this._completeRedirectFn=t5,this._overrideRedirectResult=JN}async _openPopup(t,r,a,n){var i;Yr((i=this.eventManagers[t._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const l=await V0(t,r,a,rd(),n);return _5(t,l,wh())}async _openRedirect(t,r,a,n){await this._originValidation(t);const i=await V0(t,r,a,rd(),n);return RN(i),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:i}=this.eventManagers[r];return n?Promise.resolve(n):(Yr(i,"If manager is not set, promise should be"),i)}const a=this.initAndGetManager(t);return this.eventManagers[r]={promise:a},a.catch(()=>{delete this.eventManagers[r]}),a}async initAndGetManager(t){const r=await y5(t),a=new r5(t);return r.register("authEvent",n=>(Le(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:a.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:a},this.iframes[t._key()]=r,a}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(yc,{type:yc},n=>{var i;const l=(i=n==null?void 0:n[0])===null||i===void 0?void 0:i[yc];l!==void 0&&r(!!l),Kr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=o5(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return Dg()||$g()||yh()}}const C5=I5;var F0="@firebase/auth",U0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(a=>{t((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P5(s){La(new pa("auth",(t,{options:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=a.options;Le(l&&!l.includes(":"),"invalid-api-key",{appName:a.name});const d={apiKey:l,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rg(s)},h=new xN(a,n,i,d);return yN(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,a)=>{t.getProvider("auth-internal").initialize()})),La(new pa("auth-internal",t=>{const r=vh(t.getProvider("auth").getImmediate());return(a=>new D5(a))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(F0,U0,R5(s)),wr(F0,U0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=5*60,O5=zx("authIdTokenMaxAge")||M5;let B0=null;const L5=s=>async t=>{const r=t&&await t.getIdTokenResult(),a=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(a&&a>O5)return;const n=r==null?void 0:r.token;B0!==n&&(B0=n,await fetch(s,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function V5(s=Sd()){const t=fo(s,"auth");if(t.isInitialized())return t.getImmediate();const r=fN(s,{popupRedirectResolver:C5,persistence:[zN,IN,Bg]}),a=zx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(a,location.origin);if(location.origin===i.origin){const l=L5(i.toString());TN(r,l,()=>l(r.currentUser)),$N(r,c=>l(c))}}const n=Fx("auth");return n&&vN(r,`http://${n}`),r}function F5(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}mN({loadJS(s){return new Promise((t,r)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=t,a.onerror=n=>{const i=_r("internal-error");i.customData=n,r(i)},a.type="text/javascript",a.charset="UTF-8",F5().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P5("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="firebasestorage.googleapis.com",Qg="storageBucket",U5=2*60*1e3,B5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt extends Tr{constructor(t,r,a=0){super(vc(t),`Firebase Storage: ${r} (${vc(t)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bt.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return vc(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function vc(s){return"storage/"+s}function kh(){const s="An unknown error occurred, please check the error payload for server response.";return new Bt(Ut.UNKNOWN,s)}function z5(s){return new Bt(Ut.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function q5(s){return new Bt(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H5(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Bt(Ut.UNAUTHENTICATED,s)}function W5(){return new Bt(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function G5(s){return new Bt(Ut.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function K5(){return new Bt(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Y5(){return new Bt(Ut.CANCELED,"User canceled the upload/download.")}function Q5(s){return new Bt(Ut.INVALID_URL,"Invalid URL '"+s+"'.")}function X5(s){return new Bt(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function J5(){return new Bt(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qg+"' property when initializing the app?")}function Z5(){return new Bt(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function e1(){return new Bt(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function t1(s){return new Bt(Ut.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function id(s){return new Bt(Ut.INVALID_ARGUMENT,s)}function Xg(){return new Bt(Ut.APP_DELETED,"The Firebase app was deleted.")}function s1(s){return new Bt(Ut.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bi(s,t){return new Bt(Ut.INVALID_FORMAT,"String does not match format '"+s+"': "+t)}function ei(s){throw new Bt(Ut.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let a;try{a=Ks.makeFromUrl(t,r)}catch{return new Ks(t,"")}if(a.path==="")return a;throw X5(t)}static makeFromUrl(t,r){let a=null;const n="([A-Za-z0-9.\\-_]+)";function i(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+n+l,"i"),d={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const u="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${u}/b/${n}/o${g}`,"i"),v={bucket:1,path:3},E=r===Yg?"(?:storage.googleapis.com|storage.cloud.google.com)":r,I="([^?#]*)",C=new RegExp(`^https?://${E}/${n}/${I}`,"i"),D=[{regex:c,indices:d,postModify:i},{regex:y,indices:v,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<D.length;M++){const se=D[M],L=se.regex.exec(t);if(L){const N=L[se.indices.bucket];let b=L[se.indices.path];b||(b=""),a=new Ks(N,b),se.postModify(a);break}}if(a==null)throw Q5(t);return a}}class r1{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(s,t,r){let a=1,n=null,i=null,l=!1,c=0;function d(){return c===2}let h=!1;function u(...I){h||(h=!0,t.apply(null,I))}function m(I){n=setTimeout(()=>{n=null,s(y,d())},I)}function g(){i&&clearTimeout(i)}function y(I,...C){if(h){g();return}if(I){g(),u.call(null,I,...C);return}if(d()||l){g(),u.call(null,I,...C);return}a<64&&(a*=2);let D;c===1?(c=2,D=0):D=(a+Math.random())*1e3,m(D)}let v=!1;function E(I){v||(v=!0,g(),!h&&(n!==null?(I||(c=2),clearTimeout(n),m(0)):I||(c=1)))}return m(0),i=setTimeout(()=>{l=!0,E(!0)},r),E}function n1(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(s){return s!==void 0}function l1(s){return typeof s=="object"&&!Array.isArray(s)}function _h(s){return typeof s=="string"||s instanceof String}function z0(s){return Eh()&&s instanceof Blob}function Eh(){return typeof Blob<"u"}function q0(s,t,r,a){if(a<t)throw id(`Invalid value for '${s}'. Expected ${t} or greater.`);if(a>r)throw id(`Invalid value for '${s}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(s,t,r){let a=t;return r==null&&(a=`https://${t}`),`${r}://${a}/v0${s}`}function Jg(s){const t=encodeURIComponent;let r="?";for(const a in s)if(s.hasOwnProperty(a)){const n=t(a)+"="+t(s[a]);r=r+n+"&"}return r=r.slice(0,-1),r}var Ma;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(s,t){const r=s>=500&&s<600,n=[408,429].indexOf(s)!==-1,i=t.indexOf(s)!==-1;return r||n||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(t,r,a,n,i,l,c,d,h,u,m,g=!0){this.url_=t,this.method_=r,this.headers_=a,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,v)=>{this.resolve_=y,this.reject_=v,this.start_()})}start_(){const t=(a,n)=>{if(n){a(!1,new ml(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const c=i.getErrorCode()===Ma.NO_ERROR,d=i.getStatus();if(!c||o1(d,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Ma.ABORT;a(!1,new ml(!1,null,u));return}const h=this.successCodes_.indexOf(d)!==-1;a(!0,new ml(h,i))})},r=(a,n)=>{const i=this.resolve_,l=this.reject_,c=n.connection;if(n.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());i1(d)?i(d):i()}catch(d){l(d)}else if(c!==null){const d=kh();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(n.canceled){const d=this.appDelete_?Xg():Y5();l(d)}else{const d=K5();l(d)}};this.canceled_?r(!1,new ml(!1,null,!0)):this.backoffId_=a1(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&n1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ml{constructor(t,r,a){this.wasSuccessCode=t,this.connection=r,this.canceled=!!a}}function d1(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function h1(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function u1(s,t){t&&(s["X-Firebase-GMPID"]=t)}function x1(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function m1(s,t,r,a,n,i,l=!0){const c=Jg(s.urlParams),d=s.url+c,h=Object.assign({},s.headers);return u1(h,t),d1(h,r),h1(h,i),x1(h,a),new c1(d,s.method,h,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p1(...s){const t=g1();if(t!==void 0){const r=new t;for(let a=0;a<s.length;a++)r.append(s[a]);return r.getBlob()}else{if(Eh())return new Blob(s);throw new Bt(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function b1(s,t,r){return s.webkitSlice?s.webkitSlice(t,r):s.mozSlice?s.mozSlice(t,r):s.slice?s.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(s){if(typeof atob>"u")throw t1("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jc{constructor(t,r){this.data=t,this.contentType=r||null}}function y1(s,t){switch(s){case yr.RAW:return new jc(Zg(t));case yr.BASE64:case yr.BASE64URL:return new jc(ep(s,t));case yr.DATA_URL:return new jc(j1(t),w1(t))}throw kh()}function Zg(s){const t=[];for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);if(a<=127)t.push(a);else if(a<=2047)t.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(r<s.length-1&&(s.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const i=a,l=s.charCodeAt(++r);a=65536|(i&1023)<<10|l&1023,t.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?t.push(239,191,189):t.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(t)}function v1(s){let t;try{t=decodeURIComponent(s)}catch{throw bi(yr.DATA_URL,"Malformed data URL.")}return Zg(t)}function ep(s,t){switch(s){case yr.BASE64:{const n=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(n||i)throw bi(s,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const n=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(n||i)throw bi(s,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=f1(t)}catch(n){throw n.message.includes("polyfill")?n:bi(s,"Invalid character found")}const a=new Uint8Array(r.length);for(let n=0;n<r.length;n++)a[n]=r.charCodeAt(n);return a}class tp{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw bi(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=r[1]||null;a!=null&&(this.base64=N1(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=t.substring(t.indexOf(",")+1)}}function j1(s){const t=new tp(s);return t.base64?ep(yr.BASE64,t.rest):v1(t.rest)}function w1(s){return new tp(s).contentType}function N1(s,t){return s.length>=t.length?s.substring(s.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,r){let a=0,n="";z0(t)?(this.data_=t,a=t.size,n=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),a=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),a=t.length),this.size_=a,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,r){if(z0(this.data_)){const a=this.data_,n=b1(a,t,r);return n===null?null:new la(n)}else{const a=new Uint8Array(this.data_.buffer,t,r-t);return new la(a,!0)}}static getBlob(...t){if(Eh()){const r=t.map(a=>a instanceof la?a.data_:a);return new la(p1.apply(null,r))}else{const r=t.map(l=>_h(l)?y1(yr.RAW,l).data:l.data_);let a=0;r.forEach(l=>{a+=l.byteLength});const n=new Uint8Array(a);let i=0;return r.forEach(l=>{for(let c=0;c<l.length;c++)n[i++]=l[c]}),new la(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(s){let t;try{t=JSON.parse(s)}catch{return null}return l1(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function _1(s,t){const r=t.split("/").filter(a=>a.length>0).join("/");return s.length===0?r:s+"/"+r}function rp(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s,t){return t}class Ds{constructor(t,r,a,n){this.server=t,this.local=r||t,this.writable=!!a,this.xform=n||E1}}let gl=null;function $1(s){return!_h(s)||s.length<2?s:rp(s)}function ap(){if(gl)return gl;const s=[];s.push(new Ds("bucket")),s.push(new Ds("generation")),s.push(new Ds("metageneration")),s.push(new Ds("name","fullPath",!0));function t(i,l){return $1(l)}const r=new Ds("name");r.xform=t,s.push(r);function a(i,l){return l!==void 0?Number(l):l}const n=new Ds("size");return n.xform=a,s.push(n),s.push(new Ds("timeCreated")),s.push(new Ds("updated")),s.push(new Ds("md5Hash",null,!0)),s.push(new Ds("cacheControl",null,!0)),s.push(new Ds("contentDisposition",null,!0)),s.push(new Ds("contentEncoding",null,!0)),s.push(new Ds("contentLanguage",null,!0)),s.push(new Ds("contentType",null,!0)),s.push(new Ds("metadata","customMetadata",!0)),gl=s,gl}function T1(s,t){function r(){const a=s.bucket,n=s.fullPath,i=new Ks(a,n);return t._makeStorageReference(i)}Object.defineProperty(s,"ref",{get:r})}function S1(s,t,r){const a={};a.type="file";const n=r.length;for(let i=0;i<n;i++){const l=r[i];a[l.local]=l.xform(a,t[l.server])}return T1(a,s),a}function np(s,t,r){const a=sp(t);return a===null?null:S1(s,a,r)}function A1(s,t,r,a){const n=sp(t);if(n===null||!_h(n.downloadTokens))return null;const i=n.downloadTokens;if(i.length===0)return null;const l=encodeURIComponent;return i.split(",").map(h=>{const u=s.bucket,m=s.fullPath,g="/b/"+l(u)+"/o/"+l(m),y=Fo(g,r,a),v=Jg({alt:"media",token:h});return y+v})[0]}function I1(s,t){const r={},a=t.length;for(let n=0;n<a;n++){const i=t[n];i.writable&&(r[i.server]=s[i.local])}return JSON.stringify(r)}class $h{constructor(t,r,a,n){this.url=t,this.method=r,this.handler=a,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(s){if(!s)throw kh()}function C1(s,t){function r(a,n){const i=np(s,n,t);return ip(i!==null),i}return r}function D1(s,t){function r(a,n){const i=np(s,n,t);return ip(i!==null),A1(i,n,s.host,s._protocol)}return r}function lp(s){function t(r,a){let n;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?n=W5():n=H5():r.getStatus()===402?n=q5(s.bucket):r.getStatus()===403?n=G5(s.path):n=a,n.status=r.getStatus(),n.serverResponse=a.serverResponse,n}return t}function op(s){const t=lp(s);function r(a,n){let i=t(a,n);return a.getStatus()===404&&(i=z5(s.path)),i.serverResponse=n.serverResponse,i}return r}function R1(s,t,r){const a=t.fullServerUrl(),n=Fo(a,s.host,s._protocol),i="GET",l=s.maxOperationRetryTime,c=new $h(n,i,D1(s,r),l);return c.errorHandler=op(t),c}function P1(s,t){const r=t.fullServerUrl(),a=Fo(r,s.host,s._protocol),n="DELETE",i=s.maxOperationRetryTime;function l(d,h){}const c=new $h(a,n,l,i);return c.successCodes=[200,204],c.errorHandler=op(t),c}function M1(s,t){return s&&s.contentType||t&&t.type()||"application/octet-stream"}function O1(s,t,r){const a=Object.assign({},r);return a.fullPath=s.path,a.size=t.size(),a.contentType||(a.contentType=M1(null,t)),a}function L1(s,t,r,a,n){const i=t.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let D="";for(let M=0;M<2;M++)D=D+Math.random().toString().slice(2);return D}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=O1(t,a,n),u=I1(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+d+"--",y=la.getBlob(m,a,g);if(y===null)throw Z5();const v={name:h.fullPath},E=Fo(i,s.host,s._protocol),I="POST",C=s.maxUploadRetryTime,T=new $h(E,I,C1(s,r),C);return T.urlParams=v,T.headers=l,T.body=y.uploadData(),T.errorHandler=lp(t),T}class V1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,a,n){if(this.sent_)throw ei("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,t,!0),n!==void 0)for(const i in n)n.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,n[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ei("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ei("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ei("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ei("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class F1 extends V1{initXhr(){this.xhr_.responseType="text"}}function Th(){return new F1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,r){this._service=t,r instanceof Ks?this._location=r:this._location=Ks.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new za(t,r)}get root(){const t=new Ks(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rp(this._location.path)}get storage(){return this._service}get parent(){const t=k1(this._location.path);if(t===null)return null;const r=new Ks(this._location.bucket,t);return new za(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw s1(t)}}function U1(s,t,r){s._throwIfRoot("uploadBytes");const a=L1(s.storage,s._location,ap(),new la(t,!0),r);return s.storage.makeRequestWithTokens(a,Th).then(n=>({metadata:n,ref:s}))}function B1(s){s._throwIfRoot("getDownloadURL");const t=R1(s.storage,s._location,ap());return s.storage.makeRequestWithTokens(t,Th).then(r=>{if(r===null)throw e1();return r})}function z1(s){s._throwIfRoot("deleteObject");const t=P1(s.storage,s._location);return s.storage.makeRequestWithTokens(t,Th)}function q1(s,t){const r=_1(s._location.path,t),a=new Ks(s._location.bucket,r);return new za(s.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){return/^[A-Za-z]+:\/\//.test(s)}function W1(s,t){return new za(s,t)}function cp(s,t){if(s instanceof Sh){const r=s;if(r._bucket==null)throw J5();const a=new za(r,r._bucket);return t!=null?cp(a,t):a}else return t!==void 0?q1(s,t):s}function G1(s,t){if(t&&H1(t)){if(s instanceof Sh)return W1(s,t);throw id("To use ref(service, url), the first argument must be a Storage instance.")}else return cp(s,t)}function H0(s,t){const r=t==null?void 0:t[Qg];return r==null?null:Ks.makeFromBucketSpec(r,s)}function K1(s,t,r,a={}){s.host=`${t}:${r}`,s._protocol="http";const{mockUserToken:n}=a;n&&(s._overrideAuthToken=typeof n=="string"?n:qx(n,s.app.options.projectId))}class Sh{constructor(t,r,a,n,i){this.app=t,this._authProvider=r,this._appCheckProvider=a,this._url=n,this._firebaseVersion=i,this._bucket=null,this._host=Yg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U5,this._maxUploadRetryTime=B5,this._requests=new Set,n!=null?this._bucket=Ks.makeFromBucketSpec(n,this._host):this._bucket=H0(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ks.makeFromBucketSpec(this._url,t):this._bucket=H0(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){q0("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){q0("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new za(this,t)}_makeRequest(t,r,a,n,i=!0){if(this._deleted)return new r1(Xg());{const l=m1(t,this._appId,a,n,r,this._firebaseVersion,i);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(t,r){const[a,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,a,n).getPromise()}}const W0="@firebase/storage",G0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="storage";function Y1(s,t,r){return s=qt(s),U1(s,t,r)}function Q1(s){return s=qt(s),B1(s)}function X1(s){return s=qt(s),z1(s)}function hp(s,t){return s=qt(s),G1(s,t)}function J1(s=Sd(),t){s=qt(s);const a=fo(s,dp).getImmediate({identifier:t}),n=Ux("storage");return n&&Z1(a,...n),a}function Z1(s,t,r,a={}){K1(s,t,r,a)}function e2(s,{instanceIdentifier:t}){const r=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),n=s.getProvider("app-check-internal");return new Sh(r,a,n,t,Wa)}function t2(){La(new pa(dp,e2,"PUBLIC").setMultipleInstances(!0)),wr(W0,G0,""),wr(W0,G0,"esm2017")}t2();const Dr={apiKey:"your-api-key",authDomain:"your-auth-domain",projectId:"your-project-id",storageBucket:"your-storage-bucket",messagingSenderId:"your-messaging-sender-id",appId:"your-app-id"};console.log("Firebase config check:",{hasApiKey:!!Dr.apiKey&&Dr.apiKey!=="your-api-key",authDomain:Dr.authDomain,projectId:Dr.projectId,hasStorageBucket:!!Dr.storageBucket&&Dr.storageBucket!=="your-storage-bucket",hasAppId:!!Dr.appId&&Dr.appId!=="your-app-id"});console.log("Raw env values:",{VITE_FIREBASE_API_KEY:void 0,VITE_FIREBASE_AUTH_DOMAIN:void 0,VITE_FIREBASE_PROJECT_ID:void 0,VITE_FIREBASE_STORAGE_BUCKET:void 0});const Ah=Gx(Dr);V5(Ah);const je=Sw(Ah),up=J1(Ah);console.log("Firestore db initialized:",!!je);const ld={1:"Dex",2:"Enowk",3:"Xenia",4:"Olenka",5:"Sydney"},Di=new Map,Yt=s=>{var r,a;const t=Di.get(s);return t!==void 0?t||ld[s]||((r=Fe.find(n=>n.id===s))==null?void 0:r.login)||s:ld[s]||((a=Fe.find(n=>n.id===s))==null?void 0:a.login)||s},cr=async s=>{var t;try{const r=await T4(s);if(r)return Di.set(s,r),r;const a=ld[s]||((t=Fe.find(n=>n.id===s))==null?void 0:t.login)||s;return Di.set(s,null),a}catch(r){return console.error("Error fetching user nickname:",r),Yt(s)}},od=s=>{Di.delete(s)},K0=()=>{Di.clear()},Y0=["fast","smart","bright","cool","wise","bold","calm","eager","easy","fair","glad","kind","lucky","nice","proud","silly","vivid","warm","young","happy","prime","neo","super","mega","ultra","hyper","max","top","pro","maxi"],wc="!@#$%&*",s2=(s=10)=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="abcdefghijklmnopqrstuvwxyz",a="0123456789",n=r+a+t+wc;let i="";i+=r[Math.floor(Math.random()*r.length)],i+=a[Math.floor(Math.random()*a.length)],i+=t[Math.floor(Math.random()*t.length)],i+=wc[Math.floor(Math.random()*wc.length)];for(let l=i.length;l<s;l++)i+=n[Math.floor(Math.random()*n.length)];return i.split("").sort(()=>Math.random()-.5).join("")},r2=(s,t=[])=>{const r=s.split(" ")[0].toLowerCase().replace(/[^a-zа-яё0-9]/gi,"").slice(0,8);if(!t.includes(r))return r;const a=Math.floor(Math.random()*90+10),n=`${r}${a}`;if(!t.includes(n))return n;const i=Y0[Math.floor(Math.random()*Y0.length)],l=`${i}${r}`;return t.includes(l)?`${i}${r}${a}`:l},Q0=(s,t=[])=>{const r=t.map(i=>i.login),a=r2(s,r),n=s2(12);return{login:a,password:n}},Uo=s=>{const[t,r]=f.useState(()=>Yt(s));return f.useEffect(()=>{cr(s).then(n=>r(n));const a=n=>{var l;const i=n;(!((l=i.detail)!=null&&l.userId)||i.detail.userId===s)&&cr(s).then(c=>r(c))};return window.addEventListener("nicknameUpdated",a),window.addEventListener("userUpdated",a),()=>{window.removeEventListener("nicknameUpdated",a),window.removeEventListener("userUpdated",a)}},[s]),t},Bo=(s,t)=>{const[r,a]=f.useState(t);return f.useEffect(()=>{const n=async()=>{const l=Fe.find(d=>d.id===s);let c=l==null?void 0:l.avatar;try{const{users:d}=await qn().then(u=>({users:u})),h=d.find(u=>u.id===s);h!=null&&h.avatar&&(c=h.avatar)}catch{}a(c)};s?n():a(void 0);const i=l=>{var d;const c=l;(!((d=c.detail)!=null&&d.userId)||c.detail.userId===s)&&n()};return window.addEventListener("avatarUpdated",i),window.addEventListener("userUpdated",i),()=>{window.removeEventListener("avatarUpdated",i),window.removeEventListener("userUpdated",i)}},[s,t]),r};function Zl(s){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(s)}function er(s){if(s===null||s===!0||s===!1)return NaN;var t=Number(s);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Pt(s,t){if(t.length<s)throw new TypeError(s+" argument"+(s>1?"s":"")+" required, but only "+t.length+" present")}function ns(s){Pt(1,arguments);var t=Object.prototype.toString.call(s);return s instanceof Date||Zl(s)==="object"&&t==="[object Date]"?new Date(s.getTime()):typeof s=="number"||t==="[object Number]"?new Date(s):((typeof s=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function a2(s,t){Pt(2,arguments);var r=ns(s),a=er(t);return isNaN(a)?new Date(NaN):(a&&r.setDate(r.getDate()+a),r)}function xp(s,t){Pt(2,arguments);var r=ns(s).getTime(),a=er(t);return new Date(r+a)}var n2=36e5;function i2(s,t){Pt(2,arguments);var r=er(t);return xp(s,r*n2)}var l2={};function Bn(){return l2}function eo(s,t){var r,a,n,i,l,c,d,h;Pt(1,arguments);var u=Bn(),m=er((r=(a=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&a!==void 0?a:(d=u.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=ns(s),y=g.getDay(),v=(y<m?7:0)+y-m;return g.setDate(g.getDate()-v),g.setHours(0,0,0,0),g}function o2(s){var t=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return t.setUTCFullYear(s.getFullYear()),s.getTime()-t.getTime()}function X0(s){Pt(1,arguments);var t=ns(s);return t.setHours(0,0,0,0),t}var mp=6e4,gp=36e5;function c2(s,t){Pt(2,arguments);var r=X0(s),a=X0(t);return r.getTime()===a.getTime()}function d2(s){return Pt(1,arguments),s instanceof Date||Zl(s)==="object"&&Object.prototype.toString.call(s)==="[object Date]"}function h2(s){if(Pt(1,arguments),!d2(s)&&typeof s!="number")return!1;var t=ns(s);return!isNaN(Number(t))}function u2(s,t){var r;Pt(1,arguments);var a=s||{},n=ns(a.start),i=ns(a.end),l=i.getTime();if(!(n.getTime()<=l))throw new RangeError("Invalid interval");var c=[],d=n;d.setHours(0,0,0,0);var h=Number((r=void 0)!==null&&r!==void 0?r:1);if(h<1||isNaN(h))throw new RangeError("`options.step` must be a number greater than 1");for(;d.getTime()<=l;)c.push(ns(d)),d.setDate(d.getDate()+h),d.setHours(0,0,0,0);return c}function x2(s,t){var r,a,n,i,l,c,d,h;Pt(1,arguments);var u=Bn(),m=er((r=(a=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&a!==void 0?a:(d=u.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=ns(s),y=g.getDay(),v=(y<m?-7:0)+6-(y-m);return g.setDate(g.getDate()+v),g.setHours(23,59,59,999),g}function m2(s,t){Pt(2,arguments);var r=er(t);return xp(s,-r)}var g2=864e5;function p2(s){Pt(1,arguments);var t=ns(s),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var a=t.getTime(),n=r-a;return Math.floor(n/g2)+1}function to(s){Pt(1,arguments);var t=1,r=ns(s),a=r.getUTCDay(),n=(a<t?7:0)+a-t;return r.setUTCDate(r.getUTCDate()-n),r.setUTCHours(0,0,0,0),r}function pp(s){Pt(1,arguments);var t=ns(s),r=t.getUTCFullYear(),a=new Date(0);a.setUTCFullYear(r+1,0,4),a.setUTCHours(0,0,0,0);var n=to(a),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var l=to(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function b2(s){Pt(1,arguments);var t=pp(s),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var a=to(r);return a}var f2=6048e5;function y2(s){Pt(1,arguments);var t=ns(s),r=to(t).getTime()-b2(t).getTime();return Math.round(r/f2)+1}function In(s,t){var r,a,n,i,l,c,d,h;Pt(1,arguments);var u=Bn(),m=er((r=(a=(n=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:u.weekStartsOn)!==null&&a!==void 0?a:(d=u.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=ns(s),y=g.getUTCDay(),v=(y<m?7:0)+y-m;return g.setUTCDate(g.getUTCDate()-v),g.setUTCHours(0,0,0,0),g}function bp(s,t){var r,a,n,i,l,c,d,h;Pt(1,arguments);var u=ns(s),m=u.getUTCFullYear(),g=Bn(),y=er((r=(a=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:g.firstWeekContainsDate)!==null&&a!==void 0?a:(d=g.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(m+1,0,y),v.setUTCHours(0,0,0,0);var E=In(v,t),I=new Date(0);I.setUTCFullYear(m,0,y),I.setUTCHours(0,0,0,0);var C=In(I,t);return u.getTime()>=E.getTime()?m+1:u.getTime()>=C.getTime()?m:m-1}function v2(s,t){var r,a,n,i,l,c,d,h;Pt(1,arguments);var u=Bn(),m=er((r=(a=(n=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:u.firstWeekContainsDate)!==null&&a!==void 0?a:(d=u.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&r!==void 0?r:1),g=bp(s,t),y=new Date(0);y.setUTCFullYear(g,0,m),y.setUTCHours(0,0,0,0);var v=In(y,t);return v}var j2=6048e5;function w2(s,t){Pt(1,arguments);var r=ns(s),a=In(r,t).getTime()-v2(r,t).getTime();return Math.round(a/j2)+1}function bt(s,t){for(var r=s<0?"-":"",a=Math.abs(s).toString();a.length<t;)a="0"+a;return r+a}var ta={y:function(t,r){var a=t.getUTCFullYear(),n=a>0?a:1-a;return bt(r==="yy"?n%100:n,r.length)},M:function(t,r){var a=t.getUTCMonth();return r==="M"?String(a+1):bt(a+1,2)},d:function(t,r){return bt(t.getUTCDate(),r.length)},a:function(t,r){var a=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h:function(t,r){return bt(t.getUTCHours()%12||12,r.length)},H:function(t,r){return bt(t.getUTCHours(),r.length)},m:function(t,r){return bt(t.getUTCMinutes(),r.length)},s:function(t,r){return bt(t.getUTCSeconds(),r.length)},S:function(t,r){var a=r.length,n=t.getUTCMilliseconds(),i=Math.floor(n*Math.pow(10,a-3));return bt(i,r.length)}},Za={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N2={G:function(t,r,a){var n=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(t,r,a){if(r==="yo"){var n=t.getUTCFullYear(),i=n>0?n:1-n;return a.ordinalNumber(i,{unit:"year"})}return ta.y(t,r)},Y:function(t,r,a,n){var i=bp(t,n),l=i>0?i:1-i;if(r==="YY"){var c=l%100;return bt(c,2)}return r==="Yo"?a.ordinalNumber(l,{unit:"year"}):bt(l,r.length)},R:function(t,r){var a=pp(t);return bt(a,r.length)},u:function(t,r){var a=t.getUTCFullYear();return bt(a,r.length)},Q:function(t,r,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return bt(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,r,a){var n=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return bt(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,r,a){var n=t.getUTCMonth();switch(r){case"M":case"MM":return ta.M(t,r);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(t,r,a){var n=t.getUTCMonth();switch(r){case"L":return String(n+1);case"LL":return bt(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(t,r,a,n){var i=w2(t,n);return r==="wo"?a.ordinalNumber(i,{unit:"week"}):bt(i,r.length)},I:function(t,r,a){var n=y2(t);return r==="Io"?a.ordinalNumber(n,{unit:"week"}):bt(n,r.length)},d:function(t,r,a){return r==="do"?a.ordinalNumber(t.getUTCDate(),{unit:"date"}):ta.d(t,r)},D:function(t,r,a){var n=p2(t);return r==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):bt(n,r.length)},E:function(t,r,a){var n=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(t,r,a,n){var i=t.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return bt(l,2);case"eo":return a.ordinalNumber(l,{unit:"day"});case"eee":return a.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(i,{width:"short",context:"formatting"});case"eeee":default:return a.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,a,n){var i=t.getUTCDay(),l=(i-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return bt(l,r.length);case"co":return a.ordinalNumber(l,{unit:"day"});case"ccc":return a.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(i,{width:"narrow",context:"standalone"});case"cccccc":return a.day(i,{width:"short",context:"standalone"});case"cccc":default:return a.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,a){var n=t.getUTCDay(),i=n===0?7:n;switch(r){case"i":return String(i);case"ii":return bt(i,r.length);case"io":return a.ordinalNumber(i,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(t,r,a){var n=t.getUTCHours(),i=n/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,a){var n=t.getUTCHours(),i;switch(n===12?i=Za.noon:n===0?i=Za.midnight:i=n/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,a){var n=t.getUTCHours(),i;switch(n>=17?i=Za.evening:n>=12?i=Za.afternoon:n>=4?i=Za.morning:i=Za.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,a){if(r==="ho"){var n=t.getUTCHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return ta.h(t,r)},H:function(t,r,a){return r==="Ho"?a.ordinalNumber(t.getUTCHours(),{unit:"hour"}):ta.H(t,r)},K:function(t,r,a){var n=t.getUTCHours()%12;return r==="Ko"?a.ordinalNumber(n,{unit:"hour"}):bt(n,r.length)},k:function(t,r,a){var n=t.getUTCHours();return n===0&&(n=24),r==="ko"?a.ordinalNumber(n,{unit:"hour"}):bt(n,r.length)},m:function(t,r,a){return r==="mo"?a.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):ta.m(t,r)},s:function(t,r,a){return r==="so"?a.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ta.s(t,r)},S:function(t,r){return ta.S(t,r)},X:function(t,r,a,n){var i=n._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return Z0(l);case"XXXX":case"XX":return Ia(l);case"XXXXX":case"XXX":default:return Ia(l,":")}},x:function(t,r,a,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"x":return Z0(l);case"xxxx":case"xx":return Ia(l);case"xxxxx":case"xxx":default:return Ia(l,":")}},O:function(t,r,a,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+J0(l,":");case"OOOO":default:return"GMT"+Ia(l,":")}},z:function(t,r,a,n){var i=n._originalDate||t,l=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+J0(l,":");case"zzzz":default:return"GMT"+Ia(l,":")}},t:function(t,r,a,n){var i=n._originalDate||t,l=Math.floor(i.getTime()/1e3);return bt(l,r.length)},T:function(t,r,a,n){var i=n._originalDate||t,l=i.getTime();return bt(l,r.length)}};function J0(s,t){var r=s>0?"-":"+",a=Math.abs(s),n=Math.floor(a/60),i=a%60;if(i===0)return r+String(n);var l=t;return r+String(n)+l+bt(i,2)}function Z0(s,t){if(s%60===0){var r=s>0?"-":"+";return r+bt(Math.abs(s)/60,2)}return Ia(s,t)}function Ia(s,t){var r=t||"",a=s>0?"-":"+",n=Math.abs(s),i=bt(Math.floor(n/60),2),l=bt(n%60,2);return a+i+r+l}var ex=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},fp=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},k2=function(t,r){var a=t.match(/(P+)(p+)?/)||[],n=a[1],i=a[2];if(!i)return ex(t,r);var l;switch(n){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",ex(n,r)).replace("{{time}}",fp(i,r))},_2={p:fp,P:k2},E2=["D","DD"],$2=["YY","YYYY"];function T2(s){return E2.indexOf(s)!==-1}function S2(s){return $2.indexOf(s)!==-1}function tx(s,t,r){if(s==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(s==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var A2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I2=function(t,r,a){var n,i=A2[t];return typeof i=="string"?n=i:r===1?n=i.one:n=i.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function yn(s){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):s.defaultWidth,a=s.formats[r]||s.formats[s.defaultWidth];return a}}var C2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},R2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P2={date:yn({formats:C2,defaultWidth:"full"}),time:yn({formats:D2,defaultWidth:"full"}),dateTime:yn({formats:R2,defaultWidth:"full"})},M2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O2=function(t,r,a,n){return M2[t]};function pr(s){return function(t,r){var a=r!=null&&r.context?String(r.context):"standalone",n;if(a==="formatting"&&s.formattingValues){var i=s.defaultFormattingWidth||s.defaultWidth,l=r!=null&&r.width?String(r.width):i;n=s.formattingValues[l]||s.formattingValues[i]}else{var c=s.defaultWidth,d=r!=null&&r.width?String(r.width):s.defaultWidth;n=s.values[d]||s.values[c]}var h=s.argumentCallback?s.argumentCallback(t):t;return n[h]}}var L2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},V2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},U2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},q2=function(t,r){var a=Number(t),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},H2={ordinalNumber:q2,era:pr({values:L2,defaultWidth:"wide"}),quarter:pr({values:V2,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:pr({values:F2,defaultWidth:"wide"}),day:pr({values:U2,defaultWidth:"wide"}),dayPeriod:pr({values:B2,defaultWidth:"wide",formattingValues:z2,defaultFormattingWidth:"wide"})};function br(s){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;var l=i[0],c=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(c)?G2(c,function(m){return m.test(l)}):W2(c,function(m){return m.test(l)}),h;h=s.valueCallback?s.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;var u=t.slice(l.length);return{value:h,rest:u}}}function W2(s,t){for(var r in s)if(s.hasOwnProperty(r)&&t(s[r]))return r}function G2(s,t){for(var r=0;r<s.length;r++)if(t(s[r]))return r}function yp(s){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.match(s.matchPattern);if(!a)return null;var n=a[0],i=t.match(s.parsePattern);if(!i)return null;var l=s.valueCallback?s.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;var c=t.slice(n.length);return{value:l,rest:c}}}var K2=/^(\d+)(th|st|nd|rd)?/i,Y2=/\d+/i,Q2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X2={any:[/^b/i,/^(a|c)/i]},J2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Z2={any:[/1/i,/2/i,/3/i,/4/i]},ek={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tk={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sk={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rk={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ak={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nk={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ik={ordinalNumber:yp({matchPattern:K2,parsePattern:Y2,valueCallback:function(t){return parseInt(t,10)}}),era:br({matchPatterns:Q2,defaultMatchWidth:"wide",parsePatterns:X2,defaultParseWidth:"any"}),quarter:br({matchPatterns:J2,defaultMatchWidth:"wide",parsePatterns:Z2,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:br({matchPatterns:ek,defaultMatchWidth:"wide",parsePatterns:tk,defaultParseWidth:"any"}),day:br({matchPatterns:sk,defaultMatchWidth:"wide",parsePatterns:rk,defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:ak,defaultMatchWidth:"any",parsePatterns:nk,defaultParseWidth:"any"})},lk={code:"en-US",formatDistance:I2,formatLong:P2,formatRelative:O2,localize:H2,match:ik,options:{weekStartsOn:0,firstWeekContainsDate:1}},ok=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ck=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dk=/^'([^]*?)'?$/,hk=/''/g,uk=/[a-zA-Z]/;function lr(s,t,r){var a,n,i,l,c,d,h,u,m,g,y,v,E,I,C,T,D,M;Pt(2,arguments);var se=String(t),L=Bn(),N=(a=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:L.locale)!==null&&a!==void 0?a:lk,b=er((i=(l=(c=(d=r==null?void 0:r.firstWeekContainsDate)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(u=h.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&c!==void 0?c:L.firstWeekContainsDate)!==null&&l!==void 0?l:(m=L.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=er((y=(v=(E=(I=r==null?void 0:r.weekStartsOn)!==null&&I!==void 0?I:r==null||(C=r.locale)===null||C===void 0||(T=C.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&E!==void 0?E:L.weekStartsOn)!==null&&v!==void 0?v:(D=L.locale)===null||D===void 0||(M=D.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&y!==void 0?y:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var j=ns(s);if(!h2(j))throw new RangeError("Invalid time value");var $=o2(j),_=m2(j,$),k={firstWeekContainsDate:b,weekStartsOn:w,locale:N,_originalDate:j},H=se.match(ck).map(function(S){var F=S[0];if(F==="p"||F==="P"){var Z=_2[F];return Z(S,N.formatLong)}return S}).join("").match(ok).map(function(S){if(S==="''")return"'";var F=S[0];if(F==="'")return xk(S);var Z=N2[F];if(Z)return!(r!=null&&r.useAdditionalWeekYearTokens)&&S2(S)&&tx(S,t,String(s)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&T2(S)&&tx(S,t,String(s)),Z(_,S,N.localize,k);if(F.match(uk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return S}).join("");return H}function xk(s){var t=s.match(dk);return t?t[1].replace(hk,"'"):s}function mk(s,t){Pt(2,arguments);var r=ns(s),a=ns(t);return r.getTime()<a.getTime()}function Ms(s,t){var r;Pt(1,arguments);var a=er((r=void 0)!==null&&r!==void 0?r:2);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var n=fk(s),i;if(n.date){var l=yk(n.date,a);i=vk(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var c=i.getTime(),d=0,h;if(n.time&&(d=jk(n.time),isNaN(d)))return new Date(NaN);if(n.timezone){if(h=wk(n.timezone),isNaN(h))return new Date(NaN)}else{var u=new Date(c+d),m=new Date(0);return m.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),m.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),m}return new Date(c+d+h)}var pl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},gk=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pk=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,bk=/^([+-])(\d{2})(?::?(\d{2}))?$/;function fk(s){var t={},r=s.split(pl.dateTimeDelimiter),a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],pl.timeZoneDelimiter.test(t.date)&&(t.date=s.split(pl.timeZoneDelimiter)[0],a=s.substr(t.date.length,s.length))),a){var n=pl.timezone.exec(a);n?(t.time=a.replace(n[1],""),t.timezone=n[1]):t.time=a}return t}function yk(s,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=s.match(r);if(!a)return{year:NaN,restDateString:""};var n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:s.slice((a[1]||a[2]).length)}}function vk(s,t){if(t===null)return new Date(NaN);var r=s.match(gk);if(!r)return new Date(NaN);var a=!!r[4],n=ti(r[1]),i=ti(r[2])-1,l=ti(r[3]),c=ti(r[4]),d=ti(r[5])-1;if(a)return $k(t,c,d)?Nk(t,c,d):new Date(NaN);var h=new Date(0);return!_k(t,i,l)||!Ek(t,n)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(n,l)),h)}function ti(s){return s?parseInt(s):1}function jk(s){var t=s.match(pk);if(!t)return NaN;var r=Nc(t[1]),a=Nc(t[2]),n=Nc(t[3]);return Tk(r,a,n)?r*gp+a*mp+n*1e3:NaN}function Nc(s){return s&&parseFloat(s.replace(",","."))||0}function wk(s){if(s==="Z")return 0;var t=s.match(bk);if(!t)return 0;var r=t[1]==="+"?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return Sk(a,n)?r*(a*gp+n*mp):NaN}function Nk(s,t,r){var a=new Date(0);a.setUTCFullYear(s,0,4);var n=a.getUTCDay()||7,i=(t-1)*7+r+1-n;return a.setUTCDate(a.getUTCDate()+i),a}var kk=[31,null,31,30,31,30,31,31,30,31,30,31];function vp(s){return s%400===0||s%4===0&&s%100!==0}function _k(s,t,r){return t>=0&&t<=11&&r>=1&&r<=(kk[t]||(vp(s)?29:28))}function Ek(s,t){return t>=1&&t<=(vp(s)?366:365)}function $k(s,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Tk(s,t,r){return s===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&s>=0&&s<25}function Sk(s,t){return t>=0&&t<=59}function sx(s,t,r){Pt(2,arguments);var a=In(s,r),n=In(t,r);return a.getTime()===n.getTime()}function si(s,t){if(s.one!==void 0&&t===1)return s.one;var r=t%10,a=t%100;return r===1&&a!==11?s.singularNominative.replace("{{count}}",String(t)):r>=2&&r<=4&&(a<10||a>20)?s.singularGenitive.replace("{{count}}",String(t)):s.pluralGenitive.replace("{{count}}",String(t))}function Rs(s){return function(t,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?s.future?si(s.future,t):"через "+si(s.regular,t):s.past?si(s.past,t):si(s.regular,t)+" назад":si(s.regular,t)}}var Ak={lessThanXSeconds:Rs({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Rs({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(t,r){return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:Rs({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Rs({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Rs({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Rs({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Rs({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Rs({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Rs({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Rs({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Rs({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Rs({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Rs({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Rs({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Rs({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},Ik=function(t,r,a){return Ak[t](r,a)},Ck={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Dk={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},Rk={any:"{{date}}, {{time}}"},Pk={date:yn({formats:Ck,defaultWidth:"full"}),time:yn({formats:Dk,defaultWidth:"full"}),dateTime:yn({formats:Rk,defaultWidth:"any"})},Ih=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function Mk(s){var t=Ih[s];switch(s){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function rx(s){var t=Ih[s];return s===2?"'во "+t+" в' p":"'в "+t+" в' p"}function Ok(s){var t=Ih[s];switch(s){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}var Lk={lastWeek:function(t,r,a){var n=t.getUTCDay();return sx(t,r,a)?rx(n):Mk(n)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(t,r,a){var n=t.getUTCDay();return sx(t,r,a)?rx(n):Ok(n)},other:"P"},Vk=function(t,r,a,n){var i=Lk[t];return typeof i=="function"?i(r,a,n):i},Fk={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},Uk={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},Bk={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},zk={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},qk={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},Hk={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},Wk={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},Gk=function(t,r){var a=Number(t),n=r==null?void 0:r.unit,i;return n==="date"?i="-е":n==="week"||n==="minute"||n==="second"?i="-я":i="-й",a+i},Kk={ordinalNumber:Gk,era:pr({values:Fk,defaultWidth:"wide"}),quarter:pr({values:Uk,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:pr({values:Bk,defaultWidth:"wide",formattingValues:zk,defaultFormattingWidth:"wide"}),day:pr({values:qk,defaultWidth:"wide"}),dayPeriod:pr({values:Hk,defaultWidth:"any",formattingValues:Wk,defaultFormattingWidth:"wide"})},Yk=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,Qk=/\d+/i,Xk={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},Jk={any:[/^д/i,/^н/i]},Zk={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},e4={any:[/1/i,/2/i,/3/i,/4/i]},t4={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},s4={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},r4={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},a4={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},n4={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},i4={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},l4={ordinalNumber:yp({matchPattern:Yk,parsePattern:Qk,valueCallback:function(t){return parseInt(t,10)}}),era:br({matchPatterns:Xk,defaultMatchWidth:"wide",parsePatterns:Jk,defaultParseWidth:"any"}),quarter:br({matchPatterns:Zk,defaultMatchWidth:"wide",parsePatterns:e4,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:br({matchPatterns:t4,defaultMatchWidth:"wide",parsePatterns:s4,defaultParseWidth:"any"}),day:br({matchPatterns:r4,defaultMatchWidth:"wide",parsePatterns:a4,defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:n4,defaultMatchWidth:"wide",parsePatterns:i4,defaultParseWidth:"any"})},o4={code:"ru",formatDistance:Ik,formatLong:Pk,formatRelative:Vk,localize:Kk,match:l4,options:{weekStartsOn:1,firstWeekContainsDate:1}};const oe=(s,t="dd.MM.yyyy")=>{try{const r=typeof s=="string"?Ms(s):s;return!r||Number.isNaN(r.getTime())?"":lr(r,t,{locale:o4})}catch{return""}},zn=(s=new Date)=>{const t=eo(s,{weekStartsOn:1}),r=x2(s,{weekStartsOn:1});return{start:t,end:r}},so=(s=new Date)=>{const{start:t,end:r}=zn(s);return u2({start:t,end:r})},jp=s=>{const t=new Date,r=new Date(t);r.setHours(0,0,0,0),r.setDate(r.getDate()-(s-1));const a=new Date(t);return a.setHours(23,59,59,999),{start:r,end:a}},wp=(s,t)=>{const r=typeof s=="string"?Ms(s):s,a=typeof t=="string"?Ms(t):t;return c2(r,a)},zo=s=>s.reduce((t,r)=>{const[a,n]=r.start.split(":").map(Number),[i,l]=r.end.split(":").map(Number),c=a*60+n;let h=(i*60+l-c)/60;if(h<0&&(h+=24),r.breaks&&r.breaks.length>0){const u=r.breaks.reduce((m,g)=>{const[y,v]=g.start.split(":").map(Number),[E,I]=g.end.split(":").map(Number),C=y*60+v;let D=(E*60+I-C)/60;return D<0&&(D+=24),m+D},0);h-=u}return t+h},0),Us=s=>{const[t,r]=s.split(":").map(Number);return t*60+r},ro=(s,t)=>{if(!s||!t)return[];const r=Ms(s),a=Ms(t);if(mk(a,r))return[];const n=[],i=new Date(r);for(;i<=a;)n.push(oe(i,"yyyy-MM-dd")),i.setDate(i.getDate()+1);return n},Np=s=>{const t=Array.from(new Set(s.filter(Boolean)));return t.sort(),t},bl=(s,t)=>{const r=Us(s.start),a=Us(s.end),n=Us(t.start),i=Us(t.end),l=s.endDate||a<=r,c=t.endDate||i<=n;if(!l&&!c)return r<i&&a>n;const d=24*60,h=l?a+d:a,u=c?i+d:i;return r<u&&h>n},Vr=()=>{const s=new Date,t=3*60,r=s.getTimezoneOffset();return new Date(s.getTime()+(t+r)*60*1e3)},cd=(s,t,r,a)=>{const n=s,i=t||s;if(i<r||n>a)return 0;const l=n>r?n:r,c=i<a?i:a,d=Ms(l),u=Ms(c).getTime()-d.getTime();return Math.floor(u/(1e3*60*60*24))+1},c4=30,ax=s=>s.toString().padStart(2,"0"),d4=()=>{const s=new Date;return s.setDate(s.getDate()-c4),{dateOnly:`${s.getFullYear()} -${ax(s.getMonth()+1)} -${ax(s.getDate())} `,iso:s.toISOString()}},ri=async(s,t,r)=>{const a=rt(je,s),n=ht(a,ss(t,"<",r)),i=await bs(n);await Promise.all(i.docs.map(l=>Ls(Ze(je,s,l.id))))},h4=async()=>{try{const{dateOnly:s,iso:t}=d4();await Promise.all([ri("workSlots","date",s),ri("dayStatuses","date",s),ri("earnings","date",s),ri("referrals","createdAt",t),ri("analytics","createdAt",t)])}catch(s){console.error("Failed to cleanup old data",s)}},vr=async(s,t)=>{const r=rt(je,"workSlots");let a;s&&t||s?a=ht(r,ss("userId","==",s)):t?a=ht(r,ss("date","==",t)):a=ht(r);let i=(await bs(a)).docs.map(l=>{const c=l.data(),d=((c==null?void 0:c.slots)||[]).map(h=>h.break&&!h.breaks?{...h,breaks:[h.break],break:void 0}:h);return{id:l.id,userId:(c==null?void 0:c.userId)||"",date:(c==null?void 0:c.date)||"",slots:d,participants:(c==null?void 0:c.participants)||[],...(c==null?void 0:c.comment)&&{comment:c.comment},...(c==null?void 0:c.category)&&{category:c.category}}});return s&&t&&(i=i.filter(l=>l.date===t)),i.sort((l,c)=>l.date.localeCompare(c.date)),i},kp=async s=>{try{console.log("addWorkSlot: Starting, db initialized:",!!je);const t=rt(je,"workSlots");console.log("addWorkSlot: Collection reference created");const r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));console.log("addWorkSlot: Clean slot prepared:",r),console.log("addWorkSlot: Calling addDoc...");const a=await Vs(t,r);return console.log("addWorkSlot: Work slot added successfully:",a.id),a}catch(t){throw console.error("addWorkSlot: Error caught:",t),console.error("addWorkSlot: Error code:",t==null?void 0:t.code),console.error("addWorkSlot: Error message:",t==null?void 0:t.message),console.error("addWorkSlot: Full error:",JSON.stringify(t,null,2)),t}},_p=async(s,t)=>{const r=Ze(je,"workSlots",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},qo=async s=>{const t=Ze(je,"workSlots",s);await Ls(t)},Fr=async(s,t)=>{const r=rt(je,"dayStatuses");let a;s?a=ht(r,ss("userId","==",s)):a=ht(r);let i=(await bs(a)).docs.map(l=>{const c=l.data();return{id:l.id,userId:(c==null?void 0:c.userId)||"",date:(c==null?void 0:c.date)||"",type:(c==null?void 0:c.type)||"dayoff",...(c==null?void 0:c.comment)&&{comment:c.comment},...(c==null?void 0:c.endDate)&&{endDate:c.endDate}}});return i.sort((l,c)=>l.date.localeCompare(c.date)),i},Ho=async s=>{try{const t=rt(je,"dayStatuses"),r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));console.log("Adding day status:",r);const a=await Vs(t,r);return console.log("Day status added successfully:",a.id),a}catch(t){throw console.error("Error in addDayStatus:",t),t}},ma=async(s,t)=>{const r=Ze(je,"dayStatuses",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},Qi=async s=>{const t=Ze(je,"dayStatuses",s);await Ls(t)},dd=async s=>{const t=rt(je,"restrictions");let r;s!==void 0?r=ht(t,ss("isActive","==",s)):r=ht(t);const n=(await bs(r)).docs.map(i=>{const l=i.data();return{id:i.id,type:(l==null?void 0:l.type)||"all",startDate:(l==null?void 0:l.startDate)||"",endDate:l==null?void 0:l.endDate,startTime:l==null?void 0:l.startTime,blockFutureDates:(l==null?void 0:l.blockFutureDates)||!1,comment:l==null?void 0:l.comment,createdBy:(l==null?void 0:l.createdBy)||"",createdAt:(l==null?void 0:l.createdAt)||"",isActive:(l==null?void 0:l.isActive)??!0}});return n.sort((i,l)=>i.startDate.localeCompare(l.startDate)),n},u4=async s=>{try{const t=rt(je,"restrictions"),r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));return await Vs(t,r)}catch(t){throw console.error("Error adding restriction:",t),t}},x4=async(s,t)=>{const r=Ze(je,"restrictions",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},m4=async s=>{const t=Ze(je,"restrictions",s);await Ls(t)},ao=async(s,t,r)=>{try{const a=await dd(!0),n=new Date;for(const i of a){if(i.type!=="all"&&i.type!==s)continue;const l=new Date(t),c=new Date(`${i.startDate}${i.startTime?`T${i.startTime}`:""} `);if(i.blockFutureDates&&n>=c){const u=new Date(i.startDate),m=new Date(u);if(m.setDate(u.getDate()+1),l.toDateString()===m.toDateString())return{restricted:!0,restriction:i,reason:`После ${oe(c,"dd.MM.yyyy")}${i.startTime?` ${i.startTime}`:""} запрещено создавать ${kc(s)} на следующий день ${oe(m,"dd.MM.yyyy")} `}}const d=new Date(i.startDate);let h=!1;if(i.endDate){const u=new Date(i.endDate);h=l>=d&&l<=u}else h=l.getTime()===d.getTime();if(h){if(!i.startTime)return{restricted:!0,restriction:i,reason:`Запрещено создавать ${kc(s)} на ${oe(l,"dd.MM.yyyy")} `};if(r&&i.startTime){const u=r,m=i.startTime;if(u>=m)return{restricted:!0,restriction:i,reason:`Запрещено создавать ${kc(s)} после ${m} на ${oe(l,"dd.MM.yyyy")} `}}}}return{restricted:!1}}catch(a){return console.error("Error checking restrictions:",a),{restricted:!1}}},kc=s=>({slots:"слоты",dayoff:"выходные",sick:"больничные",vacation:"отпуска",absence:"отсутствия",truancy:"прогулы",internship:"стажировки",all:"любые записи"})[s],Wo="approvalRequests",Ch=s=>{const t=s.data(),r=new Date().toISOString();return{id:s.id,entity:(t==null?void 0:t.entity)||"slot",action:(t==null?void 0:t.action)||"create",status:(t==null?void 0:t.status)||"pending",authorId:(t==null?void 0:t.authorId)||"",targetUserId:(t==null?void 0:t.targetUserId)||"",before:(t==null?void 0:t.before)??null,after:(t==null?void 0:t.after)??null,comment:t==null?void 0:t.comment,adminComment:t==null?void 0:t.adminComment,reviewedBy:t==null?void 0:t.reviewedBy,createdAt:(t==null?void 0:t.createdAt)||r,updatedAt:(t==null?void 0:t.updatedAt)||(t==null?void 0:t.createdAt)||r,processedAt:t==null?void 0:t.processedAt}},g4=async s=>{const t=s.before,r=s.after;switch(s.action){case"create":{if(!r)throw new Error("No slot payload for creation");const{id:a,...n}=r;await kp(n);return}case"update":{const a=(r==null?void 0:r.id)||(t==null?void 0:t.id);if(!a||!r)throw new Error("No slot payload for update");const{id:n,...i}=r;await _p(a,i);return}case"delete":{if(!(t!=null&&t.id))throw new Error("No slot id for delete");await qo(t.id);return}default:return}},p4=async s=>{const t=s.before,r=s.after;switch(s.action){case"create":{if(!r)throw new Error("No status payload for creation");const{id:a,...n}=r;await Ho(n);return}case"update":{const a=(r==null?void 0:r.id)||(t==null?void 0:t.id);if(!a||!r)throw new Error("No status payload for update");const{id:n,...i}=r;await ma(a,i);return}case"delete":{if(!(t!=null&&t.id))throw new Error("No status id for delete");await Qi(t.id);return}default:return}},b4=async s=>{const t=s.before,r=s.after;switch(s.action){case"create":{if(!r)throw new Error("No earning payload for creation");const{id:a,...n}=r;await Ep(n);return}case"update":{const a=(r==null?void 0:r.id)||(t==null?void 0:t.id);if(!a||!r)throw new Error("No earning payload for update");const{id:n,...i}=r;await $p(a,i);return}case"delete":{if(!(t!=null&&t.id))throw new Error("No earning id for delete");await Tp(t.id);return}default:return}},f4=async s=>{const t=s.before,r=s.after;switch(s.action){case"create":{if(!r)throw new Error("No referral payload for creation");const{id:a,...n}=r;await Ap(n);return}case"update":{const a=(r==null?void 0:r.id)||(t==null?void 0:t.id);if(!a||!r)throw new Error("No referral payload for update");const{id:n,...i}=r;await Ip(a,i);return}case"delete":{if(!(t!=null&&t.id))throw new Error("No referral id for delete");await Cp(t.id);return}default:return}},y4=async s=>{const t=s.after;switch(s.action){case"update":{if(!t||!t.nickname)throw new Error("No nickname payload for update");await S4(s.targetUserId,t.nickname);return}case"delete":{await A4(s.targetUserId);return}default:return}},ts=async s=>{const t=rt(je,Wo),r=new Date().toISOString(),a={...s,status:"pending",createdAt:r,updatedAt:r},n=Object.fromEntries(Object.entries(a).filter(([,l])=>l!==void 0));return await Vs(t,n)},v4=async(s,t,r)=>{const a=rt(je,Wo);let n;n=ht(a);let l=(await bs(n)).docs.map(Ch);return l.sort((c,d)=>d.createdAt.localeCompare(c.createdAt)),l},nx=async(s,t,r)=>{const a=Ze(je,Wo,s),n=await Sn(a);if(!n.exists())return;const i=Ch(n);if(i.status!=="pending")return;i.entity==="slot"?await g4(i):i.entity==="status"?await p4(i):i.entity==="earning"?await b4(i):i.entity==="referral"?await f4(i):i.entity==="login"&&(await y4(i),od(i.targetUserId),await cr(i.targetUserId));const l={status:"approved",reviewedBy:t,updatedAt:new Date().toISOString(),processedAt:new Date().toISOString()},c=i.adminComment;c!==void 0&&(l.adminComment=c),await Is(a,l)},ix=async(s,t,r)=>{const a=Ze(je,Wo,s),n=await Sn(a);!n.exists()||Ch(n).status!=="pending"||await Is(a,{status:"rejected",adminComment:r,reviewedBy:t,updatedAt:new Date().toISOString(),processedAt:new Date().toISOString()})},Ri=async(s,t,r)=>{const a=rt(je,"earnings");let n;s?n=ht(a):t&&r?n=ht(a,ss("date",">=",t),ss("date","<=",r)):n=ht(a);let l=(await bs(n)).docs.map(c=>{const d=c.data();return{id:c.id,userId:(d==null?void 0:d.userId)||"",date:(d==null?void 0:d.date)||"",amount:(d==null?void 0:d.amount)||0,poolAmount:(d==null?void 0:d.poolAmount)||0,slotId:(d==null?void 0:d.slotId)||"",walletType:(d==null?void 0:d.walletType)||"personal",isDeving:(d==null?void 0:d.isDeving)||!1,extraWalletsCount:(d==null?void 0:d.extraWalletsCount)||0,extraWalletsAmount:(d==null?void 0:d.extraWalletsAmount)||0,category:(d==null?void 0:d.category)||"other",participants:(d==null?void 0:d.participants)||[]}});return s&&(l=l.filter(c=>(c.participants&&c.participants.length>0?[...c.participants,c.userId]:[c.userId]).includes(s))),s&&t&&r?l=l.filter(c=>c.date>=t&&c.date<=r):!s&&t&&r&&(l=l.filter(c=>c.date>=t&&c.date<=r)),l.sort((c,d)=>d.date.localeCompare(c.date)),l},Ep=async s=>{try{const t=rt(je,"earnings"),r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));console.log("Adding earnings:",r);const a=await Vs(t,r);return console.log("Earnings added successfully:",a.id),a}catch(t){throw console.error("Error in addEarnings:",t),t}},$p=async(s,t)=>{const r=Ze(je,"earnings",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},Tp=async s=>{const t=Ze(je,"earnings",s);await Ls(t)},Sp=async s=>{const t=rt(je,"ratings");let r=ht(t);return s&&(r=ht(r,ss("userId","==",s))),(await bs(r)).docs.map(n=>{const i=n.data();return{id:n.id,userId:i.userId||"",earnings:i.earnings||0,messages:i.messages||0,initiatives:i.initiatives||0,signals:i.signals||0,profitableSignals:i.profitableSignals||0,referrals:i.referrals||0,daysOff:i.daysOff||0,sickDays:i.sickDays||0,vacationDays:i.vacationDays||0,absenceDays:i.absenceDays||0,truancyDays:i.truancyDays||0,internshipDays:i.internshipDays||0,poolAmount:i.poolAmount||0,rating:i.rating||0,lastUpdated:i.lastUpdated||new Date().toISOString()}})},Ap=async s=>{try{const t=rt(je,"referrals"),r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));console.log("Adding referral:",r);const a=await Vs(t,r);return console.log("Referral added successfully:",a.id),a}catch(t){throw console.error("Error in addReferral:",t),t}},Dh=async(s,t,r)=>{const a=rt(je,"referrals");let n;n=ht(a,Gr("createdAt","desc"));let l=(await bs(n)).docs.map(c=>{const d=c.data();return{id:c.id,referralId:d.referralId,ownerId:d.ownerId,name:d.name,age:d.age,createdAt:d.createdAt,comment:d.comment,phone:d.phone,tgAccount:d.tgAccount,source:d.source,status:d.status||"active"}});return t&&r&&(l=l.filter(c=>c.createdAt>=t&&c.createdAt<=r)),l.sort((c,d)=>c.createdAt<d.createdAt?1:-1)},Ip=async(s,t)=>{const r=Ze(je,"referrals",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},Cp=async s=>{const t=Ze(je,"referrals",s);await Ls(t)},j4=async s=>{if(console.log("📝 Service site: Creating call:",{category:s.category,userId:s.userId,status:s.status,createdAt:s.createdAt}),!je)throw console.error("❌ Service site: Firestore db is not initialized"),new Error("Firestore database is not initialized");const t=rt(je,"calls"),r=await Vs(t,s);return console.log("✅ Service site: Call created successfully with ID:",r.id),console.log("📊 Service site: Call data saved to Firestore:",s),r.id},w4=async s=>{const t=rt(je,"calls"),r=[];r.push(Gr("createdAt","desc"));let a;return r.length>0?a=ht(t,...r):a=ht(t,Gr("createdAt","desc")),(await bs(a)).docs.map(l=>{var y,v,E,I,C,T,D;const c=l.data(),d=c.category||"memecoins",h=!c.details&&c.ticker?{memecoins:{coinName:c.pair||c.ticker,ticker:c.ticker||"",network:c.network||"solana",contract:c.contract,signalType:c.sentiment||"buy",reason:c.comment||c.risks||"",entryCap:c.entryPoint||"",targets:c.target||"",stopLoss:c.cancelConditions,riskLevel:c.riskLevel||"medium",risks:c.risks||"",holdPlan:"short",liquidityLocked:!1,traderComment:c.comment}}:{},u=c.details||h||{},m=c.riskLevel||((y=u.memecoins)==null?void 0:y.riskLevel)||((v=u.polymarket)==null?void 0:v.riskLevel)||((E=u.staking)==null?void 0:E.protocolRisk)||((I=u.spot)==null?void 0:I.riskLevel)||((C=u.futures)==null?void 0:C.riskLevel),g=c.sentiment||(((T=u.futures)==null?void 0:T.direction)==="long"?"buy":((D=u.futures)==null?void 0:D.direction)==="short"?"sell":void 0);return{id:l.id,userId:c.userId||"",category:d,details:u,sentiment:g,riskLevel:m,comment:c.comment,createdAt:c.createdAt||new Date().toISOString(),status:c.status||"active",maxProfit:c.maxProfit,currentPnL:c.currentPnL,currentMarketCap:c.currentMarketCap,signalMarketCap:c.signalMarketCap,currentPrice:c.currentPrice,entryPrice:c.entryPrice,tags:c.tags||[]}})},hd=async(s,t)=>{const r=Ze(je,"calls",s);await Is(r,t)},N4=async s=>{const t=Ze(je,"calls",s);await Ls(t)},k4=async s=>{const t=rt(je,"tasks");return(await Vs(t,s)).id},_4=async s=>{const t=rt(je,"tasks"),r=[];s!=null&&s.status&&r.push(ss("status","==",s.status)),s!=null&&s.category&&r.push(ss("category","==",s.category)),s!=null&&s.createdBy&&r.push(ss("createdBy","==",s.createdBy)),r.push(Gr("createdAt","desc"));let a;r.length>0?a=ht(t,...r):a=ht(t,Gr("createdAt","desc"));const n=await bs(a),i=g=>g==="high"||g==="low"||g==="urgent"?g:"medium",l=g=>g==="completed"||g==="closed"?g:"in_progress",c=(g=[])=>g.filter(y=>y==null?void 0:y.userId).slice(0,10).map(y=>({userId:y.userId,priority:i(y.priority),comment:y.comment,instruction:y.instruction}));let d=n.docs.map(g=>{const y=g.data(),E=((Array.isArray(y.assignees)?y.assignees:(y.assignedTo||[]).map(D=>({userId:D,priority:"medium"})))||[]).map(D=>({userId:D.userId||"",priority:i(D.priority),comment:D.comment})).filter(D=>!!D.userId),I=E.map(D=>D.userId),C=Array.isArray(y.coExecutors)?y.coExecutors:Array.isArray(y.executors)?y.executors:[],T=(y.stages||[]).map(D=>({id:D.id||`stage - ${Date.now()} `,name:D.name||"Этап",description:D.description,responsible:D.responsible==="all"?"all":Array.isArray(D.responsible)?D.responsible:(D.assignees||[]).map(M=>M.userId),assignees:c(D.assignees),stagePriority:i(D.stagePriority),requiresApproval:D.requiresApproval??!0,approvals:D.approvals||[],comments:D.comments||[],status:D.status||"pending"}));return{id:g.id,title:y.title||"",description:y.description,category:y.category||"trading",status:l(y.status),createdBy:y.createdBy||"",assignedTo:I,assignees:E,approvals:y.approvals||[],createdAt:y.createdAt||new Date().toISOString(),updatedAt:y.updatedAt||new Date().toISOString(),completedAt:y.completedAt,closedAt:y.closedAt,completedBy:y.completedBy,priority:i(y.priority),dueDate:y.dueDate||new Date().toISOString().split("T")[0],dueTime:y.dueTime||"12:00",startTime:y.startTime,mainExecutor:y.mainExecutor,leadExecutor:y.leadExecutor,deputies:y.deputies||[],coExecutors:C,executors:y.executors||[],curators:y.curators||[],leads:y.leads||[],stages:T,currentStageId:y.currentStageId,awaitingStageId:y.awaitingStageId,comments:y.comments||[],expectedResult:y.expectedResult,requiresApproval:y.requiresApproval??!0}});const h=new Date,u=new Date(h.getTime()-12*60*60*1e3),m=d.filter(g=>g.status==="closed"&&g.closedAt?new Date(g.closedAt)<u:!1);if(m.length>0&&(await Promise.all(m.map(g=>Dp(g.id))),d=d.filter(g=>!m.find(y=>y.id===g.id))),s!=null&&s.assignedTo)if(Array.isArray(s.assignedTo)){const g=s.assignedTo;g.length>0&&(d=d.filter(y=>g.some(v=>y.assignedTo.includes(v))))}else d=d.filter(g=>g.assignedTo.includes(s.assignedTo));return d},E4=async(s,t)=>{const r=Ze(je,"tasks",s),a=Object.fromEntries(Object.entries({...t,updatedAt:new Date().toISOString()}).filter(([n,i])=>i!==void 0));await Is(r,a)},Dp=async s=>{const t=Ze(je,"tasks",s);await Ls(t)},$4=async s=>{const t=rt(je,"userActivities");return(await Vs(t,s)).id},ud=async(s,t)=>{const r=Ze(je,"userActivities",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Is(r,a)},_c=async(s,t,r)=>{await ud(s,{logoutAt:t,sessionDuration:r,isActive:!1})},Rh=async s=>{const t=rt(je,"userNicknames"),r=ht(t,ss("userId","==",s)),a=await bs(r);if(a.empty)return null;const n=a.docs[0].data();return{id:a.docs[0].id,userId:n.userId||"",nickname:n.nickname||"",createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}},T4=async s=>{const t=await Rh(s);return(t==null?void 0:t.nickname)||null},S4=async(s,t)=>{const r=rt(je,"userNicknames"),a=await Rh(s),n=new Date().toISOString();if(a){const i=Ze(je,"userNicknames",a.id);return await Is(i,{nickname:t,updatedAt:n}),a.id}else return(await Vs(r,{userId:s,nickname:t,createdAt:n,updatedAt:n})).id},A4=async s=>{const t=await Rh(s);t&&await Ls(Ze(je,"userNicknames",t.id))},Rp=async(s,t)=>{const r=rt(je,"userConflicts");let a;return s&&t!==void 0?a=ht(r,ss("isActive","==",t),ss("userId","==",s)):s?a=ht(r,ss("userId","==",s)):t!==void 0?a=ht(r,ss("isActive","==",t)):a=ht(r),(await bs(a)).docs.map(i=>{const l=i.data();return{id:i.id,userId:(l==null?void 0:l.userId)||"",restrictedUserId:(l==null?void 0:l.restrictedUserId)||"",reason:(l==null?void 0:l.reason)||"",createdBy:(l==null?void 0:l.createdBy)||"",createdAt:(l==null?void 0:l.createdAt)||"",isActive:(l==null?void 0:l.isActive)??!0}})},I4=async s=>{const t=rt(je,"userConflicts");return await Vs(t,s)},lx=async(s,t)=>{const r=Ze(je,"userConflicts",s);await Is(r,t)},C4=async s=>{const t=Ze(je,"userConflicts",s);await Ls(t)},Pp=async s=>{const t=rt(je,"accessBlocks");let r;return s!==void 0?r=ht(t,ss("isActive","==",s)):r=ht(t),(await bs(r)).docs.map(n=>{const i=n.data();return{id:n.id,userId:i==null?void 0:i.userId,userIds:(i==null?void 0:i.userIds)||[],targetType:(i==null?void 0:i.targetType)||(i!=null&&i.userId?"single":"all"),reason:(i==null?void 0:i.reason)||"Администратор не указал причину",createdBy:(i==null?void 0:i.createdBy)||"",createdAt:(i==null?void 0:i.createdAt)||"",expiresAt:i==null?void 0:i.expiresAt,isActive:(i==null?void 0:i.isActive)??!0,blockFeatures:(i==null?void 0:i.blockFeatures)||[]}})},D4=async s=>{const t=rt(je,"accessBlocks");return await Vs(t,s)},xd=async(s,t)=>{const r=Ze(je,"accessBlocks",s);await Is(r,t)},R4=async s=>{const t=Ze(je,"accessBlocks",s);await Ls(t)},Cn=async(s,t)=>{var r;try{const n=(await Pp(!0)).filter(i=>i.isActive).sort((i,l)=>i.blockFeatures.includes("all")?-1:l.blockFeatures.includes("all")?1:0);for(const i of n){if(!(i.targetType==="all"||i.targetType==="single"&&i.userId===s||i.targetType==="subset"&&((r=i.userIds)==null?void 0:r.includes(s))))continue;if(i.expiresAt&&new Date(i.expiresAt)<new Date){await xd(i.id,{isActive:!1});continue}if(i.blockFeatures.includes("all"))return{hasAccess:!1,reason:i.reason,expiresAt:i.expiresAt};if(i.blockFeatures.includes(t))return{hasAccess:!1,reason:i.reason,expiresAt:i.expiresAt};const c={tools:["tools_events","tools_kontur","tools_strategies_view","tools_items_view"],tools_kontur:["tools_kontur_memecoins","tools_kontur_polymarket","tools_kontur_nft","tools_kontur_staking","tools_kontur_spot","tools_kontur_futures","tools_kontur_airdrop"],ava_hub:["hub_signals_add","hub_signals_view","hub_signals_cat_memecoins","hub_signals_cat_polymarket","hub_signals_cat_nft","hub_signals_cat_spot","hub_signals_cat_futures","hub_signals_cat_staking","hub_signals_cat_airdrop"],ava_schedule:["schedule_stats_view","schedule_view","schedule_add_slot","schedule_status_edit","schedule_slot_delete"],ava_tasks:["tasks_add","tasks_view"],ava_profit:["profit_add","profit_stats_view","profit_leaders_view","profit_history_view","profit_insights_view","profit_cat_memecoins","profit_cat_futures","profit_cat_nft","profit_cat_spot","profit_cat_airdrop","profit_cat_polymarket","profit_cat_staking","profit_cat_other","profit_wallet_general","profit_wallet_personal","profit_wallet_pool"],ava_rating:["rating_others_view","rating_self_view","rating_specific_view"],slots:["schedule_stats_view","schedule_view","schedule_add_slot","schedule_status_edit","schedule_slot_delete"],earnings:["profit_add","profit_stats_view","profit_leaders_view","profit_history_view","profit_insights_view"],tasks:["tasks_add","tasks_view"],rating:["rating_others_view","rating_self_view","rating_specific_view"],about:["ava_info"]};for(const[d,h]of Object.entries(c))if(i.blockFeatures.includes(d)&&h.includes(t))return{hasAccess:!1,reason:i.reason,expiresAt:i.expiresAt}}return{hasAccess:!0,reason:void 0,expiresAt:void 0}}catch(a){return console.error("Error checking user access:",a),{hasAccess:!0,reason:void 0,expiresAt:void 0}}},qn=async()=>{const s=rt(je,"users");return(await bs(s)).docs.map(a=>({id:a.id,...a.data()})).sort((a,n)=>a.name.localeCompare(n.name))},P4=async s=>{const t=rt(je,"users"),r=Object.fromEntries(Object.entries(s).filter(([n,i])=>i!==void 0));return(await Vs(t,r)).id},M4=async(s,t)=>{const r=Ze(je,"users",s),a=Object.fromEntries(Object.entries(t).filter(([n,i])=>i!==void 0));await Uw(r,a,{merge:!0})},O4=async s=>{console.log(`[deleteUser] Starting deletion for user: ${s}`);const t=[{name:"workSlots",field:"userId"},{name:"workSlots",field:"participants"},{name:"dayStatuses",field:"userId"},{name:"earnings",field:"userId"},{name:"earnings",field:"participants"},{name:"ratings",field:"userId"},{name:"tasks",field:"createdBy"},{name:"tasks",field:"assignedTo"},{name:"userActivities",field:"userId"},{name:"userNicknames",field:"userId"},{name:"notes",field:"userId"},{name:"messages",field:"userId"},{name:"userConflicts",field:"userId"},{name:"userConflicts",field:"restrictedUserId"},{name:"accessBlocks",field:"userId"}],r=new Set;for(const{name:i,field:l}of t)try{const c=rt(je,i),d=ht(c,ss(l,"==",s));(await bs(d)).docs.forEach(u=>r.add(u.id))}catch(c){console.error(`[deleteUser] Error querying ${i}.${l}:`,c)}for(const i of r)try{for(const{name:l}of t)try{const c=Ze(je,l,i);if((await Sn(c)).exists()){await Ls(c),console.log(`[deleteUser] Deleted ${l}/${i}`);break}}catch{}}catch(l){console.error(`[deleteUser] Error deleting document ${i}:`,l)}const a=Ze(je,"users",s);(await Sn(a)).exists()&&(await Ls(a),console.log(`[deleteUser] Deleted user document: ${s}`)),console.log(`[deleteUser] Completed deletion for user: ${s}`)},Xe=Mi()(Oi(s=>({user:null,isAuthenticated:!1,login:async(t,r)=>{try{const n=(await qn()).find(l=>l.login===t);if(n)return n.password===r?(s({user:n,isAuthenticated:!0}),!0):!1;const i=Fe.find(l=>l.login===t&&l.password===r);return i?(s({user:i,isAuthenticated:!0}),!0):!1}catch(a){console.error("Login error:",a);const n=Fe.find(i=>i.login===t&&i.password===r);return n?(s({user:n,isAuthenticated:!0}),!0):!1}},logout:()=>s({user:null,isAuthenticated:!1})}),{name:"ava-auth"})),md="4747",kt=Mi()(Oi(s=>({isAdmin:!1,activateAdmin:t=>t===md?(s({isAdmin:!0}),!0):!1,deactivateAdmin:()=>s({isAdmin:!1})}),{name:"ava-admin"})),pe=Mi()(Oi(s=>({theme:"light",toggleTheme:()=>s(t=>{const r=t.theme==="light"?"dark":"light";return document.body.classList.toggle("dark",r==="dark"),{theme:r}}),setTheme:t=>s(()=>(document.body.classList.toggle("dark",t==="dark"),{theme:t}))}),{name:"ava-theme"}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(s,t)=>{const r=f.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,...h},u)=>f.createElement("svg",{ref:u,...L4,width:n,height:n,stroke:a,strokeWidth:l?Number(i)*24/Number(n):i,className:["lucide",`lucide-${V4(s)}`,c].join(" "),...h},[...t.map(([m,g])=>f.createElement(m,g)),...Array.isArray(d)?d:[d]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=X("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=X("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=X("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=X("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=X("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=X("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=X("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=X("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=X("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=X("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=X("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=X("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=X("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=X("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=X("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=X("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=X("CandlestickChart",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=X("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=X("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=X("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=X("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=X("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=X("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=X("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=X("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=X("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=X("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=X("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=X("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=X("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=X("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=X("Globe2",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=X("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=X("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=X("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=X("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=X("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=X("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=X("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=X("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=X("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=X("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=X("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=X("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=X("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=X("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=X("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=X("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=X("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=X("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=X("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=X("Octagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=X("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=X("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=X("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=X("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=X("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=X("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=X("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=X("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=X("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=X("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=X("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=X("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=X("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=X("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=X("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=X("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=X("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=X("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=X("ShieldX",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m14.5 9-5 5",key:"1m49dw"}],["path",{d:"m9.5 9 5 5",key:"wyx7zg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=X("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=X("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=X("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=X("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=X("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=X("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=X("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=X("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=X("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=X("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=X("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=X("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=X("Wallet2",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=X("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=X("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=X("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=X("ZapOff",[["polyline",{points:"12.41 6.75 13 2 10.57 4.92",key:"122m05"}],["polyline",{points:"18.57 12.91 21 10 15.66 10",key:"16r43o"}],["polyline",{points:"8 8 3 14 12 14 11 22 16 16",key:"tmh4bc"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),vi="/assets/logo-CXhK0zFY.png",__=({onClose:s,theme:t})=>{const[r,a]=f.useState(""),[n,i]=f.useState(""),[l,c]=f.useState(""),[d,h]=f.useState(null),[u,m]=f.useState(null),[g,y]=f.useState([]),[v,E]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const N=await qn();y(N)}catch(N){console.error("Error fetching users for recovery:",N)}finally{E(!1)}})()},[]);const I=L=>{if(L.preventDefault(),c(""),v)return;const N=g.find(b=>{var w;return((w=b.phone)==null?void 0:w.replace(/\D/g,""))===r.replace(/\D/g,"")&&b.recoveryCode===n});N?h(N):c("Неверный номер телефона или специальный код")},C=(L,N)=>{navigator.clipboard.writeText(L),m(N),setTimeout(()=>m(null),2e3)},T=t==="dark"?"text-white":"text-gray-900",D=t==="dark"?"text-gray-400":"text-gray-500",M=t==="dark"?"bg-[#0b0f17]":"bg-white",se=t==="dark"?"border-white/10":"border-gray-200";return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity",onClick:s}),e.jsxs("div",{className:`relative w-full max-w-md overflow-hidden rounded-[2.5rem] ${M} shadow-[0_32px_64px_-16px_rgba(0,0,0,0.3)] border ${se} animate-in fade-in zoom-in duration-500`,children:[e.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-emerald-500/20 rounded-full blur-[80px] pointer-events-none animate-pulse"}),e.jsx("div",{className:"absolute top-1/2 -right-32 w-64 h-64 bg-blue-500/10 rounded-full blur-[100px] pointer-events-none"}),e.jsxs("div",{className:"relative p-10",children:[e.jsx("button",{onClick:s,className:`absolute top-8 right-8 p-2.5 rounded-full transition-all duration-300 ${t==="dark"?"hover:bg-white/10 text-gray-500 hover:text-white":"hover:bg-gray-100 text-gray-400 hover:text-gray-900"}`,children:e.jsx(it,{className:"w-5 h-5"})}),d?e.jsxs("div",{className:"space-y-6 text-center animate-in slide-in-from-bottom-8 duration-700",children:[e.jsxs("div",{className:"relative inline-flex mb-2",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 blur-2xl rounded-full animate-pulse"}),e.jsx("div",{className:"relative p-5 rounded-3xl bg-emerald-500 text-white shadow-xl shadow-emerald-500/40",children:e.jsx(Js,{className:"w-10 h-10"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`text-3xl font-black tracking-tight ${T}`,children:"Доступ восстановлен"}),e.jsx("p",{className:`text-sm font-medium leading-relaxed max-w-[240px] mx-auto ${D}`,children:"Данные подтверждены. Пожалуйста, сохраните ваши учетные данные"})]}),e.jsx("div",{className:"space-y-3",children:[{label:"Логин",value:d.login,icon:dr,id:"login"},{label:"Пароль",value:d.password,icon:s_,id:"password"},{label:"Спец. код",value:d.recoveryCode||"",icon:As,id:"code"},{label:"Телефон",value:d.phone||"",icon:f_,id:"phone"}].map(L=>e.jsx("div",{onClick:()=>C(L.value,L.id),className:`group relative p-4 rounded-2xl border transition-all duration-300 cursor-pointer ${t==="dark"?"bg-white/[0.03] border-white/10 hover:border-emerald-500/50 hover:bg-white/[0.05]":"bg-gray-50 border-gray-200 hover:border-emerald-500/30 hover:bg-emerald-50/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`p-2 rounded-xl shrink-0 ${t==="dark"?"bg-white/5 text-emerald-400":"bg-white text-emerald-500 border border-emerald-100"}`,children:e.jsx(L.icon,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("span",{className:`text-[10px] font-black uppercase tracking-wider block mb-0.5 ${D}`,children:L.label}),e.jsx("p",{className:`text-sm font-bold truncate ${T}`,children:L.value})]})]}),e.jsx("div",{className:`p-2 rounded-lg transition-all duration-300 ${u===L.id?"bg-emerald-500 text-white":"bg-transparent text-gray-500 group-hover:text-emerald-500"}`,children:u===L.id?e.jsx(xr,{className:"w-4 h-4"}):e.jsx(Rn,{className:"w-4 h-4"})})]})},L.id))}),e.jsx("button",{onClick:s,className:"w-full py-5 rounded-[1.25rem] bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-black transition-all duration-300 hover:opacity-90 active:scale-95 shadow-xl shadow-black/10",children:"Вернуться ко входу"})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"relative inline-flex mb-2",children:[e.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),e.jsx("div",{className:"relative p-4 rounded-2xl bg-gradient-to-br from-emerald-500/10 to-teal-500/5 text-emerald-500 border border-emerald-500/20",children:e.jsx(As,{className:"w-7 h-7"})})]}),e.jsx("h3",{className:`text-3xl font-black tracking-tight ${T}`,children:"Восстановление"}),e.jsx("p",{className:`text-sm font-medium leading-relaxed max-w-[240px] mx-auto ${D}`,children:"Введите ваши данные для получения доступа к аккаунту"})]}),e.jsxs("form",{onSubmit:I,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:`text-sm font-bold block mb-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Номер телефона"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"tel",value:r,onChange:L=>a(L.target.value),placeholder:"79000000000",className:`w-full px-5 py-4 rounded-2xl border transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-emerald-500/10 ${t==="dark"?"bg-white/5 border-white/10 text-white placeholder-gray-600 focus:border-emerald-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-emerald-500"}`,required:!0})})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsx("label",{className:`text-sm font-bold block mb-2 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Специальный код"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{type:"text",value:n,onChange:L=>i(L.target.value),placeholder:"00000000",className:`w-full px-5 py-4 rounded-2xl border transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-emerald-500/10 ${t==="dark"?"bg-white/5 border-white/10 text-white placeholder-gray-600 focus:border-emerald-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-emerald-500"}`,required:!0})})]}),e.jsxs("div",{className:"relative group overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-amber-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative p-5 rounded-[1.25rem] bg-amber-500/[0.03] border border-amber-500/10 flex gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 shrink-0 h-fit",children:e.jsx(Rt,{className:"w-5 h-5 text-amber-500"})}),e.jsx("p",{className:"text-[11px] font-bold text-amber-600 dark:text-amber-400/80 leading-relaxed normal-case",children:"Внимание: если вы забыли специальный код, восстановить его невозможно, доступ к аккаунту утерян навсегда."})]})]}),l&&e.jsx("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-xs font-bold text-center animate-shake",children:l}),e.jsxs("button",{type:"submit",className:"w-full relative group overflow-hidden py-5 rounded-[1.25rem] bg-emerald-500 text-white font-black transition-all duration-300 shadow-[0_20px_40px_-10px_rgba(16,185,129,0.3)] hover:shadow-[0_25px_50px_-12px_rgba(16,185,129,0.4)] hover:-translate-y-0.5 active:translate-y-0 active:scale-95",children:[e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Проверить доступ",e.jsx(Js,{className:"w-5 h-5 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400 to-teal-500 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]})]})]})]})]})},E_=()=>{const[s,t]=f.useState("member"),[r,a]=f.useState(""),[n,i]=f.useState(""),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[u,m]=f.useState(""),{login:g,user:y,isAuthenticated:v}=Xe(),{theme:E,toggleTheme:I}=pe(),{activateAdmin:C}=kt(),T=mo(),[D]=Nb(),[M,se]=f.useState(!1);f.useEffect(()=>{document.body.classList.toggle("dark",E==="dark")},[E]),f.useEffect(()=>{const N=localStorage.getItem("ava_remembered");if(N)try{const{login:b,password:w,type:j}=JSON.parse(N);a(b),i(w),t(j||"member"),h(!0)}catch(b){console.error("Error loading remembered credentials:",b)}},[]),f.useEffect(()=>{var N,b,w;if(v&&y){const j=window.innerWidth<1024;T("/about",{state:{openMenu:j}});return}if((N=window.Telegram)!=null&&N.WebApp){window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand();const $=D.get("tgWebAppData")||window.Telegram.WebApp.initData,_=D.get("login"),k=D.get("password");if(_&&k){(async()=>{if(await g(_,k)){const Z=window.innerWidth<1024;T("/about",{state:{openMenu:Z}})}})();return}if($)try{const F=new URLSearchParams($).get("user");if(F){const ie=JSON.parse(decodeURIComponent(F)).id;sessionStorage.setItem("telegram_user_id",String(ie));const P=localStorage.getItem("ava-auth");if(P)try{const U=JSON.parse(P);if((b=U.state)!=null&&b.user){const z=U.state.user;(async()=>{if(await g(z.login,z.password)){const O=window.innerWidth<1024;T("/about",{state:{openMenu:O}})}})();return}}catch(U){console.error("Error parsing saved auth:",U)}}}catch(S){console.error("Error parsing Telegram initData:",S)}const H=(w=window.Telegram.WebApp.initDataUnsafe)==null?void 0:w.user;H&&sessionStorage.setItem("telegram_user_id",String(H.id))}},[D,v,y,T,g]);const L=async N=>{if(N.preventDefault(),m(""),!n){m("Пожалуйста, введите пароль");return}if(s==="admin")if(C(n)){d?localStorage.setItem("ava_remembered",JSON.stringify({login:"",password:n,type:"admin"})):localStorage.removeItem("ava_remembered");const w=window.innerWidth<1024;T("/about",{state:{openMenu:w}})}else m("Неверный пароль администратора");else{if(!r){m("Пожалуйста, введите логин");return}if(await g(r,n)){d?localStorage.setItem("ava_remembered",JSON.stringify({login:r,password:n,type:"member"})):localStorage.removeItem("ava_remembered");const w=window.innerWidth<1024;T("/about",{state:{openMenu:w}})}else m("Неверный логин или пароль")}};return e.jsxs("div",{className:`min-h-screen flex flex-col xl:flex-row ${E==="dark"?"bg-[#0b0f17]":"bg-white"}`,children:[e.jsxs("div",{className:"hidden xl:flex flex-1 relative bg-[#0b0f17] items-center justify-center p-12 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute -top-24 -left-24 w-[620px] h-[620px] bg-gradient-to-br from-[#4E6E49]/35 via-emerald-400/22 to-transparent blur-[110px]"}),e.jsx("div",{className:"absolute top-[-120px] right-[-180px] w-[780px] h-[780px] bg-gradient-to-bl from-blue-500/24 via-purple-500/22 to-transparent blur-[140px]"}),e.jsx("div",{className:"floating-grid opacity-30"})]}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mb-8 flex items-center justify-center animate-pulse-subtle",children:e.jsx("img",{src:vi,alt:"AVA - Team",className:"w-20 h-20 sm:w-24 sm:h-24 object-contain rounded-xl filter drop-shadow-[0_0_15px_rgba(16,185,129,0.4)]"})}),e.jsxs("h1",{className:"text-4xl lg:text-5xl font-black text-white mb-2 tracking-tight",children:["Alpha Vault ",e.jsx("span",{className:"text-emerald-500",children:": Apex"})]}),e.jsx("div",{className:"mb-6 px-4 py-1.5 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:e.jsx("span",{className:"text-sm font-black text-emerald-500 uppercase tracking-[0.2em]",children:"Team"})}),e.jsx("p",{className:"text-lg text-gray-400 font-medium leading-relaxed",children:"Единая командная панель для управления ресурсами, аналитикой и оперативного взаимодействия."}),e.jsx("div",{className:"mt-20 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold text-gray-400 uppercase tracking-widest"})]})]}),e.jsxs("div",{className:`flex-1 flex flex-col min-h-screen relative p-6 sm:p-12 lg:p-20 ${E==="dark"?"bg-[#0b0f17]":"bg-white"}`,children:[e.jsxs("div",{className:"xl:hidden flex items-center justify-between mb-12",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:vi,alt:"Logo",className:"w-10 h-10 object-contain rounded-xl"}),e.jsx("span",{className:`font-black tracking-tight ${E==="dark"?"text-white":"text-gray-900"}`,children:"AVA — Team"})]}),e.jsx("button",{onClick:I,className:"p-2 rounded-xl bg-gray-100 dark:bg-white/5 text-gray-700 dark:text-amber-300",children:E==="dark"?e.jsx(uo,{className:"w-5 h-5"}):e.jsx(co,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"hidden xl:flex justify-end absolute top-8 right-8",children:e.jsx("button",{onClick:I,className:`p-3 rounded-full shadow-lg transition-all border ${E==="dark"?"bg-white/5 border-white/10 text-amber-300 hover:bg-white/10":"bg-white border-gray-100 text-gray-700 hover:bg-gray-50"}`,children:E==="dark"?e.jsx(uo,{className:"w-6 h-6"}):e.jsx(co,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h2",{className:`text-4xl font-extrabold mb-3 tracking-tight ${E==="dark"?"text-white":"text-gray-900"}`,children:"Добро пожаловать"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:["Введите данные для входа в ",e.jsx("span",{className:"text-emerald-500 font-bold",children:"AVA - Team"})]})]}),e.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-2xl mb-8",children:[e.jsxs("button",{onClick:()=>t("member"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold transition-all ${s==="member"?"bg-white dark:bg-[#4E6E49] text-[#4E6E49] dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"Участник"})]}),e.jsxs("button",{onClick:()=>t("admin"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold transition-all ${s==="admin"?"bg-white dark:bg-[#4E6E49] text-[#4E6E49] dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Админ"})]})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[s==="member"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-bold block ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:"Логин / Email"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors",children:e.jsx(dr,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:r,onChange:N=>a(N.target.value),placeholder:"agent@ava-apex.io",className:`w-full pl-12 pr-4 py-4 rounded-2xl border transition-all focus:outline-none focus:ring-4 focus:ring-emerald-500/10 ${E==="dark"?"bg-white/5 border-white/10 text-white placeholder-gray-600 focus:border-emerald-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-emerald-500"}`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`text-sm font-bold block ${E==="dark"?"text-gray-400":"text-gray-600"}`,children:"Пароль"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 group-focus-within:text-emerald-500 transition-colors",children:e.jsx(As,{className:"w-5 h-5"})}),e.jsx("input",{type:l?"text":"password",value:n,onChange:N=>i(N.target.value),placeholder:"••••••••",className:`w-full pl-12 pr-12 py-4 rounded-2xl border transition-all focus:outline-none focus:ring-4 focus:ring-emerald-500/10 ${E==="dark"?"bg-white/5 border-white/10 text-white placeholder-gray-600 focus:border-emerald-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-emerald-500"}`}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-emerald-500 transition-colors",children:l?e.jsx(Pi,{className:"w-5 h-5"}):e.jsx(Pn,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:N=>h(N.target.checked),className:"sr-only"}),e.jsx("div",{className:`w-5 h-5 rounded border transition-all flex items-center justify-center ${d?"bg-emerald-500 border-emerald-500":"border-gray-300 dark:border-white/20"}`,children:d&&e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-sm"})})]}),e.jsx("span",{className:`text-sm font-bold ${E==="dark"?"text-gray-400":"text-gray-500"}`,children:"Запомнить меня"})]}),e.jsx("button",{type:"button",onClick:()=>se(!0),className:"text-sm font-bold text-emerald-500 hover:text-emerald-600 transition-colors",children:"Забыл данные?"})]}),u&&e.jsx("div",{className:"p-4 rounded-2xl bg-red-500/10 border border-red-500/20 text-red-500 text-sm font-bold animate-shake",children:u}),e.jsx("button",{type:"submit",className:"w-full py-4 px-6 rounded-2xl bg-emerald-500 hover:bg-emerald-600 text-white font-black text-lg transition-all shadow-lg shadow-emerald-500/20 hover:scale-[1.02] active:scale-[0.98]",children:"Войти в Систему"})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-white/5",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("a",{href:"https://t.me/artyommedoed",target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center gap-2 py-3 px-4 rounded-2xl border transition-all font-bold text-sm ${E==="dark"?"border-white/10 bg-white/5 text-white hover:bg-white/10":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50 shadow-sm"}`,children:[e.jsx(jt,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{children:"Связаться с Админом"})]}),e.jsxs("a",{href:"/rules.pdf",download:!0,className:`flex items-center justify-center gap-2 py-3 px-4 rounded-2xl border transition-all font-bold text-sm ${E==="dark"?"border-white/10 bg-white/5 text-white hover:bg-white/10":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50 shadow-sm"}`,children:[e.jsx(Ur,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{children:"Правила Команды"})]})]})})]})]}),M&&e.jsx(__,{theme:E,onClose:()=>se(!1)})]})},rr=({user:s,userId:t,size:r="md",className:a=""})=>{const n=t||(s==null?void 0:s.id)||"",i=Bo(n,s==null?void 0:s.avatar),l=()=>{switch(r){case"sm":return"w-8 h-8 text-sm";case"lg":return"w-16 h-16 text-2xl";default:return"w-10 h-10 text-base"}},c=()=>{if(!(s!=null&&s.name))return"?";const d=s.name.split(" ");return d.length>1?`${d[0][0]}${d[d.length-1][0]}`:d[0][0]};return e.jsx("div",{className:`
        ${l()} 
        rounded-full flex items-center justify-center 
        bg-gradient-to-br from-emerald-500 to-teal-600 
        text-white font-semibold
        ${a}
      `,children:i?e.jsx("img",{src:i,alt:(s==null?void 0:s.name)||"User",className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{children:c()})})},Ac=[{value:"solana",label:"Solana"},{value:"ethereum",label:"ETH"},{value:"bsc",label:"BSC"},{value:"ton",label:"TON"},{value:"base",label:"Base"},{value:"sui",label:"SUI"},{value:"monad",label:"Monad"},{value:"polygon",label:"Polygon"}],Ca={memecoins:{label:"Мемкоины",gradient:"from-emerald-400 via-teal-500 to-cyan-400",gradientDark:"from-emerald-500 via-teal-600 to-cyan-500",icon:e.jsx(ar,{className:"w-5 h-5"}),pastelBg:"bg-emerald-50",pastelBorder:"border-emerald-200",pastelText:"text-emerald-800"},futures:{label:"Фьючерсы",gradient:"from-sky-300 to-indigo-400",gradientDark:"from-sky-600 to-indigo-500",icon:e.jsx(Qs,{className:"w-5 h-5"}),pastelBg:"bg-sky-50",pastelBorder:"border-sky-100",pastelText:"text-sky-800"},nft:{label:"NFT",gradient:"from-purple-300 to-pink-300",gradientDark:"from-purple-600 to-pink-500",icon:e.jsx(gr,{className:"w-5 h-5"}),pastelBg:"bg-purple-50",pastelBorder:"border-purple-100",pastelText:"text-purple-800"},spot:{label:"Спот",gradient:"from-amber-300 to-orange-300",gradientDark:"from-amber-600 to-orange-500",icon:e.jsx(Es,{className:"w-5 h-5"}),pastelBg:"bg-amber-50",pastelBorder:"border-amber-100",pastelText:"text-amber-800"},polymarket:{label:"Polymarket",gradient:"from-rose-300 to-red-300",gradientDark:"from-rose-600 to-red-500",icon:e.jsx(He,{className:"w-5 h-5"}),pastelBg:"bg-rose-50",pastelBorder:"border-rose-100",pastelText:"text-rose-800"},staking:{label:"Стейкинг",gradient:"from-emerald-300 to-green-400",gradientDark:"from-emerald-600 to-green-500",icon:e.jsx(jt,{className:"w-5 h-5"}),pastelBg:"bg-emerald-50",pastelBorder:"border-emerald-100",pastelText:"text-emerald-800"},airdrop:{label:"AirDrop",gradient:"from-gray-300 to-gray-400",gradientDark:"from-gray-500 to-gray-400",icon:e.jsx(mr,{className:"w-5 h-5"}),pastelBg:"bg-gray-50",pastelBorder:"border-gray-100",pastelText:"text-gray-800"}},js=(s,t)=>t==="dark"?Ca[s].gradientDark:Ca[s].gradient,yx={low:"bg-emerald-500/10 text-emerald-600 border border-emerald-500/20",medium:"bg-blue-500/10 text-blue-600 border border-blue-500/20",high:"bg-amber-500/10 text-amber-600 border border-amber-500/20",ultra:"bg-red-500/10 text-red-600 border border-red-500/20"},vx={memecoins:{border:"border-emerald-400/40",bg:"bg-emerald-500/10",text:"text-emerald-400",chipBg:"bg-emerald-400/30"},futures:{border:"border-blue-500/30",bg:"bg-blue-500/5",text:"text-blue-400",chipBg:"bg-blue-500/20"},nft:{border:"border-purple-500/30",bg:"bg-purple-500/5",text:"text-purple-400",chipBg:"bg-purple-500/20"},spot:{border:"border-amber-500/30",bg:"bg-amber-500/5",text:"text-amber-400",chipBg:"bg-amber-500/20"},polymarket:{border:"border-rose-500/30",bg:"bg-rose-500/5",text:"text-rose-400",chipBg:"bg-rose-500/20"},staking:{border:"border-cyan-500/30",bg:"bg-cyan-500/5",text:"text-cyan-400",chipBg:"bg-cyan-500/20"},airdrop:{border:"border-gray-500/30",bg:"bg-gray-500/5",text:"text-gray-400",chipBg:"bg-gray-500/20"}},kd=s=>{var t;return((t=s.details)==null?void 0:t[s.category])||{}},$_=s=>s.riskLevel||kd(s).riskLevel||kd(s).protocolRisk||"medium",T_=(s,t)=>s?s.length>t?`${s.slice(0,t)}...`:s:"",S_={memecoins:{basic:{title:"Контракт и сеть",icon:e.jsx(oo,{className:"w-4 h-4"}),description:"Адрес токена и блокчейн"},strategy:{title:"Стратегия",icon:e.jsx(Pe,{className:"w-4 h-4"}),description:"Тип торговой стратегии"},entry:{title:"Зона входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Условия для входа в позицию"},targets:{title:"Цели и риски",icon:e.jsx(He,{className:"w-4 h-4"}),description:"План прибыли и стоп-лосс"},additional:{title:"Комментарий",icon:e.jsx(Lh,{className:"w-4 h-4"}),description:"Дополнительные заметки"}},futures:{basic:{title:"Основная информация",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Данные о паре и направлении"},entry:{title:"Зоны входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Условия входа"},targets:{title:"Цели и риски",icon:e.jsx(Pe,{className:"w-4 h-4"}),description:"План прибыли и стоп-лоссы"},additional:{title:"Дополнительно",icon:e.jsx(fr,{className:"w-4 h-4"}),description:"Комментарии и детали"}},nft:{basic:{title:"Основная информация",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Данные о NFT"},entry:{title:"Условия входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Редкость и атрибуты"},targets:{title:"Цели и риски",icon:e.jsx(Pe,{className:"w-4 h-4"}),description:"План продажи и оценка рисков"},additional:{title:"Дополнительно",icon:e.jsx(fr,{className:"w-4 h-4"}),description:"Анализ и комментарии"}},spot:{basic:{title:"Основная информация",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Данные о монете"},entry:{title:"Зона входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Условия входа в позицию"},targets:{title:"Цели и риски",icon:e.jsx(Pe,{className:"w-4 h-4"}),description:"План прибыли и стоп-лоссы"},additional:{title:"Дополнительно",icon:e.jsx(fr,{className:"w-4 h-4"}),description:"Анализ и комментарии"}},polymarket:{basic:{title:"Основная информация",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Данные о событии"},entry:{title:"Условия входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Позиция и цена входа"},targets:{title:"Цели и риски",icon:e.jsx(Pe,{className:"w-4 h-4"}),description:"План прибыли и риски"},additional:{title:"Дополнительно",icon:e.jsx(fr,{className:"w-4 h-4"}),description:"Комментарии и детали"}},staking:{basic:{title:"Основная информация",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Данные о стейкинге"},entry:{title:"Условия входа",icon:e.jsx(Rr,{className:"w-4 h-4"}),description:"Платформа и условия"},targets:{title:"Риски и анализ",icon:e.jsx(Rt,{className:"w-4 h-4"}),description:"Оценка рисков"},additional:{title:"Дополнительно",icon:e.jsx(fr,{className:"w-4 h-4"}),description:"Комментарии и детали"}},airdrop:{basic:{title:"Проект",icon:e.jsx(ls,{className:"w-4 h-4"}),description:"Информация о проекте"},details:{title:"Детали дропа",icon:e.jsx(He,{className:"w-4 h-4"}),description:"Задачи и вознаграждения"},links:{title:"Ссылки и сроки",icon:e.jsx(oo,{className:"w-4 h-4"}),description:"Полезные ссылки"},analysis:{title:"Анализ",icon:e.jsx(jt,{className:"w-4 h-4"}),description:"Почему заходим и риски"}}},A_={memecoins:[{key:"contract",label:"Адрес (контракт)",placeholder:"0x... или адрес токена",section:"basic"},{key:"network",label:"Сеть",type:"select",options:Ac,section:"basic"},{key:"holdPlan",label:"Тип стратегии",type:"select",options:[{value:"flip",label:"Флип"},{value:"short",label:"Краткосрок"},{value:"medium",label:"Среднесрок"},{value:"long",label:"Дальнесрок"}],section:"strategy"},{key:"entryCap",label:"Зона входа в капитализации",placeholder:"10M-15M",section:"entry"},{key:"targets",label:"Цели",placeholder:"20M / 30M / 50M",section:"targets"},{key:"stopLoss",label:"Стоп-лосс",placeholder:"5M или -25%",section:"targets"},{key:"trailingPercent",label:"Процент трейлинга",placeholder:"например: 5% или 10%",section:"targets"},{key:"riskLevel",label:"Риск уровень",type:"select",options:[{value:"low",label:"Низкий"},{value:"medium",label:"Средний"},{value:"high",label:"Высокий"},{value:"ultra",label:"Ультра-высокий"}],section:"targets"},{key:"liquidityLocked",label:"Отметка о ликвидности",type:"checkbox",section:"targets"},{key:"traderComment",label:"Комментарий трейдера",type:"textarea",placeholder:"Доп. наблюдения, планы...",section:"additional"}],futures:[{key:"pair",label:"Пара",placeholder:"BTC/USDT",section:"basic",required:!0},{key:"direction",label:"Направление",type:"select",options:[{value:"long",label:"Long"},{value:"short",label:"Short"}],section:"basic",required:!0},{key:"leverage",label:"Рекомендованное плечо",placeholder:"x3 - x10",section:"basic",required:!0},{key:"entryZone",label:"Зоны входа",placeholder:"69000 - 70000",section:"entry",required:!0},{key:"targets",label:"Цели",placeholder:"71000 / 72500 / 74000",section:"targets",required:!0},{key:"stopLoss",label:"Рекомендованный SL",placeholder:"68000",section:"targets",required:!0},{key:"riskLevel",label:"Риск уровень",type:"select",options:[{value:"low",label:"Низкий"},{value:"medium",label:"Средний"},{value:"high",label:"Высокий"},{value:"ultra",label:"Ультра-высокий"}],section:"targets",required:!0},{key:"reason",label:"Причина входа",placeholder:"Тренд, объемы, дивергенция...",type:"textarea",section:"additional"},{key:"risks",label:"Риски",placeholder:"Резкий вброс, низкая волатильность",type:"textarea",section:"additional"},{key:"traderComment",label:"Комментарий трейдера",type:"textarea",placeholder:"Доп. наблюдения, планы...",section:"additional"}],nft:[{key:"nftLink",label:"NFT (ссылка)",placeholder:"https://.../item",section:"basic",required:!0},{key:"network",label:"Сеть",type:"select",options:Ac,section:"basic",required:!0},{key:"rarity",label:"Редкость / атрибуты",placeholder:"Rank < 5%",section:"entry",required:!0},{key:"targets",label:"Цели",placeholder:"2 ETH / 3 ETH / 5 ETH",section:"targets",required:!0},{key:"riskLevel",label:"Риск уровень",type:"select",options:[{value:"low",label:"Низкий"},{value:"medium",label:"Средний"},{value:"high",label:"Высокий"},{value:"ultra",label:"Ультра-высокий"}],section:"targets",required:!0},{key:"reason",label:"Причина входа",placeholder:"Минт, хайп, инсайд",type:"textarea",section:"additional"},{key:"risks",label:"Риски",placeholder:"Падение спроса, фальшивый объём",type:"textarea",section:"additional"},{key:"traderComment",label:"Комментарий трейдера",type:"textarea",placeholder:"Что смотрим, когда фиксируем",section:"additional"}],spot:[{key:"coin",label:"Монета",placeholder:"BTC",section:"basic",required:!0},{key:"entryZone",label:"Зона входа",placeholder:"500M или 0.000012",section:"entry",required:!0},{key:"targets",label:"Цели",placeholder:"550M / 650M / 750M",section:"targets",required:!0},{key:"stopLoss",label:"Рекомендованный SL",placeholder:"-10% или 450M",section:"targets",required:!0},{key:"holdingHorizon",label:"Горизонт удержания",type:"select",options:[{value:"short",label:"Краткосрок"},{value:"medium",label:"Среднесрок"},{value:"long",label:"Долгосрок"}],section:"targets",required:!0},{key:"riskLevel",label:"Риск-уровень",type:"select",options:[{value:"low",label:"Низкий"},{value:"medium",label:"Средний"},{value:"high",label:"Высокий"},{value:"ultra",label:"Ультра-высокий"}],section:"targets",required:!0},{key:"reason",label:"Причина входа",placeholder:"Фундаментал, хайп",type:"textarea",section:"additional"},{key:"risks",label:"Риски",placeholder:"Регуляторика, конкуренты",type:"textarea",section:"additional"},{key:"traderComment",label:"Комментарий трейдера",type:"textarea",placeholder:"Условия фиксации, обновления",section:"additional"}],polymarket:[{key:"event",label:"Событие",placeholder:"Trump wins 2025",section:"basic"},{key:"eventDeadline",label:"Срок исхода события",placeholder:"31.12.2025",section:"basic"},{key:"positionType",label:"Тип позиции",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],section:"entry"},{key:"entryPrice",label:"Цена входа (%)",placeholder:"42%",section:"entry"},{key:"expectedProbability",label:"Ожидаемая вероятность (%)",placeholder:"65%",section:"entry"},{key:"targetPlan",label:"Цель",placeholder:"Продажа до события или удержание",section:"targets"},{key:"riskLevel",label:"Риск",type:"select",options:[{value:"low",label:"Низкий"},{value:"medium",label:"Средний"},{value:"high",label:"Высокий"},{value:"ultra",label:"Ультра-высокий"}],section:"targets"},{key:"risks",label:"Риски",placeholder:"Неопределённость новостей, низкая ликвидность",type:"textarea",section:"targets"},{key:"reason",label:"Причина входа",placeholder:"Аналитика, инсайд",type:"textarea",section:"additional"}],staking:[{key:"coin",label:"Монета",placeholder:"SOL",section:"basic"},{key:"platform",label:"Платформа",placeholder:"Jito, Lido...",section:"entry"},{key:"term",label:"Срок стейкинга",type:"select",options:[{value:"flexible",label:"Гибкий"},{value:"30d",label:"30 дней"},{value:"90d",label:"90 дней"},{value:"180d",label:"180 дней"},{value:"365d",label:"365 дней"},{value:"fixed",label:"Фиксированный"}],section:"entry"},{key:"fixedTermCustom",label:"Срок фиксированного стейкинга",placeholder:"Укажите срок (например, 45 дней)",section:"entry"},{key:"apy",label:"APY",placeholder:"12-18%",section:"entry"},{key:"minDeposit",label:"Минимальный депозит",placeholder:"100 USDT",section:"entry"},{key:"protocolRisk",label:"Риски протокола",type:"select",options:[{value:"low",label:"Низкие"},{value:"medium",label:"Средние"},{value:"high",label:"Высокие"},{value:"ultra",label:"Ультра"}],section:"targets"},{key:"risks",label:"Риски",placeholder:"Смарт-контракт, ликвидность",type:"textarea",section:"targets"},{key:"reason",label:"Причина",placeholder:"Рост доходности",type:"textarea",section:"additional"},{key:"traderComment",label:"Комментарий трейдера",type:"textarea",placeholder:"Тактика выхода, дополнительные условия",section:"additional"}],airdrop:[{key:"projectName",label:"Название проекта",placeholder:"Project Name",section:"basic",required:!0},{key:"network",label:"Сеть",type:"select",options:[...Ac,{value:"other",label:"Другое"}],section:"basic"},{key:"rewardType",label:"Тип награды",type:"select",options:[{value:"token",label:"Токены"},{value:"points",label:"Поинты"},{value:"nft",label:"NFT"},{value:"other",label:"Другое"}],section:"details"},{key:"expectedValue",label:"Ожидаемая стоимость",placeholder:"$100 - $1000",section:"details"},{key:"tasks",label:"Список задач",placeholder:"Свапы, бридж, подписка...",type:"textarea",section:"details",required:!0},{key:"link",label:"Ссылка на активность",placeholder:"https://...",section:"links",required:!0},{key:"deadline",label:"Дедлайн",placeholder:"31.12.2025",section:"links"},{key:"reason",label:"Почему заходим (Lust)",placeholder:"Большие инвестиции, проект от Binance...",type:"textarea",section:"analysis",required:!0},{key:"risks",label:"Риски",placeholder:"Скам, долгое ожидание, затраты на газ",type:"textarea",section:"analysis"},{key:"traderComment",label:"Комментарий",type:"textarea",placeholder:"Лайфхаки, как лучше делать",section:"analysis"}]},jx=()=>({memecoins:{network:"solana",contract:"",holdPlan:"short",entryCap:"",targets:"",stopLoss:"",trailingPercent:"",riskLevel:"medium",liquidityLocked:!1,traderComment:""},futures:{pair:"",direction:"long",leverage:"",entryZone:"",targets:"",stopLoss:"",riskLevel:"medium",reason:"",risks:"",traderComment:""},nft:{nftLink:"",network:"ethereum",rarity:"",targets:"",riskLevel:"medium",reason:"",risks:"",traderComment:""},spot:{coin:"",entryZone:"",targets:"",stopLoss:"",holdingHorizon:"medium",riskLevel:"medium",reason:"",risks:"",traderComment:""},polymarket:{event:"",positionType:"yes",entryPrice:"",expectedProbability:"",reason:"",eventDeadline:"",riskLevel:"medium",risks:"",targetPlan:""},staking:{coin:"",platform:"",term:"flexible",fixedTermCustom:"",apy:"",minDeposit:"",protocolRisk:"medium",reason:"",risks:"",traderComment:""},airdrop:{projectName:"",network:"solana",rewardType:"token",expectedValue:"",tasks:"",deadline:"",link:"",reason:"",risks:"",traderComment:""}}),wx=(s,t)=>({memecoins:{...s.memecoins,...(t==null?void 0:t.memecoins)||{}},futures:{...s.futures,...(t==null?void 0:t.futures)||{}},nft:{...s.nft,...(t==null?void 0:t.nft)||{}},spot:{...s.spot,...(t==null?void 0:t.spot)||{}},polymarket:{...s.polymarket,...(t==null?void 0:t.polymarket)||{}},staking:{...s.staking,...(t==null?void 0:t.staking)||{}},airdrop:{...s.airdrop,...(t==null?void 0:t.airdrop)||{}}}),I_=({onSuccess:s,onCancel:t,callToEdit:r,initialCategory:a,category:n,onCategoryChange:i,showCategorySelector:l=!0})=>{const{theme:c}=pe(),{user:d}=Xe(),[h,u]=f.useState(!1),[m,g]=f.useState(""),[y,v]=f.useState(!1),E=wx(jx(),r==null?void 0:r.details),[I,C]=f.useState((r==null?void 0:r.category)||a||"memecoins"),[T,D]=f.useState(E),M=n??I,se=P=>{C(P),i==null||i(P)};f.useEffect(()=>{const P=wx(jx(),r==null?void 0:r.details);if(D(P),!n){const U=(r==null?void 0:r.category)||a||"memecoins";C(U),i==null||i(U)}},[r,a,n]);const L=c==="dark"?"text-white":"text-gray-900",N=c==="dark"?"border-gray-800":"border-gray-200",b=c==="dark"?"text-gray-400":"text-gray-500",w=b,j=c==="dark"?"bg-[#121212]":"bg-white",$=(P,U)=>{D(z=>({...z,[M]:{...z[M],[P]:U}}))},_=P=>(P==null?void 0:P.riskLevel)||(P==null?void 0:P.protocolRisk)||void 0,k=P=>{if(P!=null&&P.signalType)return P.signalType;if((P==null?void 0:P.direction)==="long")return"buy";if((P==null?void 0:P.direction)==="short")return"sell"},H=P=>{const U=kd(P),z=$_(P),B=js(P.category,c),G=[],O=(R,q,K)=>{q&&G.push({label:R,value:q,icon:K})};switch(P.category){case"memecoins":O("Контракт",T_(U.contract,20),e.jsx(oo,{className:"w-4 h-4"})),O("Сеть",U.network?String(U.network).toUpperCase():"",e.jsx(mx,{className:"w-4 h-4"})),O("Стратегия",U.holdPlan==="flip"?"Флип":U.holdPlan==="short"?"Краткосрок":U.holdPlan==="medium"?"Среднесрок":"Дальнесрок",e.jsx(Pe,{className:"w-4 h-4"})),O("Зона входа",U.entryCap,e.jsx(Rr,{className:"w-4 h-4"})),O("Цели",U.targets,e.jsx(He,{className:"w-4 h-4"})),O("Стоп-лосс",U.stopLoss,e.jsx($c,{className:"w-4 h-4"})),O("Трейлинг",U.trailingPercent,e.jsx(Tc,{className:"w-4 h-4"})),O("Ликвидность",U.liquidityLocked?"Залочена":"Не залочена",e.jsx(jt,{className:"w-4 h-4"}));break;case"futures":O("Пара",U.pair,e.jsx(Tt,{className:"w-4 h-4"})),O("Направление",U.direction?U.direction.toUpperCase():"",e.jsx(Pe,{className:"w-4 h-4"})),O("Плечо",U.leverage,e.jsx(ga,{className:"w-4 h-4"})),O("Зона входа",U.entryZone,e.jsx(Rr,{className:"w-4 h-4"})),O("Цели",U.targets,e.jsx(He,{className:"w-4 h-4"})),O("SL",U.stopLoss,e.jsx($c,{className:"w-4 h-4"}));break;case"nft":O("Ссылка",U.nftLink,e.jsx(oo,{className:"w-4 h-4"})),O("Сеть",U.network?String(U.network).toUpperCase():"",e.jsx(o_,{className:"w-4 h-4"})),O("Редкость",U.rarity,e.jsx(mr,{className:"w-4 h-4"})),O("Цели",U.targets,e.jsx(He,{className:"w-4 h-4"}));break;case"spot":O("Монета",U.coin,e.jsx(Es,{className:"w-4 h-4"})),O("Зона входа",U.entryZone,e.jsx(Rr,{className:"w-4 h-4"})),O("Цели",U.targets,e.jsx(He,{className:"w-4 h-4"})),O("SL",U.stopLoss,e.jsx($c,{className:"w-4 h-4"})),O("Горизонт",U.holdingHorizon,e.jsx(W4,{className:"w-4 h-4"}));break;case"polymarket":O("Событие",U.event,e.jsx(Rl,{className:"w-4 h-4"})),O("Тип",U.positionType?U.positionType.toUpperCase():"",e.jsx(jt,{className:"w-4 h-4"})),O("Вход %",U.entryPrice,e.jsx(Tc,{className:"w-4 h-4"})),O("Ожидание %",U.expectedProbability,e.jsx(ga,{className:"w-4 h-4"})),O("Цель",U.targetPlan,e.jsx(He,{className:"w-4 h-4"}));break;case"staking":O("Монета",U.coin,e.jsx(Es,{className:"w-4 h-4"})),O("Платформа",U.platform,e.jsx(cx,{className:"w-4 h-4"})),O("Срок",U.term==="fixed"&&U.fixedTermCustom?U.fixedTermCustom:U.term==="flexible"?"Гибкий":U.term,e.jsx(z4,{className:"w-4 h-4"})),O("APY",U.apy,e.jsx(Tc,{className:"w-4 h-4"})),O("Мин. депозит",U.minDeposit,e.jsx(Es,{className:"w-4 h-4"}));break;case"airdrop":O("Проект",U.projectName,e.jsx(cx,{className:"w-4 h-4"})),O("Сеть",U.network?String(U.network).toUpperCase():"",e.jsx(mx,{className:"w-4 h-4"})),O("Награда",U.rewardType,e.jsx(He,{className:"w-4 h-4"})),O("Ценность",U.expectedValue,e.jsx(Es,{className:"w-4 h-4"})),O("Задачи",U.tasks,e.jsx(Rl,{className:"w-4 h-4"})),O("Дедлайн",U.deadline,e.jsx(ka,{className:"w-4 h-4"}));break}const V=G.filter(R=>R.value);return V.length?e.jsxs("div",{className:`rounded-2xl border ${N} ${c==="dark"?"bg-gray-900/60":"bg-white"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 border-b ${N} ${c==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("div",{className:`p-1.5 rounded-lg bg-gradient-to-br ${B} text-white`,children:e.jsx(mr,{className:"w-3.5 h-3.5"})}),e.jsx("p",{className:`text-sm font-semibold ${L}`,children:"Ключевые метрики"}),e.jsxs("span",{className:`ml-auto text-[11px] font-semibold px-3 py-1 rounded-full ${yx[z]}`,children:["Риск: ",z]})]}),e.jsx("div",{className:"divide-y divide-gray-200/70 dark:divide-white/10",children:V.map(R=>e.jsx("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br ${B} text-white`,children:R.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${w}`,children:R.label}),e.jsx("p",{className:`${L} font-semibold whitespace-pre-wrap break-words`,children:R.value})]})]})},R.label))})]}):null},S=()=>{const P=T[M],U={[M]:P},z=k(P),B=_(P);return{id:"preview",userId:(d==null?void 0:d.id)||"unknown",category:M,details:U,createdAt:new Date().toISOString(),status:"active",tags:[],sentiment:z,riskLevel:B}},F=()=>{v(!0)},Z=async P=>{P.preventDefault(),g(""),u(!0);try{const U=T[M],z={...r==null?void 0:r.details,[M]:U},G={userId:(r==null?void 0:r.userId)||(d==null?void 0:d.id)||"unknown",category:M,details:z,createdAt:(r==null?void 0:r.createdAt)||new Date().toISOString(),status:(r==null?void 0:r.status)||"active",tags:(r==null?void 0:r.tags)||[]},O=k(U);O&&(G.sentiment=O);const V=_(U);V&&(G.riskLevel=V),(r==null?void 0:r.maxProfit)!==void 0&&(G.maxProfit=r.maxProfit),(r==null?void 0:r.currentPnL)!==void 0&&(G.currentPnL=r.currentPnL),(r==null?void 0:r.currentMarketCap)!==void 0&&(G.currentMarketCap=r.currentMarketCap),(r==null?void 0:r.signalMarketCap)!==void 0&&(G.signalMarketCap=r.signalMarketCap),(r==null?void 0:r.currentPrice)!==void 0&&(G.currentPrice=r.currentPrice),(r==null?void 0:r.entryPrice)!==void 0&&(G.entryPrice=r.entryPrice),r?await hd(r.id,G):await j4(G),s==null||s()}catch(U){console.error("Error creating call:",U);const z=(U==null?void 0:U.message)||(U==null?void 0:U.code)||"Ошибка при сохранении сигнала";g(z)}finally{u(!1)}},ie=P=>{const z=(T[M]||{})[P.key],B=`w-full px-4 py-2.5 rounded-lg border ${N} ${c==="dark"?"bg-gray-800/80":"bg-gray-50"} ${L} focus:outline-none focus:ring-2 focus:ring-[#4E6E49] transition-all`;if(P.type==="textarea")return e.jsx("textarea",{value:z||"",onChange:G=>$(P.key,G.target.value),className:`${B} min-h-[100px] resize-y`,placeholder:P.placeholder});if(P.type==="select"&&P.options){const G=P.options.length<=3?"grid-cols-1 sm:grid-cols-3":P.options.length<=4?"grid-cols-2 sm:grid-cols-4":"grid-cols-2 sm:grid-cols-3",O=js(M,c);return e.jsx("div",{className:`grid ${G} gap-2 sm:gap-3`,children:P.options.map(V=>{const R=z===V.value;return e.jsx("button",{type:"button",onClick:()=>$(P.key,V.value),className:`px-3 py-3 sm:py-2.5 rounded-lg border-2 text-sm font-medium transition-all duration-300 min-h-[44px] sm:min-h-[40px] hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/30 ${R?`bg-gradient-to-r ${O} text-white shadow-md border-transparent`:`${c==="dark"?"bg-gray-800 border-gray-700 text-gray-300 hover:bg-gray-700 hover:border-gray-600":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-400"}`}`,children:V.label},V.value)})})}return P.type==="checkbox"?e.jsxs("label",{className:"inline-flex items-center gap-3 cursor-pointer select-none p-3 sm:p-3 rounded-lg border transition-all duration-200 min-h-[48px] sm:min-h-[44px] hover:shadow-sm ${theme === 'dark' ? 'bg-gray-800/50 border-gray-700 hover:bg-gray-800' : 'bg-gray-50 border-gray-200 hover:bg-gray-100'}",children:[e.jsx("input",{type:"checkbox",checked:!!z,onChange:G=>$(P.key,G.target.checked),className:"accent-[#4E6E49] w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:`font-medium ${L} text-sm sm:text-base`,children:P.label})]}):e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:z||"",onChange:G=>$(P.key,G.target.value),className:B,placeholder:P.placeholder}),P.key==="contract"&&z&&e.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(String(z))},className:`absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg transition-colors ${c==="dark"?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-500"}`,title:"Скопировать контракт",children:e.jsx(Rn,{className:"w-4 h-4"})})]})};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-5",children:[m&&e.jsxs("div",{className:`p-4 rounded-xl ${c==="dark"?"bg-red-900/30 border border-red-700/50 text-red-300":"bg-red-50 border border-red-200 text-red-800"} flex items-center gap-3 animate-in shake`,children:[e.jsx(Rt,{className:"w-5 h-5 shrink-0"}),m]}),l&&e.jsxs("div",{className:`relative rounded-2xl border ${N} ${c==="dark"?"bg-gray-900/60":"bg-white"} p-5 overflow-hidden`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${js(M,c)}`}),e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center text-white shadow-lg bg-gradient-to-br ${js(M,c)}`,children:e.jsx(He,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-bold ${L}`,children:"Тип сигнала"}),e.jsx("p",{className:`text-xs ${b}`,children:"Выберите категорию для вашего сигнала"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2.5",children:Object.keys(Ca).map(P=>{const U=Ca[P],z=js(P,c),B=M===P;return e.jsxs("button",{type:"button",onClick:()=>se(P),className:`relative p-4 rounded-xl border-2 transition-all duration-300 group overflow-hidden ${B?`border-transparent shadow-lg shadow-${z.split(" ")[0].replace("from-","").split("-")[0]}-500/20 scale-[1.02]`:`border-gray-700 hover:border-gray-600 hover:shadow-lg hover:-translate-y-0.5 ${c==="dark"?"bg-gray-800/30":"bg-gray-50"}`}`,children:[B&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${z} opacity-30 rounded-xl`}),!B&&c==="dark"&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${z.replace("from-","from-").replace(" to-"," to-")} opacity-5 rounded-xl`}),e.jsxs("div",{className:"relative flex flex-col items-center gap-2.5 text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 ${B?`bg-gradient-to-br ${z} text-white shadow-md`:`${c==="dark"?"bg-gray-700/50 text-gray-400":"bg-gray-100 text-gray-500"} group-hover:${c==="dark"?"bg-gray-600":"bg-gray-200"}`}`,children:e.jsx("div",{className:"w-5 h-5",children:U.icon})}),e.jsxs("div",{className:"w-full",children:[e.jsx("span",{className:`text-sm font-bold block transition-colors ${B?`bg-gradient-to-r ${z} bg-clip-text text-transparent`:L}`,children:U.label}),B&&e.jsx("span",{className:`text-[10px] bg-gradient-to-r ${z} bg-clip-text text-transparent font-medium`,children:"Выбрано"})]})]})]},P)})})]}),e.jsxs("div",{className:`relative rounded-2xl border ${N} ${c==="dark"?"bg-gray-900/60":"bg-white"} p-5 overflow-hidden`,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${js(M,c)}`}),e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl ${js(M,c).replace("from-","").replace(" to-","/10 to-")} to-transparent rounded-full blur-2xl opacity-30`}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center text-white shadow-lg bg-gradient-to-br ${js(M,c)}`,children:e.jsx(Rl,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-bold ${L}`,children:Ca[M].label}),e.jsx("p",{className:`text-xs ${b}`,children:"Заполните детали сигнала"})]})]})}),e.jsx("div",{className:"space-y-6",children:Object.entries(S_[M]).map(([P,U])=>{const z=A_[M].filter(B=>B.section===P);return z.length===0?null:e.jsxs("div",{className:"relative space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-gray-200/50 dark:border-gray-700/50",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${js(M,c)} text-white`,children:U.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-base font-bold ${L}`,children:U.title}),U.description&&e.jsx("p",{className:`text-xs ${b}`,children:U.description})]}),e.jsx("div",{className:`h-px flex-1 bg-gradient-to-r from-transparent ${js(M,c).replace("from-","via-")} to-transparent opacity-20`})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:z.map(B=>e.jsxs("div",{className:"space-y-2",children:[B.type!=="checkbox"&&e.jsxs("label",{className:`text-sm font-semibold ${L} flex items-center gap-2`,children:[B.label,B.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),ie(B)]},B.key))})]},P)})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8 pt-6 border-t border-gray-200/50 dark:border-gray-700/50",children:[e.jsxs("button",{type:"button",onClick:F,className:`px-5 py-3.5 rounded-xl font-semibold border-2 transition-all duration-300 flex items-center justify-center gap-2 ${N} ${c==="dark"?"text-white hover:bg-gray-800 hover:border-gray-600":"text-gray-700 hover:bg-gray-50 hover:border-gray-400"} hover:shadow-lg active:scale-[0.98]`,children:[e.jsx(Pn,{className:"w-4 h-4"}),e.jsx("span",{children:"Предпросмотр"})]}),e.jsx("button",{type:"submit",disabled:h,className:`flex-1 py-3.5 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${h?"bg-gray-400 text-gray-200 cursor-not-allowed":`bg-gradient-to-r ${js(M,c)} text-white hover:shadow-xl hover:scale-[1.01] active:scale-[0.98]`}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Сохранение..."})]}):r?e.jsxs(e.Fragment,{children:[e.jsx(xr,{className:"w-4 h-4"}),e.jsx("span",{children:"Обновить сигнал"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ar,{className:"w-4 h-4"}),e.jsx("span",{children:"Создать сигнал"})]})}),t&&e.jsx("button",{type:"button",onClick:t,className:`px-5 py-3.5 rounded-xl font-semibold border-2 transition-all duration-300 ${N} ${c==="dark"?"text-gray-300 hover:bg-gray-800 hover:text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"} hover:shadow-lg active:scale-[0.98]`,children:"Отмена"})]})]}),y&&(()=>{const P=S(),U=Fe.find(z=>z.id===P.userId);return e.jsxs("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-xl z-[80] flex items-start sm:items-center justify-center p-4 overflow-y-auto",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:`relative ${j} rounded-3xl shadow-2xl shadow-black/50 border ${N} max-w-2xl w-full max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-300`,children:[e.jsx("div",{className:`h-2 bg-gradient-to-r ${js(M,c)}`}),e.jsxs("div",{className:"p-6 flex items-center justify-between sticky top-0 z-10 ${bgColor} border-b ${borderColor}",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${js(M,c)} flex items-center justify-center text-white shadow-lg`,children:e.jsx(Pn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${L}`,children:"Предпросмотр"}),e.jsx("p",{className:`text-xs ${b}`,children:"Проверьте сигнал перед публикацией"})]})]}),e.jsx("button",{onClick:()=>v(!1),className:`p-2 rounded-xl transition-all ${c==="dark"?"hover:bg-gray-800 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-500 hover:text-gray-900"}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-6 pb-6 pt-4 overflow-y-auto max-h-[calc(90vh-100px)]",children:[e.jsxs("div",{className:`relative rounded-2xl border-2 overflow-hidden mb-6 ${vx[M].border} ${vx[M].bg}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-emerald-500/5 to-transparent rounded-full blur-xl"}),e.jsxs("div",{className:`relative px-5 py-4 flex flex-wrap items-center justify-between gap-3 border-b ${c==="dark"?"border-white/10 bg-white/5":"border-white/70 bg-white/70"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg bg-gradient-to-br ${js(M,c)} text-white`,children:Ca[M].icon}),e.jsx("span",{className:`text-sm font-bold ${L}`,children:Ca[M].label})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"px-3 py-1.5 rounded-full text-xs font-bold bg-emerald-500/15 text-emerald-500 border border-emerald-500/30",children:"Активен"}),e.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${yx[P.riskLevel||"medium"]}`,children:["Риск: ",P.riskLevel||"medium"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-medium ${c==="dark"?"bg-gray-800/70 text-gray-300 border border-white/10":"bg-gray-100 text-gray-600 border-gray-200"}`,children:"Только что"}),U&&e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded-lg border border-white/10 bg-black/5 dark:bg-white/5",children:[e.jsx(rr,{user:U,size:"sm",className:"w-7 h-7"}),e.jsx("span",{className:`text-xs font-medium ${w}`,children:U.name})]})]})]}),e.jsx("div",{className:"relative p-5 space-y-5",children:H(P)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>v(!1),className:`flex-1 px-4 py-3.5 rounded-xl font-semibold border-2 transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${h?"bg-gray-400 text-gray-200 cursor-not-allowed":`bg-gradient-to-r ${js(M,c)} text-white hover:shadow-xl`}`,children:[e.jsx(it,{className:"w-4 h-4"}),"Назад"]}),e.jsxs("button",{type:"button",onClick:()=>{v(!1);const z=document.querySelector("form");z==null||z.requestSubmit()},disabled:h,className:`flex-1 py-3.5 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg ${h?"bg-gray-400 text-gray-200 cursor-not-allowed":`bg-gradient-to-r ${js(M,c)} text-white hover:shadow-xl`}`,children:[e.jsx(xr,{className:"w-4 h-4"}),"Опубликовать"]})]})]})]})]})})()]})})},Ic=({value:s,onChange:t,options:r,placeholder:a="Select...",searchable:n=!1,icon:i})=>{const{theme:l}=pe(),[c,d]=f.useState(!1),[h,u]=f.useState(""),m=f.useRef(null),g=r.find(v=>v.value===s);f.useEffect(()=>{const v=E=>{m.current&&!m.current.contains(E.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const y=r.filter(v=>v.label.toLowerCase().includes(h.toLowerCase())||v.meta&&v.meta.toLowerCase().includes(h.toLowerCase()));return e.jsxs("div",{className:"relative min-w-[180px]",ref:m,children:[e.jsxs("button",{onClick:()=>d(!c),className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-xl border transition-all ${l==="dark"?"bg-[#151a21] border-white/5 text-gray-300 hover:border-emerald-500/30":"bg-white border-gray-200 text-gray-700 hover:border-emerald-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 overflow-hidden",children:[i&&e.jsx("div",{className:g?"text-emerald-500":"text-gray-500",children:i}),g?e.jsxs("div",{className:"flex items-center gap-2",children:[g.icon&&e.jsx("div",{className:"flex items-center justify-center",children:g.icon}),e.jsx("span",{className:"text-sm font-bold truncate",children:g.label})]}):e.jsx("span",{className:"text-sm font-semibold text-gray-500",children:a})]}),e.jsx(st,{size:16,className:`text-gray-500 transition-transform ${c?"rotate-180":""}`})]}),c&&e.jsxs("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[200px] rounded-2xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 ${l==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:[n&&e.jsx("div",{className:"p-3 border-b border-white/5",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Поиск...",value:h,onChange:v=>u(v.target.value),className:`w-full pl-9 pr-8 py-2 rounded-lg text-xs font-medium outline-none transition-all ${l==="dark"?"bg-black/20 text-gray-300 focus:bg-black/40":"bg-gray-100 text-gray-700 focus:bg-gray-200"}`,autoFocus:!0}),h&&e.jsx("button",{onClick:()=>u(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:text-rose-500",children:e.jsx(it,{size:12})})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1.5 custom-scrollbar",children:[y.map(v=>e.jsxs("button",{onClick:()=>{t(v.value),d(!1)},className:`w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg transition-all text-left ${v.value===s?l==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-emerald-50 text-emerald-600":l==="dark"?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[v.icon&&e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] ${v.chip||(l==="dark"?"bg-white/5":"bg-gray-100")}`,children:v.icon}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-xs font-bold truncate",children:v.label}),v.meta&&e.jsx("span",{className:"text-[9px] opacity-50 truncate",children:v.meta})]})]}),v.value===s&&e.jsx(xr,{size:14})]},v.value)),y.length===0&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ничего не найдено"})})]})]})]})},Xr=()=>{const[s,t]=f.useState([]),[r,a]=f.useState(!0),[n,i]=f.useState(null);return f.useEffect(()=>{(async()=>{try{a(!0);const c=await qn(),d=new Map;Fe.forEach(h=>{d.set(h.id,h)}),c.forEach(h=>{d.set(h.id,h)}),t(Array.from(d.values())),i(null)}catch(c){console.error("Error loading users:",c),i(c instanceof Error?c:new Error("Unknown error")),t(Fe)}finally{a(!1)}})()},[]),{users:s,loading:r,error:n}},xo="modal-open";let ji=0;const C_=()=>{typeof document>"u"||(ji===0&&(document.body.classList.add(xo),document.documentElement.classList.add(xo)),ji+=1)},D_=()=>{typeof document>"u"||(ji=Math.max(ji-1,0),ji===0&&(document.body.classList.remove(xo),document.documentElement.classList.remove(xo)))},Sr=(s=!0)=>{const[t,r]=f.useState(!1),a=f.useCallback(()=>{C_(),r(!0)},[]),n=f.useCallback(()=>{D_(),r(!1)},[]);return f.useEffect(()=>{if(s)return a(),()=>{n()}},[s,a,n]),{lockScroll:a,unlockScroll:n,isLocked:t}},ze=s=>{const{user:t}=Xe(),{isAdmin:r}=kt(),[a,n]=f.useState({hasAccess:!0,loading:!0});return f.useEffect(()=>{(async()=>{if(r){n({hasAccess:!0,loading:!1});return}if(!t){n({hasAccess:!1,loading:!1,reason:"Необходима авторизация"});return}try{const l=await Cn(t.id,s);n({hasAccess:l.hasAccess,loading:!1,reason:l.reason,expiresAt:l.expiresAt})}catch(l){console.error(`Error checking access for ${s}:`,l),n({hasAccess:!0,loading:!1})}})()},[t,r,s]),a},Nx=["memecoins","polymarket","nft","staking","spot","futures","airdrop"],Ta={memecoins:{label:"Мемкоины",gradient:"from-emerald-400 via-teal-500 to-cyan-400",gradientDark:"from-emerald-500 via-teal-600 to-cyan-500",chip:"bg-emerald-500/10 text-emerald-400",icon:e.jsx(ar,{className:"w-5 h-5 text-white"}),cardGradient:"from-emerald-500/20 via-teal-400/10 to-cyan-500/5"},futures:{label:"Фьючерсы",gradient:"from-blue-400 to-indigo-500",gradientDark:"from-blue-600 to-indigo-500",chip:"bg-blue-500/10 text-blue-600",icon:e.jsx(Qs,{className:"w-5 h-5 text-white"}),cardGradient:"from-blue-500/20 via-indigo-500/10 to-transparent"},nft:{label:"NFT",gradient:"from-purple-400 to-pink-500",gradientDark:"from-purple-600 to-pink-500",chip:"bg-purple-500/10 text-purple-600",icon:e.jsx(gr,{className:"w-5 h-5 text-white"}),cardGradient:"from-purple-500/20 via-pink-500/10 to-transparent"},spot:{label:"Спот",gradient:"from-amber-400 to-orange-500",gradientDark:"from-amber-600 to-orange-500",chip:"bg-amber-500/10 text-amber-600",icon:e.jsx(Es,{className:"w-5 h-5 text-white"}),cardGradient:"from-amber-500/20 via-orange-500/10 to-transparent"},airdrop:{label:"AirDrop",gradient:"from-gray-300 to-gray-400",gradientDark:"from-gray-400 to-gray-300",chip:"bg-gray-500/10 text-gray-600",icon:e.jsx(mr,{className:"w-5 h-5 text-white"}),cardGradient:"from-gray-500/20 via-gray-400/10 to-transparent"},polymarket:{label:"Polymarket",gradient:"from-rose-400 to-red-500",gradientDark:"from-rose-600 to-red-500",chip:"bg-rose-500/10 text-rose-600",icon:e.jsx(ga,{className:"w-5 h-5 text-white"}),cardGradient:"from-rose-500/20 via-red-500/10 to-transparent"},staking:{label:"Стейкинг",gradient:"from-emerald-400 to-green-500",gradientDark:"from-emerald-600 to-green-500",chip:"bg-emerald-500/10 text-emerald-600",icon:e.jsx(jt,{className:"w-5 h-5 text-white"}),cardGradient:"from-emerald-500/20 via-green-500/10 to-transparent"}},ai={low:"bg-emerald-500/10 text-emerald-600 border border-emerald-500/20",medium:"bg-blue-500/10 text-blue-600 border border-blue-500/20",high:"bg-amber-500/10 text-amber-600 border border-amber-500/20",ultra:"bg-red-500/10 text-red-600 border border-red-500/20"},R_={low:"Low Risk",medium:"Medium Risk",high:"High Risk",ultra:"Ultra Risk"},P_=()=>{const{theme:s}=pe(),{user:t}=Xe(),r=(t==null?void 0:t.id)==="1",[a,n]=f.useState([]),[i,l]=f.useState(!0),[c,d]=f.useState(!1),[h,u]=f.useState(!1),[m,g]=f.useState(null),[y,v]=f.useState(null),[E,I]=f.useState(null),[C,T]=f.useState("memecoins"),[D,M]=f.useState(!0),[se,L]=f.useState(""),[N]=f.useState("all"),[b,w]=f.useState("all"),[j,$]=f.useState("all"),[_,k]=f.useState("all"),H=ze("ava_hub"),S=ze("hub_signals_add"),F=ze("hub_signals_cat_memecoins"),Z=ze("hub_signals_cat_polymarket"),ie=ze("hub_signals_cat_nft"),P=ze("hub_signals_cat_spot"),U=ze("hub_signals_cat_futures"),z=ze("hub_signals_cat_staking"),B=ze("hub_signals_cat_airdrop"),G={memecoins:F.hasAccess,polymarket:Z.hasAccess,nft:ie.hasAccess,spot:P.hasAccess,futures:U.hasAccess,staking:z.hasAccess,airdrop:B.hasAccess};Sr(c||h||!!y),f.useEffect(()=>{O()},[]);const O=async()=>{l(!0);try{const ue=await w4();n(ue)}catch(ue){console.error("Error loading calls:",ue),n([])}finally{l(!1)}},V=s==="dark"?"text-white":"text-gray-900",R=s==="dark"?"bg-[#0a0a0a]":"bg-white",q=s==="dark"?"text-gray-400":"text-gray-600",K=s==="dark"?"border-white/10":"border-gray-100",J=s==="dark"?"bg-white/5 backdrop-blur-md":"bg-white",ce=()=>{d(!1),I(null),O()},he=()=>{d(!1),I(null)},te=async(ue,Y)=>{try{await hd(ue,{status:Y}),await O()}catch(we){console.error("Error updating status:",we),alert("Ошибка при обновлении статуса")}},ae=ue=>{I(ue),T(ue.category),d(!0)},ge=ue=>{g(ue),u(!0)},le=async()=>{if(m)try{await N4(m),u(!1),g(null),O()}catch(ue){console.error("Error deleting call:",ue),alert("Ошибка при удалении сигнала")}},W=async()=>{if(y)try{await hd(y,{status:"cancelled"}),v(null),O()}catch(ue){console.error("Error cancelling call:",ue),alert("Ошибка при отмене сигнала")}},ne=ue=>{var Y;return((Y=ue.details)==null?void 0:Y[ue.category])||{}},fe=ue=>{const Y=ne(ue);switch(ue.category){case"memecoins":return Y.contract?`${Y.contract.slice(0,6)}...${Y.contract.slice(-4)}`:"Мемкоин";case"futures":return Y.pair||"Фьючерс";case"nft":return Y.collectionLink||"NFT коллекция";case"spot":return Y.coin||"Спот";case"polymarket":return Y.event||"Polymarket событие";case"staking":return Y.coin||"Стейкинг";case"airdrop":return Y.projectName||"AirDrop";default:return"Сигнал"}},We=ue=>ue.riskLevel||ne(ue).riskLevel||ne(ue).protocolRisk||"medium",Se=ue=>{const Y=ne(ue);return[ue.category,ue.status,ue.comment,Y.contract,Y.pair,Y.reason,Y.targets,Y.event,Y.marketplace,Y.platform,Y.entryCap,Y.entryZone,Y.network].filter(Boolean).join(" ").toLowerCase()},ke=a.filter(ue=>N!=="all"&&ue.status!==N||b!=="all"&&ue.category!==b||j!=="all"&&We(ue)!==j||_!=="all"&&ue.userId!==_||!G[ue.category]?!1:se.trim()?Se(ue).includes(se.toLowerCase()):!0),$e=f.useMemo(()=>({total:a.length,active:a.filter(ue=>ue.status==="active").length,completed:a.filter(ue=>ue.status==="completed").length,cancelled:a.filter(ue=>ue.status==="cancelled").length}),[a]),ye=[{value:"all",label:"Все сферы",icon:e.jsx(Tt,{size:14})},...Nx.map(ue=>({value:ue,label:Ta[ue].label,icon:Ta[ue].icon,chip:Ta[ue].chip}))],Ce=[{value:"all",label:"Любой риск",icon:e.jsx(sr,{size:14})},{value:"low",label:"Low Risk",icon:e.jsx(jt,{size:14}),chip:ai.low},{value:"medium",label:"Medium Risk",icon:e.jsx(jt,{size:14}),chip:ai.medium},{value:"high",label:"High Risk",icon:e.jsx(Rt,{size:14}),chip:ai.high},{value:"ultra",label:"Ultra Risk",icon:e.jsx(lt,{size:14}),chip:ai.ultra}],{users:Ge}=Xr(),ot=[{value:"all",label:"Все трейдеры",icon:e.jsx(dr,{size:16})},...Ge.map(ue=>({value:ue.id,label:ue.name,meta:ue.login,icon:ue.avatar?e.jsx("img",{src:ue.avatar,className:"w-full h-full object-cover rounded-full"}):e.jsx(dr,{size:10})}))];return H.loading?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent"})}):H.hasAccess?e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsx("div",{className:"sm:hidden px-4 py-4 border-b",style:{borderColor:s==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(Tt,{className:"w-7 h-7 text-emerald-500"}),e.jsx("h1",{className:`text-xl font-bold ${V}`,children:"HUB"})]}),S.hasAccess&&e.jsxs("button",{onClick:()=>{I(null),T("memecoins"),M(!0),d(!0)},className:"flex items-center gap-1.5 px-4 py-2 rounded-lg font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 bg-emerald-500 hover:bg-emerald-600",children:[e.jsx(os,{size:16}),e.jsx("span",{children:"Call"})]})]})}),e.jsx("div",{className:"hidden sm:block px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tt,{className:"w-8 h-8 text-emerald-500"}),e.jsx("h1",{className:`text-3xl font-bold ${V}`,children:"HUB"})]}),S.hasAccess&&e.jsxs("button",{onClick:()=>{I(null),T("memecoins"),M(!0),d(!0)},className:"flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-white shadow-lg transition-all hover:scale-105 active:scale-95 bg-emerald-500 hover:bg-emerald-600",children:[e.jsx(os,{size:18}),e.jsx("span",{children:"Call"})]})]})}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 mb-6",children:[e.jsx("div",{className:"mb-3",children:e.jsx("h3",{className:`text-sm font-semibold ${q}`,children:"Создать сигнал"})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:Nx.filter(ue=>G[ue]).map(ue=>{const Y=Ta[ue],we=s==="dark"?Y.gradientDark:Y.gradient,Oe={memecoins:"border-emerald-500/40",futures:"border-blue-500/40",nft:"border-purple-500/40",spot:"border-amber-500/40",airdrop:"border-gray-500/40",polymarket:"border-rose-500/40",staking:"border-emerald-500/40"},Ae={memecoins:"from-emerald-500/15 via-teal-500/5 to-cyan-500/5",futures:"from-blue-500/15 via-indigo-500/5 to-transparent",nft:"from-purple-500/15 via-pink-500/5 to-transparent",spot:"from-amber-500/15 via-orange-500/5 to-transparent",airdrop:"from-gray-400/15 via-gray-300/5 to-transparent",polymarket:"from-rose-500/15 via-red-500/5 to-transparent",staking:"from-emerald-500/15 via-green-500/5 to-transparent"};return e.jsxs("button",{onClick:()=>{I(null),T(ue),M(!1),d(!0)},className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${Oe[ue]} bg-gradient-to-br ${Ae[ue]} transition-all hover:scale-[1.02]`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-gradient-to-br ${we} text-white shadow-md shrink-0`,children:Y.icon}),e.jsx("span",{className:`text-sm font-medium truncate ${V}`,children:Y.label})]},ue)})})]}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 mb-6",children:e.jsxs("div",{className:`relative rounded-xl border ${K} ${J} shadow-xl`,children:[e.jsx(Dt,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${q}`}),e.jsx("input",{type:"text",value:se,onChange:ue=>L(ue.target.value),placeholder:"Поиск по тикеру, событию, сети или причине...",className:`w-full pl-12 pr-4 py-3 bg-transparent ${V} placeholder:${q} focus:outline-none`})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"w-full sm:w-auto min-w-[200px]",children:e.jsx(Ic,{value:b,onChange:ue=>w(ue),options:ye,placeholder:"Все сферы",icon:e.jsx(Tt,{size:16})})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[180px]",children:e.jsx(Ic,{value:j,onChange:ue=>$(ue),options:Ce,placeholder:"Любой риск",icon:e.jsx(sr,{size:16})})}),e.jsx("div",{className:"w-full sm:w-auto min-w-[220px]",children:e.jsx(Ic,{value:_,onChange:ue=>k(ue),options:ot,placeholder:"Все трейдеры",searchable:!0,icon:e.jsx(dr,{size:16})})})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-xl font-bold ${V}`,children:"Лента сигналов"}),e.jsxs("p",{className:`text-sm ${q}`,children:["Показано ",ke.length," из ",$e.active," активных"]})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-500 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:q,children:"Загрузка сигналов..."})]}):ke.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mr,{className:`w-16 h-16 mx-auto mb-4 ${q}`}),e.jsx("p",{className:`text-xl font-bold ${V} mb-2`,children:"Нет сигналов"}),e.jsx("p",{className:q,children:"Попробуйте изменить фильтры"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:ke.map(ue=>{const Y=Ta[ue.category],we=ne(ue),Oe=We(ue),Ae=Ge.find(qe=>qe.id===ue.userId);return e.jsx("div",{className:`p-4 rounded-xl border ${K} ${J} shadow-lg hover:shadow-xl transition-all group`,children:e.jsxs("div",{className:`flex items-start justify-between gap-4 ${ue.status!=="active"?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${Y.gradient} bg-opacity-10 text-white shrink-0`,children:Y.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:`font-bold ${V} truncate`,children:fe(ue)}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${ai[Oe]}`,children:R_[Oe]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-medium border ${K} ${q}`,children:Y.label}),ue.status==="completed"&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider bg-emerald-500/10 text-emerald-500 px-2 py-0.5 rounded-full",children:[e.jsx(gs,{className:"w-3 h-3"}),"Завершен"]}),ue.status==="cancelled"&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider bg-rose-500/10 text-rose-500 px-2 py-0.5 rounded-full",children:[e.jsx(Zs,{className:"w-3 h-3"}),"Отменен"]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-y-2 gap-x-6 mt-3 max-w-3xl",children:[we.entryPrice&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${q} mb-0.5`,children:"Вход"}),e.jsx("span",{className:`text-sm font-medium ${V}`,children:we.entryPrice})]}),we.targets&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${q} mb-0.5`,children:"Цель"}),e.jsx("span",{className:"text-sm font-medium text-emerald-500",children:we.targets})]}),we.stopLoss&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${q} mb-0.5`,children:"Стоп"}),e.jsx("span",{className:"text-sm font-medium text-rose-500",children:we.stopLoss})]}),Ae&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${q} mb-0.5`,children:"Автор"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[Ae.avatar?e.jsx("img",{src:Ae.avatar,className:"w-4 h-4 rounded-full object-cover"}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500 text-[8px] flex items-center justify-center text-white",children:Ae.name[0]}),e.jsx("span",{className:`text-sm font-medium ${V}`,children:Ae.name})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{const qe=`🚀 ${Y.label}: ${fe(ue)}
`+(we.entryPrice?`📍 Вход: ${we.entryPrice}
`:"")+(we.targets?`🎯 Цели: ${we.targets}
`:"")+(we.stopLoss?`🛑 Стоп: ${we.stopLoss}
`:"")+(we.contract?`📝 CA: ${we.contract}
`:"")+(we.link?`🔗 Ссылка: ${we.link}
`:"")+`👤 Трейдер: ${(Ae==null?void 0:Ae.name)||"Admin"}`;navigator.clipboard.writeText(qe)},className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-emerald-500/20 text-emerald-400 hover:text-emerald-300":"hover:bg-emerald-50 text-emerald-600 hover:text-emerald-700"}`,title:"Копировать сигнал",children:e.jsx(Rn,{className:"w-4 h-4"})}),(r||(t==null?void 0:t.id)===ue.userId)&&ue.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>te(ue.id,"completed"),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-emerald-500/20 text-emerald-400":"hover:bg-emerald-50 text-emerald-600"}`,title:"Завершить (Цели достигнуты)",children:e.jsx(gs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>te(ue.id,"cancelled"),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-rose-500/20 text-rose-400":"hover:bg-rose-50 text-rose-600"}`,title:"Отменить сигнал",children:e.jsx(Zs,{className:"w-4 h-4"})})]}),(r||(t==null?void 0:t.id)===ue.userId)&&ue.status!=="active"&&e.jsx("button",{onClick:()=>te(ue.id,"active"),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-blue-500/20 text-blue-400":"hover:bg-blue-50 text-blue-600"}`,title:"Вернуть в работу",children:e.jsx(Z4,{className:"w-4 h-4"})}),(r||(t==null?void 0:t.id)===ue.userId)&&e.jsx("button",{onClick:()=>ae(ue),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-white/10 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-500 hover:text-gray-900"}`,title:"Редактировать",children:e.jsx(rs,{className:"w-4 h-4"})}),r&&e.jsx("button",{onClick:()=>ge(ue.id),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,title:"Удалить",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]})},ue.id)})})}),c&&e.jsxs("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-xl z-[70] flex items-start sm:items-center justify-center p-4 overflow-y-auto",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-emerald-500/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-teal-500/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),e.jsxs("div",{className:`relative ${R} rounded-3xl shadow-2xl shadow-black/50 border ${K} max-w-4xl w-full max-h-[90vh] overflow-hidden animate-in zoom-in-95 duration-300`,children:[e.jsx("div",{className:`h-1.5 transition-all duration-300 ${C==="memecoins"?"bg-gradient-to-r from-teal-400 via-cyan-500 to-emerald-400":C==="polymarket"?"bg-gradient-to-r from-rose-500 via-red-500 to-orange-500":C==="nft"?"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500":C==="futures"?"bg-gradient-to-r from-blue-500 via-indigo-500 to-cyan-500":C==="spot"?"bg-gradient-to-r from-amber-500 via-orange-500 to-yellow-500":C==="staking"?"bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-400":"bg-gradient-to-r from-gray-400 via-gray-300 to-gray-200"}`}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`p-5 flex items-center justify-between sticky top-0 z-20 ${R} border-b ${K}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white shadow-lg transition-all duration-300 ${C==="memecoins"?"bg-gradient-to-br from-teal-400 to-emerald-500 shadow-teal-400/30":C==="polymarket"?"bg-gradient-to-br from-rose-500 to-red-600 shadow-rose-500/30":C==="nft"?"bg-gradient-to-br from-purple-500 to-pink-600 shadow-purple-500/30":C==="futures"?"bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/30":C==="spot"?"bg-gradient-to-br from-amber-500 to-orange-600 shadow-amber-500/30":C==="staking"?"bg-gradient-to-br from-emerald-500 to-green-600 shadow-emerald-500/30":"bg-gradient-to-br from-gray-400 to-gray-300 shadow-gray-400/30"}`,children:Ta[C].icon}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${V}`,children:E?"Редактировать сигнал":"Новый сигнал"}),e.jsx("p",{className:`text-xs ${q}`,children:E?"Измените данные сигнала":`Создайте сигнал: ${Ta[C].label}`})]})]}),e.jsx("button",{onClick:he,className:`p-2.5 rounded-xl transition-all duration-200 ${s==="dark"?"hover:bg-gray-800 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-500 hover:text-gray-900"}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 pb-6 pt-4 overflow-y-auto flex-1 max-h-[calc(90vh-80px)]",children:e.jsx(I_,{callToEdit:E,onSuccess:ce,onCancel:he,initialCategory:C,category:C,onCategoryChange:T,showCategorySelector:D})})]})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] flex items-start sm:items-center justify-center p-4 overflow-y-auto overscroll-contain",children:e.jsx("div",{className:`${R} rounded-2xl shadow-2xl border ${K} max-w-md w-full animate-in zoom-in-95 duration-200`,children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-red-500/10 text-red-500",children:e.jsx(Rt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold ${V}`,children:"Удалить сигнал?"}),e.jsx("p",{className:q,children:"Это действие нельзя отменить"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{u(!1),g(null)},className:`flex-1 px-4 py-3 rounded-xl border ${K} font-medium ${s==="dark"?"text-white hover:bg-white/5":"text-gray-800 hover:bg-gray-50"}`,children:"Отмена"}),e.jsx("button",{onClick:le,className:"flex-1 px-4 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 shadow-lg shadow-red-600/20",children:"Удалить"})]})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] flex items-start sm:items-center justify-center p-4 overflow-y-auto overscroll-contain",children:e.jsx("div",{className:`${R} rounded-2xl shadow-2xl border ${K} max-w-md w-full`,children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-amber-500/10 text-amber-500",children:e.jsx(Rt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold ${V}`,children:"Отменить сигнал?"}),e.jsx("p",{className:q,children:"Статус станет «Отменен», запись останется в списке."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>v(null),className:`flex-1 px-4 py-3 rounded-xl border ${K} font-medium ${s==="dark"?"text-white hover:bg-white/5":"text-gray-800 hover:bg-gray-50"}`,children:"Отмена"}),e.jsx("button",{onClick:W,className:"flex-1 px-4 py-3 rounded-xl bg-amber-500 text-white font-bold hover:bg-amber-600 shadow-lg shadow-amber-500/20",children:"Отменить"})]})]})})})]}):e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доступ к AVA — HUB ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:H.reason||"У вас нет доступа к сигналам."})]})},M_=Mi()(Oi(s=>({selectedDate:null,selectedWeekStart:null,viewMode:"table",setSelectedDate:t=>{s({selectedDate:t})},setSelectedWeekStart:t=>{s({selectedWeekStart:t})},setViewMode:t=>{s({viewMode:t})},resetDate:()=>{s({selectedDate:null,selectedWeekStart:null})}}),{name:"schedule-date-storage"})),hr=({userId:s,className:t="",fallback:r="unknown",formatter:a,avatarUrl:n})=>{const l=Uo(s)||r;return e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsx("img",{src:n,alt:"Avatar",className:"w-6 h-6 rounded-full object-cover"}),e.jsx("span",{className:t,children:a?a(l):l})]})},O_=({selectedUserId:s,slotFilter:t,onEditSlot:r,onEditStatus:a,refreshKey:n,initialWeekStart:i,onDateChange:l})=>{const{theme:c}=pe(),{user:d}=Xe(),{isAdmin:h}=kt(),{users:u}=Xr(),m=["truancy","absence","internship"],[g,y]=f.useState([]),[v,E]=f.useState([]),[I,C]=f.useState(()=>i?new Date(i):new Date),[T,D]=f.useState(!0),[M,se]=f.useState({}),L=oe(new Date,"yyyy-MM-dd"),N=so(I),b={artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"},w=V=>{const R=u.find(J=>J.id===V),q=Fe.find(J=>J.id===V)||Fe.find(J=>b[V]===J.id),K=R||q;return{member:K,displayName:Yt((K==null?void 0:K.id)||V),avatar:K==null?void 0:K.avatar}},j=u.length>0?u:Fe,$=s?j.filter(V=>V.id===s):j;f.useEffect(()=>{i&&C(new Date(i))},[i]),f.useEffect(()=>{_()},[s,I,n]),f.useEffect(()=>{const V=()=>{_(!0)};return window.addEventListener("focus",V),()=>window.removeEventListener("focus",V)},[]);const _=async(V=!1)=>{V||D(!0);try{const R=new Date(N[0]);R.setHours(0,0,0,0);const q=new Date(N[6]);q.setHours(23,59,59,999);const K=oe(R,"yyyy-MM-dd"),J=oe(q,"yyyy-MM-dd"),[ce,he]=await Promise.all([vr(),Fr()]),te=ce.filter(W=>W.date>=K&&W.date<=J),ae=he.filter(W=>{const ne=W.date,fe=W.endDate||W.date;return ne<=J&&fe>=K}),ge=s?te.filter(W=>W.userId===s):te,le=s?ae.filter(W=>W.userId===s):ae;y(ge),E(le)}catch(R){console.error("Error loading data:",R)}finally{V||D(!1)}},k=async V=>{if(!h&&(d==null?void 0:d.id)!==V.userId){alert("Только администратор может удалять чужие слоты");return}if(h){confirm("Удалить слот?")&&(await qo(V.id),_());return}confirm("Отправить на согласование удаление слота?")&&(await ts({entity:"slot",action:"delete",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:V,after:null,comment:V.comment}),_())},H=async(V,R)=>{if(["truancy","absence","internship"].includes(V.type)){if(!h){alert("Только администратор может удалять этот тип статуса");return}}else if(!h&&(d==null?void 0:d.id)!==V.userId){alert("Только администратор может удалять чужие статусы");return}if(V.endDate&&R){const K=V.date,J=V.endDate;if(R===K){if(confirm(h?"Удалить первый день диапазона?":"Отправить на согласование удаление первого дня диапазона?")){const ce=new Date(K+"T00:00:00");ce.setDate(ce.getDate()+1);const he=oe(ce,"yyyy-MM-dd");h?await ma(V.id,{...V,date:he}):await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:V,after:{...V,date:he},comment:V.comment}),_()}return}if(R===J){if(confirm(h?"Удалить последний день диапазона?":"Отправить на согласование удаление последнего дня диапазона?")){const ce=new Date(J+"T00:00:00");ce.setDate(ce.getDate()-1);const he=oe(ce,"yyyy-MM-dd");h?await ma(V.id,{...V,endDate:he}):await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:V,after:{...V,endDate:he},comment:V.comment}),_()}return}if(R>K&&R<J){if(confirm(h?"Удалить этот день? Диапазон будет разбит на две части.":"Отправить на согласование удаление этого дня? Диапазон будет разбит на две части.")){const ce=new Date(R+"T00:00:00");ce.setDate(ce.getDate()-1);const he=oe(ce,"yyyy-MM-dd");if(h){await ma(V.id,{...V,endDate:he});const te=new Date(R+"T00:00:00");te.setDate(te.getDate()+1);const ae=oe(te,"yyyy-MM-dd");await Ho({userId:V.userId,date:ae,endDate:J,type:V.type,comment:V.comment})}else{await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:V,after:{...V,endDate:he},comment:V.comment});const te=new Date(R+"T00:00:00");te.setDate(te.getDate()+1);const ae=oe(te,"yyyy-MM-dd");await ts({entity:"status",action:"create",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:null,after:{id:"",userId:V.userId,date:ae,endDate:J,type:V.type,comment:V.comment},comment:V.comment})}_()}return}}h?confirm("Удалить статус?")&&(await Qi(V.id),_()):confirm("Отправить на согласование удаление статуса?")&&(await ts({entity:"status",action:"delete",authorId:(d==null?void 0:d.id)||V.userId,targetUserId:V.userId,before:V,after:null,comment:V.comment}),_())},S=V=>{const R=Vr(),q=new Date(R);q.setHours(0,0,0,0);const K=new Date(V.date);if(K.setHours(0,0,0,0),K>q)return!0;if(K.getTime()===q.getTime()){const te=Vr(),ae=te.getHours()*60+te.getMinutes();return V.slots.some(ge=>{if(ge.endDate){const fe=new Date(ge.endDate);if(fe.setHours(0,0,0,0),new Date(q).setHours(23,59,59),fe>q)return!0;if(fe.getTime()===q.getTime()){const[Se,ke]=ge.end.split(":").map(Number);return Se*60+ke>ae}return!1}const[le,W]=ge.end.split(":").map(Number);return le*60+W>ae})}const J=Vr(),ce=J.getHours()*60+J.getMinutes();return V.slots.some(te=>{if(te.endDate){const ae=new Date(te.endDate);if(ae.setHours(0,0,0,0),ae>q)return!0;if(ae.getTime()===q.getTime()){const[ge,le]=te.end.split(":").map(Number);return ge*60+le>ce}return!1}return!1})},F=(V,R)=>{const q=g.find(K=>K.userId===V&&K.date===R)||null;if(q&&t!=="all"){const K=S(q);if(t==="upcoming"&&!K||t==="completed"&&K)return null}return q},Z=(V,R)=>v.find(q=>q.userId!==V?!1:q.endDate?q.date<=R&&q.endDate>=R:q.date===R)||null,ie=V=>{const{start:R,end:q}=zn(I),K=oe(R,"yyyy-MM-dd"),J=oe(q,"yyyy-MM-dd"),he=g.filter(le=>le.userId===V).filter(le=>le.date>=K&&le.date<=J),te=he.reduce((le,W)=>le+zo(W.slots),0),ge=he.reduce((le,W)=>le+W.slots.reduce((ne,fe)=>fe.breaks&&fe.breaks.length>0?ne+fe.breaks.reduce((We,Se)=>{const[ke,$e]=Se.start.split(":").map(Number),[ye,Ce]=Se.end.split(":").map(Number);return We+(ye*60+Ce)-(ke*60+$e)},0):ne,0),0)/60;return{totalHours:te,totalBreakHours:ge}},P=V=>{const R=new Date(I);if(V==="prev"?R.setDate(R.getDate()-7):R.setDate(R.getDate()+7),C(R),l){const q=so(R),K=oe(q[0],"yyyy-MM-dd");l(null,K)}},U=V=>{se(R=>({...R,[V]:!R[V]}))};if(T)return e.jsx("div",{className:`rounded-lg p-8 text-center ${c==="dark"?"bg-[#1a1a1a]":"bg-white"}`,children:e.jsx("p",{className:c==="dark"?"text-gray-400":"text-gray-600",children:"Загрузка..."})});const z=c==="dark"?"text-white":"text-gray-900",B=c==="dark"?"text-gray-400":"text-gray-500",G={dayoff:{label:"Выходной",tone:"bg-green-500/10 text-green-500 border border-green-500/20"},sick:{label:"Больничный",tone:"bg-purple-500/10 text-purple-500 border border-purple-500/20"},vacation:{label:"Отпуск",tone:"bg-blue-500/10 text-blue-500 border border-blue-500/20"},absence:{label:"Отсутствие",tone:"bg-orange-500/10 text-orange-500 border border-orange-500/20"},truancy:{label:"Прогул",tone:"bg-red-500/10 text-red-500 border border-red-500/20"},internship:{label:"Стажировка",tone:"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20"}},O={memecoins:{bg:"bg-emerald-100 dark:bg-emerald-900/40",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-300 dark:border-emerald-700"},futures:{bg:"bg-blue-100 dark:bg-blue-900/40",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-700"},nft:{bg:"bg-purple-100 dark:bg-purple-900/40",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-700"},spot:{bg:"bg-amber-100 dark:bg-amber-900/40",text:"text-amber-700 dark:text-amber-300",border:"border-amber-300 dark:border-amber-700"},airdrop:{bg:"bg-cyan-100 dark:bg-cyan-900/40",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-300 dark:border-cyan-700"},polymarket:{bg:"bg-pink-100 dark:bg-pink-900/40",text:"text-pink-700 dark:text-pink-300",border:"border-pink-300 dark:border-pink-700"},staking:{bg:"bg-indigo-100 dark:bg-indigo-900/40",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-300 dark:border-indigo-700"},other:{bg:"bg-gray-100 dark:bg-gray-900/40",text:"text-gray-700 dark:text-gray-300",border:"border-gray-300 dark:border-gray-700"}};return e.jsxs("div",{className:`rounded-2xl ${c==="dark"?"bg-[#0b1015]":"bg-white"} overflow-visible`,children:[e.jsxs("div",{className:`p-4 border-b ${c==="dark"?"border-white/5":"border-gray-100"} flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>P("prev"),className:`p-1.5 sm:p-2 rounded-xl border transition-all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"}`,children:e.jsx(Vp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-500"})}),e.jsxs("button",{onClick:()=>{const V=new Date,R=eo(V,{weekStartsOn:1}),q=lr(V,"yyyy-MM-dd"),K=lr(R,"yyyy-MM-dd");C(R),l&&l(q,K)},className:`flex items-center gap-1.5 px-3 py-2 rounded-xl border text-xs sm:text-sm font-semibold transition-all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"}`,title:"Вернуться к текущей неделе",children:[e.jsx(qp,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"hidden sm:inline",children:"Актуальная неделя"})]}),e.jsx("button",{onClick:()=>P("next"),className:`p-1.5 sm:p-2 rounded-xl border transition-all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"}`,children:e.jsx(Dn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-500"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:`w-5 h-5 ${c==="dark"?"text-emerald-500":"text-emerald-600"}`}),e.jsxs("span",{className:`${z} font-black text-lg tracking-tight`,children:[oe(N[0],"d MMMM")," — ",oe(N[6],"d MMMM yyyy")]})]}),e.jsx("div",{className:"w-full sm:w-auto flex justify-end sm:justify-start"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-full inline-block align-middle",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"sticky top-0 z-30",children:e.jsxs("tr",{className:`${c==="dark"?"bg-[#0b1015]":"bg-white"}`,children:[e.jsx("th",{className:`p-3 text-center text-[10px] font-bold uppercase tracking-wider ${B} sticky left-0 z-30 ${c==="dark"?"bg-[#0b1015]":"bg-white"}`,children:"Участник"}),N.map(V=>{const R=oe(V,"yyyy-MM-dd")===L;return e.jsx("th",{className:"p-1 min-w-[100px] lg:min-w-[120px]",children:e.jsxs("div",{className:`mx-auto w-full p-1.5 rounded-xl border transition-colors ${R?"bg-emerald-500/10 border-emerald-500/50 text-emerald-500":c==="dark"?"bg-[#151a21] border-white/5 text-gray-400":"bg-gray-50 border-gray-100 text-gray-500"}`,children:[e.jsx("div",{className:"text-[9px] uppercase font-bold opacity-70 mb-0.5",children:oe(V,"EEE")}),e.jsx("div",{className:"text-xs font-black",children:oe(V,"dd.MM")})]})},V.toISOString())}),e.jsx("th",{className:`p-3 text-center text-[10px] font-bold uppercase tracking-wider ${B} min-w-[110px]`,children:"Итоги"})]})}),e.jsx("tbody",{className:`divide-y ${c==="dark"?"divide-white/5":"divide-gray-100"}`,children:$.map((V,R)=>{const q=ie(V.id),K=w(V.id),J=R%2===0?c==="dark"?"bg-[#0f141a]":"bg-gray-50/30":"transparent";return e.jsxs("tr",{className:`${J} hover:bg-emerald-500/5 transition-colors group`,children:[e.jsx("td",{className:`p-2 sticky left-0 z-20 ${J} group-hover:bg-[#1a2029] transition-colors align-middle`,children:e.jsx("div",{className:"flex items-center gap-2 justify-center",children:e.jsx(hr,{userId:V.id,avatarUrl:K.avatar,className:"text-xs font-semibold"})})}),N.map(ce=>{var ge,le;const he=oe(ce,"yyyy-MM-dd"),te=F(V.id,he),ae=Z(V.id,he);return e.jsx("td",{className:"p-1.5 align-middle",children:te?e.jsx("div",{className:"flex flex-col items-center gap-1.5",children:te.slots.map((W,ne)=>{var Se,ke,$e,ye;const fe=`${te.id}-${ne}`,We=M[fe];return e.jsxs("div",{className:"w-full flex flex-col items-center gap-1.5 group/timecard",children:[e.jsxs("div",{className:`w-full max-w-[120px] rounded-xl p-2 text-[10px] font-bold transition-all relative shadow-md ${c==="dark"?"bg-[#1a1f26] border border-white/5 text-gray-200":"bg-gray-100 text-gray-700"}`,children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 opacity-80 justify-center",children:[e.jsx(wt,{className:"w-3 h-3 flex-shrink-0"}),e.jsxs("span",{className:"whitespace-nowrap tracking-tight",children:[W.start," - ",W.end]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-wrap justify-center",children:[te.category&&e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full border font-medium truncate ${((Se=O[te.category])==null?void 0:Se.bg)||"bg-gray-100 dark:bg-gray-800"} ${((ke=O[te.category])==null?void 0:ke.text)||"text-gray-700 dark:text-gray-300"} ${(($e=O[te.category])==null?void 0:$e.border)||"border-gray-300 dark:border-gray-600"}`,children:((ye=_s[te.category])==null?void 0:ye.label)||te.category}),te.comment&&e.jsxs("div",{className:"relative group",children:[e.jsx(ls,{className:"w-3 h-3 text-white/60 hover:text-white cursor-help flex-shrink-0"}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-1 px-3 py-2 bg-gray-900 text-white text-[10px] rounded-lg max-w-xs whitespace-normal break-words opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 shadow-lg border border-white/10",children:[te.comment,e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full border-3 border-transparent border-t-gray-900"})]})]})]}),W.breaks&&W.breaks.length>0&&e.jsx("button",{onClick:()=>U(fe),className:"p-0.5 hover:bg-white/10 rounded-md transition-colors w-full flex justify-center",children:We?e.jsx(Xt,{className:"w-3 h-3"}):e.jsx(st,{className:"w-3 h-3"})})]}),We&&W.breaks&&W.breaks.length>0&&e.jsx("div",{className:"mt-1.5 pt-1.5 border-t border-white/10 space-y-0.5 w-full text-center",children:W.breaks.map((Ce,Ge)=>e.jsxs("div",{className:"text-[9px] opacity-70 font-medium",children:[Ce.start," - ",Ce.end]},Ge))})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover/timecard:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>r(te),className:`transition-all hover:scale-110 ${c==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:e.jsx(rs,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>k(te),className:`transition-all hover:scale-110 ${c==="dark"?"text-rose-500 hover:text-rose-400":"text-rose-600 hover:text-rose-500"}`,children:e.jsx(Lt,{className:"w-3.5 h-3.5"})})]})]},ne)})}):ae?e.jsxs("div",{className:"flex flex-col items-center gap-1.5 group/status",children:[e.jsxs("div",{className:`w-full max-w-[120px] rounded-lg p-2 text-[10px] font-black text-center border shadow-sm flex items-center justify-center gap-1 ${c==="dark"?"bg-[#2A3441]/40":"bg-white"} ${((ge=G[ae.type])==null?void 0:ge.tone)||""}`,children:[e.jsx("span",{children:((le=G[ae.type])==null?void 0:le.label)||ae.type}),ae.comment&&e.jsxs("div",{className:"relative group/stat",children:[e.jsx(ls,{className:"w-3 h-3 opacity-60 hover:opacity-100 cursor-help"}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-1 px-3 py-2 bg-gray-900 text-white text-[10px] rounded-lg max-w-xs whitespace-normal break-words opacity-0 invisible group-hover/stat:opacity-100 group-hover/stat:visible transition-all z-50 shadow-lg border border-white/10",children:[ae.comment,e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full border-3 border-transparent border-t-gray-900"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover/status:opacity-100 transition-opacity duration-200",children:h&&m.includes(ae.type)?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(ae),className:`transition-all hover:scale-110 ${c==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,title:"Редактировать (только для админа)",children:e.jsx(rs,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>H(ae,he),className:`transition-all hover:scale-110 ${c==="dark"?"text-rose-500 hover:text-rose-400":"text-rose-600 hover:text-rose-500"}`,title:"Удалить (только для админа)",children:e.jsx(Lt,{className:"w-3.5 h-3.5"})})]}):h||(V==null?void 0:V.id)===ae.userId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(ae),className:`transition-all hover:scale-110 ${c==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:e.jsx(rs,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>H(ae,he),className:`transition-all hover:scale-110 ${c==="dark"?"text-rose-500 hover:text-rose-400":"text-rose-600 hover:text-rose-500"}`,children:e.jsx(Lt,{className:"w-3.5 h-3.5"})})]}):null})]}):e.jsx("div",{className:"h-8 w-full max-w-[120px] mx-auto rounded-lg border border-dashed border-gray-700/20 dark:border-white/5 opacity-20"})},he)}),e.jsx("td",{className:"p-2 align-middle",children:e.jsxs("div",{className:"space-y-1 py-1 min-w-[110px] text-center ml-2",children:[e.jsxs("div",{className:`text-[12px] font-medium leading-tight ${z}`,children:["Часов: ",q.totalHours.toFixed(1)]}),e.jsxs("div",{className:`text-[12px] font-medium leading-tight ${z}`,children:["Перерывов: ",q.totalBreakHours.toFixed(1)," ч"]})]})})]},V.id)})})]})})})]})},L_=({selectedUserId:s,slotFilter:t,onEditSlot:r,onEditStatus:a,refreshKey:n,initialWeekStart:i,onDateChange:l})=>{const{theme:c}=pe(),{user:d}=Xe(),{isAdmin:h}=kt(),{users:u}=Xr(),m=["truancy","absence","internship"],[g,y]=f.useState([]),[v,E]=f.useState([]),[I,C]=f.useState(()=>i?new Date(i):new Date),[T,D]=f.useState(!0),[M,se]=f.useState({}),L={artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"},N=z=>{const B=u.find(V=>V.id===z),G=Fe.find(V=>V.id===z)||Fe.find(V=>L[z]===V.id),O=B||G;return{member:O,displayName:Yt((O==null?void 0:O.id)||z),avatar:O==null?void 0:O.avatar}},b=so(I),w=new Date;f.useEffect(()=>{i&&C(new Date(i))},[i]),f.useEffect(()=>{j()},[s,I,n]),f.useEffect(()=>{const z=()=>{j(!0)};return window.addEventListener("focus",z),()=>window.removeEventListener("focus",z)},[]);const j=async(z=!1)=>{z||D(!0);try{const B=new Date(b[0]);B.setHours(0,0,0,0);const G=new Date(b[6]);G.setHours(23,59,59,999);const O=oe(B,"yyyy-MM-dd"),V=oe(G,"yyyy-MM-dd"),[R,q]=await Promise.all([vr(),Fr()]),K=R.filter(te=>te.date>=O&&te.date<=V),J=q.filter(te=>{const ae=te.date,ge=te.endDate||te.date;return ae<=V&&ge>=O}),ce=s?K.filter(te=>te.userId===s):K,he=s?J.filter(te=>te.userId===s):J;console.log("Loaded slots (week view):",{weekStart:O,weekEnd:V,allSlotsCount:R.length,weekSlotsCount:K.length,filteredSlotsCount:ce.length,selectedUserId:s}),y(ce),E(he)}catch(B){console.error("Error loading data:",B)}finally{z||D(!1)}},$=async z=>{if(!h&&(d==null?void 0:d.id)!==z.userId){alert("Только администратор может удалять чужие слоты");return}if(h){confirm("Удалить слот?")&&(await qo(z.id),await new Promise(B=>setTimeout(B,100)),await j());return}confirm("Отправить на согласование удаление слота?")&&(await ts({entity:"slot",action:"delete",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:z,after:null,comment:z.comment}),await j())},_=async(z,B)=>{if(m.includes(z.type)){if(!h){alert("Только администратор может удалять этот тип статуса");return}}else if(!h&&(d==null?void 0:d.id)!==z.userId){alert("Только администратор может удалять чужие статусы");return}if(z.endDate&&B){const G=z.date,O=z.endDate;if(B===G){if(confirm(h?"Удалить первый день диапазона?":"Отправить на согласование удаление первого дня диапазона?")){const V=new Date(Ms(G));V.setDate(V.getDate()+1);const R=oe(V,"yyyy-MM-dd");h?await ma(z.id,{...z,date:R}):await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:z,after:{...z,date:R},comment:z.comment}),j()}return}if(B===O){if(confirm(h?"Удалить последний день диапазона?":"Отправить на согласование удаление последнего дня диапазона?")){const V=new Date(Ms(O));V.setDate(V.getDate()-1);const R=oe(V,"yyyy-MM-dd");h?await ma(z.id,{...z,endDate:R}):await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:z,after:{...z,endDate:R},comment:z.comment}),j()}return}if(B>G&&B<O){if(confirm(h?"Удалить этот день? Диапазон будет разбит на две части.":"Отправить на согласование удаление этого дня? Диапазон будет разбит на две части.")){const V=new Date(Ms(B));V.setDate(V.getDate()-1);const R=oe(V,"yyyy-MM-dd");if(h){await ma(z.id,{...z,endDate:R});const q=new Date(Ms(B));q.setDate(q.getDate()+1);const K=oe(q,"yyyy-MM-dd");await Ho({userId:z.userId,date:K,endDate:O,type:z.type,comment:z.comment})}else{await ts({entity:"status",action:"update",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:z,after:{...z,endDate:R},comment:z.comment});const q=new Date(Ms(B));q.setDate(q.getDate()+1);const K=oe(q,"yyyy-MM-dd");await ts({entity:"status",action:"create",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:null,after:{id:"",userId:z.userId,date:K,endDate:O,type:z.type,comment:z.comment},comment:z.comment})}j()}return}}h?confirm("Удалить статус?")&&(await Qi(z.id),await new Promise(G=>setTimeout(G,100)),await j()):confirm("Отправить на согласование удаление статуса?")&&(await ts({entity:"status",action:"delete",authorId:(d==null?void 0:d.id)||z.userId,targetUserId:z.userId,before:z,after:null,comment:z.comment}),await j())},k=z=>{const B=Vr(),G=new Date(B);G.setHours(0,0,0,0);const O=new Date(z.date);if(O.setHours(0,0,0,0),O>G)return!0;if(O.getTime()===G.getTime()){const K=Vr(),J=K.getHours()*60+K.getMinutes();return z.slots.some(ce=>{if(ce.endDate){const ge=new Date(ce.endDate);if(ge.setHours(0,0,0,0),new Date(G).setHours(23,59,59),ge>G)return!0;if(ge.getTime()===G.getTime()){const[W,ne]=ce.end.split(":").map(Number);return W*60+ne>J}return!1}const[he,te]=ce.end.split(":").map(Number);return he*60+te>J})}const V=Vr(),R=V.getHours()*60+V.getMinutes();return z.slots.some(K=>{if(K.endDate){const J=new Date(K.endDate);if(J.setHours(0,0,0,0),J>G)return!0;if(J.getTime()===G.getTime()){const[ce,he]=K.end.split(":").map(Number);return ce*60+he>R}return!1}return!1})},H=z=>{let B=g.filter(G=>G.date===z);return t!=="all"&&(B=B.filter(G=>{const O=k(G);return t==="upcoming"?O:t==="completed"?!O:!0})),B},S=z=>v.filter(B=>B.endDate?B.date<=z&&B.endDate>=z:B.date===z),F=z=>{const B=new Date(I);z==="prev"?B.setDate(B.getDate()-7):B.setDate(B.getDate()+7),C(B);const G=eo(B,{weekStartsOn:1});l==null||l(null,oe(G,"yyyy-MM-dd"))},Z=z=>{se(B=>({...B,[z]:!B[z]}))};if(T)return e.jsx("div",{className:`rounded-lg p-8 text-center ${c==="dark"?"bg-[#1a1a1a]":"bg-white"} `,children:e.jsx("p",{className:c==="dark"?"text-gray-400":"text-gray-600",children:"Загрузка..."})});const ie=c==="dark"?"text-white":"text-gray-900",P={dayoff:{label:"Выходной",tone:"bg-green-500/10 text-green-500 border border-green-500/20"},sick:{label:"Больничный",tone:"bg-purple-500/10 text-purple-500 border border-purple-500/20"},vacation:{label:"Отпуск",tone:"bg-blue-500/10 text-blue-500 border border-blue-500/20"},absence:{label:"Отсутствие",tone:"bg-orange-500/10 text-orange-500 border border-orange-500/20"},truancy:{label:"Прогул",tone:"bg-red-500/10 text-red-500 border border-red-500/20"},internship:{label:"Стажировка",tone:"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20"},working:{label:"Рабочий",tone:"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20"},weekend:{label:"Выходной",tone:"bg-green-500/10 text-green-500 border border-green-500/20"}},U={memecoins:{bg:"bg-emerald-100 dark:bg-emerald-900/40",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-300 dark:border-emerald-700"},futures:{bg:"bg-blue-100 dark:bg-blue-900/40",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-700"},nft:{bg:"bg-purple-100 dark:bg-purple-900/40",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-700"},spot:{bg:"bg-amber-100 dark:bg-amber-900/40",text:"text-amber-700 dark:text-amber-300",border:"border-amber-300 dark:border-amber-700"},airdrop:{bg:"bg-cyan-100 dark:bg-cyan-900/40",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-300 dark:border-cyan-700"},polymarket:{bg:"bg-pink-100 dark:bg-pink-900/40",text:"text-pink-700 dark:text-pink-300",border:"border-pink-300 dark:border-pink-700"},staking:{bg:"bg-indigo-100 dark:bg-indigo-900/40",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-300 dark:border-indigo-700"},other:{bg:"bg-gray-100 dark:bg-gray-900/40",text:"text-gray-700 dark:text-gray-300",border:"border-gray-300 dark:border-gray-700"}};return e.jsxs("div",{className:`rounded-2xl ${c==="dark"?"bg-transparent":"bg-white"} overflow-visible`,children:[e.jsxs("div",{className:`p-3 sm: p-4 border-b ${c==="dark"?"border-white/5":"border-gray-100"} flex flex-col gap-2 sm: gap-3 sm: flex-row sm: items-center sm: justify-between`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>F("prev"),className:`p-1.5 sm: p-2 rounded-xl border transition - all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"} `,children:e.jsx(Vp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-500"})}),e.jsxs("button",{onClick:()=>{const B=eo(new Date,{weekStartsOn:1});C(B),l==null||l(null,oe(B,"yyyy-MM-dd"))},className:`flex items-center gap-1.5 px-3 py-2 rounded-xl border text-xs sm: text-sm font-semibold transition - all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"} `,title:"Вернуться к сегодняшнему дню",children:[e.jsx(qp,{className:"w-3.5 h-3.5 text-purple-500"}),e.jsx("span",{className:"hidden sm:inline",children:"Актуальный день"})]}),e.jsx("button",{onClick:()=>F("next"),className:`p-1.5 sm: p-2 rounded-xl border transition - all ${c==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"} `,children:e.jsx(Dn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-500"})})]}),e.jsxs("span",{className:`${ie} font-black text-lg tracking-tight whitespace-nowrap`,children:[oe(b[0],"d MMMM")," — ",oe(b[6],"d MMMM yyyy")]}),e.jsxs("button",{onClick:()=>F("next"),className:`px-4 py-2 text-sm font-bold rounded-xl transition - all flex items-center gap-2 hover: scale-105 active: scale-95 ${c==="dark"?"bg-[#151a21] text-gray-300 hover:text-white hover:bg-[#1f2937]":"bg-gray-50 text-gray-600 hover:bg-gray-100"} `,children:[e.jsx("span",{children:"След. неделя"}),e.jsx(st,{className:"w-4 h-4 -rotate-90"})]})]}),e.jsx("div",{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:b.map(z=>{const B=oe(z,"yyyy-MM-dd"),G=H(B),O=S(B),V=wp(z,w),R="relative rounded-xl p-4 sm:p-5 border transition-all duration-300",q=c==="dark"?"bg-[#0b1015] border-white/5 shadow-md":"bg-gray-50 border-gray-200 shadow-sm",K=c==="dark"?"border-emerald-500/50 bg-emerald-500/5 ring-1 ring-emerald-500/20":"border-emerald-300 bg-emerald-50 ring-2 ring-emerald-200/70";return e.jsxs("div",{className:`${R} ${q} ${V?K:""} `,children:[V&&e.jsxs("div",{className:"absolute top-3 right-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500 text-white text-xs font-semibold shadow-lg ring-2 ring-white/50 dark:ring-emerald-200/30",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-white animate-ping"}),e.jsx("span",{className:"relative",children:"Сегодня"})]}),e.jsx("h3",{className:`text-lg font-semibold mb-3 ${ie} `,children:oe(z,"dd.MM.yyyy")}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[O.map(J=>{var te,ae;const{displayName:ce,avatar:he}=N(J.userId);return e.jsxs("div",{className:`relative flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 rounded-2xl border-2 transition-all duration-300 hover:shadow-xl backdrop-blur text-center sm:text-left ring-1 ring-inset ring-black/5 dark:ring-white/5 ${((te=P[J.type])==null?void 0:te.tone)||""}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-center sm:justify-start w-full",children:[he&&e.jsx("img",{src:he,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover mr-2"}),e.jsx("span",{className:"font-semibold text-base sm:text-lg",children:ce}),e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/70 dark:bg-white/10 text-xs sm:text-sm font-semibold",children:[((ae=P[J.type])==null?void 0:ae.label)||J.type,J.comment&&e.jsxs("div",{className:"relative group/statuscomm ml-1",children:[e.jsx(ls,{className:"w-3.5 h-3.5 opacity-60 hover:opacity-100 cursor-help"}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg max-w-xs whitespace-normal break-words opacity-0 invisible group-hover/statuscomm:opacity-100 group-hover/statuscomm:visible transition-all z-[100] shadow-xl border border-white/10",children:[J.comment,e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full border-4 border-transparent border-t-gray-900"})]})]})]})]}),e.jsx("div",{className:"flex gap-2 justify-center sm:justify-end w-full",children:h||(d==null?void 0:d.id)===J.userId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(J),className:`p-1 rounded transition-colors ${c==="dark"?"bg-white/10 hover:bg-white/20 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-100"}`,title:"Редактировать (только для админа)",children:e.jsx(rs,{className:"w-4 h-4 text-current"})}),e.jsx("button",{onClick:()=>_(J,B),className:`p-1 rounded transition-colors ${c==="dark"?"bg-white/10 hover:bg-white/20 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-100"}`,title:"Удалить (только для админа)",children:e.jsx(Lt,{className:"w-4 h-4 text-current"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{disabled:!0,className:`p-1 cursor-not-allowed rounded ${c==="dark"?"bg-white/5 text-white/60":"bg-gray-100 text-gray-400 border border-gray-200"}`,title:"Вы можете редактировать только свои статусы",children:e.jsx(rs,{className:"w-4 h-4 text-current opacity-60"})}),e.jsx("button",{disabled:!0,className:`p-1 cursor-not-allowed rounded ${c==="dark"?"bg-white/5 text-white/60":"bg-gray-100 text-gray-400 border border-gray-200"}`,title:"Вы можете удалять только свои статусы",children:e.jsx(Lt,{className:"w-4 h-4 text-current opacity-60"})})]})})]},J.id)}),G.map(J=>{const{displayName:ce,avatar:he}=N(J.userId),te=k(J),ae=te?"bg-gradient-to-r from-emerald-500 to-teal-600 border-emerald-300/40":"bg-gradient-to-r from-slate-500 to-slate-700 border-slate-300/40",ge=te?Ss:gs;return e.jsxs("div",{className:`group relative space-y-2 sm:space-y-3 p-3 sm:p-4 ${ae} rounded-lg sm:rounded-xl shadow-xl border-2 transition-all duration-300 hover:shadow-2xl active:scale-[0.98] sm:hover:scale-[1.03] mb-2 sm:mb-3 hover:z-50 ${te?"hover:border-emerald-200/80 ring-2 ring-emerald-200/40 hover:ring-4 hover:ring-emerald-200/60":"hover:border-slate-200/80 ring-2 ring-slate-200/40 hover:ring-4 hover:ring-slate-200/60"}`,children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start border-b border-white/20 pb-2 sm:pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[he&&e.jsx("img",{src:he,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover"}),e.jsx("span",{className:"text-white font-bold text-sm sm:text-base group-hover:scale-105 transition-transform duration-300 truncate text-center sm:text-left w-full sm:w-auto",children:ce})]}),e.jsx("div",{className:"flex gap-2",children:h||(d==null?void 0:d.id)===J.userId?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(J),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:e.jsx(rs,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:()=>$(J),className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:e.jsx(Lt,{className:"w-4 h-4 text-white"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"Вы можете редактировать только свои слоты",children:e.jsx(rs,{className:"w-4 h-4 text-white/50"})}),e.jsx("button",{disabled:!0,className:"p-1.5 bg-white/10 cursor-not-allowed rounded-lg",title:"Вы можете удалять только свои слоты",children:e.jsx(Lt,{className:"w-4 h-4 text-white/50"})})]})})]}),e.jsx("div",{className:"space-y-2",children:J.slots.map((le,W)=>{var ne,fe,We,Se;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("div",{className:`bg-white/25 backdrop-blur-md rounded-md sm: rounded-lg px-2 sm: px-3 py-1.5 sm: py-2 border-2 transition - all duration-300 hover: scale-105 hover: shadow-xl ${te?"border-white/40 ring-2 ring-white/20 hover:border-white/60 hover:ring-4 hover:ring-white/40":"border-white/30 ring-2 ring-white/10 hover:border-white/50 hover:ring-4 hover:ring-white/30"} `,children:e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsx(ge,{className:`w-3.5 h-3.5 sm: w-4 sm: h-4 text-white flex-shrink - 0 ${te?"animate-pulse":""} `}),e.jsxs("span",{className:"text-white font-bold text-xs sm:text-sm whitespace-nowrap",children:[le.start," - ",le.end]}),le.endDate&&e.jsxs("span",{className:"text-white/80 font-medium text-[10px] sm:text-xs whitespace-nowrap",children:["(до ",oe(new Date(le.endDate),"dd.MM"),")"]}),J.category&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full border font-medium whitespace-nowrap ${((ne=U[J.category])==null?void 0:ne.bg)||"bg-white/20"} ${((fe=U[J.category])==null?void 0:fe.text)||"text-white"} ${((We=U[J.category])==null?void 0:We.border)||"border-white/30"} `,children:((Se=_s[J.category])==null?void 0:Se.label)||J.category}),J.comment&&e.jsxs("div",{className:"relative group",children:[e.jsx(ls,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white/60 hover:text-white cursor-help flex-shrink-0"}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full border-4 border-transparent border-t-gray-900"})]})]})}),le.breaks&&le.breaks.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:()=>Z(J.id),className:`p-1 rounded-md transition - all duration-200 hover: scale-110 ${M[J.id]?"text-white hover:text-white/80":"text-white/70 hover:text-white"} `,title:M[J.id]?"Скрыть перерывы":"Показать перерывы",children:M[J.id]?e.jsx(Xt,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"})})}),le.breaks&&le.breaks.length>0&&M[J.id]&&e.jsxs("div",{className:"space-y-1 w-full",children:[e.jsx("div",{className:`text-[10px] ${c==="dark"?"text-gray-300":"text-gray-700"} font-medium text-center sm:text-left`,children:"Перерывы:"}),le.breaks.map((ke,$e)=>e.jsx("div",{className:`${c==="dark"?"bg-gray-700/95":"bg-white"} ${c==="dark"?"text-gray-200":"text-gray-900"} border-2 ${c==="dark"?"border-orange-500/60":"border-orange-300"} rounded-md sm:rounded-lg px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs font-semibold shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl ${c==="dark"?"hover:border-orange-400/80 hover:shadow-orange-500/30 ring-2 ring-orange-500/20 hover:ring-4 hover:ring-orange-400/40":"hover:border-orange-400 hover:shadow-orange-400/30 ring-2 ring-orange-300/20 hover:ring-4 hover:ring-orange-300/40"} w-full`,children:e.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 justify-center flex-wrap w-full",children:[e.jsx("span",{className:`w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full ${c==="dark"?"bg-orange-400":"bg-orange-500"} animate-pulse flex-shrink-0`}),e.jsxs("span",{className:"whitespace-nowrap",children:[ke.start," - ",ke.end]})]})},$e))]})]},W)})})]},J.id)}),G.length===0&&O.length===0&&B===oe(w,"yyyy-MM-dd")&&e.jsx("div",{className:`rounded-lg px-3 py-2 text-xs font-semibold ring-1 ring-inset ring-black/5 dark:ring-white/10 ${P.absence.tone}`,children:"Отсутствие"}),G.length===0&&O.length===0&&B!==oe(w,"yyyy-MM-dd")&&e.jsx("p",{className:`text-sm ${c==="dark"?"text-gray-400":"text-gray-600"}`,children:"Нет данных"})]})]},B)})})]})},Vh=({selectedUserId:s,onSelect:t})=>{const{theme:r}=pe(),[a,n]=f.useState(!1),[i,l]=f.useState(""),[c,d]=f.useState([]),h=f.useRef(null),u=Os.useMemo(()=>{const v=new Map;return Fe.forEach(E=>{v.set(E.id,E)}),c.forEach(E=>{v.set(E.id,E)}),Array.from(v.values())},[c]),m=u.find(v=>v.id===s),g=Uo(s||"");f.useEffect(()=>{(async()=>{try{const E=await qn();d(E)}catch(E){console.error("Error loading users for selector:",E)}})()},[]),f.useEffect(()=>{const v=E=>{h.current&&!h.current.contains(E.target)&&n(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const y=u.filter(v=>{const E=v.name.toLowerCase(),I=i.toLowerCase();return E.includes(I)});return e.jsxs("div",{className:"relative w-full",ref:h,children:[e.jsxs("button",{onClick:()=>n(!a),className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-xl border transition-all ${r==="dark"?"bg-[#151a21] border-white/5 text-gray-300 hover:border-emerald-500/30":"bg-gray-50 border-gray-200 text-gray-700 hover:border-emerald-500"}`,children:[e.jsx("div",{className:"flex items-center gap-2.5 overflow-hidden",children:m?e.jsxs(e.Fragment,{children:[e.jsx(rr,{user:m,size:"sm",className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-bold truncate",children:g||m.name})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center border border-dashed border-gray-500 flex-shrink-0",children:e.jsx(dr,{size:12,className:"text-gray-500"})}),e.jsx("span",{className:"text-sm font-semibold text-gray-500",children:"Трейдеры"})]})}),e.jsx(st,{size:16,className:`text-gray-500 transition-transform ${a?"rotate-180":""}`})]}),a&&e.jsxs("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[240px] rounded-2xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 ${r==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"p-3 border-b border-white/5",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Поиск участника...",value:i,onChange:v=>l(v.target.value),className:`w-full pl-9 pr-8 py-2 rounded-lg text-xs font-medium outline-none transition-all ${r==="dark"?"bg-black/20 text-gray-300 focus:bg-black/40":"bg-gray-100 text-gray-700 focus:bg-gray-200"}`,autoFocus:!0}),i&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:text-rose-500",children:e.jsx(it,{size:12})})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1.5 custom-scrollbar",children:[e.jsxs("button",{onClick:()=>{t(null),n(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all text-left ${s?r==="dark"?"hover:bg-white/5 text-gray-400":"hover:bg-gray-50 text-gray-600":r==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-emerald-50 text-emerald-600"}`,children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center border border-dashed border-gray-500 text-[10px]",children:e.jsx(dr,{size:12})}),e.jsx("span",{className:"text-xs font-bold",children:"Трейдеры"})]}),y.map(v=>e.jsx(V_,{member:v,isSelected:s===v.id,onSelect:E=>{t(E),n(!1)},theme:r},v.id)),y.length===0&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:"Никого не нашли :("})})]})]})]})},V_=({member:s,isSelected:t,onSelect:r,theme:a})=>{const n=Uo(s.id);return e.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all text-left group ${t?a==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-emerald-50 text-emerald-600":a==="dark"?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx("div",{className:"relative",children:e.jsx(rr,{user:s,size:"sm",className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-bold truncate",children:n||s.name})]})},F_=({selectedCategory:s,onSelect:t,error:r})=>{const{theme:a}=pe(),[n,i]=f.useState(!1),[l,c]=f.useState(""),d=f.useRef(null);f.useEffect(()=>{const y=v=>{d.current&&!d.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const u=Object.keys(_s).filter(y=>{const E=_s[y].label.toLowerCase(),I=l.toLowerCase();return E.includes(I)}),m=s?_s[s]:null,g=y=>{const v={emerald:"text-emerald-500 bg-emerald-500/10 border-emerald-500/20",blue:"text-blue-500 bg-blue-500/10 border-blue-500/20",purple:"text-purple-500 bg-purple-500/10 border-purple-500/20",amber:"text-amber-500 bg-amber-500/10 border-amber-500/20",cyan:"text-cyan-500 bg-cyan-500/10 border-cyan-500/20",pink:"text-pink-500 bg-pink-500/10 border-pink-500/20",indigo:"text-indigo-500 bg-indigo-500/10 border-indigo-500/20"},E=_s[y];return v[E.accent]||"text-gray-500 bg-gray-500/10"};return e.jsxs("div",{className:"relative w-full",ref:d,children:[e.jsxs("button",{type:"button",onClick:()=>i(!n),className:`w-full flex items-center justify-between gap-3 px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg border transition-all ${r?"border-red-500 ring-1 ring-red-500":a==="dark"?"bg-gray-700 border-gray-800 text-white hover:border-gray-600":"bg-white border-gray-300 text-gray-900 hover:border-gray-400"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,children:[e.jsx("div",{className:"flex items-center gap-2.5 overflow-hidden",children:s&&m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-5 h-5 rounded-md flex items-center justify-center border text-[10px] flex-shrink-0 ${g(s)}`,children:m.label[0]}),e.jsx("span",{className:"text-sm font-medium truncate",children:m.label})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-5 h-5 rounded-md flex items-center justify-center border border-dashed flex-shrink-0 ${a==="dark"?"border-gray-600":"border-gray-300"}`,children:e.jsx(Oh,{size:12,className:a==="dark"?"text-gray-400":"text-gray-500"})}),e.jsx("span",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:"Выберите сферу..."})]})}),e.jsx(st,{size:16,className:`text-gray-500 transition-transform ${n?"rotate-180":""}`})]}),n&&e.jsxs("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[240px] rounded-xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 ${a==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"p-2 border-b border-white/5",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Поиск...",value:l,onChange:y=>c(y.target.value),className:`w-full pl-9 pr-8 py-2 rounded-lg text-xs font-medium outline-none transition-all ${a==="dark"?"bg-black/20 text-gray-300 focus:bg-black/40":"bg-gray-100 text-gray-700 focus:bg-gray-200"}`,autoFocus:!0})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1.5 custom-scrollbar space-y-1",children:[e.jsxs("button",{type:"button",onClick:()=>{t(""),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all text-left ${s?a==="dark"?"hover:bg-white/5 text-gray-400":"hover:bg-gray-50 text-gray-600":a==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("span",{className:"text-xs font-medium",children:"Не выбрано"}),!s&&e.jsx(xr,{size:14,className:"ml-auto"})]}),u.map(y=>{const v=_s[y],E=s===y;return e.jsxs("button",{type:"button",onClick:()=>{t(y),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all text-left group ${E?a==="dark"?"bg-emerald-500/10":"bg-emerald-50":a==="dark"?"hover:bg-white/5":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center border text-xs font-bold transition-transform group-hover:scale-105 ${g(y)}`,children:v.label[0]}),e.jsx("div",{className:"flex flex-col min-w-0 flex-1",children:e.jsx("span",{className:`text-sm font-semibold truncate ${E?a==="dark"?"text-emerald-400":"text-emerald-700":a==="dark"?"text-gray-200":"text-gray-700"}`,children:v.label})}),E&&e.jsx(xr,{size:14,className:a==="dark"?"text-emerald-400":"text-emerald-600"})]},y)}),u.length===0&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ничего не найдено"})})]})]})]})},U_=({slot:s,onClose:t,onSave:r})=>{var cs,Jt;const{user:a}=Xe(),{theme:n}=pe(),{isAdmin:i}=kt(),l=n==="dark"?"text-white":"text-gray-900",c=(s==null?void 0:s.date)||oe(new Date,"yyyy-MM-dd"),[d,h]=f.useState(c),[u,m]=f.useState(s!=null&&s.userId?[s.userId]:[]),[g,y]=f.useState(((cs=s==null?void 0:s.slots)==null?void 0:cs.map(re=>{const be=re;return be.break&&!be.breaks?{...re,breaks:[be.break]}:re}))||[]),[v,E]=f.useState(""),[I,C]=f.useState(""),[T,D]=f.useState(!1),[M,se]=f.useState(""),[L,N]=f.useState(""),[b,w]=f.useState(null),[j,$]=f.useState(null),[_,k]=f.useState(null),[H,S]=f.useState(null),[F,Z]=f.useState((s==null?void 0:s.comment)||""),[ie,P]=f.useState(!1),[U,z]=f.useState([]),[B,G]=f.useState(!1),[O,V]=f.useState([]),[R,q]=f.useState("single"),[K,J]=f.useState(c),[ce,he]=f.useState(c),[te,ae]=f.useState(c),[ge,le]=f.useState([]),[W,ne]=f.useState(""),[fe,We]=f.useState(!1),[Se,ke]=f.useState((s==null?void 0:s.category)||"");Sr();const $e=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],ye=i&&!s;f.useEffect(()=>{console.log("SlotForm mounted, user:",a==null?void 0:a.name,"slots count:",g.length)},[]),f.useEffect(()=>{if(ie&&d){const re=new Date(d),be=re.getDay()===0?6:re.getDay()-1;z([be])}},[ie,d]),f.useEffect(()=>{B||V([])},[B]),f.useEffect(()=>{R!=="single"&&(P(!1),z([]),G(!1),V([]))},[R]);const Ce=()=>{var et;if(!v||!I){ne("Заполните время начала и окончания");return}const re=Us(v)>=Us(I),be=T||re;if(re&&!T){ne('Время окончания должно быть позже времени начала. Включите "Переходит через полночь" для слотов, переходящих на следующий день.');return}let Te;if(be&&d){const nt=new Date(d);nt.setDate(nt.getDate()+1),Te=oe(nt,"yyyy-MM-dd")}const Me=b!==null?((et=g[b])==null?void 0:et.breaks)||[]:[],xt={start:v,end:I,...Te&&{endDate:Te},breaks:Me};if(b!==null){const nt=[...g];nt[b]=xt,y(nt)}else y([...g,xt]);E(""),C(""),D(!1),se(""),N(""),w(null),$(null),ne("")},Ge=re=>{const be=g[re];if(!be)return;const Te=!!be.endDate||Us(be.end)<=Us(be.start);E(be.start),C(be.end),D(Te),w(re),$(null),k(null),S(null),se(""),N(""),ne("")},ot=()=>{w(null),E(""),C(""),D(!1),ne("")},ue=re=>{if(!M||!L){ne("Заполните время начала и окончания перерыва");return}const be=g[re];if(!be)return;if(M>=L){ne("Время окончания перерыва должно быть позже времени начала");return}const Te=Us(M),Me=Us(L),xt=Us(be.start),et=Us(be.end),nt=be.endDate||et<=xt;let Ke=!1;if(nt){const St=Te>=xt&&Te<1440&&Me>Te&&Me<=1440&&Me>Te,Wt=Te>=0&&Te<=et&&Me>Te&&Me<=et,ds=Te>=xt&&Te<1440&&Me>0&&Me<=et&&Te>Me;Ke=St||Wt||ds}else Ke=Te>=xt&&Me<=et&&Me>Te;if(!Ke){ne(`Перерыв должен быть в пределах времени слота (${be.start} - ${be.end})`);return}const Ye=be.breaks||[];for(let Zt=0;Zt<Ye.length;Zt++){if(_===re&&H===Zt)continue;const St=Ye[Zt];if(M>=St.start&&M<St.end||L>St.start&&L<=St.end||M<=St.start&&L>=St.end){ne("Перерывы не должны пересекаться");return}}let pt;_===re&&H!==null?(pt=[...Ye],pt[H]={start:M,end:L},pt.sort((Zt,St)=>Zt.start.localeCompare(St.start))):pt=[...Ye,{start:M,end:L}].sort((Zt,St)=>Zt.start.localeCompare(St.start));const Ht=[...g];Ht[re]={...be,breaks:pt},y(Ht),se(""),N(""),$(null),k(null),S(null),ne("")},Y=(re,be)=>{const Te=g[re];if(!Te||!Te.breaks||!Te.breaks[be])return;const Me=Te.breaks[be];k(re),S(be),$(re),se(Me.start),N(Me.end),ne("")},we=()=>{se(""),N(""),$(null),k(null),S(null),ne("")},Oe=(re,be)=>{const Te=g[re];if(!Te||!Te.breaks)return;const Me=Te.breaks.filter((et,nt)=>nt!==be),xt=[...g];xt[re]={...Te,breaks:Me.length>0?Me:void 0},y(xt)},Ae=re=>{y(g.filter((be,Te)=>Te!==re)),b===re&&ot()},qe=re=>{U.includes(re)?z(U.filter(be=>be!==re)):z([...U,re])},ut=re=>{O.includes(re)?V(O.filter(be=>be!==re)):V([...O,re])},_t=re=>{m(be=>be.includes(re)?be.filter(Te=>Te!==re):[...be,re])},at=()=>{u.length===Fe.length?m([]):m(Fe.map(re=>re.id))},de=()=>{if(!te)return;const re=Np([...ge,te]);le(re),ae("")},Ee=re=>{le(be=>be.filter(Te=>Te!==re))},De=()=>{if(ye){if(R==="range")return ro(K,ce);if(R==="multiple")return ge}if(R==="single"){if(ie&&U.length>0){const re=[],be=new Date(d),Te=new Date(be.getFullYear(),be.getMonth()+1,0),Me=U[0],xt=new Date(be);for(;xt<=Te;)(xt.getDay()===0?6:xt.getDay()-1)===Me&&re.push(oe(xt,"yyyy-MM-dd")),xt.setDate(xt.getDate()+1);return re}if(B&&O.length>0){const re=[],be=new Date(d),Te=be.getDay()===0?6:be.getDay()-1;be.setDate(be.getDate()-Te);for(let Me=0;Me<7;Me++){const xt=new Date(be);xt.setDate(be.getDate()+Me);const et=xt.getDay()===0?6:xt.getDay()-1;O.includes(et)&&re.push(oe(xt,"yyyy-MM-dd"))}return re}return[d]}return R==="range"?ro(K,ce):ge},mt=()=>s?[s.userId]:ye?u:i&&!a?u.length>0?u:[]:a!=null&&a.id?[a.id]:[],vt=re=>Yt(re),Re=async(re,be,Te)=>{if(Te){const et=await Rp(Te,!0);for(const nt of et){const Ke=await vr(nt.restrictedUserId,re);for(const Ye of be){for(const pt of Ke)if(bl(Ye,pt.slots[0]))return`Ваше время пересекается со слотом ${vt(nt.restrictedUserId)} (${pt.slots[0].start}-${pt.slots[0].end}). ${nt.reason||"Выберите другое время."}`;if(Ye.endDate){const pt=await vr(nt.restrictedUserId,Ye.endDate);for(const Ht of pt)if(bl(Ye,Ht.slots[0]))return`Ваше время пересекается со слотом ${vt(nt.restrictedUserId)} (${Ht.slots[0].start}-${Ht.slots[0].end}). ${nt.reason||"Выберите другое время."}`}}}}const xt=(await vr(void 0,re)).filter(et=>et.id!==(s==null?void 0:s.id));for(const et of be){for(const nt of xt)if(bl(et,nt.slots[0])&&nt.participants.length>=3)return`Слот ${et.start}-${et.end} уже занят максимальным количеством участников (3)`;if(et.endDate){const Ke=(await vr(void 0,et.endDate)).filter(Ye=>Ye.id!==(s==null?void 0:s.id));for(const Ye of Ke)if(bl(et,Ye.slots[0])&&Ye.participants.length>=3)return`Слот ${et.start}-${et.end} (до ${et.endDate}) уже занят максимальным количеством участников (3)`}}return null},gt=async()=>{if(console.log("handleSave called"),!i&&!a){console.log("No user found"),ne("Пользователь не найден");return}if(g.length===0){ne("Добавьте хотя бы один временной интервал");return}if(s&&!i&&a&&s.userId!==a.id){ne("Вы можете редактировать только свои слоты"),We(!1);return}const re=mt();if(re.length===0){ne("Выберите хотя бы одного участника");return}const be=De();if(be.length===0){ne("Выберите даты");return}if(!s&&!Se){ne("Выберите сферу деятельности");return}const Te=new Date;Te.setHours(0,0,0,0);const Me=oe(Te,"yyyy-MM-dd"),xt=Ke=>Ke<Me,et=(Ke,Ye)=>{const pt=new Date(Ke),Ht=new Date(Ye);return pt.setHours(0,0,0,0),Ht.setHours(0,0,0,0),Math.round((Ht.getTime()-pt.getTime())/(1e3*60*60*24))},nt=async(Ke,Ye,pt=[Ke])=>{const Ht=g.map(Wt=>{const ds=!Wt.endDate&&Us(Wt.end)<=Us(Wt.start),Fs=Wt.endDate?et(d,Wt.endDate):ds?1:0;if(Fs>0){const Cs=new Date(Ye);return Cs.setDate(Cs.getDate()+Fs),{...Wt,endDate:oe(Cs,"yyyy-MM-dd")}}return{...Wt,...Wt.endDate?{endDate:Wt.endDate}:{}}});if(!i){const Wt=Ht.length>0?Ht[0].start:void 0,ds=await ao("slots",Ye,Wt);if(ds.restricted)throw new Error(`[${vt(Ke)} • ${oe(new Date(Ye),"dd.MM.yyyy")}] ${ds.reason}`);for(const Fs of Ht)if(Fs.endDate&&Fs.endDate!==Ye){const Cs=await ao("slots",Fs.endDate);if(Cs.restricted)throw new Error(`[${vt(Ke)} • ${oe(new Date(Fs.endDate),"dd.MM.yyyy")}] ${Cs.reason}`)}}const Zt=await Re(Ye,Ht,Ke);if(Zt)throw new Error(`[${vt(Ke)} • ${oe(new Date(Ye),"dd.MM.yyyy")}] ${Zt}`);const St={id:(s==null?void 0:s.id)||"",userId:Ke,date:Ye,slots:Ht,...F&&{comment:F},participants:pt,...Se?{category:Se}:s!=null&&s.category?{category:s.category}:{}};if(i)if(s){const{id:Wt,...ds}=St;await _p(s.id,ds)}else{const{id:Wt,...ds}=St;await kp(ds)}else await ts({entity:"slot",action:s?"update":"create",authorId:(a==null?void 0:a.id)||Ke,targetUserId:Ke,before:s||null,after:St,comment:F||void 0})};console.log("Starting save process..."),ne(""),We(!0);try{if(s){await nt(s.userId,d,s.participants||[s.userId]),r();return}if(B&&O.length>0){const Ke=De();for(const Ye of Ke)if(!xt(Ye))for(const pt of re)await nt(pt,Ye)}else if(ie&&U.length>0){const Ke=new Date(d),Ye=Ke.getMonth(),pt=Ke.getFullYear(),Ht=new Date(pt,Ye+1,0).getDate();for(let Zt=1;Zt<=Ht;Zt++){const St=new Date(pt,Ye,Zt),Wt=St.getDay()===0?6:St.getDay()-1;if(U.includes(Wt)){const ds=oe(St,"yyyy-MM-dd");if(xt(ds))continue;for(const Fs of re)await nt(Fs,ds)}}}else if(ye&&R!=="single")for(const Ke of be)for(const Ye of re)await nt(Ye,Ke);else for(const Ke of re)await nt(Ke,d);r()}catch(Ke){console.error("Error saving slot:",Ke);const Ye=Ke.message||Ke.code||"Ошибка при сохранении";ne(Ye)}finally{We(!1)}},$t=ye?De():[d],Mt=g.map(re=>`${re.start}–${re.end}${re.endDate?" (+1)":""}`);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-slate-950/75 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 sm:p-6 touch-manipulation overflow-y-auto",children:e.jsx("div",{className:`w-full max-w-5xl rounded-3xl shadow-[0_24px_80px_rgba(0,0,0,0.45)] border ${n==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-gradient-to-br from-white via-slate-50 to-white border-slate-200"} max-h-[90vh] overflow-y-auto`,children:e.jsxs("div",{className:"p-4 sm:p-6 lg:p-7 flex flex-col h-full min-h-0 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-[#4E6E49] tracking-tight",children:e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[#4E6E49]/10 text-[#4E6E49] border border-[#4E6E49]/30",children:s?"Редактирование слота":"Создание слота"})}),e.jsx("h3",{className:`text-2xl sm:text-3xl font-bold ${l}`,children:s?"Редактировать слот":"Добавить слот"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`px-3 py-2 rounded-xl border text-xs sm:text-sm ${n==="dark"?"border-white/10 bg-white/5 text-gray-200":"border-slate-200 bg-slate-50 text-slate-700"}`,children:[s?"Редактирование":"Создание"," · ",g.length||0," интервал(ов)"]}),e.jsx("button",{onClick:t,className:`p-2.5 rounded-full border ${n==="dark"?"border-white/10 text-gray-200 hover:bg-white/5":"border-slate-200 text-slate-600 hover:bg-slate-100"} transition-colors touch-manipulation`,"aria-label":"Закрыть",children:e.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{className:"mt-5 grid lg:grid-cols-[0.9fr_1.6fr] gap-4 lg:gap-6 flex-1 min-h-0",children:[e.jsxs("aside",{className:`rounded-2xl border ${n==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-white"} p-4 sm:p-5 space-y-4 sticky top-0 self-start max-h-full overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Навигация"}),e.jsx("span",{className:"text-[11px] uppercase tracking-wide text-[#4E6E49] font-semibold",children:"4 шага"})]}),e.jsx("div",{className:"space-y-2",children:[{label:"Участники",detail:u.length>0?e.jsx("div",{className:"flex flex-wrap gap-x-1",children:u.map((re,be)=>e.jsxs("span",{children:[e.jsx(hr,{userId:re}),be<u.length-1?",":""]},re))}):"Не выбрано",done:u.length>0||!!s},{label:"Даты",detail:$t.slice(0,2).map(re=>oe(re,"dd.MM")).join(", ")||"Выберите дату",done:$t.length>0},{label:"Время",detail:Mt.slice(0,2).join(" · ")||"Добавьте интервал",done:g.length>0},{label:"Сфера",detail:Se?((Jt=_s[Se])==null?void 0:Jt.label)||Se:"Выберите сферу",done:!!Se},{label:"Комментарий",detail:F?"Заполнен":"Необязателен",done:!!F}].map((re,be)=>e.jsxs("div",{className:`flex items-start gap-3 rounded-xl border px-3 py-3 ${n==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx("span",{className:`mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold ${re.done?"bg-[#4E6E49] text-white":n==="dark"?"bg-slate-800 text-gray-300":"bg-slate-200 text-slate-700"}`,children:be+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:re.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:re.detail})]})]},re.label))})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto overscroll-contain pr-1 pb-6 flex-1 min-h-0",children:[ye&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Участники"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(re=>e.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 ${u.includes(re.id)?"bg-[#4E6E49] border-[#4E6E49] text-white":n==="dark"?"bg-gray-700 border-gray-800 text-gray-200":"bg-gray-100 border-gray-300 text-gray-700"}`,children:[e.jsx("input",{type:"checkbox",checked:u.includes(re.id),onChange:()=>_t(re.id),className:"hidden"}),e.jsx(hr,{userId:re.id})]},re.id))}),e.jsx("button",{type:"button",onClick:at,className:"text-sm text-[#4E6E49] hover:text-[#4E6E49]",children:u.length===Fe.length?"Снять выделение":"Выбрать всех"})]})]}),ye&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Формат выбора дат"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"single",label:"Один день"},{value:"range",label:"Диапазон дат"},{value:"multiple",label:"Конкретные даты"}].map(re=>e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"radio",value:re.value,checked:R===re.value,onChange:be=>q(be.target.value)}),e.jsx("span",{className:n==="dark"?"text-gray-200":"text-gray-700",children:re.label})]},re.value))})]}),(!ye||R==="single")&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Дата"}),e.jsx("input",{type:"date",value:d,onChange:re=>h(re.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),ye&&R==="range"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Начало диапазона"}),e.jsx("input",{type:"date",value:K,onChange:re=>J(re.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Конец диапазона"}),e.jsx("input",{type:"date",value:ce,min:K,onChange:re=>he(re.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]})]}),ye&&R==="multiple"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Выбранные даты"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"date",value:te,onChange:re=>ae(re.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`}),e.jsx("button",{type:"button",onClick:de,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Добавить"})]}),ge.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:ge.map(re=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(re,"dd.MM.yyyy"),e.jsx("button",{type:"button",onClick:()=>Ee(re),className:"text-red-500 hover:text-red-600",children:"x"})]},re))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Пока не выбрано ни одной даты"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Временные слоты"}),e.jsxs("div",{className:"space-y-2 mb-2",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsx("input",{type:"time",value:v,onChange:re=>E(re.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Начало"}),e.jsx("span",{className:"mx-1 sm:mx-2 text-gray-500 text-sm sm:text-base flex items-center",children:"—"}),e.jsx("input",{type:"time",value:I,onChange:re=>C(re.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${n==="dark"?"bg-gray-700 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Окончание"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"crossMidnight",checked:T,onChange:re=>{D(re.target.checked)},className:`w-4 h-4 rounded border-2 ${n==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("label",{htmlFor:"crossMidnight",className:`text-xs sm:text-sm font-medium cursor-pointer ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Переходит через полночь (на следующий день)"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:Ce,className:"w-full px-4 py-2 bg-[#4E6E49] hover:bg-[#4E6E49] text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:b!==null?e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),"Сохранить слот"]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{className:"w-4 h-4"}),"Добавить слот"]})}),b!==null&&e.jsx("button",{onClick:ot,className:`w-full sm:w-auto px-4 py-2 rounded-lg border ${n==="dark"?"border-gray-700 text-gray-200 hover:bg-gray-700":"border-gray-300 text-gray-800 hover:bg-gray-100"}`,children:"Отмена"})]})]}),e.jsx("div",{className:"space-y-3",children:g.map((re,be)=>e.jsxs("div",{className:`flex flex-col gap-2 p-3 rounded-lg ${n==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:l,children:[re.start," - ",re.end]}),re.endDate&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${n==="dark"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-blue-100 text-blue-700 border border-blue-300"}`,children:["до ",oe(new Date(re.endDate),"dd.MM.yyyy")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Ge(be),className:"p-1 text-blue-500 hover:bg-blue-500 hover:text-white rounded transition-colors flex-shrink-0",title:"Редактировать слот",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ae(be),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors flex-shrink-0",title:"Удалить слот",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]}),re.breaks&&re.breaks.length>0&&e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsx("span",{className:`text-xs ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Перерывы:"}),re.breaks.map((Te,Me)=>_===be&&H===Me?null:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:`text-sm ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:[Te.start," - ",Te.end]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Y(be,Me),className:"p-1 text-blue-400 hover:bg-blue-400 hover:text-white rounded transition-colors",title:"Редактировать перерыв",children:e.jsx(rs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Oe(be,Me),className:"p-1 text-red-400 hover:bg-red-400 hover:text-white rounded transition-colors",title:"Удалить перерыв",children:e.jsx(it,{className:"w-3 h-3"})})]})]},Me))]}),e.jsx("div",{className:"ml-4 space-y-2 border-t pt-2 border-gray-500 border-opacity-30",children:j===be?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"time",value:M,onChange:Te=>se(Te.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${n==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Начало"}),e.jsx("input",{type:"time",value:L,onChange:Te=>N(Te.target.value),className:`flex-1 px-3 py-1.5 text-sm rounded-lg border ${n==="dark"?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Конец"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ue(be),className:"flex-1 px-3 py-1.5 text-sm bg-[#4E6E49] hover:bg-[#4E6E49] text-white rounded-lg transition-colors",children:_===be&&H!==null?"Сохранить":"Добавить перерыв"}),e.jsx("button",{onClick:we,className:"px-3 py-1.5 text-sm bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Отмена"})]})]}):e.jsxs("button",{onClick:()=>{$(be),se(""),N(""),k(null),S(null),ne("")},className:"w-full px-3 py-1.5 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center gap-1",children:[e.jsx(os,{className:"w-3 h-3"}),"Добавить перерыв"]})})]},be))}),g.length>0&&e.jsxs("p",{className:`text-sm mt-2 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:["Всего часов: ",zo(g).toFixed(1)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:["Сфера деятельности ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(F_,{selectedCategory:Se,onSelect:re=>{ke(re),ne("")},error:!s&&!Se&&!!W&&W.includes("сферу")})]}),(!ye||R==="single")&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs sm:text-sm font-medium mb-3 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Повторы"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{G(!B),ne("")},className:`text-left rounded-xl border px-4 py-4 transition-all shadow-sm flex items-start gap-3 h-full ${B?"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-100 dark:border-blue-800 ring-2 ring-blue-500/50 shadow-lg":n==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx(Op,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Повтор на неделю"}),e.jsx("p",{className:"text-xs mt-1 opacity-80",children:"Актуальная неделя по дням"}),B&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:$e.map((re,be)=>e.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),ut(be)},className:`px-2 py-1 rounded-lg text-xs transition-colors ${O.includes(be)?"bg-blue-600 text-white":n==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:re},be))})]})]}),e.jsxs("button",{type:"button",onClick:()=>{P(!ie),ne("")},className:`text-left rounded-xl border px-4 py-4 transition-all shadow-sm flex items-start gap-3 h-full ${ie?"bg-purple-100 text-purple-800 border-purple-200 dark:bg-purple-900/30 dark:text-purple-100 dark:border-purple-800 ring-2 ring-purple-500/50 shadow-lg":n==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx(Ss,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm",children:"Повтор по месяцу"}),e.jsx("p",{className:"text-xs mt-1 opacity-80",children:"На месяц вперед по дням"}),ie&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:$e.map((re,be)=>e.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),qe(be)},className:`px-2 py-1 rounded-lg text-xs transition-colors ${U.includes(be)?"bg-purple-600 text-white":n==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:re},be))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${n==="dark"?"text-gray-300":"text-gray-700"}`,children:"Комментарий"}),e.jsx("textarea",{value:F,onChange:re=>Z(re.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${n==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Добавьте комментарий (необязательно)"})]}),W&&e.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:W}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[e.jsxs("button",{onClick:re=>{console.log("Save button clicked!",{loading:fe,slotsCount:g.length,disabled:fe||g.length===0}),re.preventDefault(),gt()},disabled:fe||g.length===0||!s&&!Se,className:"flex-1 px-4 py-2.5 sm:py-2 bg-[#4E6E49] hover:bg-[#4E6E49] disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100 relative overflow-hidden",children:[e.jsx("span",{className:`relative z-10 flex items-center justify-center gap-2 ${fe?"invisible":""}`,children:fe?"":s?"Обновить слот":"Отправить на согласование"}),fe&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Сохранение..."})]})})]}),e.jsx("button",{onClick:t,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${n==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:"Отмена"})]})]})]})]})})})})},B_=({type:s,status:t,onClose:r,onSave:a})=>{const{user:n}=Xe(),{theme:i}=pe(),{isAdmin:l}=kt(),c=i==="dark"?"text-white":"text-gray-900",d=(t==null?void 0:t.date)||oe(new Date,"yyyy-MM-dd"),[h,u]=f.useState(t!=null&&t.userId?[t.userId]:n!=null&&n.id?[n.id]:[]),[m,g]=f.useState(d),[y,v]=f.useState((t==null?void 0:t.endDate)||d),[E,I]=f.useState(!!(t!=null&&t.endDate)),[C,T]=f.useState((t==null?void 0:t.comment)||""),[D,M]=f.useState(s||(t!=null&&t.type&&["dayoff","sick","vacation","absence","truancy","internship"].includes(t.type)?t.type:null)),[se,L]=f.useState(""),[N,b]=f.useState(!1),[w,j]=f.useState("single"),[$,_]=f.useState(d),[k,H]=f.useState(d),[S,F]=f.useState(d),[Z,ie]=f.useState([]),[P,U]=f.useState(!1),[z,B]=f.useState([]),[G,O]=f.useState(!1),[V,R]=f.useState([]),q=l&&!t,K=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"];Sr(),f.useEffect(()=>{E||v(m)},[E,m]),f.useEffect(()=>{q&&w!=="single"&&I(!1)},[q,w]),f.useEffect(()=>{P||B([])},[P]),f.useEffect(()=>{if(G&&m){const Y=new Date(m),we=Y.getDay()===0?6:Y.getDay()-1;R([we])}},[G,m]),f.useEffect(()=>{w!=="single"&&(U(!1),B([]),O(!1),R([]))},[w]);const J=Y=>{u(we=>we.includes(Y)?we.filter(Oe=>Oe!==Y):[...we,Y])},ce=()=>{h.length===Fe.length?u([]):u(Fe.map(Y=>Y.id))},he=()=>{if(!S)return;const Y=Np([...Z,S]);ie(Y),F("")},te=Y=>{ie(we=>we.filter(Oe=>Oe!==Y))},ae=()=>t?[t.userId]:q?h:l&&!n?h.length>0?h:[]:n!=null&&n.id?[n.id]:[],ge=Y=>Yt(Y),le=Y=>{if(q){if(w==="range")return $&&k?Y==="dayoff"?ro($,k).map(Oe=>({date:Oe})):[{date:$,endDate:k}]:[];if(w==="multiple")return Y==="dayoff"?Z.map(Oe=>({date:Oe})):Z.map(Oe=>({date:Oe,endDate:Oe}))}if(w==="single"&&Y==="dayoff"){if(G&&V.length>0){const Oe=[],Ae=new Date(m),qe=new Date(Ae.getFullYear(),Ae.getMonth()+1,0),ut=V[0],_t=new Date(Ae);for(;_t<=qe;)(_t.getDay()===0?6:_t.getDay()-1)===ut&&Oe.push(oe(_t,"yyyy-MM-dd")),_t.setDate(_t.getDate()+1);return Oe.map(at=>({date:at}))}if(P&&z.length>0){const Oe=[],Ae=new Date(m),qe=Ae.getDay()===0?6:Ae.getDay()-1;Ae.setDate(Ae.getDate()-qe);for(let ut=0;ut<7;ut++){const _t=new Date(Ae);_t.setDate(Ae.getDate()+ut);const at=_t.getDay()===0?6:_t.getDay()-1;z.includes(at)&&Oe.push(oe(_t,"yyyy-MM-dd"))}return Oe.map(ut=>({date:ut}))}}if(Y==="dayoff"){if(w==="range")return ro($,k).map(Oe=>({date:Oe}));if(w==="multiple")return Z.map(Oe=>({date:Oe}))}if(w==="range"&&$&&k)return[{date:$,endDate:k}];if(w==="multiple")return Z.map(Oe=>({date:Oe,endDate:Oe}));const we={date:m};return Y!=="dayoff"&&(E||t!=null&&t.endDate)&&(we.endDate=y),[we]},W=async(Y,we,Oe,Ae)=>{if(l)return null;if(!n)return"Пользователь не найден";const qe=new Date,ut=new Date(we),_t=new Date(Oe||we);if(Ae==="dayoff"&&wp(ut,qe))return"Нельзя установить выходной на сегодня. Выберите смену или возьмите больничный.";if(Ae==="sick"){const at=new Date;at.setHours(0,0,0,0);const de=new Date(at);de.setDate(de.getDate()+2);const Ee=new Date(we);if(Ee.setHours(0,0,0,0),Ee<at||Ee>de)return"Больничный можно взять только на актуальную дату и + 2 суток. Нельзя выбрать заранее.";const De=Math.ceil((_t.getTime()-ut.getTime())/(1e3*60*60*24))+1;if(De<1)return"Больничный должен быть минимум на 1 день";if(De>14)return"Больничный может длиться не более 14 календарных дней в месяце";const mt=new Date(ut.getFullYear(),ut.getMonth(),1),vt=new Date(ut.getFullYear(),ut.getMonth()+1,0);if((await Fr(Y)).filter($t=>$t.type==="sick"&&$t.date>=oe(mt,"yyyy-MM-dd")&&$t.date<=oe(vt,"yyyy-MM-dd")).length+De>14)return"Больничный ограничен 14 днями в месяц"}if(Ae==="vacation"){if(Math.ceil((_t.getTime()-ut.getTime())/864e5)+1>14)return"Отпуск не может быть больше 14 дней в месяце";const de=new Date(ut.getFullYear(),0,1),Ee=new Date(ut.getFullYear(),11,31);if((await Fr(Y)).filter(vt=>vt.type==="vacation"&&vt.date>=oe(de,"yyyy-MM-dd")&&vt.date<=oe(Ee,"yyyy-MM-dd")).length>=6)return"Не более 6 отпусков в год"}if(Ae==="dayoff"){const at=new Date(ut);at.setDate(at.getDate()-at.getDay()+1);const de=new Date(at);de.setDate(at.getDate()+6);let De=(await Fr(Y)).filter(mt=>mt.type==="dayoff"&&mt.date>=oe(at,"yyyy-MM-dd")&&mt.date<=oe(de,"yyyy-MM-dd"));if(t&&(De=De.filter(mt=>mt.id!==t.id)),De.length>=4)return"Выходные на неделе ограничены максимум 4 днями"}return null},ne=async()=>{if(console.log("handleSave called (DayStatusForm)"),!l&&!n){console.log("No user found"),L("Пользователь не найден");return}if(!D){L("Выберите тип отсутствия");return}if(t&&!l&&n&&t.userId!==n.id){L("Вы можете редактировать только свои статусы"),b(!1);return}const Y=ae();if(Y.length===0){L("Выберите хотя бы одного участника");return}if(q&&w==="range"){if(!$||!k){L("Укажите даты начала и окончания");return}if(new Date(k)<new Date($)){L("Дата окончания не может быть раньше даты начала");return}}const we=le(D);if(we.length===0){L("Выберите даты");return}const Oe=async(Ae,qe)=>{if(!l){const _t=await ao(D,qe.date);if(_t.restricted)throw new Error(`[${ge(Ae)} • ${oe(new Date(qe.date),"dd.MM.yyyy")}] ${_t.reason}`);const at=await W(Ae,qe.date,qe.endDate,D);if(at)throw new Error(`[${ge(Ae)} • ${oe(qe.date,"dd.MM.yyyy")}] ${at}`)}const ut={id:(t==null?void 0:t.id)||"",userId:Ae,date:qe.date,type:D,...qe.endDate&&{endDate:qe.endDate},...C&&{comment:C}};if(l){const{id:_t,...at}=ut;t?await ma(t.id,at):await Ho(at)}else await ts({entity:"status",action:t?"update":"create",authorId:(n==null?void 0:n.id)||Ae,targetUserId:Ae,before:t||null,after:ut,comment:C||void 0})};console.log("Starting save process..."),L(""),b(!0);try{if(t){const Ae={date:m};D!=="dayoff"&&(E||t.endDate)&&(Ae.endDate=y),await Oe(t.userId,Ae),a();return}for(const Ae of Y)for(const qe of we)await Oe(Ae,qe);a()}catch(Ae){console.error("Error saving day status:",Ae);const qe=Ae.message||Ae.code||"Ошибка при сохранении";L(qe)}finally{b(!1)}},fe={dayoff:"bg-orange-500",sick:"bg-purple-500",vacation:"bg-blue-500",absence:"bg-yellow-500",truancy:"bg-red-500",internship:"bg-green-500"},We=q&&w==="range"?[`${oe($,"dd.MM")}–${oe(k,"dd.MM")}`]:q&&w==="multiple"?Z.map(Y=>oe(Y,"dd.MM")):[oe(m,"dd.MM")],Se=h.map(Y=>ge(Y)).join(", "),ke=[{label:"Тип",detail:D?D==="dayoff"?"Выходной":D==="sick"?"Больничный":D==="vacation"?"Отпуск":D==="absence"?"Отсутствие":D==="truancy"?"Прогул":"Стажировка":"Не выбран",done:!!D,anchor:"#type"},{label:"Members",detail:Se||"Не выбрано",done:h.length>0||!!t,anchor:"#members"},{label:"Даты",detail:We.slice(0,2).join(" · "),done:We.length>0,anchor:"#dates"},{label:"Комментарий",detail:C?"Заполнен":"Необязателен",done:!!C,anchor:"#notes"}],$e=Math.round(ke.filter(Y=>Y.done).length/ke.length*100),ye=[{value:"single",label:"Один день",hint:"Быстрая отметка",icon:"•"},{value:"range",label:D==="dayoff"?"Диапазон (каждый день)":"Диапазон дат",hint:"Поток дней",icon:"⎯⎯"},{value:"multiple",label:"Конкретные даты",hint:"Точечный выбор",icon:"◎"}],Ge=D?`${t?"Редактировать":"Добавить"} ${{dayoff:"выходной",sick:"больничный",vacation:"отпуск",absence:"отсутствие",truancy:"прогул",internship:"стажировка"}[D]}`:"Добавить отсутствие",ot=["truancy","absence","internship"],ue=async()=>{if(t&&confirm("Удалить этот статус?"))try{await Qi(t.id),a()}catch(Y){console.error("Error deleting day status:",Y),L(Y.message||"Ошибка при удалении")}};return e.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 sm:p-6 touch-manipulation overflow-y-auto overscroll-contain modal-scroll",children:e.jsx("div",{className:`w-full max-w-[52rem] rounded-3xl shadow-[0_28px_80px_rgba(0,0,0,0.55)] border ${i==="dark"?"bg-[#0b1222] border-white/10":"bg-white border-slate-200"} max-h-[85dvh] sm:max-h-[calc(100dvh-96px)] overflow-y-auto relative`,children:e.jsxs("div",{className:"relative p-4 sm:p-6 lg:p-7 flex flex-col h-full min-h-0 overflow-y-auto modal-scroll",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:`text-2xl sm:text-3xl font-bold ${c}`,children:Ge}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ke.map((Y,we)=>e.jsxs("a",{href:Y.anchor,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs transition ${Y.done?"bg-[#4E6E49] border-[#4E6E49] text-white shadow-sm":i==="dark"?"border-white/15 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-700 hover:border-slate-300"}`,children:[e.jsx("span",{className:"font-semibold",children:we+1}),e.jsx("span",{className:"whitespace-nowrap",children:Y.label})]},Y.label))}),s==="dayoff"&&e.jsx("div",{className:"flex flex-wrap gap-2 text-xs sm:text-sm",children:["Один выходной","Диапазон дней","Несколько дат"].map(Y=>e.jsx("span",{className:`px-3 py-1.5 rounded-full border ${i==="dark"?"border-white/10 text-gray-200 bg-white/5":"border-slate-200 text-gray-700 bg-slate-50"}`,children:Y},Y))})]}),e.jsx("button",{onClick:r,className:`p-2.5 rounded-full border shadow-sm transition hover:-translate-y-0.5 active:translate-y-0 ${i==="dark"?"border-white/10 text-gray-200 hover:bg-white/5":"border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsx("div",{className:`mt-5 rounded-2xl border ${i==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-white"} p-4 sm:p-5 shadow-inner`,children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-gradient-to-br from-emerald-500/20 to-emerald-400/10 flex items-center justify-center text-emerald-600 dark:text-emerald-300 text-lg font-semibold border border-emerald-500/30",children:"👥"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Members"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 line-clamp-2",children:Se||"Не выбрано"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-gradient-to-br from-blue-500/20 to-indigo-500/10 flex items-center justify-center text-blue-600 dark:text-blue-300 text-lg font-semibold border border-blue-500/30",children:"📅"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Даты"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 line-clamp-2",children:We.length>0?We.join(" · "):"Не выбрано"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-gradient-to-br from-amber-500/20 to-orange-500/10 flex items-center justify-center text-amber-600 dark:text-amber-300 text-lg font-semibold border border-amber-500/30",children:"✏️"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Комментарий"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 line-clamp-2",children:C||"Необязателен"})]})]})]})}),e.jsxs("div",{className:"mt-5 grid lg:grid-cols-[0.9fr_1.4fr] gap-4 lg:gap-6 flex-1 overflow-hidden",children:[e.jsxs("aside",{className:`rounded-2xl border ${i==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-white"} p-4 sm:p-5 space-y-4 sticky top-2 self-start max-h-full overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Навигация"}),e.jsxs("span",{className:"text-[11px] uppercase tracking-wide text-[#4E6E49] font-semibold",children:[ke.length," шага"]})]}),e.jsx("div",{className:"h-1.5 rounded-full bg-slate-200 dark:bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-[#4E6E49] via-emerald-500 to-lime-400 transition-all",style:{width:`${$e}%`}})}),e.jsx("div",{className:"space-y-2",children:ke.map((Y,we)=>e.jsxs("a",{href:Y.anchor,className:`flex items-start gap-3 rounded-xl border px-3 py-3 transition ${i==="dark"?"border-white/10 bg-white/5 hover:border-white/30":"border-slate-200 bg-slate-50 hover:border-slate-300"}`,children:[e.jsx("span",{className:`mt-0.5 inline-flex h-7 w-7 items-center justify-center rounded-full text-xs font-bold ${Y.done?"bg-[#4E6E49] text-white shadow-sm":i==="dark"?"bg-slate-800 text-gray-300":"bg-slate-200 text-slate-700"}`,children:we+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:Y.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:Y.detail||"—"})]}),e.jsx("span",{className:"text-[11px] text-gray-400",children:Y.done?"✓":""})]},Y.label))})]}),e.jsxs("div",{className:"space-y-5 overflow-y-auto overscroll-contain pr-1 pb-6 flex-1 min-h-0",children:[!t&&!s&&e.jsxs("div",{id:"type",className:"scroll-mt-20 space-y-2",children:[e.jsx("p",{className:`text-xs sm:text-sm font-medium ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Тип отсутствия"}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-2",children:[{key:"dayoff",label:"Выходной",icon:"🌙"},{key:"sick",label:"Больничный",icon:"🏥"},{key:"vacation",label:"Отпуск",icon:"✈️"},...l?[{key:"absence",label:"Отсутствие",icon:"🚫"},{key:"truancy",label:"Прогул",icon:"⚠️"},{key:"internship",label:"Стажировка",icon:"🎓"}]:[]].map(Y=>e.jsxs("button",{type:"button",onClick:()=>M(Y.key),className:`px-4 py-3 rounded-xl border text-sm font-semibold transition ${D===Y.key?"border-[#4E6E49] bg-[#4E6E49]/10 text-[#4E6E49] shadow-sm":i==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx("span",{className:"text-lg",children:Y.icon}),e.jsx("span",{className:"block mt-1",children:Y.label})]},Y.key))})]}),q&&e.jsxs("div",{id:"members",className:"scroll-mt-20",children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Members"}),e.jsxs("div",{className:"space-y-3 rounded-2xl border border-dashed border-[#4E6E49]/30 p-3 sm:p-4 bg-[#4E6E49]/5 dark:bg-[#4E6E49]/10",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(Y=>{const we=h.includes(Y.id);return e.jsxs("label",{className:`px-3 py-1.5 rounded-full border cursor-pointer text-sm flex items-center gap-2 transition ${we?"bg-[#4E6E49] border-[#4E6E49] text-white shadow-sm":i==="dark"?"bg-gray-800/60 border-gray-800 text-gray-200 hover:border-gray-600":"bg-gray-100 border-gray-300 text-gray-700 hover:border-gray-400"}`,children:[e.jsx("input",{type:"checkbox",checked:we,onChange:()=>J(Y.id),className:"hidden"}),Yt(Y.id)]},Y.id)})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Быстрый выбор"}),e.jsx("button",{type:"button",onClick:ce,className:"text-sm text-[#4E6E49] hover:text-[#4E6E49] font-semibold",children:h.length===Fe.length?"Снять выделение":"Выбрать всех"})]})]})]}),q&&e.jsxs("div",{id:"dates",className:"scroll-mt-20",children:[e.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Формат выбора дат"}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-2",children:ye.map(Y=>{const we=w===Y.value;return e.jsxs("button",{type:"button",onClick:()=>j(Y.value),className:`w-full text-left px-3 py-3 rounded-xl border transition flex flex-col gap-1 ${we?"border-[#4E6E49] bg-[#4E6E49]/10 text-[#4E6E49] shadow-sm":i==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx("span",{className:"text-lg leading-none",children:Y.icon}),e.jsx("span",{className:"text-sm font-semibold",children:Y.label}),e.jsx("span",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:Y.hint})]},Y.value)})})]}),!q&&s==="dayoff"&&e.jsxs("div",{id:"dates",className:"scroll-mt-20",children:[e.jsx("p",{className:`text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Формат выбора дат"}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-2",children:ye.map(Y=>{const we=w===Y.value;return e.jsxs("button",{type:"button",onClick:()=>j(Y.value),className:`w-full text-left px-3 py-3 rounded-xl border transition flex flex-col gap-1 ${we?"border-[#4E6E49] bg-[#4E6E49]/10 text-[#4E6E49] shadow-sm":i==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx("span",{className:"text-lg leading-none",children:Y.icon}),e.jsx("span",{className:"text-sm font-semibold",children:Y.label}),e.jsx("span",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:Y.hint})]},Y.value)})})]}),(!q||w==="single")&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Дата начала"}),e.jsx("input",{type:"date",value:m,onChange:Y=>g(Y.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),q&&w==="range"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Начало"}),e.jsx("input",{type:"date",value:$,onChange:Y=>_(Y.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Конец"}),e.jsx("input",{type:"date",value:k,min:$,onChange:Y=>H(Y.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]})]}),!q&&s==="dayoff"&&w==="range"&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Начало"}),e.jsx("input",{type:"date",value:$,onChange:Y=>_(Y.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Конец"}),e.jsx("input",{type:"date",value:k,min:$,onChange:Y=>H(Y.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]})]}),q&&w==="multiple"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Выбранные даты"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"date",value:S,onChange:Y=>F(Y.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`}),e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Добавить"})]}),Z.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(Y=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(Y,"dd.MM.yyyy"),e.jsx("button",{type:"button",onClick:()=>te(Y),className:"text-red-500 hover:text-red-600",children:"x"})]},Y))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Пока не выбрано ни одной даты"})]})]}),!q&&s==="dayoff"&&w==="multiple"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Выбранные даты"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"date",value:S,onChange:Y=>F(Y.target.value),className:`flex-1 px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`}),e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Добавить"})]}),Z.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:Z.map(Y=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 text-gray-800 text-sm",children:[oe(Y,"dd.MM.yyyy"),e.jsx("button",{type:"button",onClick:()=>te(Y),className:"text-red-500 hover:text-red-600",children:"x"})]},Y))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Пока не выбрано ни одной даты"})]})]}),w==="single"&&!q&&D==="dayoff"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm sm:text-base font-semibold ${c}`,children:"Повтор на неделю"}),e.jsx("p",{className:`text-xs ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:"Выберите дни текущей недели"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:Y=>U(Y.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Активировать"})]})]}),P&&e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map((Y,we)=>{const Oe=z.includes(we);return e.jsx("button",{type:"button",onClick:()=>B(Ae=>Oe?Ae.filter(qe=>qe!==we):[...Ae,we]),className:`px-3 py-1 rounded-lg border text-sm ${Oe?"border-[#4E6E49] bg-[#4E6E49]/10 text-[#4E6E49]":i==="dark"?"border-white/10 bg-white/5 text-gray-200":"border-gray-200 bg-white text-gray-800"}`,children:Y},Y)})})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm sm:text-base font-semibold ${c}`,children:"Повтор по месяцу"}),e.jsx("p",{className:`text-xs ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:"На тот же день недели до конца месяца"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:Y=>O(Y.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Активировать"})]})]}),G&&e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map((Y,we)=>e.jsx("span",{className:`px-3 py-1 rounded-lg border text-sm ${V.includes(we)?"border-[#4E6E49] bg-[#4E6E49]/10 text-[#4E6E49]":i==="dark"?"border-white/10 bg-white/5 text-gray-200":"border-gray-200 bg-white text-gray-800"}`,children:Y},Y))})]})]}),(D==="sick"||D==="vacation")&&(!q||w==="single")&&e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:Y=>I(Y.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Несколько дней"})]}),E&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Дата окончания"}),e.jsx("input",{type:"date",value:y,onChange:Y=>v(Y.target.value),min:m,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Комментарий"}),e.jsx("textarea",{value:C,onChange:Y=>T(Y.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${i==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Добавьте комментарий (необязательно)"})]}),se&&e.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:se}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[t&&l&&ot.includes(t.type)&&e.jsxs("button",{onClick:ue,className:"px-4 py-2.5 sm:py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Удалить"]}),e.jsx("button",{onClick:ne,disabled:N||!D,className:`flex-1 px-4 py-2.5 sm:py-2 ${D?fe[D]:"bg-gray-400"} hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100`,children:N?"Отправка...":l?"Сохранить":"Отправить на согласование"}),e.jsx("button",{onClick:r,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${i==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:"Отмена"})]})]})]})]})})})},z_=({onClose:s,onSave:t})=>{const{user:r}=Xe(),{theme:a}=pe(),{isAdmin:n}=kt(),i=a==="dark"?"text-white":"text-gray-900",[l,c]=f.useState(n?[]:r!=null&&r.id?[r.id]:[]),[d,h]=f.useState("slots"),[u,m]=f.useState(!1),[g,y]=f.useState(!1),[v,E]=f.useState(!1),[I,C]=f.useState([]),[T,D]=f.useState([]),[M,se]=f.useState(""),[L,N]=f.useState(""),[b,w]=f.useState(""),[j,$]=f.useState(""),[_,k]=f.useState(!1);Sr();const H=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],S=u?I.length>0?I.map(B=>H[B]).join(", "):"Дни недели":g?T[0]?`${oe(T[0],"dd.MM")} +${Math.max(T.length-1,0)}`:"Добавьте даты":v?L&&b?`${oe(L,"dd.MM")}–${oe(b,"dd.MM")}`:"Укажите диапазон":"Выберите режим",F=l.map(B=>Yt(B)).join(", "),Z=B=>{c(G=>G.includes(B)?G.filter(O=>O!==B):[...G,B])},ie=(B,G,O)=>{if(G&&O.some(Boolean)){$("Снимите галочку с другой функции, чтобы активировать эту");return}B(G),G||$("")},P=()=>{if(!M){$("Выберите дату");return}if(T.includes(M)){$("Эта дата уже добавлена");return}D([...T,M].sort()),se(""),$("")},U=B=>D(T.filter(G=>G!==B)),z=async()=>{if(!n&&!r){$("Пользователь не найден");return}const B=n?l:r?[r.id]:[];if(B.length===0){$("Выберите хотя бы одного участника");return}if(!u&&!g&&!v){$("Выберите способ удаления");return}if(u&&I.length===0){$("Выберите день недели");return}if(g&&T.length===0){$("Добавьте хотя бы одну дату");return}if(v){if(!L||!b){$("Укажите начальную и конечную дату диапазона");return}if(L>b){$("Начальная дата должна быть раньше конечной");return}}$(""),k(!0);try{const G=await Promise.all(B.map(le=>vr(le))),O=await Promise.all(B.map(le=>Fr(le))),V=G.flat(),R=O.flat(),q=(le,W)=>!L||!b?!1:!((W||le)<L||le>b),K=(le,W)=>T.length===0?!1:W?T.some(ne=>ne>=le&&ne<=(W||le)):T.includes(le),J=(le,W)=>{if(I.length===0)return!1;const ne=[],fe=new Date(le+"T00:00:00"),We=W?new Date(W+"T00:00:00"):new Date(le+"T00:00:00");let Se=fe;for(;Se<=We;)ne.push(oe(Se,"yyyy-MM-dd")),Se.setDate(Se.getDate()+1);return ne.some(ke=>{const $e=new Date(ke+"T00:00:00"),ye=$e.getDay()===0?6:$e.getDay()-1;return I.includes(ye)})};let ce=[];if(d==="slots"?ce=V.filter(le=>!!(u&&J(le.date)||g&&T.includes(le.date)||v&&q(le.date))).map(le=>le.id):ce=R.filter(le=>le.type!==d?!1:!!(u&&J(le.date,le.endDate)||g&&K(le.date,le.endDate)||v&&q(le.date,le.endDate))).map(le=>le.id),ce.length===0){$("Ничего не найдено под выбранные условия"),k(!1);return}const he=B.length>1?`${B.length} участников`:Yt(B[0])||"участника",te=I.map(le=>H[le]).join(", "),ae=d==="slots"?"слоты":d==="dayoff"?"выходные":d==="sick"?"больничные":d==="vacation"?"отпуска":"прогулы",ge=u?`по дням недели (${te})`:g?`по датам: ${T.map(le=>oe(le,"dd.MM")).join(", ")}`:`по диапазону ${oe(L,"dd.MM")} — ${oe(b,"dd.MM")}`;if(!confirm(`Удалить ${ae} (${ce.length}) ${ge} для ${he}?`)){k(!1);return}if(n){if(d==="slots")for(const le of ce)await qo(le);else for(const le of ce)await Qi(le);await new Promise(le=>setTimeout(le,100))}else if(d==="slots")for(const le of ce){const W=V.find(ne=>ne.id===le);W&&await ts({entity:"slot",action:"delete",authorId:(r==null?void 0:r.id)||"",targetUserId:W.userId,before:W,after:null,comment:`Удаление слота ${oe(W.date,"dd.MM.yyyy")}`})}else for(const le of ce){const W=R.find(ne=>ne.id===le);W&&await ts({entity:"status",action:"delete",authorId:(r==null?void 0:r.id)||"",targetUserId:W.userId,before:W,after:null,comment:`Удаление ${d==="dayoff"?"выходного":d==="sick"?"больничного":d==="vacation"?"отпуска":"прогула"} ${oe(W.date,"dd.MM.yyyy")}`})}t(),s()}catch(G){console.error("Error deleting items:",G),$("Ошибка при удалении")}finally{k(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-slate-950/75 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 sm:p-6 overflow-y-auto overscroll-contain modal-scroll",children:e.jsx("div",{className:`w-full max-w-5xl rounded-3xl shadow-[0_24px_80px_rgba(0,0,0,0.45)] border ${a==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-gradient-to-br from-white via-slate-50 to-white border-slate-200"} max-h-[85dvh] sm:max-h-[calc(100dvh-96px)] overflow-y-auto`,children:e.jsxs("div",{className:"p-5 sm:p-6 lg:p-7 flex flex-col h-full min-h-0 overflow-y-auto modal-scroll",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-[#4E6E49] tracking-tight",children:e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-[#4E6E49]/10 text-[#4E6E49] border border-[#4E6E49]/30",children:"Очистить расписание"})}),e.jsx("h3",{className:`text-2xl sm:text-3xl font-bold ${i}`,children:"Удаление слотов и отсутствий"})]}),e.jsx("button",{onClick:s,className:`p-2.5 rounded-full border ${a==="dark"?"border-white/10 text-gray-200 hover:bg-white/5":"border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-5 grid lg:grid-cols-[0.95fr_1.45fr] gap-4 lg:gap-6 flex-1 overflow-hidden",children:[e.jsxs("aside",{className:`rounded-2xl border ${a==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-white"} p-4 sm:p-5 space-y-4 sticky top-0 self-start max-h-full overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Навигация"}),e.jsx("span",{className:"text-[11px] uppercase tracking-wide text-[#4E6E49] font-semibold",children:"3 шага"})]}),e.jsx("div",{className:"space-y-2",children:[{label:"Участники",detail:F||"Не выбрано",done:l.length>0||!n},{label:"Тип удаления",detail:d==="slots"?"Слоты":d==="dayoff"?"Выходные":d==="sick"?"Больничные":d==="vacation"?"Отпуска":"Прогулы",done:!0},{label:"Режим",detail:S,done:S!=="Выберите режим"}].map((B,G)=>e.jsxs("div",{className:`flex items-start gap-3 rounded-xl border px-3 py-3 ${a==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-slate-50"}`,children:[e.jsx("span",{className:`mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold ${B.done?"bg-[#4E6E49] text-white":a==="dark"?"bg-slate-800 text-gray-300":"bg-slate-200 text-slate-700"}`,children:G+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold",children:B.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:B.detail||"—"})]})]},B.label))}),e.jsxs("div",{className:`rounded-xl border px-3 py-3 space-y-2 ${a==="dark"?"border-emerald-900/50 bg-emerald-900/20":"border-emerald-100 bg-emerald-50"}`,children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-emerald-600 font-semibold",children:"Подсказка"}),e.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-200",children:"Один режим за раз: дни недели, конкретные даты или диапазон."})]})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto overscroll-contain pr-1 pb-6 flex-1 min-h-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-sm font-semibold ${i}`,children:"Что удаляем"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"slots",label:"Слоты"},{key:"dayoff",label:"Выходные"},{key:"sick",label:"Больничные"},{key:"vacation",label:"Отпуска"},...n?[{key:"absence",label:"Прогулы"}]:[]].map(B=>e.jsx("button",{onClick:()=>h(B.key),className:`px-3 py-1.5 rounded-lg border text-sm ${d===B.key?"bg-red-500 text-white border-red-500":a==="dark"?"bg-gray-700 text-gray-200 border-gray-700 hover:bg-gray-600":"bg-gray-100 text-gray-800 border-gray-200 hover:bg-gray-200"}`,children:B.label},B.key))})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-semibold ${i}`,children:"Участники"}),e.jsx("button",{onClick:()=>c(B=>B.length===Fe.length?[]:Fe.map(G=>G.id)),className:"text-xs text-[#4E6E49] font-semibold",children:l.length===Fe.length?"Снять выделение":"Выбрать всех"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fe.map(B=>{const G=l.includes(B.id);return e.jsx("button",{onClick:()=>Z(B.id),className:`px-3 py-1.5 rounded-lg transition-colors text-sm ${G?"bg-red-500 text-white":a==="dark"?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:Yt(B.id)},B.id)})})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:B=>ie(m,B.target.checked,[g,v]),className:"w-4 h-4"}),e.jsx("span",{className:`${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Удалить по дню недели"})]}),u&&e.jsxs("div",{className:"ml-6",children:[e.jsx("p",{className:`text-sm mb-2 ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Выберите дни недели:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:H.map((B,G)=>{const O=I.includes(G);return e.jsx("button",{onClick:()=>C(V=>O?V.filter(R=>R!==G):[...V,G]),className:`px-3 py-1 rounded-lg transition-colors ${O?"bg-red-500 text-white":a==="dark"?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:B},B)})})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:B=>ie(y,B.target.checked,[u,v]),className:"w-4 h-4"}),e.jsx("span",{className:`${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Удалить по конкретным датам"})]}),g&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"date",value:M,onChange:B=>se(B.target.value),className:`flex-1 px-4 py-2 rounded-lg border ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`}),e.jsx("button",{onClick:P,className:"px-4 py-2 bg-[#4E6E49] hover:bg-[#4E6E49] text-white rounded-lg transition-colors",children:"Добавить"})]}),T.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:["Выбранные даты (",T.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(B=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${a==="dark"?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("span",{className:i,children:oe(B,"dd.MM.yyyy")}),e.jsx("button",{onClick:()=>U(B),className:"p-1 text-red-500 hover:bg-red-500 hover:text-white rounded transition-colors",children:e.jsx(it,{className:"w-3 h-3"})})]},B))})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:B=>ie(E,B.target.checked,[u,g]),className:"w-4 h-4"}),e.jsx("span",{className:`${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Удалить по диапазону дат"})]}),v&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:`block text-xs mb-1 ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Начальная дата"}),e.jsx("input",{type:"date",value:L,onChange:B=>N(B.target.value),className:`w-full px-4 py-2 rounded-lg border ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:`block text-xs mb-1 ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Конечная дата"}),e.jsx("input",{type:"date",value:b,onChange:B=>w(B.target.value),min:L,className:`w-full px-4 py-2 rounded-lg border ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500`})]})]}),L&&b&&e.jsxs("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:["Будет удалено: с ",oe(L,"dd.MM.yyyy")," по ",oe(b,"dd.MM.yyyy")]})]}),j&&e.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:j}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:z,disabled:_||!u&&!g&&!v,className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),_?n?"Удаление...":"Отправка на согласование...":n?"Очистить расписание":"Отправить на согласование"]}),e.jsx("button",{onClick:s,className:`px-4 py-2 rounded-lg transition-colors ${a==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:"Отмена"})]})]})]})]})})})},q_=()=>{const{theme:s}=pe(),{viewMode:t,setViewMode:r,selectedWeekStart:a,setSelectedDate:n,setSelectedWeekStart:i}=M_(),[l,c]=f.useState(t||"table"),[d,h]=f.useState(null),[u]=f.useState("all"),[m,g]=f.useState(!1),[y,v]=f.useState(!1),[E,I]=f.useState(!1),[C,T]=f.useState(null),[D,M]=f.useState(null),[se,L]=f.useState(null),[N,b]=f.useState(null),[w,j]=f.useState(0),[$,_]=f.useState({slotsThisWeek:0,activeMembers:0,upcomingSlots:0,completedSlots:0,recommendedWeek:0,recommendedDay:0,mostActive:"",leastActive:[],remainingSlots:0,todaySlots:0}),k=ze("ava_schedule"),H=ze("schedule_stats_view"),S=ze("schedule_add_slot"),F=ze("schedule_status_edit"),Z=ze("schedule_slot_delete"),[ie,P]=f.useState({nextStart:null,activeEnd:null}),[U,z]=f.useState({nextStart:"—",activeRemaining:"—"});f.useEffect(()=>{c(t||"table")},[t]),f.useEffect(()=>{h(a)},[a]),f.useEffect(()=>{R()},[]),f.useEffect(()=>{const W=(We,Se)=>{if(!We)return"—";const ke=We.getTime()-Date.now();if(ke<=0)return Se?"Слот завершён":"Уже начался";const $e=Math.floor(ke/6e4),ye=Math.floor($e/(60*24)),Ce=Math.floor($e%(60*24)/60),Ge=$e%60;return ye>0?`${ye}д ${Ce}ч`:Ce>0?`${Ce}ч ${Ge}м`:`${Math.max(Ge,1)}м`},ne=()=>{z({nextStart:W(ie.nextStart,!1),activeRemaining:W(ie.activeEnd,!0)})};ne();const fe=setInterval(ne,6e4);return()=>clearInterval(fe)},[ie]);const B=W=>{const ne=Vr(),fe=new Date(ne);fe.setHours(0,0,0,0);const We=new Date(W.date);if(We.setHours(0,0,0,0),We>fe)return!0;if(We.getTime()===fe.getTime()){const ye=Vr(),Ce=ye.getHours()*60+ye.getMinutes();return W.slots.some(Ge=>{if(Ge.endDate){const we=new Date(Ge.endDate);if(we.setHours(0,0,0,0),we>fe)return!0;if(we.getTime()===fe.getTime()){const[Oe,Ae]=Ge.end.split(":").map(Number);return Oe*60+Ae>Ce}return!1}const[ot,ue]=Ge.end.split(":").map(Number);return ot*60+ue>Ce})}const Se=Vr(),ke=Se.getHours()*60+Se.getMinutes();return W.slots.some(ye=>{if(ye.endDate){const Ce=new Date(ye.endDate);if(Ce.setHours(0,0,0,0),Ce>fe)return!0;if(Ce.getTime()===fe.getTime()){const[Ge,ot]=ye.end.split(":").map(Number);return Ge*60+ot>ke}return!1}return!1})},G={1:"Dex",2:"Enowk",3:"Xenia",4:"Olenka",5:"Sydney"},O={artyom:"1",adel:"2",kseniya:"3",olga:"4",anastasia:"5"},V=W=>{const ne=Fe.find(fe=>fe.id===W)||Fe.find(fe=>O[W]===fe.id);return G[(ne==null?void 0:ne.id)||W]||(ne==null?void 0:ne.name)||W},R=async()=>{var W,ne;try{const fe=new Date,We=so(fe),Se=oe(We[0],"yyyy-MM-dd"),ke=oe(We[6],"yyyy-MM-dd"),$e=oe(fe,"yyyy-MM-dd"),[ye,Ce]=await Promise.all([vr(),Fr()]),Ge=ye.filter(Re=>Re.date>=Se&&Re.date<=ke),ot=ye.filter(Re=>Re.date===$e),ue=new Set([...Ge.flatMap(Re=>[Re.userId,...Re.participants||[]]),...Ce.map(Re=>Re.userId)]),Y=Ge.filter(B).length,we=Ge.length-Y,Oe=Math.max(0,15-Ge.length),Ae=Math.max(0,3-ot.length),qe={};Fe.forEach(Re=>{qe[Re.id]=0}),Ge.forEach(Re=>{const gt=new Set([Re.userId,...Re.participants||[]]);let $t=0;Re.slots.forEach(Mt=>{const cs=new Date(`2000-01-01T${Mt.start}`);let Jt=new Date(`2000-01-01T${Mt.end}`);Mt.endDate,Jt<cs&&Jt.setDate(Jt.getDate()+1),$t+=(Jt.getTime()-cs.getTime())/(1e3*60)}),gt.forEach(Mt=>{qe[Mt]!==void 0&&(qe[Mt]=(qe[Mt]||0)+$t)})});const ut=Object.entries(qe).sort((Re,gt)=>gt[1]-Re[1]),_t=((W=ut[0])==null?void 0:W[1])>0?V(ut[0][0]):"Нет данных",at=Object.entries(qe).filter(([Re,gt])=>gt>0).sort((Re,gt)=>Re[1]-gt[1]).slice(0,3).map(([Re])=>V(Re)),de=ye.flatMap(Re=>{const gt=Re.date;return(Re.slots||[]).map($t=>{const Mt=new Date(`${gt}T${$t.start}`);let cs=$t.endDate?new Date(`${$t.endDate}T${$t.end}`):new Date(`${gt}T${$t.end}`);if(!$t.endDate&&cs.getTime()<=Mt.getTime()){const Jt=new Date(gt);Jt.setDate(Jt.getDate()+1),cs=new Date(`${oe(Jt,"yyyy-MM-dd")}T${$t.end}`)}return{start:Mt,end:cs}})}),Ee=de.filter(Re=>fe>=Re.start&&fe<=Re.end),De=Ee.length?new Date(Math.min(...Ee.map(Re=>Re.end.getTime()))):null,vt=((ne=de.filter(Re=>Re.start>fe).sort((Re,gt)=>Re.start.getTime()-gt.start.getTime())[0])==null?void 0:ne.start)||null;_({slotsThisWeek:Ge.length,activeMembers:ue.size,upcomingSlots:Y,completedSlots:we,recommendedWeek:Oe,recommendedDay:Ae,mostActive:_t,leastActive:at,remainingSlots:Y,todaySlots:ot.length}),P({nextStart:vt,activeEnd:De})}catch(fe){console.error("Error loading stats:",fe)}},q=()=>{L(null),g(!0)},K=W=>{L(W),g(!0)},J=()=>{T(null),b(null),I(!0)},ce=W=>{b(W),T(W.type),I(!0)},he=()=>{v(!0)},te=()=>{g(!1),v(!1),I(!1),T(null),L(null),b(null),R(),j(W=>W+1)},ae=W=>{c(W),r(W)},ge=(W,ne)=>{h(ne),n(W),i(ne)},le=[{label:"Сколько ещё добавить слотов",value:`${Math.max($.recommendedDay,0)} в день`,note:`Неделя: ${Math.max($.recommendedWeek,0)} до цели 15`,icon:e.jsx(Oa,{className:"w-5 h-5 text-emerald-400"}),tone:"emerald",bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/20"},{label:"Сколько осталось слотов",value:$.remainingSlots,note:"предстоящие",icon:e.jsx(t_,{className:"w-5 h-5 text-blue-400"}),tone:"blue",bgClass:"bg-blue-500/5",borderClass:"border-blue-500/20"},{label:"Активные члены",value:$.activeMembers,note:"за неделю",icon:e.jsx(yt,{className:"w-5 h-5 text-purple-400"}),tone:"purple",bgClass:"bg-purple-500/5",borderClass:"border-purple-500/20"},{label:"Завершено слотов на неделе",value:$.completedSlots,note:"факт",icon:e.jsx(dx,{className:"w-4 h-4 text-emerald-400"}),tone:"emerald",bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/20"},{label:"Таймер ближайшего слота",value:U.nextStart,note:"до старта",icon:e.jsx(ka,{className:"w-5 h-5 text-sky-400"}),tone:"sky",bgClass:"bg-sky-500/5",borderClass:"border-sky-500/20"},{label:"До окончания активного слота",value:U.activeRemaining,note:"если слот идёт",icon:e.jsx(wt,{className:"w-5 h-5 text-pink-400"}),tone:"pink",bgClass:"bg-pink-500/5",borderClass:"border-pink-500/20"},{label:"Самый активный член недели",value:$.mostActive||"Нет данных",note:"по слотам",icon:e.jsx(Tt,{className:"w-5 h-5 text-amber-400"}),tone:"amber",bgClass:"bg-amber-500/5",borderClass:"border-amber-500/20"},{label:"Самые неактивные члены недели",value:$.leastActive.length?$.leastActive.join(", "):"Нет данных",note:"минимум слотов",icon:e.jsx(Mp,{className:"w-5 h-5 text-slate-400"}),tone:"slate",bgClass:"bg-slate-500/5",borderClass:"border-slate-500/20"}];return k.loading?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent"})}):k.hasAccess?e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl border border-emerald-500/20",children:e.jsx(dx,{className:"w-8 h-8 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:"Lead"}),e.jsx("p",{className:`text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Управление сменами и активностью AVA - Team"})]})]})}),H.hasAccess&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:le.map((W,ne)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?`${W.bgClass} ${W.borderClass} hover:border-opacity-50`:"bg-white border-gray-100 hover:border-emerald-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:W.label}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:W.icon})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:W.value}),e.jsx("div",{className:"text-[11px] font-medium text-gray-500",children:W.note})]})]},ne))})]}),e.jsx("div",{className:"z-40",children:e.jsx("div",{className:`p-2 rounded-2xl border shadow-xl ${s==="dark"?"bg-[#0b1015] border-white/10":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-4 p-2",children:[e.jsxs("div",{className:`flex items-center gap-1 p-1 rounded-xl border ${s==="dark"?"bg-[#151a21] border-white/5":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("button",{onClick:()=>ae("table"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="table"?"bg-[#2A3441] text-white shadow-lg ring-1 ring-white/10":"text-gray-400 hover:text-gray-200"}`,children:[e.jsx(y_,{className:"w-4 h-4"}),e.jsx("span",{children:"Таблица"})]}),e.jsxs("button",{onClick:()=>ae("week"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="week"?"bg-[#4E6E49] text-white shadow-lg shadow-emerald-900/20":"text-gray-400 hover:text-gray-200"}`,children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsx("span",{children:"Неделя"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[S.hasAccess&&e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-6 py-2.5 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-sm transition-all shadow-lg shadow-emerald-500/20 hover:scale-105 active:scale-95",children:[e.jsx(p_,{className:"w-4 h-4"}),e.jsx("span",{children:"Добавить слот"})]}),F.hasAccess&&e.jsxs("button",{onClick:J,className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border font-bold text-sm transition-all hover:scale-105 active:scale-95 ${s==="dark"?"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10 hover:text-white":"border-gray-200 bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Nd,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Отсутствие"})]}),Z.hasAccess&&e.jsx("button",{onClick:he,className:"p-2.5 rounded-xl border border-rose-500/20 bg-rose-500/10 text-rose-500 hover:bg-rose-500/20 transition-all",title:"Очистить",children:e.jsx(Lt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center gap-2 w-full lg:w-72",children:e.jsx(Vh,{selectedUserId:D,onSelect:M})})]})})}),e.jsx("div",{className:`rounded-2xl border ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-0",children:l==="table"?e.jsx(O_,{selectedUserId:D,slotFilter:u,refreshKey:w,initialWeekStart:d,onDateChange:ge,onEditSlot:K,onEditStatus:ce}):e.jsx(L_,{selectedUserId:D,slotFilter:u,refreshKey:w,initialWeekStart:d,onEditSlot:K,onEditStatus:ce})})}),m&&e.jsx(U_,{slot:se,onClose:te,onSave:te}),y&&e.jsx(z_,{onClose:te,onSave:te}),E&&e.jsx(B_,{type:C||void 0,status:N,onClose:te,onSave:te})]}):e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доступ к Schedule ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:k.reason||"У вас нет доступа к управлению расписанием."})]})},Ns=s=>s.map(([t,r])=>({max:t,percent:r/100})),H_={memecoins_regular:Ns([[1e3,30],[6e3,40],[12e3,50],[1/0,60]]),memecoins_deving:Ns([[1e4,15],[2e4,20],[3e4,25],[6e4,30],[1/0,40]]),polymarket:Ns([[1e3,30],[6e3,40],[12e3,50],[1/0,60]]),nft:Ns([[1e3,25],[6e3,35],[12e3,40],[2e4,50],[1/0,60]]),staking:Ns([[1e3,15],[3e3,20],[5e3,25],[1e4,35],[1/0,40]]),spot:Ns([[1e3,20],[5e3,25],[2e4,35],[5e4,45],[1/0,60]]),futures:Ns([[1e3,15],[5e3,25],[2e4,35],[5e4,50],[1/0,60]]),airdrop:Ns([[1e3,25],[3e3,30],[5e3,35],[1e4,40],[1/0,50]])},W_={memecoins_regular:Ns([[1e3,15],[3e3,20],[5e3,25],[1e4,30],[1/0,35]]),memecoins_deving:Ns([[1e4,15],[2e4,20],[3e4,25],[6e4,30],[1/0,40]]),polymarket:Ns([[1e3,25],[3e3,30],[5e3,35],[1e4,40],[1/0,45]]),nft:Ns([[1e3,15],[3e3,20],[5e3,25],[1e4,30],[1/0,40]]),staking:Ns([[1e3,10],[3e3,15],[5e3,20],[1e4,25],[1/0,30]]),spot:Ns([[1e3,10],[5e3,15],[2e4,20],[5e4,25],[1/0,30]]),futures:Ns([[1e3,10],[5e3,15],[2e4,20],[5e4,25],[1/0,30]]),airdrop:Ns([[1e3,15],[3e3,20],[5e3,25],[1e4,30],[1/0,40]])},G_=(s,t)=>s==="memecoins"?t?"memecoins_deving":"memecoins_regular":s,K_=(s,t,r,a=!1)=>{if(s<=0)return{poolShare:0,percent:0};if(r==="pool")return{poolShare:s,percent:1};const n=r==="general"?H_:W_,i=G_(t,a),l=n[i]||n.other;if(!l)return{poolShare:s*.45,percent:.45};const c=l.find(d=>s<=d.max)||l[l.length-1];return{poolShare:s*c.percent,percent:c.percent}},Y_=(s,t,r=0,a=0)=>t==="general"?s+r*s:t==="pool"?s:s+a,Q_=({onClose:s,onSave:t,editingEarning:r})=>{var ge,le;const{user:a}=Xe(),{isAdmin:n}=kt(),{theme:i}=pe(),l=i==="dark"?"text-white":"text-gray-900",c=!!r,[d,h]=f.useState((r==null?void 0:r.date)||oe(new Date,"yyyy-MM-dd")),[u,m]=f.useState((r==null?void 0:r.amount.toString())||""),[g,y]=f.useState((r==null?void 0:r.walletType)||"general"),[v,E]=f.useState((r==null?void 0:r.isDeving)||!1),[I,C]=f.useState(((ge=r==null?void 0:r.extraWalletsCount)==null?void 0:ge.toString())||""),[T,D]=f.useState(((le=r==null?void 0:r.extraWalletsAmount)==null?void 0:le.toString())||""),[M,se]=f.useState((r==null?void 0:r.category)||"memecoins"),[L,N]=f.useState(r?r.participants.length>1:!1),[b,w]=f.useState(r?r.participants.filter(W=>W!==r.userId):[]),[j,$]=f.useState(""),[_,k]=f.useState(!1);Sr();const H=(W,ne="w-4 h-4")=>{switch(W){case"memecoins":return e.jsx(ar,{className:ne});case"futures":return e.jsx(Qs,{className:ne});case"nft":return e.jsx(gr,{className:ne});case"spot":return e.jsx(Es,{className:ne});case"polymarket":return e.jsx(Nt,{className:ne});case"staking":return e.jsx(Js,{className:ne});case"airdrop":return e.jsx(jr,{className:ne});default:return e.jsx(mr,{className:ne})}},S=()=>{var W;return c&&r?(W=r.participants)!=null&&W.length?r.participants:[r.userId]:L&&b.length?b:a!=null&&a.id?[a.id]:[]},F=parseFloat(u||"0"),Z=parseFloat(I||"0"),ie=parseFloat(T||"0"),P=Y_(F,g,Z,ie),{poolShare:U,percent:z}=K_(P,M,g,v),G=(()=>{const W=S();return W.length?(P-U)/W.length:0})(),O=!c||n&&(r==null?void 0:r.status)==="pending",V=async()=>{const W=S();if(!u||W.length===0){$("Пожалуйста, заполните все обязательные поля");return}if(n&&c&&(r==null?void 0:r.status)==="approved"){$("Нельзя изменять одобренный заработок");return}k(!0),$("");try{const ne={date:d,amount:F,extraWalletsCount:Z,extraWalletsAmount:ie,category:M,walletType:g,isDeving:M==="memecoins"?v:!1,participants:W,userId:(a==null?void 0:a.id)||"",status:n&&c?"approved":"pending",perParticipant:G,poolAmount:U};c&&(r!=null&&r.id)?await $p(r.id,ne):await Ep(ne),t(),s()}catch(ne){console.error("Error saving earnings:",ne),$("Ошибка при сохранении. Попробуйте снова.")}finally{k(!1)}},R=W=>{const ne=W.target.checked;N(ne),ne||w([])},q=a!=null&&a.id?Yt(a.id):"",K=i==="dark"?"bg-black/60 backdrop-blur-sm":"bg-gray-900/50 backdrop-blur-sm",J=i==="dark"?"bg-gray-800":"bg-white",ce=i==="dark"?"border-gray-700 bg-gray-800":"border-gray-200 bg-white",he=i==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-gray-50 border-gray-300 text-gray-900",te=i==="dark"?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400",ae=i==="dark"?"border-gray-700 text-gray-200 hover:bg-gray-800":"border-gray-300 text-gray-800 hover:bg-gray-100";return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 touch-manipulation",children:[e.jsx("div",{className:`absolute inset-0 ${K}`,onClick:s}),e.jsxs("div",{className:`relative w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${J}`,children:[e.jsxs("div",{className:`sticky top-0 z-10 flex items-center justify-between p-4 border-b backdrop-blur-md bg-opacity-90 ${ce}`,children:[e.jsx("h2",{className:`text-xl font-bold ${l}`,children:c?"Редактировать заработок":"Добавить заработок"}),e.jsx("button",{onClick:s,className:`p-2 rounded-lg transition-colors ${i==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(it,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[j&&e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:e.jsx("p",{className:"text-sm text-red-500",children:j})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Дата"}),e.jsx("input",{type:"date",value:d,onChange:W=>h(W.target.value),disabled:!O,className:`w-full px-3 py-2.5 rounded-xl border ${he} disabled:opacity-50 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Категория"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["memecoins","futures","nft","spot","polymarket","staking","airdrop"].map(W=>{var ne,fe;return e.jsxs("button",{onClick:()=>se(W),disabled:!O,className:`flex flex-col items-center gap-1 p-2 rounded-xl border transition-all ${M===W?"border-emerald-500 bg-emerald-500/10":`border-transparent ${i==="dark"?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`} disabled:opacity-50 touch-manipulation`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${((ne=oa[W])==null?void 0:ne.gradient)||"from-gray-400 to-gray-600"} flex items-center justify-center text-white shadow-md`,children:H(W,"w-4 h-4")}),e.jsx("span",{className:`text-[10px] font-medium truncate w-full text-center ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:((fe=oa[W])==null?void 0:fe.shortName)||W})]},W)})})]}),M==="memecoins"&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-emerald-500/20 bg-emerald-500/5",children:[e.jsx("input",{type:"checkbox",id:"isDeving",checked:v,onChange:W=>E(W.target.checked),disabled:!O,className:"w-4 h-4 text-emerald-500 rounded focus:ring-emerald-500/20"}),e.jsx("label",{htmlFor:"isDeving",className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Deving (Дэвинг)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Тип кошелька"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>y("general"),disabled:!O,className:`flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ${g==="general"?"border-emerald-500 bg-emerald-500/10 text-emerald-500":`border-transparent ${i==="dark"?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`}`,children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium text-sm",children:"Общий"})]}),e.jsxs("button",{onClick:()=>y("personal"),disabled:!O,className:`flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ${g==="personal"?"border-emerald-500 bg-emerald-500/10 text-emerald-500":`border-transparent ${i==="dark"?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`}`,children:[e.jsx(ja,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium text-sm",children:"Личный"})]}),e.jsxs("button",{onClick:()=>y("pool"),disabled:!O,className:`flex items-center justify-center gap-2 p-3 rounded-xl border transition-all ${g==="pool"?"border-emerald-500 bg-emerald-500/10 text-emerald-500":`border-transparent ${i==="dark"?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"}`}`,children:[e.jsx(Es,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium text-sm",children:"Пул"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:g==="general"?"Прибыль с основного кошелька (₽)":g==="pool"?"Сумма в пул (₽)":"Ваш заработок (₽)"}),e.jsx("input",{type:"number",value:u,onChange:W=>m(W.target.value),disabled:!O,placeholder:"0.00",className:`w-full px-3 py-2.5 rounded-xl border ${te} disabled:opacity-50 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all`})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g==="general"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Кол-во копи-кошельков"}),e.jsx("input",{type:"number",value:I,onChange:W=>C(W.target.value),disabled:!O,placeholder:"0",className:`w-full px-3 py-2.5 rounded-xl border ${te} disabled:opacity-50 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all`})]})}):g==="personal"?e.jsxs("div",{className:"space-y-3 col-span-2",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Заработок с доп. кошельков (₽)"}),e.jsx("input",{type:"number",value:T,onChange:W=>D(W.target.value),disabled:!O,placeholder:"0.00",className:`w-full px-3 py-2.5 rounded-xl border ${te} disabled:opacity-50 focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all`})]}):null}),e.jsxs("div",{className:`p-4 rounded-xl space-y-2 ${i==="dark"?"bg-gray-700/50":"bg-gray-100"}`,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:i==="dark"?"text-gray-400":"text-gray-600",children:"Общий результат:"}),e.jsxs("span",{className:`font-medium ${i==="dark"?"text-white":"text-gray-900"}`,children:[P.toFixed(2)," ₽"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:i==="dark"?"text-gray-400":"text-gray-600",children:["В пул (",(z*100).toFixed(0),"%):"]}),e.jsxs("span",{className:"text-red-400",children:["-",U.toFixed(2)," ₽"]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium pt-2 border-t border-current border-opacity-10",children:[e.jsx("span",{className:i==="dark"?"text-gray-300":"text-gray-800",children:"Чистый доход на участника:"}),e.jsxs("span",{className:"text-emerald-500",children:[G.toFixed(2)," ₽"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-emerald-500/20 bg-emerald-500/5",children:[e.jsx("input",{type:"checkbox",id:"multipleParticipants",checked:L,onChange:R,disabled:!O,className:"w-4 h-4 text-emerald-500 rounded focus:ring-emerald-500/20"}),e.jsx("label",{htmlFor:"multipleParticipants",className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-700"}`,children:"Несколько участников"})]}),L&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Участники"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Fe.filter(W=>W.id!==(a==null?void 0:a.id)).map(W=>e.jsx("button",{onClick:()=>{O&&w(ne=>ne.includes(W.id)?ne.filter(fe=>fe!==W.id):[...ne,W.id])},disabled:!O,className:`p-2 rounded-lg text-left text-sm transition-all ${b.includes(W.id)?"bg-emerald-500/10 border border-emerald-500/50 text-emerald-600 dark:text-emerald-400":i==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} disabled:opacity-50`,children:e.jsx("span",{className:"font-medium",children:Yt(W.id)||W.name})},W.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("span",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:["Вы: ",e.jsx("span",{className:"font-medium text-emerald-500",children:q})]}),L&&b.length>0&&e.jsxs("span",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:["+ ",b.length," участн."]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs("button",{onClick:V,disabled:_,className:"flex-1 px-4 py-2.5 sm:py-2 bg-[#4E6E49] hover:bg-[#4E6E49] disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100 relative overflow-hidden",children:[e.jsx("span",{className:`relative z-10 flex items-center justify-center gap-2 ${_?"invisible":""}`,children:c?"Сохранить":"Сохранить все"}),_&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Сохранение..."})]})})]}),e.jsx("button",{type:"button",onClick:s,className:`flex-1 px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl border text-sm sm:text-base font-medium transition-colors touch-manipulation active:scale-95 ${ae}`,children:"Отмена"})]})]})]})]})},X_=({earnings:s})=>{const{theme:t}=pe(),r=.45,a=zn(),n=oe(a.start,"yyyy-MM-dd"),i=oe(a.end,"yyyy-MM-dd"),l=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),c=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),d=(m,g,y)=>{const v=s.filter(T=>(T.participants&&T.participants.length>0?[...T.participants,T.userId]:[T.userId]).includes(m)&&T.date>=g&&T.date<=y),E=v.reduce((T,D)=>{const M=D.participants&&D.participants.length>0?D.participants.length:1,se=D.poolAmount||D.amount*r,L=Math.max(D.amount-se,0);return T+L/M},0),I=v.reduce((T,D)=>{const M=D.participants&&D.participants.length>0?D.participants.length:1,se=D.poolAmount||D.amount*r;return T+se/M},0),C=Array.from(new Set(v.map(T=>T.category))).filter(T=>T!=="other");return{totalEarnings:E,totalPool:I,count:v.length,categories:C}},h=Fe.map(m=>{const g=d(m.id,l,c),y=d(m.id,n,i);return{...m,...g,weeklyNet:y.totalEarnings}}).sort((m,g)=>g.totalEarnings-m.totalEarnings),u=5e4;return e.jsx("div",{className:`overflow-hidden rounded-3xl border shadow-2xl ${t==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"}`,children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:t==="dark"?"bg-white/5":"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"Ранг"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"Участник"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"Сферы"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"Сумма пула"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"Чистые средства"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black uppercase tracking-widest text-gray-500 text-center",children:"KPI"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:h.map((m,g)=>{const y=m.weeklyNet/u*100,v=g===0?"text-amber-500":g===1?"text-gray-400":g===2?"text-orange-500":"text-gray-600";return e.jsxs("tr",{className:`group transition-all duration-300 ${t==="dark"?"hover:bg-white/[0.02]":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("span",{className:`text-sm font-black ${v}`,children:["#",g+1]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"relative",children:e.jsx(rr,{userId:m.id,size:"sm",className:"w-9 h-9 ring-2 ring-white/5"})}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:Yt(m.id)})})]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center",children:m.categories.length>0?m.categories.map(E=>{var I;return e.jsx("span",{className:`px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-tight border ${t==="dark"?"bg-white/5 border-white/10 text-gray-400":"bg-gray-100 border-gray-200 text-gray-600"}`,children:((I=oa[E])==null?void 0:I.label)||E},E)}):e.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"—"})})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("span",{className:`text-sm font-black ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:[m.totalPool.toLocaleString()," ₽"]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("span",{className:"text-sm font-black text-emerald-500",children:[m.totalEarnings.toLocaleString()," ₽"]})}),e.jsx("td",{className:"px-6 py-5 text-center w-48",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:`w-24 h-1.5 rounded-full overflow-hidden ${t==="dark"?"bg-white/5":"bg-gray-100"}`,children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${t==="dark"?"bg-white":"bg-black"}`,style:{width:`${Math.min(y,100)}%`}})}),e.jsxs("span",{className:"text-[10px] font-black text-gray-500",children:[y.toFixed(0),"%"]})]})})]},m.id)})})]})})},J_=({earnings:s,onEdit:t,onDelete:r})=>{const{theme:a}=pe(),{user:n}=Xe(),{isAdmin:i}=kt(),[l,c]=f.useState(null),d=.45,h=(D,M="w-4 h-4")=>{switch(D){case"memecoins":return e.jsx(ar,{className:M});case"futures":return e.jsx(Qs,{className:M});case"nft":return e.jsx(gr,{className:M});case"spot":return e.jsx(Es,{className:M});case"polymarket":return e.jsx(Nt,{className:M});case"staking":return e.jsx(Js,{className:M});case"airdrop":return e.jsx(jr,{className:M});default:return e.jsx(mr,{className:M})}},u=async D=>{if(confirm("Вы уверены, что хотите удалить эту запись о заработке?")){c(D.id);try{i?await Tp(D.id):await ts({entity:"earning",action:"delete",authorId:(n==null?void 0:n.id)||D.userId,targetUserId:D.userId,before:D,after:null}),r()}catch(M){console.error("Error deleting earnings:",M),alert("Ошибка при удалении записи")}finally{c(null)}}},m=D=>D.participants&&D.participants.length>0?D.participants:[D.userId],g=D=>D.poolAmount||D.amount*d,y=D=>Math.max(D.amount-g(D),0),v=D=>{const M=m(D);return M.length?y(D)/M.length:y(D)},E=D=>oa[D],I=D=>Yt(D)||D,C=D=>i||D.userId===(n==null?void 0:n.id),T=[...s].sort((D,M)=>M.date.localeCompare(D.date));return T.length===0?e.jsxs("div",{className:`rounded-2xl p-8 text-center border-2 ${a==="dark"?"bg-[#1a1a1a] border-gray-800":"bg-white border-gray-200"} shadow-md`,children:[e.jsx("p",{className:`${a==="dark"?"text-gray-400":"text-gray-600"} text-lg`,children:"Пока нет записей о заработке"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Добавьте первую запись, чтобы начать отслеживать доходы команды"})]}):e.jsxs("div",{className:`rounded-3xl overflow-hidden border shadow-2xl ${a==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"}`,children:[e.jsx("div",{className:"p-6 border-b border-white/5 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl",children:e.jsx(yd,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:`text-lg font-black tracking-tight ${a==="dark"?"text-white":"text-gray-900"}`,children:"История выплат"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:a==="dark"?"bg-white/5":"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500 whitespace-nowrap",children:"Дата"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500",children:"Сфера"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500",children:"Команда"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500 text-right",children:"Выплата"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500 text-right",children:"В Пул"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-wider text-gray-500 text-center",children:"Действия"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:T.map(D=>{const M=m(D),se=E(D.category),L=y(D),N=v(D),b=C(D);return e.jsxs("tr",{className:`group/row transition-colors ${a==="dark"?"hover:bg-white/[0.02]":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsx("span",{className:`text-[12px] font-bold ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:oe(new Date(D.date+"T00:00:00"),"dd.MM")})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-white/5 rounded-lg",children:h(D.category,"w-3.5 h-3.5 text-gray-400")}),e.jsx("span",{className:`text-xs font-bold ${a==="dark"?"text-gray-300":"text-gray-900"}`,children:se.label})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"flex flex-wrap gap-1.5 max-w-[200px]",children:M.map(w=>e.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-black tracking-tight border ${a==="dark"?"border-white/5 bg-white/5 text-gray-400":"border-gray-100 bg-gray-50 text-gray-600"}`,children:I(w)},w))})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"text-sm font-black text-emerald-500",children:[L.toFixed(0)," ₽"]}),M.length>1&&e.jsxs("span",{className:"text-[10px] font-medium text-gray-500",children:["по ",N.toFixed(0)," ₽"]})]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("span",{className:"text-sm font-bold text-purple-400 opacity-60",children:[g(D).toFixed(0)," ₽"]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:b?e.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-0 group-hover/row:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>t(D),className:"p-2 rounded-xl border border-blue-500/20 bg-blue-500/5 text-blue-400 hover:bg-blue-500/20 transition-all",children:e.jsx(yd,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>u(D),disabled:l===D.id,className:"p-2 rounded-xl border border-rose-500/20 bg-rose-500/5 text-rose-500 hover:bg-rose-500/20 transition-all disabled:opacity-50",children:e.jsx(Lt,{className:"w-3.5 h-3.5"})})]}):e.jsx("span",{className:"text-gray-700 text-xs",children:"—"})})]},D.id)})})]})})]})},Z_=()=>{const{theme:s}=pe(),[t,r]=f.useState(!1),[a,n]=f.useState(null),[i,l]=f.useState([]),[c,d]=f.useState(!0),[h,u]=f.useState({weekTotal:0,weekPool:0,weekNet:0,monthTotal:0,monthPool:0,monthNet:0}),m=ze("ava_profit"),g=ze("profit_stats_view"),y=ze("profit_add"),v=ze("profit_insights_view"),E=ze("profit_leaders_view"),I=ze("profit_history_view"),C=ze("profit_cat_memecoins"),T=ze("profit_cat_polymarket"),D=ze("profit_cat_nft"),M=ze("profit_cat_spot"),se=ze("profit_cat_futures"),L=ze("profit_cat_staking"),N=ze("profit_cat_airdrop"),b={memecoins:C.hasAccess,polymarket:T.hasAccess,nft:D.hasAccess,spot:M.hasAccess,futures:se.hasAccess,staking:L.hasAccess,airdrop:N.hasAccess,other:N.hasAccess},w=.45,j=Object.keys(oa),$=R=>R.poolAmount||R.amount*w,_=R=>Math.max(R.amount-$(R),0),k=R=>{var q;return(q=R.participants)!=null&&q.length?R.participants:[R.userId]},H=()=>{const R=zn(),q=oe(R.start,"yyyy-MM-dd"),K=oe(R.end,"yyyy-MM-dd"),J=oe(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd"),ce=oe(new Date(new Date().getFullYear(),new Date().getMonth()+1,0),"yyyy-MM-dd"),he=i.filter(ae=>ae.date>=q&&ae.date<=K),te=i.filter(ae=>ae.date>=J&&ae.date<=ce);u({weekTotal:he.reduce((ae,ge)=>ae+ge.amount,0),weekPool:he.reduce((ae,ge)=>ae+$(ge),0),weekNet:he.reduce((ae,ge)=>ae+_(ge),0),monthTotal:te.reduce((ae,ge)=>ae+ge.amount,0),monthPool:te.reduce((ae,ge)=>ae+$(ge),0),monthNet:te.reduce((ae,ge)=>ae+_(ge),0)})};f.useEffect(()=>{F()},[]),f.useEffect(()=>{H()},[i]);const{users:S}=Xr();f.useEffect(()=>{const R=async q=>{const K=q,{userId:J}=K.detail||{};if(J)await cr(J);else for(const ce of S)await cr(ce.id);l(ce=>[...ce])};return window.addEventListener("nicknameUpdated",R),()=>{window.removeEventListener("nicknameUpdated",R)}},[S]);const F=async()=>{d(!0);try{const R=await Ri();l(R)}catch(R){console.error("Error loading earnings:",R)}finally{d(!1)}},Z=R=>{n(R),r(!0)},ie=()=>{r(!1),n(null)},P=()=>{r(!1),n(null),F()},U=j.map(R=>{const q=i.filter(ae=>ae.category===R),K=q.reduce((ae,ge)=>ae+ge.amount,0),J=q.reduce((ae,ge)=>ae+$(ge),0),ce=q.reduce((ae,ge)=>ae+_(ge),0),he=new Map;q.forEach(ae=>{const ge=k(ae),le=_(ae)/Math.max(ge.length,1);ge.forEach(W=>{he.set(W,(he.get(W)||0)+le)})});const te=Array.from(he.entries()).sort((ae,ge)=>ge[1]-ae[1]).slice(0,2);return{key:R,gross:K,pool:J,net:ce,count:q.length,topParticipants:te}}),z=U.reduce((R,q)=>R+q.net,0),B=U.map(R=>({...R,share:z>0?R.net/z*100:0})).sort((R,q)=>q.share-R.share),G=S.map(R=>{const q=i.filter(he=>k(he).includes(R.id)),K=q.reduce((he,te)=>{const ae=_(te)/Math.max(k(te).length,1);return he+ae},0),J=q.reduce((he,te)=>{const ae=$(te)/Math.max(k(te).length,1);return he+ae},0),ce=q.reduce((he,te)=>{const ae=te.amount/Math.max(k(te).length,1);return he+ae},0);return{...R,net:K,poolShare:J,grossContribution:ce}}).sort((R,q)=>q.net-R.net),O=[...U].sort((R,q)=>q.net-R.net)[0],V=G[0];return m.loading?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent"})}):m.hasAccess?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl border border-emerald-500/20",children:e.jsx(Br,{className:"w-8 h-8 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:"Profit"}),e.jsx("p",{className:`text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Мониторинг доходов и распределение пула"})]})]}),y.hasAccess&&e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-bold text-sm transition-all shadow-lg shadow-emerald-500/20 hover:scale-105 active:scale-95",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{children:"Добавить заработок"})]})]}),g.hasAccess&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"НЕДЕЛЯ (ЧИСТЫМИ)",value:`${h.weekNet.toLocaleString()} ₽`,badgeIcon:e.jsx(lt,{className:"w-4 h-4 text-emerald-500"}),changeType:"positive",icon:e.jsx(Pe,{className:"w-5 h-5 text-emerald-400"}),bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/10"},{label:"НЕДЕЛЯ (ПУЛ)",value:`${h.weekPool.toLocaleString()} ₽`,badgeIcon:e.jsx(Js,{className:"w-4 h-4 text-blue-400"}),icon:e.jsx(Dl,{className:"w-5 h-5 text-blue-400"}),bgClass:"bg-blue-500/5",borderClass:"border-blue-500/10"},{label:"МЕСЯЦ (ЧИСТЫМИ)",value:`${h.monthNet.toLocaleString()} ₽`,isTrend:!0,icon:e.jsx(ja,{className:"w-5 h-5 text-purple-400"}),bgClass:"bg-purple-500/5",borderClass:"border-purple-500/10"},{label:"МЕСЯЦ (ПУЛ)",value:`${h.monthPool.toLocaleString()} ₽`,isCoins:!0,icon:e.jsx(Es,{className:"w-5 h-5 text-orange-400"}),bgClass:"bg-orange-500/5",borderClass:"border-orange-500/10",change:void 0,badgeIcon:void 0}].map((R,q)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-xl group ${s==="dark"?`${R.bgClass} ${R.borderClass} hover:border-white/20`:"bg-white border-gray-100 hover:border-emerald-500/20 shadow-sm"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500",children:R.label}),R.icon]}),e.jsx("div",{className:"space-y-1",children:e.jsx("p",{className:`text-lg font-black leading-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:R.value})})]},q))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:`lg:col-span-3 relative overflow-hidden rounded-3xl p-6 ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} border shadow-2xl`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#4E6E49]/5 blur-3xl rounded-full -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-2 bg-[#4E6E49]/10 rounded-lg",children:e.jsx(m_,{className:"w-5 h-5 text-[#4E6E49]"})}),e.jsx("h3",{className:`text-sm font-black uppercase tracking-widest ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доли заработка"})]}),e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"space-y-6",children:B.filter(R=>b[R.key]).map(R=>{const q=oa[R.key];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[11px] font-black",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${q.accent==="emerald"?"bg-emerald-500":q.accent==="blue"?"bg-blue-500":q.accent==="purple"?"bg-purple-500":q.accent==="amber"?"bg-amber-500":q.accent==="pink"?"bg-pink-500":q.accent==="indigo"?"bg-indigo-500":q.accent==="cyan"?"bg-cyan-500":"bg-gray-500"}`}),e.jsx("span",{className:s==="dark"?"text-gray-300":"text-gray-700",children:q.label})]}),e.jsxs("span",{className:s==="dark"?"text-white":"text-gray-900",children:[R.share.toFixed(0),"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${q.accent==="emerald"?"bg-emerald-500":q.accent==="blue"?"bg-blue-500":q.accent==="purple"?"bg-purple-500":q.accent==="amber"?"bg-amber-500":q.accent==="pink"?"bg-pink-500":q.accent==="indigo"?"bg-indigo-500":q.accent==="cyan"?"bg-cyan-500":"bg-gray-500"}`,style:{width:`${R.share}%`}})})]},R.key)})})})]})]}),e.jsxs("div",{className:`lg:col-span-9 relative overflow-hidden rounded-3xl p-6 ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} border shadow-2xl`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(Nt,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:`text-sm font-black tracking-widest ${s==="dark"?"text-white":"text-gray-900"}`,children:"Детализация дохода по сферам"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.filter(R=>b[R.key]).map(R=>{const q=oa[R.key];return e.jsxs("div",{className:`p-5 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5 shadow-inner":"bg-gray-50 border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${q.accent==="emerald"?"bg-emerald-500":q.accent==="blue"?"bg-blue-500":q.accent==="purple"?"bg-purple-500":q.accent==="amber"?"bg-amber-500":q.accent==="pink"?"bg-pink-500":q.accent==="indigo"?"bg-indigo-500":q.accent==="cyan"?"bg-cyan-500":"bg-gray-500"}`}),e.jsx("span",{className:`text-xs font-black tracking-widest ${s==="dark"?"text-white":"text-gray-900"}`,children:q.label})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase mb-1",children:"ЧИСТЫМИ"}),e.jsxs("p",{className:`text-sm font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:[R.net.toLocaleString()," ₽"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase mb-1",children:"В ПУЛ"}),e.jsxs("p",{className:`text-sm font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:[R.pool.toLocaleString()," ₽"]})]})]}),e.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${q.accent==="emerald"?"bg-emerald-500 focus:bg-emerald-400":q.accent==="blue"?"bg-blue-500 focus:bg-blue-400":q.accent==="purple"?"bg-purple-500 focus:bg-purple-400":q.accent==="amber"?"bg-amber-500 focus:bg-amber-400":q.accent==="pink"?"bg-pink-500 focus:bg-pink-400":q.accent==="indigo"?"bg-indigo-500 focus:bg-indigo-400":q.accent==="cyan"?"bg-cyan-500 focus:bg-cyan-400":"bg-gray-500"}`,style:{width:`${R.share}%`}})})]},R.key)})})]})]})]}),e.jsxs("div",{id:"earn-insights",className:`relative overflow-hidden rounded-3xl p-8 ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} border shadow-2xl ${v.hasAccess?"":"opacity-50 grayscale pointer-events-none"}`,children:[!v.hasAccess&&e.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-[2px] rounded-3xl",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(As,{className:"w-8 h-8 text-white/50"}),e.jsx("p",{className:"text-white/70 font-bold text-sm",children:"Инсайты ограничены"})]})}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 blur-3xl rounded-full -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:"Инсайты эффективности"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Аналитика доходности по направлениям и участникам"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Топ категория",value:O?oa[O.key].label:"—",note:"+14% ROI",icon:e.jsx(Pe,{className:"w-5 h-5 text-emerald-500"})},{label:"Лидер недели",value:V?V.name:"—",note:V?`${V.net.toLocaleString()} ₽ чистого`:"Нет данных",icon:e.jsx(mr,{className:"w-5 h-5 text-amber-500"})},{label:"Доля пула в работе",value:h.monthTotal?`${Math.round(h.monthPool/h.monthTotal*100)}%`:"68%",note:h.monthTotal?`Доступно ${h.monthPool.toLocaleString()} ₽`:"Доступно 0 ₽",icon:e.jsx(Dl,{className:"w-5 h-5 text-blue-500"})},{label:"Средняя выплата",value:i.length?`${(i.reduce((R,q)=>R+_(q),0)/i.length).toFixed(0)} ₽`:"0 ₽",note:"↑ 5%",icon:e.jsx(Br,{className:"w-5 h-5 text-emerald-500"})}].map((R,q)=>e.jsx("div",{className:`p-5 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5 shadow-inner":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500",children:R.label}),R.icon]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-lg font-black leading-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:R.value}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#4E6E49]",children:R.note})]})]})},q))})]})]}),e.jsx("div",{className:"pt-8 border-t border-white/5",children:c?e.jsx("div",{className:`rounded-2xl p-12 text-center border border-dashed ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-emerald-500/20 border-t-emerald-500 rounded-full animate-spin"}),e.jsx("p",{className:`text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Загрузка данных..."})]})}):e.jsxs("div",{className:"space-y-12",children:[E.hasAccess&&e.jsxs("div",{id:"earn-history",className:"space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl",children:e.jsx(Pe,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("h3",{className:`text-lg font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:"Лидеры по доходу"})]})}),e.jsx(X_,{earnings:i.filter(R=>b[R.category])}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-xl",children:e.jsx(Dl,{className:"w-5 h-5 text-purple-400"})}),e.jsx("h3",{className:`text-lg font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:"Личные Накопления"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:G.map(R=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border shadow-xl ${s==="dark"?"bg-white/5 border-white/5":"bg-white border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"relative",children:e.jsx(rr,{user:R,size:"sm"})}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-black truncate max-w-[100px] ${s==="dark"?"text-white":"text-gray-900"}`,children:R.name})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Всего заработано"}),e.jsxs("p",{className:"text-base font-black text-emerald-500",children:[R.grossContribution.toLocaleString()," ₽"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"В ПУЛ"}),e.jsxs("p",{className:`text-[11px] font-black ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:[R.poolShare.toLocaleString()," ₽"]})]}),e.jsxs("div",{className:"space-y-1 text-right",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-500 uppercase tracking-widest",children:"ПОЛУЧЕНО"}),e.jsxs("p",{className:`text-[11px] font-black ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:[R.net.toLocaleString()," ₽"]})]})]}),e.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${Math.min(R.net/R.grossContribution*100,100)}%`}})})]})]},R.id))})]})]}),I.hasAccess&&e.jsx("div",{className:"pt-8 border-t border-white/5",children:e.jsx(J_,{earnings:i.filter(R=>b[R.category]),onEdit:Z,onDelete:F})})]})}),t&&e.jsx(Q_,{onClose:ie,onSave:P,editingEarning:a})]}):e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доступ к AVA — Profit ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:m.reason||"У вас нет доступа к мониторингу доходов."})]})},Yp=(s,t=0,r=0,a=0,n=0,i=0)=>{console.log("calculateRating input:",{userId:s.userId,weeklyHours:t,weeklyEarnings:r,data_referrals:s.referrals,data_initiatives:s.initiatives,data_absenceDays:s.absenceDays,data_truancyDays:s.truancyDays});let l=0,c=0;t>=30?c=15:t>=20?c=10:t>=15&&(c=5),l+=c,console.log("Hours calculation:",{weeklyHours:t,weeklyHoursPoints:c,currentRating:l});let d=0;r>=4e4?d=30:r>=2e4?d=20:r>=1e4&&(d=10),l+=d,console.log("Earnings calculation:",{weeklyEarnings:r,weeklyEarningsPoints:d,currentRating:l});let h=0;s.referrals>30?h=20:s.referrals>15?h=10:s.referrals>=5&&(h=5),l+=h,console.log("Referrals calculation:",{referrals:s.referrals,referralsPoints:h,currentRating:l});let u=0;s.initiatives>10?u=15:s.initiatives>=5?u=10:s.initiatives>=1&&(u=5),l+=u,console.log("Initiatives calculation:",{initiatives:s.initiatives,initiativesPoints:u,currentRating:l});let m=0;s.absenceDays<5?m=10:s.absenceDays>10&&(m=-20),l+=m,console.log("Absence calculation:",{absenceDays:s.absenceDays,absenceDaysPoints:m,currentRating:l});let g=0;return s.truancyDays>6?g=-30:s.truancyDays>3&&(g=-15),l+=g,console.log("Truancy calculation:",{truancyDays:s.truancyDays,truancyDaysPoints:g,currentRating:l}),console.log("Final rating calculation:",{finalRating:l}),l},Qp=(s,t=0,r=0,a=0,n=0,i=0)=>{let l=0;t>=30?l=15:t>=20?l=10:t>=15&&(l=5);let c=0;r>=4e4?c=30:r>=2e4?c=20:r>=1e4&&(c=10);let d=0;s.referrals>30?d=20:s.referrals>15?d=10:s.referrals>=5&&(d=5);let h=0;s.initiatives>10?h=15:s.initiatives>=5?h=10:s.initiatives>=1&&(h=5);let u=0;s.absenceDays<5?u=10:s.absenceDays>10&&(u=-20);let m=0;s.truancyDays>6?m=-30:s.truancyDays>3&&(m=-15);const g=l+c+d+h+u+m;return{weeklyHours:t,weeklyHoursPoints:l,weeklyEarnings:r,weeklyEarningsPoints:c,referrals:s.referrals,referralsPoints:d,initiatives:s.initiatives,initiativesPoints:h,absenceDays:s.absenceDays,absenceDaysPoints:u,truancyDays:s.truancyDays,truancyDaysPoints:m,totalRating:g}},e3=s=>s<50?{status:"excluded",label:"Не в команде",description:"Для нахождения в команде необходимо минимум 50 баллов",color:"#dc2626"}:s>=50&&s<70?{status:"warning",label:"Риск исключения",description:"Показатели ниже рекомендуемых, требуется улучшение",color:"#f59e0b"}:{status:"ok",label:"В команде",description:"Участник соответствует требованиям команды",color:"#10b981"},t3=({className:s=""})=>e.jsxs("svg",{viewBox:"0 0 64 64",className:s,fill:"currentColor",children:[e.jsx("ellipse",{cx:"32",cy:"38",rx:"18",ry:"22",fill:"currentColor"}),e.jsx("ellipse",{cx:"32",cy:"40",rx:"10",ry:"16",fill:"white"}),e.jsx("circle",{cx:"32",cy:"20",r:"12",fill:"currentColor"}),e.jsx("circle",{cx:"28",cy:"18",r:"2.5",fill:"white"}),e.jsx("circle",{cx:"36",cy:"18",r:"2.5",fill:"white"}),e.jsx("circle",{cx:"28",cy:"18",r:"1.2",fill:"black"}),e.jsx("circle",{cx:"36",cy:"18",r:"1.2",fill:"black"}),e.jsx("path",{d:"M32 22 L28 26 L32 28 L36 26 Z",fill:"#FFA500"}),e.jsx("ellipse",{cx:"22",cy:"58",rx:"6",ry:"3",fill:"#FFA500"}),e.jsx("ellipse",{cx:"42",cy:"58",rx:"6",ry:"3",fill:"#FFA500"}),e.jsx("ellipse",{cx:"14",cy:"38",rx:"4",ry:"12",fill:"currentColor",transform:"rotate(-20 14 38)"}),e.jsx("ellipse",{cx:"50",cy:"38",rx:"4",ry:"12",fill:"currentColor",transform:"rotate(20 50 38)"})]}),s3=({scale:s,currentPoints:t,theme:r})=>{const a=r==="dark"?"text-gray-400":"text-gray-500",n=[...s].sort((h,u)=>h.points-u.points),i=s[0].points>s[s.length-1].points,l=n.findIndex((h,u)=>u===n.length-1?!0:t<n[u+1].points),c=100/n.length;let d=0;if(l>=0){const h=n[l],u=n[l+1];if(u){const m=u.points-h.points;let g=0;i?g=m>0?(h.points-t)/m:0:g=m>0?(t-h.points)/m:0,g=Math.max(0,Math.min(1,g)),i?d=l*c+c*(1-g):d=l*c+c*g}else d=i?0:100}return e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex gap-1 h-4 rounded-full overflow-hidden",children:s.map((h,u)=>e.jsx("div",{className:`flex-1 transition-all duration-300 ${h.color} ${t>=h.points?"opacity-100":"opacity-30"}`,title:`${h.label}: ${h.points} баллов`},u))}),e.jsx("div",{className:"absolute -top-2 transform -translate-x-1/2 transition-all duration-500 ease-out",style:{left:`${d}%`},children:e.jsxs("div",{className:"relative",children:[e.jsx(t3,{className:"w-7 h-7 text-gray-800 drop-shadow-lg"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-5 h-1.5 bg-black/20 rounded-full blur-sm"})]})})]}),e.jsx("div",{className:"flex",children:s.map((h,u)=>e.jsxs("div",{className:`flex-1 text-center text-[10px] uppercase font-bold tracking-wide ${t>=h.points?h.color.replace("bg-","text-").replace("/20","").replace("/30","").replace("/10",""):a}`,children:[h.points>0?"+":"",h.points]},u))}),e.jsx("div",{className:"flex",children:s.map((h,u)=>e.jsx("div",{className:`flex-1 text-center text-[9px] uppercase tracking-wider leading-tight ${t>=h.points?h.color.replace("bg-","text-").replace("/20","").replace("/30","").replace("/10",""):a}`,children:h.label},u))})]})},r3=({rating:s,place:t})=>{var D;console.log("RatingCard render - userId:",s.userId,"breakdown:",s.breakdown);const{theme:r}=pe(),[a,n]=f.useState(null),i=r==="dark"?"text-white":"text-gray-900",l=r==="dark"?"text-gray-400":"text-gray-600",c=r==="dark"?"bg-[#0f0f0f]":"bg-white",d=r==="dark"?"border-white/10":"border-gray-200",h=r==="dark"?"hover:bg-white/5":"hover:bg-gray-50",u=r==="dark"?"bg-white/5":"bg-gray-50/80",m=s.rating<=0?"4%":`${Math.min(Math.max(s.rating,5),100)}%`,g=s.rating>=80?"bg-emerald-500":s.rating>=60?"bg-blue-500":s.rating>=50?"bg-amber-500":"bg-rose-500",y=Uo(s.userId),v=Bo(s.userId),E=s.breakdown?[{icon:e.jsx(wt,{className:"w-5 h-5"}),label:"Часы работы",value:`${s.breakdown.weeklyHours.toFixed(1)} ч/нед`,points:s.breakdown.weeklyHoursPoints,maxPoints:15,what:`Отработано ${s.breakdown.weeklyHours.toFixed(1)} часов за неделю.`,why:"Часы работы показывают твой вклад в общее время команды. Это базовый показатель активности — чем больше часов, тем выше твой вклад.",how:s.breakdown.weeklyHoursPoints<15?s.breakdown.weeklyHoursPoints===0?"Твоя активность ниже нормы. Для получения баллов нужно минимум 15 часов в неделю. Берите больше слотов и задач.":s.breakdown.weeklyHoursPoints===5?"Хороший старт! Цель: 20-30 часов в неделю для 10-15 баллов.":"Почти у цели! Добавь ещё несколько часов для максимальных 15 баллов.":"Отличный результат! Ты активно работаешь и вносишь максимальный вклад.",color:"bg-blue-200 text-blue-900 dark:bg-blue-500/20 dark:text-blue-400",scale:[{label:"Минимальный",points:0,color:"bg-gray-400"},{label:"Базовый",points:5,color:"bg-blue-300"},{label:"Хороший",points:10,color:"bg-blue-500"},{label:"Максимальный",points:15,color:"bg-blue-600"}]},{icon:e.jsx(Br,{className:"w-5 h-5"}),label:"Заработок (неделя)",value:`${Math.round(s.breakdown.weeklyEarnings).toLocaleString()} ₽`,points:s.breakdown.weeklyEarningsPoints,maxPoints:30,what:`Заработано ${Math.round(s.breakdown.weeklyEarnings).toLocaleString()} ₽ за неделю.`,why:"Недельный доход — ключевой показатель эффективности твоих действий. Это результат работы и умения находить профитные возможности.",how:s.breakdown.weeklyEarningsPoints<30?s.breakdown.weeklyEarningsPoints===0?"Доход ниже порога для баллов. Минимум 10 000 ₽ для получения баллов. Анализируй рынок и ищи возможности.":s.breakdown.weeklyEarningsPoints===10?"Хороший результат! Цель: 20 000+ ₽ для 20 баллов или 40 000+ ₽ для максимальных 30.":"Отличный прогресс! До 30 баллов осталось чуть больше 20 000 ₽.":"Супер! Твой доход на высоте — ты получаешь максимальные баллы за этот показатель.",color:"bg-emerald-200 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-400",scale:[{label:"Минимальный",points:0,color:"bg-gray-400"},{label:"Базовый",points:10,color:"bg-emerald-300"},{label:"Хороший",points:20,color:"bg-emerald-500"},{label:"Максимальный",points:30,color:"bg-emerald-600"}]},{icon:e.jsx(yt,{className:"w-5 h-5"}),label:"Рефералы (месяц)",value:`${s.breakdown.referrals} чел.`,points:s.breakdown.referralsPoints,maxPoints:20,what:`Привлечено ${s.breakdown.referrals} рефералов за 30 дней.`,why:"Рост комьюнити важен для масштабирования и новых возможностей. Рефералы показывают твой вклад в развитие сообщества.",how:s.breakdown.referralsPoints<20?s.breakdown.referralsPoints===0?"Рефералов пока нет. Начни с 5 приглашённых для первых 5 баллов. Делись реферальной ссылкой.":s.breakdown.referralsPoints===5?"Хорошее начало! Цель: 15-30 рефералов для 10-20 баллов.":"Отличный прогресс! До максимальных 20 баллов осталось ещё несколько приглашений.":"Превосходно! Ты активно помогаешь развивать комьюнити.",color:"bg-pink-200 text-pink-900 dark:bg-pink-500/20 dark:text-pink-400",scale:[{label:"Минимальный",points:0,color:"bg-gray-400"},{label:"Базовый",points:5,color:"bg-pink-300"},{label:"Хороший",points:10,color:"bg-pink-500"},{label:"Максимальный",points:20,color:"bg-pink-600"}]},{icon:e.jsx(qs,{className:"w-5 h-5"}),label:"Инициативы (месяц)",value:`${s.breakdown.initiatives}`,points:s.breakdown.initiativesPoints,maxPoints:15,what:`Предложено ${s.breakdown.initiatives} инициатив за месяц.`,why:"Проактивность помогает развивать проект и улучшать процессы. Инициативы показывают твою вовлечённость в развитие команды.",how:s.breakdown.initiativesPoints<15?s.breakdown.initiativesPoints===0?"Инициатив пока нет. Предложи хотя бы 1 идею для первых 5 баллов. Это может быть улучшение процессов, новый инструмент или предложение.":s.breakdown.initiativesPoints===5?"Хороший старт! Цель: 5-10 инициатив для 10-15 баллов.":"Почти у цели! Ещё несколько инициатив для максимальных 15 баллов.":"Отлично! Ты активно вносишь вклад в развитие проекта.",color:"bg-indigo-200 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-400",scale:[{label:"Минимальный",points:0,color:"bg-gray-400"},{label:"Базовый",points:5,color:"bg-indigo-300"},{label:"Хороший",points:10,color:"bg-indigo-500"},{label:"Максимальный",points:15,color:"bg-indigo-600"}]},{icon:e.jsx(jt,{className:"w-5 h-5"}),label:"Отсутствия (месяц)",value:`${s.breakdown.absenceDays} дн.`,points:s.breakdown.absenceDaysPoints,maxPoints:10,what:`Отсутствий: ${s.breakdown.absenceDays} за месяц (с согласованием).`,why:"Минимум отсутствий показывает твою ответственность и надёжность как участника команды. Меньше 5 дней в месяц — бонус.",how:s.breakdown.absenceDaysPoints<10?s.breakdown.absenceDaysPoints===-20?"Слишком много отсутствий! Ты теряешь 20 баллов. Старайся минимизировать отсутствия и лучше планировать своё время.":"Нейтральный показатель. Для получения +10 баллов постарайся держать отсутствия ниже 5 дней в месяц.":"Отличная посещаемость! Ты получаешь бонус за стабильность.",color:s.breakdown.absenceDaysPoints<0?"bg-red-200 text-red-900 dark:bg-red-500/20 dark:text-red-400":"bg-amber-200 text-amber-900 dark:bg-amber-500/20 dark:text-amber-400",scale:[{label:"Штраф",points:-20,color:"bg-red-500"},{label:"Нейтральный",points:0,color:"bg-gray-400"},{label:"Бонус",points:10,color:"bg-amber-500"}]},{icon:e.jsx(Rt,{className:"w-5 h-5"}),label:"Прогулы (месяц)",value:`${s.breakdown.truancyDays} дн.`,points:s.breakdown.truancyDaysPoints,maxPoints:0,what:`Прогулов: ${s.breakdown.truancyDays} за месяц (без согласования).`,why:"Прогул — серьёзное нарушение дисциплины. >3 прогулов — штраф -15 баллов, >6 — двойной штраф -30 баллов. Это влияет на возможность оставаться в команде.",how:s.breakdown.truancyDaysPoints<0?s.breakdown.truancyDaysPoints===-30?"Критичная ситуация! Прогулы недопустимы. Ты теряешь 30 баллов и рискуешь быть исключённым из команды. Обязательно предупреждай об отсутствиях заранее!":'Внимание! Прогулы влияют на рейтинг. Ты теряешь 15 баллов. Предупреждай об отсутствиях заранее через статус "Отсутствие".':"Дисциплина в норме. Продолжай предупреждать о планах заранее.",color:s.breakdown.truancyDaysPoints<0?"bg-red-300 text-red-900 dark:bg-red-500/30 dark:text-red-400":"bg-green-200 text-green-900 dark:bg-green-500/20 dark:text-green-400",scale:[{label:"Норма",points:0,color:"bg-green-500"},{label:"Штраф",points:-15,color:"bg-orange-500"},{label:"Критичный",points:-30,color:"bg-red-600"}]}]:[],I=((D=s.breakdown)==null?void 0:D.totalRating)||s.rating,C=e3(s.rating),T=(()=>{if(!t)return null;const M=t.rank;return e.jsxs("div",{className:`inline-flex px-3 py-1.5 rounded-xl text-sm font-bold border-2 ${M===1?"bg-amber-500/10 border-amber-500/50 text-amber-600 dark:text-amber-400":M===2?"bg-slate-500/10 border-slate-500/50 text-slate-500 dark:text-slate-400":M===3?"bg-orange-500/10 border-orange-500/50 text-orange-500 dark:text-orange-400":"bg-gray-500/10 border-gray-500/50 text-gray-500 dark:text-gray-400"}`,children:[M," ","место"]})})();return e.jsxs("div",{className:`relative rounded-2xl p-6 ${c} shadow-xl border ${d} transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-blue-500/5 pointer-events-none"}),e.jsxs("div",{className:"relative mb-6 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:`text-[10px] uppercase tracking-[0.15em] font-bold ${l} mb-2`,children:"Участник команды"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v?e.jsx("img",{src:v,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-bold",children:y?y.charAt(0).toUpperCase():"-"}),e.jsx("h3",{className:`text-3xl font-black ${i} truncate bg-gradient-to-r from-emerald-600 to-blue-600 bg-clip-text text-transparent dark:from-emerald-400 dark:to-blue-400`,children:e.jsx(hr,{userId:s.userId,fallback:"unknown"})})]}),T]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"text-4xl font-black bg-gradient-to-br from-emerald-600 to-blue-600 bg-clip-text text-transparent dark:from-emerald-400 dark:to-blue-400",children:s.rating.toFixed(1)}),e.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold ${l}`,children:"баллов"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative w-full h-8 bg-gradient-to-r from-gray-200/50 to-gray-300/50 dark:from-gray-800/50 dark:to-gray-700/50 rounded-2xl overflow-hidden shadow-inner backdrop-blur-sm",children:e.jsxs("div",{className:`h-full transition-all duration-700 ease-out flex items-center justify-end pr-3 ${g} relative overflow-hidden`,style:{width:m,minWidth:s.rating<=0?"50px":void 0},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent"}),s.rating>=5&&e.jsx("span",{className:"text-sm font-black text-white drop-shadow-lg relative z-10",children:s.rating.toFixed(1)})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-xs font-semibold ${l}`,children:"Общий рейтинг"}),e.jsxs("span",{className:`text-xs font-black ${i} px-2 py-0.5 rounded-lg ${r==="dark"?"bg-white/10":"bg-gray-100"}`,children:[I," баллов"]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl border-2 text-sm font-bold shadow-lg backdrop-blur-sm",style:{backgroundColor:`${C.color}20`,borderColor:`${C.color}60`,color:C.color},children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full animate-pulse shadow-lg",style:{backgroundColor:C.color,boxShadow:`0 0 10px ${C.color}`}}),e.jsx("span",{className:"uppercase tracking-wide text-xs",children:C.label})]}),e.jsx("p",{className:`text-xs mt-2 ${l} font-medium`,children:C.description})]})]}),s.breakdown&&e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Pe,{className:`w-5 h-5 ${l}`}),e.jsx("h4",{className:`text-lg font-semibold ${i}`,children:"Детальный разбор"})]}),E.map((M,se)=>{const L=M.maxPoints>0?Math.min(Math.max(M.points/M.maxPoints*100,0),100):0,N=a===se;return e.jsxs("div",{className:`rounded-lg border ${d} overflow-hidden transition-all ${N?"shadow-md":""}`,children:[e.jsx("button",{onClick:()=>n(N?null:se),className:`w-full p-4 flex items-center justify-between ${h} transition-colors`,children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-2 rounded-lg ${M.color} flex-shrink-0`,children:M.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`font-semibold ${i} truncate`,children:M.label}),e.jsxs("span",{className:`font-bold ml-2 ${M.points>0?"text-[#4E6E49]":M.points<0?"text-red-500":"text-gray-400"}`,children:[M.points>0?"+":"",M.points,M.maxPoints>0?`/${M.maxPoints}`:""]})]}),M.maxPoints>0&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${M.color}`,style:{width:`${L}%`}})}),e.jsx("div",{className:"flex items-center justify-between mt-1",children:e.jsx("span",{className:`text-xs ${l} truncate mr-2`,children:M.value})})]}),e.jsx(st,{className:`w-4 h-4 flex-shrink-0 ml-2 ${l} transition-transform ${N?"rotate-180":""}`})]})}),N&&e.jsx("div",{className:`px-4 pb-4 pt-2 border-t ${d} ${u}`,children:e.jsxs("div",{className:"space-y-3 mt-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider opacity-60 ${i}`,children:"Шкала баллов"}),e.jsx(s3,{scale:M.scale,currentPoints:M.points,theme:r})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider opacity-60 ${i}`,children:"Что это"}),e.jsx("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-700"} leading-relaxed`,children:M.what})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider opacity-60 ${i}`,children:"Почему это важно"}),e.jsx("p",{className:`text-sm ${r==="dark"?"text-gray-300":"text-gray-700"} leading-relaxed`,children:M.why})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider opacity-60 ${i}`,children:"Как улучшить"}),e.jsx("div",{className:`mt-1 p-2 rounded-lg border ${r==="dark"?"bg-white/5 border-white/10":"bg-emerald-50 border-emerald-100"}`,children:e.jsx("p",{className:`text-sm ${M.points>=M.maxPoints&&M.maxPoints>0?"text-gray-500 dark:text-gray-400":"text-emerald-600 dark:text-emerald-400"} font-medium`,children:M.how})})]})]})})]},se)})]})]})},a3=({leaders:s,theme:t})=>{const r=t==="dark"?"text-white":"text-gray-900",a=t==="dark"?"text-gray-400":"text-gray-500";return s.length===0?e.jsx("div",{className:`text-sm ${a}`,children:"Нет участников с 50+ баллов"}):e.jsx("div",{className:"space-y-2",children:s.map(n=>{const i=Bo(n.userId),l=Yt(n.userId);return e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsx("img",{src:i,alt:"Avatar",className:"w-6 h-6 rounded-full object-cover flex-shrink-0"}):e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs font-bold flex-shrink-0",children:l?l.charAt(0).toUpperCase():"-"}),e.jsx("span",{className:`text-sm font-semibold ${r} truncate flex-1`,children:l||"—"}),e.jsx("span",{className:`text-xs font-bold ${t==="dark"?"text-amber-400":"text-amber-600"} flex-shrink-0`,children:n.rating.toFixed(1)})]},n.userId)})})},n3=()=>{var se;const{user:s}=Xe(),{theme:t}=pe(),{users:r,loading:a}=Xr(),[n,i]=f.useState([]),[l,c]=f.useState(!0),[d,h]=f.useState([]),u=ze("ava_rating"),m=ze("rating_others_view"),g=ze("rating_self_view");f.useEffect(()=>{a||y()},[a]);const y=async()=>{c(!0);try{const L=zn(),N=oe(L.start,"yyyy-MM-dd"),b=oe(L.end,"yyyy-MM-dd"),w=jp(30),j=oe(w.start,"yyyy-MM-dd"),$=oe(w.end,"yyyy-MM-dd"),_=w.start.toISOString(),k=w.end.toISOString(),[H,S,F,Z]=await Promise.all([Dh(void 0,_,k),Ri(void 0,N,b),Ri(void 0,j,$),Sp()]);h(H);const ie=["ydiEgmNj2sCBirUjWeiv"],U=r.filter(G=>!ie.includes(G.id)).map(async G=>{try{const V=S.filter(ye=>(ye.participants&&ye.participants.length>0?[...ye.participants,ye.userId]:[ye.userId]).includes(G.id)).reduce((ye,Ce)=>{const Ge=Ce.participants&&Ce.participants.length>0?Ce.participants.length:1;return ye+Ce.amount/Ge},0),R=F.filter(ye=>(ye.participants&&ye.participants.length>0?[...ye.participants,ye.userId]:[ye.userId]).includes(G.id)),q=R.reduce((ye,Ce)=>{const Ge=Ce.participants&&Ce.participants.length>0?Ce.participants.length:1;return ye+Ce.amount/Ge},0),K=R.reduce((ye,Ce)=>{const Ge=Ce.participants&&Ce.participants.length>0?Ce.participants.length:1;return ye+Ce.poolAmount/Ge},0),[J,ce]=await Promise.all([Fr(G.id),vr(G.id)]),he=J.filter(ye=>{const Ce=ye.date,Ge=ye.endDate||ye.date;return Ce<=$&&Ge>=j}),te=ye=>he.filter(Ce=>Ce.type===ye).reduce((Ce,Ge)=>Ce+cd(Ge.date,Ge.endDate,j,$),0),ae=te("absence"),ge=te("truancy"),W=ce.filter(ye=>ye.date>=N&&ye.date<=b).reduce((ye,Ce)=>ye+zo(Ce.slots),0),fe=Z.find(ye=>ye.userId===G.id)||{userId:G.id,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,absenceDays:0,internshipDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},We=H.filter(ye=>ye.ownerId===G.id).length,Se={userId:G.id,earnings:q,messages:fe.messages||0,initiatives:fe.initiatives||0,signals:fe.signals||0,profitableSignals:fe.profitableSignals||0,referrals:We,daysOff:0,sickDays:0,vacationDays:0,absenceDays:ae,truancyDays:ge,internshipDays:0,poolAmount:K,lastUpdated:new Date().toISOString()},ke=Yp(Se,W,V,0,0,0),$e=Qp(Se,W,V,0,0,0);return{...Se,rating:ke,breakdown:$e}}catch(O){return console.error(`Error processing rating for member ${G.id}:`,O),null}}),B=(await Promise.all(U)).filter(G=>G!==null);B.sort((G,O)=>O.rating-G.rating),i(B)}catch(L){console.error("Error loading ratings:",L)}finally{c(!1)}},v=f.useMemo(()=>s?n.filter(L=>L.userId===s.id?g.hasAccess:m.hasAccess):[],[n,s,g.hasAccess,m.hasAccess]),E=n.reduce((L,N)=>L+N.rating,0)/(n.length||1),I=t==="dark"?"text-white":"text-gray-900",C=f.useMemo(()=>[...v].sort((L,N)=>N.rating-L.rating),[v]),T=f.useMemo(()=>{var w,j;if(!C.length)return{top:0,median:0,count:0,high:0};const L=((w=C[0])==null?void 0:w.rating)||0,N=((j=C[Math.floor((C.length-1)/2)])==null?void 0:j.rating)||L,b=C.filter($=>$.rating>=80).length;return{top:L,median:N,count:C.length,high:b}},[C]),D=f.useMemo(()=>C.filter(L=>L.rating>=50).slice(0,3).map(L=>({userId:L.userId,rating:L.rating})),[C]);if(f.useEffect(()=>{a||(async()=>{K0();for(const N of r)await cr(N.id)})()},[r,a]),f.useEffect(()=>{const L=async N=>{const b=N,{userId:w}=b.detail||{};if(w)await cr(w),i(j=>[...j]);else{K0();for(const j of r)await cr(j.id);i(j=>[...j])}};return window.addEventListener("nicknameUpdated",L),()=>{window.removeEventListener("nicknameUpdated",L)}},[r]),u.loading)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent"})});if(!u.hasAccess)return e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:"Доступ к AVA Score ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:m.reason||"У вас нет доступа к просмотру рейтинга."})]});const M=[{label:"Средний рейтинг",value:`${E.toFixed(1)}`,note:"за текущую неделю",icon:e.jsx(Pe,{className:"w-5 h-5 text-emerald-400"}),bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/20"},{label:"Три лидера",value:e.jsx(a3,{leaders:D,theme:t}),note:"минимум 50 баллов",icon:e.jsx(U4,{className:"w-5 h-5 text-amber-400"}),bgClass:"bg-amber-500/5",borderClass:"border-amber-500/20"},{label:"Участников 80+",value:`${T.high}`,note:"высокий уровень",icon:e.jsx(He,{className:"w-5 h-5 text-blue-400"}),bgClass:"bg-blue-500/5",borderClass:"border-blue-500/20"},{label:"Рефералы за 30 дней",value:`${d.length}`,note:"новые участники",icon:e.jsx(Gp,{className:"w-5 h-5 text-pink-400"}),bgClass:"bg-pink-500/5",borderClass:"border-pink-500/20"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl border border-emerald-500/20",children:e.jsx(Pe,{className:"w-8 h-8 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-black tracking-tight ${I}`,children:"Рейтинг"}),e.jsx("p",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Рейтинг эффективности команды AVA - Team"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:M.map((L,N)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${t==="dark"?`${L.bgClass} ${L.borderClass} hover:border-opacity-50`:"bg-white border-gray-100 hover:border-emerald-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:L.label}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${t==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:L.icon})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${I}`,children:(typeof L.value=="string",L.value)}),e.jsx("div",{className:"text-[11px] font-medium text-gray-500",children:L.note})]})]},N))})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${t==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} shadow-xl`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl",children:e.jsx(Nt,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-black tracking-tight ${I}`,children:"Детальная статистика"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Карточки участников с полными данными"})]})]}),l?e.jsx("div",{className:`rounded-xl p-12 text-center border border-dashed ${t==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-emerald-500/20 border-t-emerald-500 rounded-full animate-spin"}),e.jsx("p",{className:`text-sm font-medium ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Загрузка рейтинга..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[{label:"Топ-1",value:(se=C[0])!=null&&se.rating?`${C[0].rating.toFixed(1)}`:"—"},{label:"Средний рейтинг",value:`${E.toFixed(1)}`},{label:"Медиана",value:`${T.median.toFixed(1)}`},{label:"Участников",value:C.length}].map(L=>e.jsxs("div",{className:`rounded-xl border px-4 py-3 ${t==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:`text-[11px] uppercase tracking-wide font-bold ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:L.label}),e.jsx("p",{className:`text-2xl font-black ${I}`,children:L.value})]},L.label))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-6",children:C.map((L,N)=>e.jsx(r3,{rating:L,place:{rank:N+1}},L.userId))})]})]})]})},_d={trading:q4,learning:Ur,technical:G4,stream:zp,research:X4,organization:H4},i3=({loading:s,message:t="Сохранение...",onComplete:r})=>{const[a,n]=f.useState(0),[i,l]=f.useState(!1);return f.useEffect(()=>{if(!s){n(100),l(!0),r==null||r();const m=setTimeout(()=>{l(!1)},1e3);return()=>clearTimeout(m)}n(0),l(!1);const c=2e3,d=50;let h=0;const u=setInterval(()=>{h+=100/(c/d);const m=Math.random()>.7?5:0;n(Math.min(h+m,85))},d);return()=>clearInterval(u)},[s,r]),!s&&!i&&a===0?null:e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s||i?"bg-black/40 backdrop-blur-sm":"bg-transparent"}`}),e.jsxs("div",{className:`relative transform transition-all duration-300 ${i?"scale-110":"scale-100"}`,children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[e.jsx("circle",{cx:"48",cy:"48",r:"40",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"6"}),e.jsx("circle",{cx:"48",cy:"48",r:"40",fill:"none",stroke:i?"#10B981":"#4E6E49",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*40}`,strokeDashoffset:`${2*Math.PI*40*(1-a/100)}`,className:"transition-all duration-300 ease-out",style:{filter:i?"drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))":"drop-shadow(0 0 6px rgba(78, 110, 73, 0.4))"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i?e.jsx("div",{className:"w-10 h-10 text-emerald-400 animate-bounce-in",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}):s?e.jsxs("div",{className:"w-8 h-8 relative",children:[e.jsx("div",{className:"absolute inset-0 border-3 border-emerald-400/30 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-3 border-transparent border-t-emerald-400 rounded-full animate-spin"})]}):null})]}),e.jsx("div",{className:`absolute -bottom-10 left-1/2 transform -translate-x-1/2 whitespace-nowrap transition-all duration-300 ${i?"translate-y-0 opacity-100":"translate-y-2 opacity-0"}`,children:e.jsx("span",{className:"text-white text-sm font-medium drop-shadow-lg",children:i?"Сохранено!":t})}),i&&e.jsx(e.Fragment,{children:[...Array(6)].map((c,d)=>e.jsx("div",{className:"absolute w-2 h-2 bg-emerald-400 rounded-full animate-particle",style:{top:"50%",left:"50%","--angle":`${d*60}deg`,animationDelay:`${d*.1}s`}},d))})]}),!i&&s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-32 h-32 bg-emerald-500/20 rounded-full animate-ping"})}),e.jsx("style",{children:`
        @keyframes bounce-in {
          0% { transform: scale(0); opacity: 0; }
          50% { transform: scale(1.2); }
          100% { transform: scale(1); opacity: 1; }
        }

        @keyframes particle {
          0% {
            transform: translate(-50%, -50%) rotate(var(--angle)) translateX(0);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) rotate(var(--angle)) translateX(40px);
            opacity: 0;
          }
        }

        .animate-bounce-in {
          animation: bounce-in 0.4s ease-out forwards;
        }

        .animate-particle {
          animation: particle 0.6s ease-out forwards;
        }
      `})]})},l3=({onClose:s,onSave:t,editingTask:r})=>{var R,q;const{user:a}=Xe(),{theme:n}=pe(),i=!!r,l=n==="dark"?"text-white":"text-gray-900",c=n==="dark"?"bg-[#1a1a1a]":"bg-white",d=n==="dark"?"bg-gray-800":"bg-gray-50",h=n==="dark"?"border-gray-800":"border-gray-300",[u,m]=f.useState((r==null?void 0:r.title)||""),[g,y]=f.useState((r==null?void 0:r.description)||""),[v,E]=f.useState((r==null?void 0:r.category)||"trading"),[I,C]=f.useState((r==null?void 0:r.priority)||"medium"),[T,D]=f.useState((r==null?void 0:r.expectedResult)||""),[M,se]=f.useState((r==null?void 0:r.dueDate)||oe(new Date,"yyyy-MM-dd")),[L,N]=f.useState((r==null?void 0:r.dueTime)||"12:00"),b=K=>({...K,assignees:K.assignees||[],approvals:K.approvals||[],requiresApproval:K.requiresApproval??!0,stagePriority:K.stagePriority||"medium",status:K.status||"pending"}),[w,j]=f.useState((R=r==null?void 0:r.stages)!=null&&R.length?r.stages.map(b):[b({id:"stage-1",name:"Этап 1",description:"",responsible:"all",assignees:[],approvals:[],stagePriority:"medium",requiresApproval:!0,status:"pending"})]),[$,_]=f.useState((r==null?void 0:r.currentStageId)||((q=w[0])==null?void 0:q.id)||"stage-1"),[k,H]=f.useState(""),[S,F]=f.useState(!1);Sr();const Z=[{value:"urgent",label:"Экстренный",desc:"Нужно прямо сейчас",tone:n==="dark"?"bg-rose-600/20 border-rose-500/50 text-rose-100":"bg-rose-50 border-rose-200 text-rose-700"},{value:"high",label:"Высокий",desc:"Быстрый старт",tone:n==="dark"?"bg-red-500/15 border-red-500/40 text-red-100":"bg-red-50 border-red-200 text-red-700"},{value:"medium",label:"Средний",desc:"Плановый слот",tone:n==="dark"?"bg-amber-500/15 border-amber-500/40 text-amber-100":"bg-amber-50 border-amber-200 text-amber-700"},{value:"low",label:"Низкий",desc:"Фон",tone:n==="dark"?"bg-gray-500/15 border-gray-500/40 text-gray-100":"bg-gray-50 border-gray-200 text-gray-700"}],ie=(K,J)=>{j(ce=>ce.map(he=>he.id===K?{...he,...J}:he))},P=(K,J)=>{j(ce=>ce.map(he=>he.id!==K?he:he.assignees.find(ae=>ae.userId===J)?{...he,assignees:he.assignees.filter(ae=>ae.userId!==J)}:he.assignees.length>=10?he:{...he,assignees:[...he.assignees,{userId:J,priority:"medium"}]}))},U=(K,J,ce,he)=>{j(te=>te.map(ae=>{if(ae.id!==K)return ae;const ge=ae.assignees.map(le=>le.userId===J?{...le,[ce]:he}:le);return{...ae,assignees:ge}}))},z=()=>{const K=b({id:`stage-${Date.now()}`,name:`Этап ${w.length+1}`,description:"",responsible:"all",assignees:[],approvals:[],stagePriority:"medium",requiresApproval:!0,status:"pending"});j(J=>[...J,K]),$||_(K.id)},B=K=>{var ce;if(w.length===1)return;const J=w.filter(he=>he.id!==K);j(J),$===K&&_(((ce=J[0])==null?void 0:ce.id)||"")},G=()=>u.trim()?!M||!L?"Укажите дедлайн (дата и время)":new Set(w.flatMap(J=>J.assignees.map(ce=>ce.userId))).size===0?"Добавьте исполнителей в этапах":"":"Введите название задачи",O=(K,J)=>{const ce=K.assignees,he=ce.map(ae=>ae.userId),te=he.map(ae=>{const ge=ce.find(le=>le.userId===ae);return{userId:ae,status:"pending",updatedAt:J,...ge!=null&&ge.comment?{comment:ge.comment}:{}}});return{id:K.id,name:K.name,description:K.description,responsible:he,assignees:ce,stagePriority:K.stagePriority||"medium",requiresApproval:!0,approvals:te,comments:K.comments||[],status:"pending"}},V=async()=>{var ce;const K=G();if(K){H(K);return}if(!a){H("Пользователь не найден");return}H(""),F(!0);const J=new Date().toISOString();try{const he=w.map(le=>O(le,J)),te=Array.from(new Set(he.flatMap(le=>{var W;return((W=le.assignees)==null?void 0:W.map(ne=>ne.userId))||[]}))),ae=te.map(le=>({userId:le,status:"pending",updatedAt:J})),ge={title:u.trim(),description:g.trim()||void 0,category:v,priority:I,assignedTo:te,assignees:te.map(le=>({userId:le,priority:"medium"})),approvals:ae,stages:he,currentStageId:$||((ce=he[0])==null?void 0:ce.id),dueDate:M,dueTime:L,expectedResult:T.trim()||void 0,updatedAt:J};if(i&&r)await E4(r.id,ge);else{const le={...ge,status:"in_progress",createdBy:a.id,createdAt:J};await k4(le)}t()}catch(he){console.error("Error saving task:",he),H("Ошибка при сохранении задачи")}finally{F(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start sm:items-center justify-center z-[70] p-4 overflow-y-auto overscroll-contain modal-scroll touch-pan-y",children:e.jsx("div",{className:`${c} rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-2xl max-h-[calc(100vh-48px)] sm:max-h-[calc(100vh-64px)] overflow-y-auto border-2 touch-pan-y ${n==="dark"?"border-[#4E6E49]/30 bg-gradient-to-br from-[#1a1a1a] via-[#1a1a1a] to-[#0A0A0A]":"border-green-200 bg-gradient-to-br from-white via-green-50/30 to-white"} relative`,children:e.jsxs("div",{className:"flex flex-col h-full min-h-0",children:[e.jsxs("div",{className:`sticky top-0 ${c} border-b ${h} p-4 sm:p-6 flex items-center justify-between z-10`,children:[e.jsxs("h2",{className:`text-xl sm:text-2xl font-bold ${l} flex items-center gap-2`,children:[e.jsx(lo,{className:"w-5 h-5 sm:w-6 sm:h-6"}),i?"Редактировать задачу":"Новая задача"]}),e.jsx("button",{onClick:s,className:`p-2 rounded-lg transition-colors ${n==="dark"?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 flex-1 min-h-0 overflow-y-auto overscroll-contain modal-scroll touch-pan-y pb-10",children:[k&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-center gap-2 text-red-500",children:[e.jsx(Bp,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:k})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:"Название *"}),e.jsx("input",{value:u,onChange:K=>m(K.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/50`,placeholder:"Введите название задачи"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${l}`,children:"Описание"}),e.jsx("textarea",{value:g,onChange:K=>y(K.target.value),rows:4,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/50`,placeholder:"Кратко опишите задачу"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[e.jsx(wd,{className:"w-4 h-4"}),"Категория"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:Object.entries(Pl).map(([K,{label:J}])=>{const ce=_d[K],he=v===K;return e.jsxs("button",{type:"button",onClick:()=>E(K),className:`p-3 rounded-lg border-2 text-sm font-semibold transition-all text-center ${he?n==="dark"?"border-[#4E6E49] bg-[#4E6E49]/15 text-[#4E6E49]":"border-[#4E6E49] bg-green-50 text-[#4E6E49]":n==="dark"?"border-gray-800 bg-gray-900 text-gray-200 hover:border-[#4E6E49]/40":"border-gray-200 bg-white text-gray-800 hover:border-[#4E6E49]/40"} flex items-center justify-center gap-2`,children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:J})]},K)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[e.jsx(mr,{className:"w-4 h-4"}),"Приоритет"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Z.map(K=>e.jsxs("button",{type:"button",onClick:()=>C(K.value),className:`p-3 rounded-lg border-2 text-left transition-all ${K.tone} ${I===K.value?"ring-2 ring-offset-2 ring-[#4E6E49] dark:ring-offset-[#1a1a1a]":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-semibold text-sm",children:K.label}),I===K.value&&e.jsx("span",{className:"text-xs font-semibold",children:"выбрано"})]}),e.jsx("p",{className:"text-xs mt-1 opacity-80",children:K.desc})]},K.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:`block text-sm font-medium ${l}`,children:"Этапы и исполнители"}),e.jsxs("button",{type:"button",onClick:z,className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:[e.jsx(os,{className:"w-4 h-4 inline"})," Добавить этап"]})]}),e.jsx("div",{className:"space-y-3",children:w.map((K,J)=>e.jsxs("div",{className:`p-3 rounded-lg border-2 ${h} ${d}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{value:K.name,onChange:ce=>ie(K.id,{name:ce.target.value}),className:`flex-1 px-3 py-2 rounded-lg border ${h} ${n==="dark"?"bg-[#0f0f0f] text-gray-100":"bg-white text-gray-800"}`,placeholder:`Этап ${J+1}`}),w.length>1&&e.jsx("button",{onClick:()=>B(K.id),className:`p-2 rounded-lg ${n==="dark"?"bg-red-500/20 text-red-200":"bg-red-100 text-red-700"}`,children:e.jsx(j_,{className:"w-4 h-4"})})]}),e.jsx("textarea",{value:K.description||"",onChange:ce=>ie(K.id,{description:ce.target.value}),rows:2,className:`w-full px-3 py-2 rounded-lg border ${h} ${n==="dark"?"bg-[#0f0f0f] text-gray-100":"bg-white text-gray-800"}`,placeholder:"Описание этапа (опционально)"}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:`text-sm font-medium ${l} flex items-center gap-2`,children:[e.jsx(yt,{className:"w-4 h-4"}),"Исполнители этапа"]}),e.jsxs("span",{className:"text-[11px] text-gray-500",children:[K.assignees.length,"/10"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Fe.map(ce=>{const he=K.assignees.some(te=>te.userId===ce.id);return e.jsx("button",{type:"button",onClick:()=>P(K.id,ce.id),className:`p-2 rounded-lg border text-left text-sm transition-all ${he?n==="dark"?"border-[#4E6E49] bg-[#4E6E49]/20":"border-[#4E6E49] bg-green-50":`${h} ${d}`}`,children:e.jsx("span",{className:he?"text-[#4E6E49]":l,children:Yt(ce.id)})},ce.id)})}),K.assignees.length>0&&e.jsx("div",{className:"space-y-2",children:K.assignees.map(ce=>{const he=Fe.find(te=>te.id===ce.userId);return e.jsxs("div",{className:`p-2 rounded-lg border ${h} ${n==="dark"?"bg-[#0f0f0f]":"bg-white"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-medium",children:(he==null?void 0:he.name)||ce.userId}),e.jsxs("select",{value:ce.priority,onChange:te=>U(K.id,ce.userId,"priority",te.target.value),className:`px-3 py-1.5 rounded-lg border ${h} ${n==="dark"?"bg-[#1a1a1a] text-gray-100":"bg-white text-gray-700"}`,children:[e.jsx("option",{value:"urgent",children:"Экстренный"}),e.jsx("option",{value:"high",children:"Высокий"}),e.jsx("option",{value:"medium",children:"Средний"}),e.jsx("option",{value:"low",children:"Низкий"})]})]}),e.jsx("textarea",{value:ce.comment||"",onChange:te=>U(K.id,ce.userId,"comment",te.target.value),rows:2,className:`mt-2 w-full px-3 py-2 rounded-lg border ${h} ${n==="dark"?"bg-[#1a1a1a] text-gray-100":"bg-white text-gray-700"}`,placeholder:"Комментарий для исполнителя (опционально)"})]},ce.userId)})})]})]},K.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${l} flex items-center gap-2`,children:[e.jsx(He,{className:"w-4 h-4"}),"Какой результат должен быть"]}),e.jsx("textarea",{value:T,onChange:K=>D(K.target.value),rows:3,className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/50`,placeholder:"Опишите ожидаемый итог"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[e.jsx(Ss,{className:"w-4 h-4"}),"Дата дедлайна *"]}),e.jsx("input",{type:"date",value:M,onChange:K=>se(K.target.value),min:oe(new Date,"yyyy-MM-dd"),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/50`})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:`block text-sm font-medium ${l} flex items-center gap-2`,children:[e.jsx(wt,{className:"w-4 h-4"}),"Время дедлайна *"]}),e.jsx("input",{type:"time",value:L,onChange:K=>N(K.target.value),className:`w-full px-4 py-2.5 rounded-lg border ${h} ${d} ${l} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]/50`})]})]}),e.jsxs("div",{className:`flex flex-col sm:flex-row gap-3 pt-4 border-t ${h}`,children:[e.jsxs("button",{onClick:V,disabled:S,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-all relative overflow-hidden ${S?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-[#4E6E49] to-emerald-700 hover:from-[#4E6E49] hover:to-emerald-700 text-white shadow-lg hover:shadow-xl"}`,children:[e.jsx("span",{className:`relative z-10 flex items-center justify-center gap-2 ${S?"invisible":""}`,children:i?"Сохранить":"Создать задачу"}),S&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Сохранение..."})]})})]}),e.jsx("button",{onClick:s,className:`px-6 py-3 rounded-lg font-semibold transition-colors ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Отмена"})]})]})]})})}),e.jsx(i3,{loading:S,message:"Сохранение задачи..."})]})},o3=({selectedCategory:s,selectedStatus:t,selectedUsers:r,onCategoryChange:a,onStatusChange:n,onUsersChange:i,onAddTask:l})=>{var N;const{theme:c}=pe(),[d,h]=f.useState(!1),[u,m]=f.useState(!1),g=c==="dark"?"bg-[#151a21]/50":"bg-white",y=c==="dark"?"border-white/5":"border-gray-200",v=c==="dark"?"text-white":"text-gray-900",E=c==="dark"?"text-gray-400":"text-gray-600",I=c==="dark"?"bg-[#0f1216]":"bg-gray-100",C=c==="dark"?"bg-[#1a1f26]":"bg-white",T=c==="dark"?"hover:bg-white/10":"hover:bg-gray-100",D=[{value:"all",label:"Все"},{value:"in_progress",label:"В работе"},{value:"completed",label:"Выполнено"},{value:"closed",label:"Закрыто"}],M=Object.entries(Pl).map(([b,{label:w}])=>({key:b,label:w})),se=s==="all"?"Все":((N=Pl[s])==null?void 0:N.label)||"Категория",L=s==="all"?wd:_d[s];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 lg:hidden",children:[e.jsxs("button",{onClick:()=>h(!d),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border font-medium transition-all flex-1 justify-center ${c==="dark"?"bg-white/5 border-white/10 text-white hover:bg-white/10":"bg-gray-100 border-gray-200 text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(Fp,{className:"w-4 h-4"}),e.jsx("span",{children:"Фильтры"}),d?e.jsx(it,{className:"w-4 h-4"}):e.jsx(st,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border font-medium transition-all flex-1 justify-center ${c==="dark"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 border-emerald-200 text-emerald-600 hover:bg-emerald-100"}`,children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{children:"Новая"})]})]}),e.jsxs("div",{className:`rounded-xl border ${y} ${g} shadow-lg transition-all duration-300 ${d?"block":"hidden lg:block"}`,children:[e.jsx("div",{className:"p-2 sm:p-3",children:e.jsx("div",{className:`flex p-1 rounded-lg ${I} overflow-x-auto scrollbar-hide`,children:D.map(b=>e.jsx("button",{onClick:()=>n(b.value),className:`px-3 py-1.5 rounded-md text-xs sm:text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 ${t===b.value?c==="dark"?"bg-[#2A3441] text-white shadow":"bg-white text-gray-900 shadow":c==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900"}`,children:b.label},b.value))})}),e.jsxs("div",{className:"px-2 sm:px-3 pb-3 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("button",{onClick:()=>m(!u),className:`w-full flex items-center justify-between gap-2 px-3 py-2 rounded-lg text-sm font-medium border ${y} ${I} ${v} cursor-pointer focus:outline-none focus:ring-2 focus:ring-emerald-500/50`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{children:se})]}),e.jsx(st,{className:`w-4 h-4 ${E} transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),e.jsxs("div",{className:`absolute top-full left-0 right-0 mt-1 ${C} border ${y} rounded-lg shadow-xl z-20 overflow-hidden`,children:[e.jsxs("button",{onClick:()=>{a("all"),m(!1)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm font-medium transition-colors ${T} ${s==="all"?c==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900":E}`,children:[e.jsx(wd,{className:"w-4 h-4"}),e.jsx("span",{children:"Все категории"})]}),M.map(({key:b,label:w})=>{const j=_d[b];return e.jsxs("button",{onClick:()=>{a(b),m(!1)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm font-medium transition-colors ${T} ${s===b?c==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900":E}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:w})]},b)})]})]})]}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsx(Vh,{selectedUserId:r[0]||null,onSelect:b=>i(b?[b]:[])})})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-5 py-2.5 rounded-xl border font-medium transition-all ${c==="dark"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 border-emerald-200 text-emerald-600 hover:bg-emerald-100"}`,children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{children:"Новая задача"})]})})]})},c3=({tasks:s,onEdit:t,onDelete:r})=>{const{theme:a}=pe(),{users:n}=Xr(),i=h=>n.find(u=>u.id===h),l=h=>{const u=i(h);return u?u.name:"Unknown"},c=h=>{switch(h){case"in_progress":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"completed":return"bg-emerald-500/10 text-emerald-500 border-emerald-500/20";case"closed":return"bg-slate-500/10 text-slate-400 border-slate-500/20";default:return"bg-gray-500/10 text-gray-400 border-gray-500/20"}},d=h=>{const u={trading:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",research:"bg-blue-500/10 text-blue-400 border-blue-500/20",content:"bg-purple-500/10 text-purple-400 border-purple-500/20",stream:"bg-pink-500/10 text-pink-400 border-pink-500/20",other:"bg-gray-500/10 text-gray-400 border-gray-500/20",learning:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"};return u[h]||u.other};return s.length===0?e.jsx("div",{className:`text-center py-20 rounded-3xl border-2 border-dashed ${a==="dark"?"border-white/5 text-gray-500":"border-gray-200 text-gray-500"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:`p-4 rounded-full ${a==="dark"?"bg-white/5":"bg-gray-100"}`,children:e.jsx(wt,{className:"w-8 h-8 opacity-50"})}),e.jsx("p",{children:"Задач пока нет"})]})}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border-separate border-spacing-y-3 -mt-3",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`text-xs uppercase tracking-wider text-left ${a==="dark"?"text-gray-500":"text-gray-400"}`,children:[e.jsx("th",{className:"px-6 py-2 font-medium w-20",children:"#ID"}),e.jsx("th",{className:"px-6 py-2 font-medium",children:"Задача"}),e.jsx("th",{className:"px-6 py-2 font-medium",children:"Категория"}),e.jsx("th",{className:"px-6 py-2 font-medium",children:"Исполнитель"}),e.jsx("th",{className:"px-6 py-2 font-medium text-center",children:"Статус"}),e.jsx("th",{className:"px-6 py-2 font-medium text-right",children:"Действия"})]})}),e.jsx("tbody",{children:s.map(h=>{var u,m;return e.jsxs("tr",{className:`group transition-all duration-200 ${a==="dark"?"bg-[#151a21]/80 hover:bg-[#1a2029] hover:shadow-lg hover:shadow-black/20":"bg-white hover:bg-gray-50 hover:shadow-md"}`,children:[e.jsx("td",{className:`px-6 py-5 rounded-l-2xl border-y border-l ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsxs("span",{className:`font-mono text-xs opacity-50 ${a==="dark"?"text-gray-400":"text-gray-500"}`,children:["#",h.id.slice(0,4)]})}),e.jsx("td",{className:`px-6 py-5 border-y ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`font-bold text-[15px] ${a==="dark"?"text-gray-200":"text-gray-800"}`,children:h.title}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 font-medium",children:[e.jsx(wt,{className:"w-3 h-3"}),h.dueDate?e.jsxs("span",{className:a==="dark"?"text-gray-500":"text-gray-400",children:[oe(new Date(h.dueDate),"d MMM")," ",h.dueTime?`, ${h.dueTime}`:""]}):e.jsx("span",{children:"Без срока"})]})]})}),e.jsx("td",{className:`px-6 py-5 border-y ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-[11px] font-bold tracking-wide uppercase border ${d(h.category)}`,children:((u=Pl[h.category])==null?void 0:u.label)||h.category})}),e.jsx("td",{className:`px-6 py-5 border-y ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#4E6E49] to-[#3d5639] flex items-center justify-center text-[10px] text-white font-bold shadow-inner",children:l(h.mainExecutor||h.assignedTo[0]).charAt(0)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-sm font-medium ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:l(h.mainExecutor||h.assignedTo[0])}),h.assignedTo.length>1&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",h.assignedTo.length-1," ещё"]})]})]})}),e.jsx("td",{className:`px-6 py-5 border-y text-center ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[11px] font-bold uppercase tracking-wide border ${c(h.status)}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${h.status==="in_progress"?"bg-yellow-500 animate-pulse":h.status==="completed"?"bg-emerald-500":"bg-slate-400"}`}),((m=xf[h.status])==null?void 0:m.label)||h.status]})}),e.jsx("td",{className:`px-6 py-5 rounded-r-2xl border-y border-r text-right ${a==="dark"?"border-white/5":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-all duration-200 translate-x-2 group-hover:translate-x-0",children:[e.jsx("button",{onClick:()=>t(h),className:`p-2 rounded-lg transition-colors ${a==="dark"?"hover:bg-white/10 text-gray-500 hover:text-white":"hover:bg-gray-100 text-gray-400 hover:text-gray-900"}`,children:e.jsx(x_,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(h.id),className:`p-2 rounded-lg transition-colors ${a==="dark"?"hover:bg-red-500/10 text-gray-500 hover:text-red-400":"hover:bg-red-50 text-gray-400 hover:text-red-600"}`,children:e.jsx(Lt,{className:"w-4 h-4"})})]})})]},h.id)})})]})})},d3=()=>{const{theme:s}=pe(),{user:t}=Xe(),[r,a]=f.useState(!1),[n,i]=f.useState(null),[l,c]=f.useState([]),[d,h]=f.useState(!0),[u,m]=f.useState("all"),[g,y]=f.useState("all"),[v,E]=f.useState([]),I=ze("ava_tasks"),C=ze("tasks_add"),T=s==="dark"?"text-white":"text-gray-900";f.useEffect(()=>{D()},[t]),f.useEffect(()=>{D()},[u,g,v]);const D=async()=>{h(!0);try{const S={};u!=="all"&&(S.category=u),g!=="all"&&(S.status=g),v.length>0&&(S.assignedTo=v);const F=await _4(S);c(F)}catch(S){console.error("Error loading tasks:",S)}finally{h(!1)}},M=S=>{i(S),a(!0)},se=async S=>{if(confirm("Вы уверены, что хотите удалить эту задачу?"))try{await Dp(S),D()}catch(F){console.error("Error deleting task:",F)}},L=()=>{a(!1),i(null)},N=()=>{a(!1),i(null),D()},b=l.filter(S=>!(u!=="all"&&S.category!==u||g!=="all"&&S.status!==g||v.length>0&&!v.some(F=>S.assignedTo.includes(F)))),w=new Date,j=oe(w,"yyyy-MM-dd"),$=new Date(w.getTime()-7*24*60*60*1e3),_=new Date(w.getTime()-30*24*60*60*1e3),k={totalToday:l.filter(S=>S.createdAt.startsWith(j)).length,totalWeek:l.filter(S=>new Date(S.createdAt)>=$).length,totalMonth:l.filter(S=>new Date(S.createdAt)>=_).length,inProgress:l.filter(S=>S.status==="in_progress").length,completedToday:l.filter(S=>{var F;return S.status==="completed"&&((F=S.completedAt)==null?void 0:F.startsWith(j))}).length,completedWeek:l.filter(S=>S.status==="completed"&&S.completedAt&&new Date(S.completedAt)>=$).length,closedMonth:l.filter(S=>S.status==="closed"&&new Date(S.createdAt)>=_).length},H=l.filter(S=>S.status!=="completed"&&S.status!=="closed"&&S.dueDate).sort((S,F)=>new Date(`${S.dueDate}T${S.dueTime}`).getTime()-new Date(`${F.dueDate}T${F.dueTime}`).getTime())[0];return I.loading?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent"})}):I.hasAccess?e.jsxs("div",{className:"space-y-8 animate-fade-in pb-12 font-sans",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 border border-emerald-500/20",children:e.jsx(io,{className:"w-8 h-8 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-black ${T} flex items-center gap-3`,children:"Tasks"}),e.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-500",children:"Управление задачами и заданиями команды AVA - Team"})]})]}),e.jsx("div",{className:"ml-auto flex items-center gap-4"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-emerald-500/5 border-emerald-500/20 hover:border-emerald-500/50":"bg-white border-gray-100 hover:border-emerald-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Всего задач сегодня"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(Ss,{className:"w-5 h-5 text-emerald-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.totalToday}),e.jsx("div",{className:"text-[11px] font-medium text-emerald-400 bg-emerald-500/10 w-fit px-2 py-0.5 rounded-full border border-emerald-500/20",children:"↗ Активность ↑"})]})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-blue-500/5 border-blue-500/20 hover:border-blue-500/50":"bg-white border-gray-100 hover:border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Всего на неделе"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(Oh,{className:"w-5 h-5 text-blue-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.totalWeek}),e.jsx("div",{className:"text-[11px] font-medium text-gray-500",children:"Общий объем"})]})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-indigo-500/5 border-indigo-500/20 hover:border-indigo-500/50":"bg-white border-gray-100 hover:border-indigo-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Всего в месяце"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(Ys,{className:"w-5 h-5 text-indigo-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.totalMonth}),e.jsx("div",{className:"text-[11px] font-medium text-gray-500",children:"Накопительный итог"})]})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-amber-500/5 border-amber-500/20 hover:border-amber-500/50":"bg-white border-gray-100 hover:border-amber-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Задач в работе"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(lt,{className:"w-5 h-5 text-amber-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.inProgress}),e.jsx("div",{className:"text-[11px] font-medium text-amber-400 bg-amber-500/10 w-fit px-2 py-0.5 rounded-full border border-amber-500/20",children:"Требуют внимания"})]})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-teal-500/5 border-teal-500/20 hover:border-teal-500/50":"bg-white border-gray-100 hover:border-teal-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Закрыто сегодня"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(gs,{className:"w-5 h-5 text-teal-400"})})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.completedToday})})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-cyan-500/5 border-cyan-500/20 hover:border-cyan-500/50":"bg-white border-gray-100 hover:border-cyan-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Закрыто на неделе"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(gs,{className:"w-5 h-5 text-cyan-400"})})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.completedWeek})})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-sky-500/5 border-sky-500/20 hover:border-sky-500/50":"bg-white border-gray-100 hover:border-sky-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Закрыто в месяце"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(Ph,{className:"w-5 h-5 text-sky-400"})})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:k.closedMonth})})]}),e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?"bg-rose-500/5 border-rose-500/20 hover:border-rose-500/50":"bg-white border-gray-100 hover:border-rose-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Ближайший дедлайн"}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${s==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(ka,{className:"w-5 h-5 text-rose-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl font-black tracking-tight ${T}`,children:H?e.jsxs(e.Fragment,{children:[H.dueDate===j?"Сегодня":oe(new Date(H.dueDate),"d MMM"),H.dueTime&&`, ${H.dueTime}`]}):"Нет"}),e.jsx("div",{className:"text-[11px] font-medium truncate text-gray-500",children:H?H.title:"Все сроки соблюдены"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl font-black ${T}`,children:"Мои задачи"}),e.jsxs("span",{className:"px-2.5 py-1 rounded-md bg-gray-800/80 text-gray-400 text-xs font-medium border border-white/5 shadow-sm",children:[k.inProgress," активных"]})]}),e.jsxs("div",{className:`rounded-3xl border p-4 sm:p-6 ${s==="dark"?"bg-[#0f1216] border-white/5":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"mb-6",children:e.jsx(o3,{selectedCategory:u,selectedStatus:g,selectedUsers:v,onCategoryChange:m,onStatusChange:y,onUsersChange:E,onAddTask:C.hasAccess?()=>a(!0):void 0})}),d?e.jsx("div",{className:"py-20 text-center text-gray-500 animate-pulse",children:"Загрузка задач..."}):e.jsx(c3,{tasks:b,onEdit:M,onDelete:se})]})]}),r&&e.jsx(l3,{onClose:L,onSave:N,editingTask:n})]}):e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доступ к Tasks ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:I.reason||"У вас нет доступа к управлению задачами."})]})},h3=({positions:s=[],primaryPosition:t,onPositionsChange:r,onPrimaryChange:a,theme:n,labelColor:i,subTextColor:l})=>{const[c,d]=Os.useState(""),[h,u]=Os.useState(!1),m=v=>{if(s.includes(v)){alert("Эта должность уже добавлена");return}if(s.length>=10){alert("Максимум 10 должностей на участника");return}const E=[...s,v];r(E),E.length===1&&a(v)},g=v=>{const E=s.filter(I=>I!==v);r(E),t===v&&E.length>0?a(E[0]):E.length===0&&a("")},y=()=>{c.trim()&&(m(c.trim()),d(""),u(!1))};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`block text-sm font-medium ${i}`,children:"Должности участника"}),s.length>0&&e.jsx("div",{className:"space-y-2",children:s.map(v=>e.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-lg border ${n==="dark"?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"radio",checked:t===v,onChange:()=>a(v),className:"w-4 h-4 text-emerald-500 cursor-pointer"}),e.jsx("span",{className:`text-sm ${n==="dark"?"text-white":"text-gray-900"}`,children:v}),t===v&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-600 dark:text-emerald-400",children:"Основная"})]}),e.jsx("button",{type:"button",onClick:()=>g(v),className:`p-1 rounded hover:bg-red-500/10 transition-colors ${n==="dark"?"text-gray-400 hover:text-red-400":"text-gray-500 hover:text-red-500"}`,children:e.jsx(it,{size:16})})]},v))}),s.length<10&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-xs ${l}`,children:"Добавить из списка:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:uf.filter(v=>!s.includes(v)).map(v=>e.jsx("button",{type:"button",onClick:()=>m(v),className:`text-xs px-2.5 py-1.5 rounded-lg border transition-all ${n==="dark"?"bg-gray-800 border-gray-700 hover:border-emerald-500 text-gray-300":"bg-white border-gray-300 hover:border-emerald-500 text-gray-700"}`,children:v},v))})]}),s.length<10&&e.jsx("div",{children:h?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:v=>d(v.target.value),onKeyPress:v=>v.key==="Enter"&&(v.preventDefault(),y()),placeholder:"Введите название должности",className:`flex-1 px-3 py-2 text-sm rounded-lg border outline-none transition-all ${n==="dark"?"bg-gray-800 border-gray-700 text-white focus:border-emerald-500":"bg-white border-gray-300 text-gray-900 focus:border-emerald-500"}`,autoFocus:!0}),e.jsx("button",{type:"button",onClick:y,className:"px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm transition-colors",children:"Добавить"}),e.jsx("button",{type:"button",onClick:()=>{u(!1),d("")},className:`px-3 py-2 rounded-lg text-sm transition-colors ${n==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Отмена"})]}):e.jsxs("button",{type:"button",onClick:()=>u(!0),className:`flex items-center gap-1 text-xs px-3 py-2 rounded-lg transition-colors ${n==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[e.jsx(os,{size:14}),"Добавить свою должность"]})}),s.length===0&&e.jsx("p",{className:`text-xs ${l}`,children:"Нет добавленных должностей. Выберите из списка или добавьте свою."})]})},u3=s=>{const t=new Map;return Fe.forEach(r=>{t.set(r.id,r)}),s.forEach(r=>{t.set(r.id,r)}),Array.from(t.values())},x3=()=>{const{theme:s}=pe(),{isAdmin:t}=kt(),[r,a]=f.useState([]),[n,i]=f.useState(!0),[l,c]=f.useState(!1),[d,h]=f.useState(null),[u,m]=f.useState({name:"",login:"",password:"",avatar:"",nickname:"",phone:"",recoveryCode:""}),[g,y]=f.useState(null),[v,E]=f.useState({}),[I,C]=f.useState(null),[T,D]=f.useState(null),[M,se]=f.useState(!1),L=Os.useRef(null),N=async()=>{try{i(!0);const O=await qn(),V=u3(O);a(V)}catch(O){console.error("Error loading users:",O),a(Fe)}finally{i(!1)}};f.useEffect(()=>{N()},[]);const b=async O=>{if(O.preventDefault(),!u.name||!u.login||!u.password){alert("Заполните все обязательные поля");return}if(u.positions&&u.positions.length>10){alert("Максимум 10 должностей на участника");return}if(u.primaryPosition&&u.positions&&!u.positions.includes(u.primaryPosition)){alert("Основная должность должна быть в списке должностей");return}try{const V={name:u.name,login:u.login,password:u.password,nickname:u.nickname||void 0,avatar:u.avatar||void 0,phone:u.phone||void 0,recoveryCode:u.recoveryCode||void 0,positions:u.positions||void 0,primaryPosition:u.primaryPosition||void 0};if(d)await M4(d.id,V),window.dispatchEvent(new CustomEvent("userUpdated",{detail:{userId:d.id}}));else{const R=await P4(V);window.dispatchEvent(new CustomEvent("userUpdated",{detail:{userId:R}})),D(null)}await new Promise(R=>setTimeout(R,800)),await N(),k()}catch(V){console.error("Error saving user:",V),alert("Ошибка при сохранении пользователя")}},w=async O=>{var R;const V=(R=O.target.files)==null?void 0:R[0];if(V){if(V.size>2*1024*1024){alert("Файл слишком большой. Выберите изображение до 2МБ");return}try{se(!0);const q=new FileReader;q.onload=K=>{var ce;const J=new window.Image;J.onload=()=>{const he=document.createElement("canvas"),te=200;let ae=J.width,ge=J.height;ae>ge?ae>te&&(ge*=te/ae,ae=te):ge>te&&(ae*=te/ge,ge=te),he.width=ae,he.height=ge;const le=he.getContext("2d");le==null||le.drawImage(J,0,0,ae,ge);const W=he.toDataURL("image/jpeg",.7);m(ne=>({...ne,avatar:W})),se(!1)},J.src=(ce=K.target)==null?void 0:ce.result},q.readAsDataURL(V)}catch(q){console.error("Error processing image:",q),alert("Ошибка при обработке изображения"),se(!1)}}},j=async O=>{try{confirm("Вы уверены, что хотите удалить этого пользователя? Это действие удалит все его данные (слоты, заработок, задачи, рейтинг и т.д.).")&&(await O4(O),await N(),y(null))}catch(V){console.error("Error deleting user:",V),alert("Ошибка при удалении пользователя")}},$=O=>{h(O),m({name:O.name,login:O.login,password:O.password,nickname:O.nickname||"",avatar:O.avatar||"",phone:O.phone||"",recoveryCode:O.recoveryCode||"",positions:O.positions||[],primaryPosition:O.primaryPosition||""}),c(!0)},_=()=>{h(null);const O=Q0("",r);m({name:"",login:O.login,password:O.password,nickname:"",avatar:"",phone:"",recoveryCode:"",positions:[],primaryPosition:""}),D(O),c(!0)},k=()=>{c(!1),h(null),m({name:"",login:"",password:"",nickname:"",avatar:"",phone:"",recoveryCode:"",positions:[],primaryPosition:""}),D(null)},H=()=>{const O=r.length>0?r:Fe,V=Q0(u.name||"user",O);m({...u,login:V.login,password:V.password}),D(V)},S=O=>{E(V=>({...V,[O]:!V[O]}))},F=(O,V,R)=>{navigator.clipboard.writeText(`Логин: ${O}
Пароль: ${V}`),C(R),setTimeout(()=>C(null),2e3)},Z=O=>{navigator.clipboard.writeText(O)},ie=s==="dark"?"text-white":"text-gray-900",P=s==="dark"?"text-gray-300":"text-gray-700",U=s==="dark"?"bg-[#1a1a1a]":"bg-white",z=s==="dark"?"border-gray-800":"border-gray-200",B=s==="dark"?"hover:bg-gray-800":"hover:bg-gray-50",G=s==="dark"?"text-gray-500":"text-gray-400";return t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-xl font-bold ${ie}`,children:"Управление участниками"}),e.jsxs("button",{onClick:_,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${s==="dark"?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:[e.jsx(os,{size:18}),"Добавить участника"]})]}),n?e.jsx("div",{className:`p-8 text-center ${P}`,children:"Загрузка..."}):r.length===0?e.jsxs("div",{className:`p-8 text-center rounded-xl border ${U} ${z}`,children:[e.jsx(dr,{className:`w-12 h-12 mx-auto mb-3 opacity-30 ${P}`}),e.jsx("p",{className:P,children:"Нет участников. Добавьте первого!"})]}):e.jsx("div",{className:`rounded-xl border overflow-hidden ${U} ${z}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:s==="dark"?"bg-gray-800/50":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Участник"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Никнейм"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Телефон"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Код восст."}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Логин"}),e.jsx("th",{className:`px-4 py-3 text-left text-sm font-semibold ${P}`,children:"Пароль"}),e.jsx("th",{className:`px-4 py-3 text-right text-sm font-semibold ${P}`,children:"Действия"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700/50",children:r.map(O=>e.jsxs("tr",{className:B,children:[e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rr,{user:O,size:"sm",className:"w-8 h-8"}),e.jsx("span",{className:"font-medium",children:O.name})]})}),e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsx("span",{className:"text-sm",children:O.nickname||"—"})}),e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsx("span",{className:"text-sm",children:O.phone||"—"})}),e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsx("span",{className:"text-sm font-mono text-amber-500/80",children:O.recoveryCode||"—"})}),e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-mono",children:O.login}),e.jsx("button",{onClick:()=>Z(O.login),className:`p-1 rounded transition-colors ${s==="dark"?"hover:bg-gray-700 text-gray-500":"hover:bg-gray-200 text-gray-400"}`,title:"Копировать логин",children:e.jsx(Rn,{size:14})})]})}),e.jsx("td",{className:`px-4 py-3 ${P}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-mono",children:v[O.id]?O.password:"••••••••••••"}),e.jsx("button",{onClick:()=>S(O.id),className:`p-1 rounded transition-colors ${s==="dark"?"hover:bg-gray-700 text-gray-500":"hover:bg-gray-200 text-gray-400"}`,title:v[O.id]?"Скрыть пароль":"Показать пароль",children:v[O.id]?e.jsx(Pi,{size:14}):e.jsx(Pn,{size:14})}),e.jsx("button",{onClick:()=>F(O.login,O.password,O.id),className:`p-1 rounded transition-colors ${I===O.id?"text-emerald-500":s==="dark"?"hover:bg-gray-700 text-gray-500":"hover:bg-gray-200 text-gray-400"}`,title:"Копировать учётные данные",children:I===O.id?e.jsx(xr,{size:14}):e.jsx(Rn,{size:14})})]})}),e.jsx("td",{className:`px-4 py-3 text-sm ${P}`,children:O.avatar?e.jsx("span",{className:"text-emerald-500",children:"Есть"}):e.jsx("span",{className:"text-gray-500",children:"Нет"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>$(O),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-100 text-gray-600"}`,title:"Редактировать",children:e.jsx(yd,{size:16})}),g===O.id?e.jsx("button",{onClick:()=>j(O.id),className:"p-2 rounded-lg bg-red-500/20 text-red-500 hover:bg-red-500/30 transition-colors",title:"Подтвердить удаление",children:e.jsx(Ko,{size:16})}):e.jsx("button",{onClick:()=>y(O.id),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-100 text-red-600"}`,title:"Удалить",children:e.jsx(Lt,{size:16})}),g===O.id&&e.jsx("button",{onClick:()=>y(null),className:`p-2 rounded-lg transition-colors ${s==="dark"?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-100 text-gray-600"}`,title:"Отмена",children:e.jsx(it,{size:16})})]})})]},O.id))})]})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-2xl w-full max-w-md ${U} border-2 ${z} shadow-2xl`,children:[e.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${s==="dark"?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold ${ie}`,children:d?"Редактирование участника":"Новый участник"}),e.jsx("button",{onClick:k,className:`p-1 rounded-lg ${s==="dark"?"hover:bg-gray-800":"hover:bg-gray-100"}`,children:e.jsx(it,{size:20,className:P})})]}),e.jsxs("form",{onSubmit:b,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-1.5 ${P}`,children:["Имя ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u.name,onChange:O=>m({...u,name:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-gray-50 border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"Введите имя участника",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1.5 ${P}`,children:"Никнейм (необязательно)"}),e.jsx("input",{type:"text",value:u.nickname,onChange:O=>m({...u,nickname:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-gray-50 border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"Введите никнейм"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1.5 ${P}`,children:"Телефон"}),e.jsx("input",{type:"text",value:u.phone,onChange:O=>m({...u,phone:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-gray-50 border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"79001234567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1.5 ${P}`,children:"Код восстановления"}),e.jsx("input",{type:"text",value:u.recoveryCode,onChange:O=>m({...u,recoveryCode:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-gray-50 border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"Код"})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:`text-sm font-medium ${P}`,children:"Учётные данные для входа"}),!d&&e.jsxs("button",{type:"button",onClick:H,className:`flex items-center gap-1 text-xs px-2 py-1 rounded-lg transition-colors ${s==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:[e.jsx(vn,{size:12}),"Сгенерировать заново"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-xs font-medium mb-1 ${G}`,children:["Логин ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:u.login,onChange:O=>m({...u,login:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all font-mono text-sm ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-white border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"login",required:!0})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-xs font-medium mb-1 ${G}`,children:["Пароль ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v.form?"text":"password",value:u.password,onChange:O=>m({...u,password:O.target.value}),className:`w-full px-4 py-2.5 rounded-xl border outline-none transition-all font-mono text-sm ${s==="dark"?"bg-[#2a2a2a] border-gray-700 text-white focus:border-emerald-500":"bg-white border-gray-300 text-gray-900 focus:border-emerald-500"}`,placeholder:"••••••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>E(O=>({...O,form:!O.form})),className:`absolute right-3 top-1/2 -translate-y-1/2 ${s==="dark"?"text-gray-500 hover:text-gray-400":"text-gray-400 hover:text-gray-500"}`,children:v.form?e.jsx(Pi,{size:16}):e.jsx(Pn,{size:16})})]})]}),!d&&T&&e.jsx("div",{className:`text-xs p-2 rounded-lg ${s==="dark"?"bg-emerald-900/30 text-emerald-400":"bg-emerald-50 text-emerald-600"}`,children:"Учётные данные сгенерированы автоматически. Скопируйте их перед закрытием формы."})]})]}),e.jsx(h3,{positions:u.positions||[],primaryPosition:u.primaryPosition||"",onPositionsChange:O=>m({...u,positions:O}),onPrimaryChange:O=>m({...u,primaryPosition:O}),theme:s,labelColor:P,subTextColor:G}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:`block text-sm font-medium ${P}`,children:"Фото участника"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(rr,{user:{...u,id:(d==null?void 0:d.id)||""},size:"lg",className:"w-16 h-16"}),M&&e.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center",children:e.jsx(vn,{className:"w-6 h-6 text-white animate-spin"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",ref:L,onChange:w,accept:"image/*",className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var O;return(O=L.current)==null?void 0:O.click()},disabled:M,className:`w-full px-4 py-2 rounded-xl text-sm font-bold transition-all ${s==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} border ${z} flex items-center justify-center gap-2`,children:[M?"Загрузка...":u.avatar?"Изменить фото":"Загрузить фото",!M&&e.jsx(gr,{size:16})]}),e.jsx("p",{className:`mt-1 text-[10px] ${G}`,children:"Рекомендуется квадратное изображение (JPG, PNG)"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:k,className:`flex-1 px-4 py-2.5 rounded-xl font-medium transition-all ${s==="dark"?"bg-gray-800 hover:bg-gray-700 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Отмена"}),e.jsx("button",{type:"submit",className:`flex-1 px-4 py-2.5 rounded-xl font-medium transition-all ${s==="dark"?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:d?"Сохранить":"Добавить"})]})]})]})})]}):e.jsx("div",{className:`p-4 rounded-xl border ${U} ${z}`,children:e.jsx("p",{className:P,children:"Доступ запрещён. Только для администраторов."})})},m3=()=>{const{theme:s}=pe(),{isAdmin:t}=kt(),r=s==="dark"?"text-white":"text-gray-900",a=s==="dark"?"text-gray-300":"text-gray-700",n=s==="dark"?"bg-[#1a1a1a]":"bg-white";return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-lg border-2 ${s==="dark"?"border-purple-500/30":"border-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-xl ${s==="dark"?"bg-purple-500/20":"bg-purple-100"}`,children:e.jsx(yt,{className:`w-6 h-6 ${s==="dark"?"text-purple-400":"text-purple-600"}`})}),e.jsx("h2",{className:`text-xl font-semibold ${r}`,children:"Участники команды"})]}),e.jsx(x3,{})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${n} shadow-lg border-2 ${s==="dark"?"border-orange-500/30":"border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-xl ${s==="dark"?"bg-orange-500/20":"bg-orange-100"}`,children:e.jsx(Rt,{className:`w-6 h-6 ${s==="dark"?"text-orange-400":"text-orange-600"}`})}),e.jsx("h2",{className:`text-xl font-semibold ${r}`,children:"Ограничения"}),e.jsxs("a",{href:"/controls",className:`ml-auto flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${s==="dark"?"bg-orange-600 hover:bg-orange-500 text-white":"bg-orange-500 hover:bg-orange-600 text-white"}`,children:[e.jsx(fr,{size:18}),"Управление"]})]}),e.jsx("p",{className:`text-sm ${a} mb-4`,children:"Запретить участникам создавать определённые записи (слоты, выходные, больничные и т.д.) в указанный период"}),e.jsx("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-gray-800/50":"bg-gray-50"}`,children:e.jsx("p",{className:`text-sm ${a}`,children:"Нажмите «Управление» для просмотра, создания и редактирования ограничений"})})]})]}):e.jsx("div",{className:`rounded-2xl p-8 ${n} shadow-xl border-2 ${s==="dark"?"border-red-500/30 bg-gradient-to-br from-[#1a1a1a] to-[#0A0A0A]":"border-red-200 bg-gradient-to-br from-white to-red-50/20"} relative overflow-hidden`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex p-4 rounded-2xl mb-4 ${s==="dark"?"bg-red-500/20":"bg-red-100"}`,children:e.jsx(As,{className:`w-12 h-12 ${s==="dark"?"text-red-400":"text-red-600"}`})}),e.jsx("h2",{className:`text-2xl font-bold mb-2 ${r}`,children:"Доступ запрещен"}),e.jsx("p",{className:a,children:'Эта страница доступна только администраторам. Для входа используйте режим "Админ" на странице входа.'})]})})},Fh=Mi()(Oi((s,t)=>({viewedUserId:null,setViewedUser:r=>{s({viewedUserId:r})},resetViewedUser:()=>{s({viewedUserId:null})},isViewingOtherUser:()=>t().viewedUserId!==null}),{name:"viewed-user-storage"})),Xp=(s,t,r)=>t&&r?r:s,g3=()=>{const{user:s}=Xe(),{isAdmin:t}=kt(),{viewedUserId:r}=Fh();return Xp(s==null?void 0:s.id,t,r)},p3=()=>{const{theme:s}=pe(),{user:t,logout:r}=Xe(),{isAdmin:a,deactivateAdmin:n}=kt(),{isViewingOtherUser:i}=Fh(),l=g3(),c=mo(),d=l||(t==null?void 0:t.id)||"admin",[h,u]=f.useState(null),[m,g]=f.useState(null),[y,v]=f.useState(null),[E,I]=f.useState(!0),C=l?Fe.find(_=>_.id===l):null,T=t||(a?{id:"admin",name:"Администратор",avatar:void 0}:null),D=Bo(d,(T==null?void 0:T.id)===d?T==null?void 0:T.avatar:void 0),M=T!=null&&T.name?T.name.charAt(0).toUpperCase():"A",se=s==="dark"?"text-white":"text-gray-900";f.useEffect(()=>{(t||a)&&L()},[t,a]);const L=async()=>{if(!(!t&&!a)){I(!0);try{const _=l||(t==null?void 0:t.id)||"admin";if(t){const k=zn(),H=oe(k.start,"yyyy-MM-dd"),S=oe(k.end,"yyyy-MM-dd"),F=jp(30),Z=oe(F.start,"yyyy-MM-dd"),ie=oe(F.end,"yyyy-MM-dd"),P=F.start.toISOString(),U=F.end.toISOString(),z=await Ri(_,H,S),B=z.reduce((ke,$e)=>{const ye=$e.participants&&$e.participants.length>0?$e.participants.length:1;return ke+$e.amount/ye},0),G=z.reduce((ke,$e)=>{const ye=$e.participants&&$e.participants.length>0?$e.participants.length:1;return ke+$e.poolAmount/ye},0),O=await Ri(_,Z,ie),V=O.reduce((ke,$e)=>{const ye=$e.participants&&$e.participants.length>0?$e.participants.length:1;return ke+$e.amount/ye},0),R=O.reduce((ke,$e)=>{const ye=$e.participants&&$e.participants.length>0?$e.participants.length:1;return ke+$e.poolAmount/ye},0),K=(await Fr(_)).filter(ke=>{const $e=ke.date,ye=ke.endDate||ke.date;return $e<=ie&&ye>=Z}),J=K.filter(ke=>ke.type==="absence").reduce((ke,$e)=>ke+cd($e.date,$e.endDate,Z,ie),0),ce=K.filter(ke=>ke.type==="truancy").reduce((ke,$e)=>ke+cd($e.date,$e.endDate,Z,ie),0),ae=(await vr(_)).filter(ke=>ke.date>=H&&ke.date<=S).reduce((ke,$e)=>ke+zo($e.slots),0),le=(await Sp(_))[0]||{userId:_,earnings:0,messages:0,initiatives:0,signals:0,profitableSignals:0,referrals:0,daysOff:0,sickDays:0,vacationDays:0,absenceDays:0,internshipDays:0,poolAmount:0,rating:0,lastUpdated:new Date().toISOString()},ne=(await Dh(void 0,P,U)).filter(ke=>ke.ownerId===_).length,fe={userId:_,earnings:V,messages:le.messages||0,initiatives:le.initiatives||0,signals:le.signals||0,profitableSignals:le.profitableSignals||0,referrals:ne,daysOff:0,sickDays:0,vacationDays:0,absenceDays:J,truancyDays:ce,internshipDays:0,poolAmount:R,lastUpdated:new Date().toISOString()};console.log("Profile.tsx calculateRating call for user:",_,{weeklyHours:ae,weeklyEarnings:B,updatedData:fe});const We=Yp(fe,ae,B,0,0,0),Se=Qp(fe,ae,B,0,0,0);u({...fe,rating:We}),g(Se),v({total:V,pool:R,net:Math.max(0,V-R),weekly:{gross:B,pool:G,net:Math.max(0,B-G)}})}}catch(_){console.error("Error loading profile data:",_)}finally{I(!1)}}},N=()=>{a&&n(),r(),c("/login")};if(!T)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:se,children:"Необходима авторизация"})});const b=(y==null?void 0:y.weekly.net)&&y.weekly.net>=1e4,w=b?"Вывод доступен":"Ожидание порога",j=b?"border-emerald-500/20 bg-emerald-500/10 text-emerald-500":"border-amber-500/20 bg-amber-500/10 text-amber-500",$=b?"Доступно к выводу":"Перенос суммы";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-[#4E6E49]/10 rounded-2xl border border-[#4E6E49]/20 shadow-lg shadow-[#4E6E49]/5 flex items-center justify-center min-w-[80px] min-h-[80px]",children:D?e.jsx("img",{src:D,alt:T==null?void 0:T.name,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-[#4E6E49] to-emerald-600 flex items-center justify-center text-2xl font-black text-white",children:M})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[#4E6E49]",children:"Личный кабинет"}),i()&&e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-amber-500/10 text-amber-500 text-[9px] font-black tracking-widest uppercase border border-amber-500/20",children:"Просмотр"})]}),e.jsx("h1",{className:`text-2xl md:text-4xl font-black tracking-tight ${se}`,children:i()?(C==null?void 0:C.name)||"Пользователь":T.name}),e.jsx("p",{className:`text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"AVA - Team — Личный кабинет. Ваши данные и показатели."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ws,{to:"/rules",className:`flex items-center gap-2 px-5 py-2.5 rounded-xl border transition-all font-bold text-sm ${s==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-white":"bg-white border-gray-200 hover:bg-gray-50 text-gray-900 shadow-sm"}`,children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsx("span",{children:"Правила"})]}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-rose-500 hover:bg-rose-600 text-white font-bold text-sm transition-all shadow-lg shadow-rose-500/20 hover:scale-105 active:scale-95",children:[e.jsx(bd,{className:"w-4 h-4"}),e.jsx("span",{children:"Выйти"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Рейтинг",value:h?`${h.rating.toFixed(1)}`:"—",note:h!=null&&h.rating&&h.rating>=50?"В команде":h!=null&&h.rating&&h.rating>=30?"Риск исключения":"Не в команде",icon:e.jsx(lt,{className:"w-5 h-5 text-amber-400"}),bgClass:"bg-amber-500/5",borderClass:"border-amber-500/10"},{label:"Недельный доход",value:y?`${Math.round(y.weekly.net).toLocaleString()} ₽`:"0 ₽",note:y!=null&&y.weekly.net&&y.weekly.net>=1e4?"Доступно к выводу":"Ниже порога",icon:e.jsx(ja,{className:"w-5 h-5 text-emerald-400"}),bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/10"},{label:"Заработок (месяц)",value:y?`${Math.round(y.total).toLocaleString()} ₽`:"0 ₽",note:"За последние 30 дней",icon:e.jsx(Br,{className:"w-5 h-5 text-green-400"}),bgClass:"bg-green-500/5",borderClass:"border-green-500/10"},{label:"Статус аккаунта",value:a?"Admin":"Member",note:"Постоянный доступ",icon:e.jsx(jt,{className:"w-5 h-5 text-purple-400"}),bgClass:"bg-purple-500/5",borderClass:"border-purple-500/10"}].map((_,k)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-xl group ${s==="dark"?`${_.bgClass} ${_.borderClass} hover:border-white/20`:"bg-white border-gray-100 hover:border-[#4E6E49]/20 shadow-sm"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:_.label}),e.jsx("div",{className:`p-2 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:_.icon})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:`text-2xl md:text-3xl font-black tracking-tight ${s==="dark"?"text-white":"text-gray-900"}`,children:_.value}),e.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:_.note})]})]},k))})]}),E?e.jsx("div",{className:`rounded-xl p-8 text-center ${s==="dark"?"bg-white/5 text-white":"bg-white text-gray-800"} shadow`,children:"Загрузка..."}):e.jsx("div",{className:"space-y-5",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-stretch",children:[h&&m&&e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"border-white/5 bg-[#1a1a1a]":"border-gray-200 bg-white"} shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${s==="dark"?"bg-purple-500/10 text-purple-400":"bg-purple-50 text-purple-600"}`,children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-sm font-black uppercase tracking-widest ${s==="dark"?"text-white":"text-gray-900"}`,children:"Рейтинг"}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Детальная оценка"})]})]}),e.jsxs("div",{className:"px-3 py-1.5 rounded-full text-[10px] font-black tracking-widest border border-purple-500/20 bg-purple-500/5 text-purple-500",children:[h.rating.toFixed(1)," баллов"]})]}),e.jsxs("div",{className:`p-5 rounded-xl border ${s==="dark"?"border-white/5 bg-black/20":"border-gray-100 bg-gray-50"} mb-6`,children:[e.jsx("div",{className:`text-4xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:h.rating.toFixed(1)}),e.jsx("p",{className:`text-xs mt-1 ${s==="dark"?"text-gray-400":"text-gray-600"} font-medium`,children:h.rating>=80?"Эталон":h.rating>=50?"В команде":h.rating>=30?"Риск исключения":"Не в команде"}),e.jsx("p",{className:"text-[10px] mt-2 text-gray-500",children:"Минимум для нахождения в команде: 50 баллов"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[{label:"Часы",value:`${m.weeklyHours.toFixed(1)} ч/нед`,pts:m.weeklyHoursPoints,max:15,icon:e.jsx(wt,{className:"w-4 h-4"}),color:s==="dark"?"bg-blue-500/5 border-blue-500/10 text-blue-400":"bg-blue-50 border-blue-100 text-blue-600"},{label:"Заработок",value:`${Math.round(m.weeklyEarnings).toLocaleString()} ₽`,pts:m.weeklyEarningsPoints,max:30,icon:e.jsx(Br,{className:"w-4 h-4"}),color:s==="dark"?"bg-emerald-500/5 border-emerald-500/10 text-emerald-400":"bg-emerald-50 border-emerald-100 text-emerald-600"},{label:"Рефералы",value:`${m.referrals}`,pts:m.referralsPoints,max:20,icon:e.jsx(yt,{className:"w-4 h-4"}),color:s==="dark"?"bg-purple-500/5 border-purple-500/10 text-purple-400":"bg-purple-50 border-purple-100 text-purple-600"},{label:"Инициативы",value:`${m.initiatives}`,pts:m.initiativesPoints,max:15,icon:e.jsx(qs,{className:"w-4 h-4"}),color:s==="dark"?"bg-indigo-500/5 border-indigo-500/10 text-indigo-400":"bg-indigo-50 border-indigo-100 text-indigo-600"},{label:"Отсутствия",value:`${m.absenceDays} дн`,pts:m.absenceDaysPoints,max:10,icon:e.jsx(Rt,{className:"w-4 h-4"}),color:m.absenceDaysPoints<0?s==="dark"?"bg-red-500/5 border-red-500/10 text-red-400":"bg-red-50 border-red-100 text-red-600":s==="dark"?"bg-amber-500/5 border-amber-500/10 text-amber-500":"bg-amber-50 border-amber-100 text-amber-600"},{label:"Прогулы",value:`${m.truancyDays} дн`,pts:m.truancyDaysPoints,max:0,icon:e.jsx(Rt,{className:"w-4 h-4"}),color:m.truancyDaysPoints<0?s==="dark"?"bg-red-900/5 border-red-900/10 text-red-900":"bg-red-100 border-red-200 text-red-800":s==="dark"?"bg-green-500/5 border-green-500/10 text-green-400":"bg-green-50 border-green-100 text-green-600"}].map(_=>e.jsxs("div",{className:`p-3 rounded-xl border shadow-sm transition-all hover:scale-[1.02] ${_.color}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[_.icon,e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest opacity-80",children:_.label})]}),_.max>0&&e.jsxs("div",{className:"text-[8px] font-black opacity-60",children:[_.pts>0?"+":"",_.pts,"/",_.max]})]}),e.jsx("div",{className:`text-sm font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:_.value}),_.max>0&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1.5",children:e.jsx("div",{className:`h-full transition-all duration-300 ${_.pts>0?"bg-[#4E6E49]":"bg-gray-400"}`,style:{width:`${Math.min(Math.max(_.pts/_.max*100,0),100)}%`}})})]},_.label))}),e.jsxs("div",{className:`mt-auto p-4 rounded-xl border ${s==="dark"?"border-white/10 bg-white/5":"border-gray-100 bg-gray-50"}`,children:[e.jsxs("h3",{className:`text-sm font-bold ${se} mb-2 flex items-center gap-2`,children:[e.jsx(ls,{className:"w-4 h-4"}),"Как считается рейтинг"]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-300":"text-gray-700"}`,children:"6 параметров: часы работы (неделя), заработок (неделя), рефералы (месяц), инициативы (месяц), отсутствия (месяц), прогулы (месяц). Максимум баллов не ограничен. Минимум 50 баллов для нахождения в команде."})]})]}),y&&e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"border-white/5 bg-[#1a1a1a]":"border-gray-200 bg-white"} shadow`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${s==="dark"?"bg-emerald-500/10 text-emerald-500":"bg-emerald-50 text-emerald-600"}`,children:e.jsx(Br,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-sm font-black uppercase tracking-widest ${s==="dark"?"text-white":"text-gray-900"}`,children:"Мой заработок"}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Суммы с учётом долей"})]})]}),e.jsx("div",{className:`px-3 py-1.5 rounded-full text-[10px] font-black tracking-widest border ${j}`,children:w})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[{label:"Всего заработано",value:y.total,icon:e.jsx(Pe,{className:"w-3 h-3"})},{label:"Отправлено в пул",value:y.pool,icon:e.jsx(Dl,{className:"w-3 h-3"})},{label:"Чистыми",value:y.net,icon:e.jsx(ja,{className:"w-3 h-3"})}].map(_=>e.jsxs("div",{className:`p-4 rounded-xl border shadow-sm ${s==="dark"?"border-white/5 bg-black/20":"border-gray-100 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-70",children:[_.icon,e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:_.label})]}),e.jsxs("p",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:[Math.round(_.value).toLocaleString("ru-RU")," ₽"]})]},_.label))}),e.jsxs("div",{className:`p-5 rounded-xl border ${s==="dark"?"border-white/5 bg-emerald-500/5":"border-emerald-100 bg-emerald-50/50"} flex flex-col gap-4`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-black uppercase tracking-wider ${s==="dark"?"text-emerald-500/80":"text-emerald-700"}`,children:"Активная неделя"}),e.jsx("p",{className:`text-[10px] ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Пн, Ср, Пт, Сб — дни вывода"})]}),e.jsx("span",{className:`text-[9px] font-black tracking-widest px-3 py-1 rounded-full border ${j}`,children:$})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[{label:"Заработано",value:y.weekly.gross},{label:"В пул",value:y.weekly.pool},{label:"Чистыми",value:y.weekly.net}].map(_=>e.jsxs("div",{className:`p-3 rounded-lg border shadow-sm ${s==="dark"?"border-white/5 bg-[#151a21]":"border-gray-100 bg-gray-50"}`,children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest opacity-70",children:_.label}),e.jsxs("p",{className:`text-base font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:[Math.round(_.value).toLocaleString("ru-RU")," ₽"]})]},_.label))}),y.weekly.net<1e4&&e.jsx("p",{className:`text-[10px] font-medium ${s==="dark"?"text-amber-500/80":"text-amber-700"}`,children:"Менее 10 000 ₽ чистыми — вывод недоступен, сумма переносится."})]})]})]})})]})},b3=({onClose:s,onSave:t})=>{const{user:r}=Xe(),{theme:a}=pe(),{isAdmin:n}=kt(),i=a==="dark"?"text-white":"text-gray-900",[l,c]=f.useState("all"),[d,h]=f.useState(oe(new Date,"yyyy-MM-dd")),[u,m]=f.useState(oe(new Date,"yyyy-MM-dd")),[g,y]=f.useState(!1),[v,E]=f.useState(""),[I,C]=f.useState(!1),[T,D]=f.useState(""),[M,se]=f.useState(""),[L,N]=f.useState(!1),[b,w]=f.useState(!0),[j,$]=f.useState(!1),[_,k]=f.useState([]),[H,S]=f.useState(!1),[F,Z]=f.useState(!1),[ie,P]=f.useState(null);Sr(),f.useEffect(()=>{g||m(d)},[g,d]),f.useEffect(()=>{U()},[]);const U=async()=>{if(n){S(!0);try{const R=await dd();k(R)}catch(R){console.error("Error loading restrictions:",R)}finally{S(!1)}}},z=R=>{P(R),c(R.type),h(R.startDate),m(R.endDate||R.startDate),y(!!R.endDate),E(R.startTime||""),C(!!R.startTime),D(R.comment||""),w(R.isActive),$(R.blockFutureDates||!1),Z(!0),se("")},B=async R=>{if(confirm("Вы уверены, что хотите удалить это ограничение?"))try{await m4(R),await U(),se("")}catch(q){console.error("Error deleting restriction:",q),se(q.message||"Ошибка при удалении ограничения")}},G=()=>{P(null),c("all"),h(oe(new Date,"yyyy-MM-dd")),m(oe(new Date,"yyyy-MM-dd")),y(!1),E(""),C(!1),D(""),w(!0),$(!1),Z(!0),se("")},O={slots:"Слоты",dayoff:"Выходные",sick:"Больничные",vacation:"Отпуска",absence:"Отсутствие",truancy:"Прогулы",internship:"Стажировка",all:"Всё"},V=async()=>{if(console.log("handleSave called, isAdmin:",n,"user:",r),!n){se("Только администратор может управлять ограничениями. Активируйте админ режим на странице входа.");return}if(!d){se("Выберите дату начала ограничения");return}if(g&&u&&d>u){se("Дата окончания должна быть позже даты начала");return}try{const R=await dd(!0),q=ie==null?void 0:ie.id;if(R.some(J=>{if(J.id===q)return!1;const ce=new Date(J.startDate),he=J.endDate?new Date(J.endDate):ce,te=new Date(d),ge=!((g&&u?new Date(u):te)<ce||te>he),le=J.type===l||J.type==="all"||l==="all";return ge&&le})){se("Уже существует пересекающееся ограничение для этого типа/периода");return}}catch(R){console.error("Error checking restrictions:",R)}se(""),N(!0);try{const R={type:l,startDate:d,...g&&u!==d&&{endDate:u},...I&&v&&{startTime:v},...j&&{blockFutureDates:j},...T&&{comment:T},createdBy:(r==null?void 0:r.id)||"admin",createdAt:(ie==null?void 0:ie.createdAt)||new Date().toISOString(),isActive:b};ie?await x4(ie.id,R):await u4(R),await U(),Z(!1),t()}catch(R){console.error("Error saving restriction:",R),se(R.message||"Ошибка при сохранении ограничения")}finally{N(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-slate-950/75 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 sm:p-6 touch-manipulation overflow-y-auto",children:e.jsx("div",{className:`w-full max-w-2xl rounded-3xl shadow-[0_24px_80px_rgba(0,0,0,0.45)] border ${a==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-gradient-to-br from-white via-slate-50 to-white border-slate-200"} max-h-[90vh] overflow-y-auto`,children:e.jsxs("div",{className:"p-4 sm:p-6 lg:p-7 flex flex-col h-full min-h-0 overflow-y-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 text-xs font-semibold text-orange-600 tracking-tight",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-500/10 text-orange-600 border border-orange-500/30",children:[e.jsx(jt,{className:"w-3 h-3"}),"Управление ограничениями"]})}),e.jsx("h3",{className:`text-2xl sm:text-3xl font-bold ${i}`,children:"Ограничения для команды"}),e.jsx("p",{className:`text-sm ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Запретить участникам создавать определённые записи в указанный период"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`px-3 py-2 rounded-xl border text-xs sm:text-sm ${a==="dark"?"border-white/10 bg-white/5 text-gray-200":"border-slate-200 bg-slate-50 text-slate-700"}`,children:["Админ · Управление ",n?"(активен)":"(не активен)"]}),e.jsx("button",{onClick:s,className:`p-2.5 rounded-full border ${a==="dark"?"border-white/10 text-gray-200 hover:bg-white/5":"border-slate-200 text-slate-600 hover:bg-slate-100"} transition-colors touch-manipulation`,"aria-label":"Закрыть",children:e.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{className:"mt-5 space-y-6 flex-1 min-h-0",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:`text-lg font-semibold ${i}`,children:"Существующие ограничения"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:G,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${F?"bg-orange-500 text-white":a==="dark"?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(os,{className:"w-4 h-4"}),F?"Создать новое":"Создать ограничение"]}),e.jsxs("button",{onClick:async()=>{const R=oe(new Date,"yyyy-MM-dd"),q=await ao("slots",R,"10:00");alert(`Test result: ${q.restricted?"BLOCKED":"ALLOWED"}
${q.reason||"No restrictions"}`)},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-blue-500 text-white hover:bg-blue-600 transition-colors",children:[e.jsx(jt,{className:"w-4 h-4"}),"Тест ограничений"]})]})]}),H?e.jsx("div",{className:`p-6 rounded-xl border ${a==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"} text-center`,children:e.jsx("p",{className:a==="dark"?"text-gray-400":"text-gray-600",children:"Загрузка..."})}):_.length===0?e.jsxs("div",{className:`p-6 rounded-xl border ${a==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"} text-center`,children:[e.jsx(Rt,{className:`w-8 h-8 mx-auto mb-2 ${a==="dark"?"text-gray-400":"text-gray-500"}`}),e.jsx("p",{className:a==="dark"?"text-gray-400":"text-gray-600",children:"Нет активных ограничений"})]}):e.jsx("div",{className:"space-y-3",children:_.map(R=>e.jsx("div",{className:`p-4 rounded-xl border transition-all ${R.isActive?a==="dark"?"border-orange-500/30 bg-orange-500/5":"border-orange-200 bg-orange-50":a==="dark"?"border-gray-600 bg-gray-800/50":"border-gray-300 bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${R.isActive?"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:[R.isActive?e.jsx(Rt,{className:"w-3 h-3"}):e.jsx(jt,{className:"w-3 h-3"}),O[R.type]]}),!R.isActive&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Неактивно"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:i,children:R.endDate?`${oe(R.startDate,"dd.MM.yyyy")} - ${oe(R.endDate,"dd.MM.yyyy")}`:oe(R.startDate,"dd.MM.yyyy")})]}),R.startTime&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:a==="dark"?"text-gray-300":"text-gray-700",children:["С ",R.startTime]})]}),R.blockFutureDates&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:`text-xs ${a==="dark"?"text-amber-300":"text-amber-700"}`,children:"Блокировка следующего дня после наступления времени ограничения"})]}),R.comment&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400 italic",children:R.comment})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[e.jsx("button",{onClick:()=>z(R),className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Редактировать",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B(R.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Удалить",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]})},R.id))})]}),F&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:`text-lg font-semibold mb-4 ${i}`,children:ie?"Редактировать ограничение":"Создать новое ограничение"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-3 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Что запретить"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Object.entries(O).map(([R,q])=>e.jsxs("label",{className:`relative flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${l===R?"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/30 dark:text-orange-100 dark:border-orange-800 ring-2 ring-orange-500/50 shadow-lg":a==="dark"?"border-white/10 bg-white/5 text-gray-200 hover:border-white/30":"border-slate-200 bg-white text-gray-800 hover:border-slate-300"}`,children:[e.jsx("input",{type:"radio",value:R,checked:l===R,onChange:K=>c(K.target.value),className:"hidden"}),e.jsx("span",{className:`text-sm font-semibold ${l===R?"text-orange-700 dark:text-orange-200":""}`,children:q})]},R))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-3 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Период ограничения"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!g,onChange:()=>y(!1),className:`w-4 h-4 rounded border-2 ${a==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:"Один день"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"radio",checked:g,onChange:()=>y(!0),className:`w-4 h-4 rounded border-2 ${a==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:"Диапазон дат"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Дата начала"}),e.jsx("input",{type:"date",value:d,onChange:R=>h(R.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]}),g&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Дата окончания"}),e.jsx("input",{type:"date",value:u,min:d,onChange:R=>m(R.target.value),className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-3 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Временное ограничение"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:R=>C(R.target.checked),className:`w-4 h-4 rounded border-2 ${a==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:"Запретить начиная с определённого времени"})]}),I&&e.jsxs("div",{className:"ml-6",children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Время начала ограничения"}),e.jsx("input",{type:"time",value:v,onChange:R=>E(R.target.value),className:`w-full max-w-xs px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs sm:text-sm font-medium mb-2 ${a==="dark"?"text-gray-300":"text-gray-700"}`,children:"Комментарий"}),e.jsx("textarea",{value:T,onChange:R=>D(R.target.value),rows:3,className:`w-full px-3 sm:px-4 py-2 sm:py-2.5 text-sm sm:text-base rounded-lg border touch-manipulation resize-y ${a==="dark"?"bg-gray-700 border-gray-800 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,placeholder:"Причина ограничения (необязательно)"})]}),ie&&e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:R=>w(R.target.checked),className:`w-4 h-4 rounded border-2 ${a==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:"Ограничение активно"})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:R=>$(R.target.checked),className:`w-4 h-4 rounded border-2 ${a==="dark"?"border-gray-800 bg-gray-700 checked:bg-[#4E6E49] checked:border-[#4E6E49]":"border-gray-300 bg-white checked:bg-[#4E6E49] checked:border-[#4E6E49]"} focus:ring-2 focus:ring-[#4E6E49] cursor-pointer touch-manipulation`}),e.jsx("span",{className:a==="dark"?"text-gray-200":"text-gray-700",children:"После наступления даты/времени ограничения блокировать создание записей только на следующий день"})]}),j&&e.jsx("p",{className:`mt-2 text-xs ${a==="dark"?"text-gray-400":"text-gray-600"}`,children:"Пример: после 14.12 21:00 нельзя будет создавать слоты/отпуска только на 15.12 (следующий день)"})]}),M&&e.jsx("div",{className:"p-3 bg-red-500 text-white rounded-lg text-sm",children:M}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[e.jsx("button",{onClick:V,disabled:L,className:"flex-1 px-4 py-2.5 sm:py-2 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 disabled:active:scale-100",children:L?"Сохранение...":ie?"Сохранить изменения":"Создать ограничение"}),e.jsx("button",{onClick:s,className:`px-4 py-2.5 sm:py-2 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base font-medium touch-manipulation active:scale-95 ${a==="dark"?"bg-gray-700 hover:bg-gray-600 active:bg-gray-500":"bg-gray-200 hover:bg-gray-300 active:bg-gray-400"}`,children:"Отмена"})]})]})]})]})})})},f3=({onClose:s})=>{const{theme:t}=pe(),{user:r}=Xe(),{isAdmin:a}=kt();Sr();const[n,i]=f.useState([]),[l,c]=f.useState(!0),[d,h]=f.useState(!1),[u,m]=f.useState(""),[g,y]=f.useState(null),[v,E]=f.useState(!1),[I,C]=f.useState({userId:"",restrictedUserId:"",reason:"",isActive:!0});f.useEffect(()=>{T()},[]);const T=async()=>{try{const j=await Rp();i(j)}catch(j){console.error("Error loading conflicts:",j)}finally{c(!1)}},D=async j=>{if(j.preventDefault(),!r&&!a){m("Пользователь не найден (необходима авторизация)");return}h(!0),m("");try{const $={...I,createdBy:(r==null?void 0:r.id)||"admin",createdAt:new Date().toISOString()};g?await lx(g.id,$):await I4($),await T(),N(),E(!1),y(null)}catch($){console.error("Error saving conflict:",$),m($.message||"Ошибка при сохранении конфликта")}finally{h(!1)}},M=j=>{y(j),C({userId:j.userId,restrictedUserId:j.restrictedUserId,reason:j.reason||"",isActive:j.isActive}),m(""),E(!0)},se=async j=>{if(confirm("Удалить конфликт?"))try{await C4(j),await T()}catch($){console.error("Error deleting conflict:",$)}},L=async j=>{try{await lx(j.id,{isActive:!j.isActive}),await T()}catch($){console.error("Error toggling conflict status:",$)}},N=()=>{m(""),C({userId:"",restrictedUserId:"",reason:"",isActive:!0})},b=j=>{const $=Fe.find(_=>_.id===j);return($==null?void 0:$.name)||j},w=Fe.filter(j=>j.id!==I.userId);return l?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-[#4E6E49] border-t-transparent"})}):e.jsx("div",{className:"fixed inset-0 bg-slate-950/75 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 overflow-y-auto touch-manipulation",children:e.jsxs("div",{className:`w-full max-w-4xl rounded-3xl shadow-[0_24px_80px_rgba(0,0,0,0.45)] border ${t==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-gradient-to-br from-white via-slate-50 to-white border-slate-200"} max-h-[90vh] overflow-hidden flex flex-col`,children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-red-500/10 text-red-500",children:e.jsx(Nd,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold ${t==="dark"?"text-white":"text-gray-900"}`,children:"Управление конфликтами пользователей"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Настройте ограничения на совместную работу пользователей"})]})]}),e.jsx("button",{onClick:s,className:`p-2 rounded-full border ${t==="dark"?"border-white/10 text-gray-200 hover:bg-white/5":"border-slate-200 text-slate-600 hover:bg-slate-100"} transition-colors`,children:e.jsx(it,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[(v||g)&&e.jsxs("div",{className:`rounded-2xl border p-6 ${t==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-slate-50"}`,children:[e.jsx("h4",{className:`text-lg font-semibold mb-4 ${t==="dark"?"text-white":"text-gray-900"}`,children:g?"Редактировать конфликт":"Добавить конфликт"}),u&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 flex items-start gap-3",children:[e.jsx(Qt,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-500",children:u})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Пользователь"}),e.jsxs("select",{value:I.userId,onChange:j=>C($=>({...$,userId:j.target.value})),className:`w-full px-3 py-2 rounded-lg border ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,required:!0,children:[e.jsx("option",{value:"",children:"Выберите пользователя"}),Fe.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Запрещено работать с"}),e.jsxs("select",{value:I.restrictedUserId,onChange:j=>C($=>({...$,restrictedUserId:j.target.value})),className:`w-full px-3 py-2 rounded-lg border ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,required:!0,children:[e.jsx("option",{value:"",children:"Выберите пользователя"}),w.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Причина (опционально)"}),e.jsx("textarea",{value:I.reason,onChange:j=>C($=>({...$,reason:j.target.value})),className:`w-full px-3 py-2 rounded-lg border resize-none ${t==="dark"?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#4E6E49]`,rows:3,placeholder:"Объяснение ограничения..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:I.isActive,onChange:j=>C($=>({...$,isActive:j.target.checked})),className:"rounded border-gray-300 text-[#4E6E49] focus:ring-[#4E6E49]"}),e.jsx("label",{htmlFor:"isActive",className:`text-sm ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Активно"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-[#4E6E49] hover:bg-[#4E6E49] text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:d?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Ko,{className:"w-4 h-4"}),g?"Сохранить":"Добавить"]})}),e.jsx("button",{type:"button",onClick:()=>{N(),E(!1),y(null)},className:`px-4 py-2 rounded-lg border ${t==="dark"?"border-gray-600 text-gray-200 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"} transition-colors`,children:"Отмена"})]})]})]}),e.jsxs("div",{className:`rounded-2xl border ${t==="dark"?"border-white/10 bg-white/5":"border-slate-200 bg-white"}`,children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:`text-lg font-semibold ${t==="dark"?"text-white":"text-gray-900"}`,children:["Активные конфликты (",n.filter(j=>j.isActive).length,")"]}),e.jsxs("button",{onClick:()=>{m(""),E(!0)},className:"px-4 py-2 bg-[#4E6E49] hover:bg-[#4E6E49] text-white rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Добавить конфликт"]})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nd,{className:`w-12 h-12 mx-auto mb-4 ${t==="dark"?"text-gray-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:"Нет настроенных конфликтов"})]}):e.jsx("div",{className:"space-y-4",children:n.map(j=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border ${j.isActive?t==="dark"?"border-red-500/30 bg-red-500/10":"border-red-200 bg-red-50":t==="dark"?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:[b(j.userId)," ↔ ",b(j.restrictedUserId)]}),j.reason&&e.jsx("div",{className:`text-sm mt-1 ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:j.reason}),e.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:["Создано: ",new Date(j.createdAt).toLocaleDateString("ru-RU")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(j),className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${j.isActive?"bg-red-500 text-white":t==="dark"?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"}`,children:j.isActive?"Активен":"Неактивен"}),e.jsx("button",{onClick:()=>M(j),className:`p-2 rounded-lg ${t==="dark"?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-100 text-gray-600"} transition-colors`,children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(j.id),className:"p-2 rounded-lg text-red-500 hover:bg-red-500 hover:text-white transition-colors",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]},j.id))})})]})]})})})]})})},y3=[{id:"global",label:"Глобальные",features:[{value:"all",label:"Весь сайт",description:"Полная блокировка доступа ко всему сайту"}]},{id:"tools",label:"Раздел Tools (Инструменты)",features:[{value:"tools",label:"Весь раздел Tools",description:"Скрыть весь раздел из меню и запретить вход"},{value:"tools_kontur",label:"Контур",description:"Заблокировать доступ к блоку Контур"},{value:"tools_events",label:"События",description:"Заблокировать доступ к разделу Событий"},{value:"ava_info",label:"INFO",description:"Заблокировать раздел информации (INFO)"},{value:"tools_kontur_memecoins",label:"Вкладка Мемкоины",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_polymarket",label:"Вкладка Polymarket",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_nft",label:"Вкладка NFT",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_staking",label:"Вкладка Стейкинг",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_spot",label:"Вкладка Спот",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_futures",label:"Вкладка Фьючерсы",description:"Заблокировать вкладку в Контуре"},{value:"tools_kontur_airdrop",label:"Вкладка AirDrop",description:"Заблокировать вкладка в Контуре"},{value:"tools_kontur_other",label:"Вкладка Прочее",description:"Заблокировать вкладку в Контуре"},{value:"tools_strategies_view",label:"Просмотр стратегий",description:"Скрыть блок стратегий на страницах"},{value:"tools_items_view",label:"Просмотр инструментов",description:"Скрыть ссылки на инструменты"}]},{id:"hub",label:"HUB (Сигналы)",features:[{value:"ava_hub",label:"Весь задел HUB",description:"Полная блокировка раздела HUB"},{value:"hub_signals_view",label:"Просмотр сигналов",description:"Запретить просмотр списка сигналов"},{value:"hub_signals_add",label:"Добавление сигналов",description:"Запретить создавать любые сигналы"},{value:"hub_signals_cat_memecoins",label:"Сигналы: Мемкоины",description:"Запретить работу с мемкоинами в HUB"},{value:"hub_signals_cat_polymarket",label:"Сигналы: Polymarket",description:"Запретить работу с Polymarket в HUB"},{value:"hub_signals_cat_nft",label:"Сигналы: NFT",description:"Запретить работу с NFT в HUB"},{value:"hub_signals_cat_spot",label:"Сигналы: Спот",description:"Запретить работу со Спотом в HUB"},{value:"hub_signals_cat_futures",label:"Сигналы: Фьючерсы",description:"Запретить работу с Фьючерсами в HUB"},{value:"hub_signals_cat_staking",label:"Сигналы: Стейкинг",description:"Запретить работу со Стейкингом в HUB"},{value:"hub_signals_cat_airdrop",label:"Сигналы: AirDrop",description:"Запретить работу с AirDrop в HUB"}]},{id:"schedule",label:"Lead (Расписание)",features:[{value:"ava_schedule",label:"Весь раздел Lead",description:"Полная блокировка раздела Расписания"},{value:"schedule_view",label:"Просмотр расписания",description:"Запретить видеть сетку и таблицу"},{value:"schedule_stats_view",label:"Карточки статистики",description:"Скрыть блоки статистики расписания"},{value:"schedule_add_slot",label:"Добавление слотов",description:"Запретить бронирование времени"},{value:"schedule_status_edit",label:"Управление статусами",description:"Запретить ставить отсутствие/отпуск"},{value:"schedule_slot_delete",label:"Удаление записей",description:"Запретить удалять слоты/статусы"}]},{id:"tasks",label:"Tasks (Задачи)",features:[{value:"ava_tasks",label:"Весь раздел Tasks",description:"Блокировать доступ к управлению задачами"},{value:"tasks_view",label:"Просмотр задач",description:"Запретить видеть список задач"},{value:"tasks_add",label:"Создание задач",description:"Запретить добавлять новые задачи"}]},{id:"profit",label:"Profit (Доходы)",features:[{value:"ava_profit",label:"Весь раздел Profit",description:"Полная блокировка раздела доходов"},{value:"profit_add",label:"Добавление профита",description:"Запретить вносить заработок"},{value:"profit_stats_view",label:"Статистика и доли",description:"Скрыть графики и детализацию доходов"},{value:"profit_insights_view",label:"Инсайты эффективности",description:"Скрыть аналитику эффективности"},{value:"profit_leaders_view",label:"Лидеры по доходу",description:"Скрыть топ участников"},{value:"profit_history_view",label:"История выплат",description:"Скрыть историю накоплений и выплат"},{value:"profit_cat_memecoins",label:"Категория: Мемкоины",description:"Запретить доход по мемкоинам"},{value:"profit_cat_polymarket",label:"Категория: Polymarket",description:"Запретить доход по Polymarket"},{value:"profit_cat_nft",label:"Категория: NFT",description:"Запретить доход по NFT"},{value:"profit_cat_spot",label:"Категория: Спот",description:"Запретить доход по Споту"},{value:"profit_cat_futures",label:"Категория: Фьючерсы",description:"Запретить доход по Фьючерсам"},{value:"profit_cat_staking",label:"Категория: Стейкинг",description:"Запретить доход по Стейкингом"},{value:"profit_cat_airdrop",label:"Категория: AirDrop",description:"Запретить доход по AirDrop"},{value:"profit_cat_other",label:"Категория: Прочее",description:"Запретить доход по прочим категориям"},{value:"profit_wallet_general",label:"Кошелек: Общий",description:"Запретить выбор типа General"},{value:"profit_wallet_personal",label:"Кошелек: Личный",description:"Запретить выбор типа Personal"},{value:"profit_wallet_pool",label:"Кошелек: Пул",description:"Запретить выбор типа Пул"}]},{id:"rating",label:"Score (Скор)",features:[{value:"ava_rating",label:"Весь раздел Score",description:"Блокировать доступ к рейтингу"},{value:"rating_self_view",label:"Своя карточка",description:"Запретить видеть свой рейтинг"},{value:"rating_others_view",label:"Чужие карточки",description:"Запретить видеть рейтинг других"}]},{id:"other",label:"Прочее",features:[{value:"ava_referrals",label:"Referrals",description:"Блокировать раздел рефералов"},{value:"profile",label:"Профиль",description:"Ограничить редактирование профиля"}]}],v3=({onClose:s})=>{const{theme:t}=pe(),{user:r}=Xe(),{isAdmin:a}=kt();Sr();const[n,i]=f.useState([]),[l,c]=f.useState(!0),[d,h]=f.useState(!1),[u,m]=f.useState(""),[g,y]=f.useState(null),[v,E]=f.useState(!1),[I,C]=f.useState(new Set(["global","tools"])),[T,D]=f.useState({targetType:"single",userId:"",userIds:[],reason:"",expiresAt:"",blockFeatures:[],isActive:!0});f.useEffect(()=>{M()},[]);const M=async()=>{try{c(!0);const S=await Pp();i(S)}catch(S){console.error("Error loading blocks:",S)}finally{c(!1)}},se=async S=>{if(S.preventDefault(),!r&&!a){m("Необходима авторизация");return}if(T.targetType==="single"&&!T.userId){m("Выберите пользователя для блокировки");return}if(T.targetType==="subset"&&T.userIds.length===0){m("Выберите хотя бы одного пользователя");return}h(!0),m("");try{const F={targetType:T.targetType,userId:T.targetType==="single"?T.userId:"",userIds:T.targetType==="subset"?T.userIds:[],reason:T.reason||"Администратор не указал причину",blockFeatures:T.blockFeatures,isActive:T.isActive,createdBy:(r==null?void 0:r.id)||"admin",createdAt:new Date().toISOString(),expiresAt:T.expiresAt||""};g?await xd(g.id,F):await D4(F),await M(),_(),E(!1),y(null)}catch(F){console.error("Error saving block:",F),m(F.message||"Ошибка сохранения")}finally{h(!1)}},L=S=>{y(S),D({targetType:S.targetType||(S.userId?"single":"all"),userId:S.userId||"",userIds:S.userIds||[],reason:S.reason==="Администратор не указал причину"?"":S.reason,expiresAt:S.expiresAt||"",blockFeatures:S.blockFeatures,isActive:S.isActive}),m(""),E(!0)},N=async S=>{if(confirm("Удалить эту блокировку?"))try{await R4(S),await M()}catch(F){console.error("Error deleting block:",F)}},b=async S=>{try{await xd(S.id,{isActive:!S.isActive}),await M()}catch(F){console.error("Error toggling block status:",F)}},w=S=>{D(F=>({...F,blockFeatures:F.blockFeatures.includes(S)?F.blockFeatures.filter(Z=>Z!==S):[...F.blockFeatures,S]}))},j=S=>{D(F=>({...F,userIds:F.userIds.includes(S)?F.userIds.filter(Z=>Z!==S):[...F.userIds,S]}))},$=S=>{C(F=>{const Z=new Set(F);return Z.has(S)?Z.delete(S):Z.add(S),Z})},_=()=>{m(""),D({targetType:"single",userId:"",userIds:[],reason:"",expiresAt:"",blockFeatures:[],isActive:!0})},k=S=>{var Z;if(S.targetType==="all")return"Все участники";if(S.targetType==="subset")return`Группа (${((Z=S.userIds)==null?void 0:Z.length)||0} чел.)`;const F=Fe.find(ie=>ie.id===S.userId);return(F==null?void 0:F.name)||"Пользователь"},H=S=>S?new Date(S)<new Date:!1;return e.jsx("div",{className:"fixed inset-0 bg-slate-950/75 backdrop-blur-xl flex items-start sm:items-center justify-center z-[70] p-4 overflow-y-auto",children:e.jsxs("div",{className:`w-full max-w-5xl rounded-3xl shadow-2xl border ${t==="dark"?"bg-[#0c1320] border-white/10":"bg-white border-slate-200"} max-h-[95vh] overflow-hidden flex flex-col`,children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-red-500/10 flex items-center justify-center text-red-500",children:e.jsx(Yo,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:"Управление доступом"}),e.jsx("p",{className:`text-sm ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:"Гибкая блокировка участников и функционала"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:e.jsx(it,{className:"w-6 h-6 text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:l?e.jsx("div",{className:"flex items-center justify-center p-20",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-red-500/20 border-t-red-500"})}):e.jsxs(e.Fragment,{children:[(v||g)&&e.jsxs("div",{className:`rounded-2xl border p-8 ${t==="dark"?"bg-white/5 border-white/10":"bg-slate-50 border-slate-200"} animate-in fade-in slide-in-from-top-4 duration-300`,children:[e.jsx("h4",{className:`text-lg font-black mb-6 ${t==="dark"?"text-white":"text-gray-900"}`,children:g?"Изменить параметры блока":"Новая блокировка"}),e.jsxs("form",{onSubmit:se,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Кого блокируем?"}),e.jsx("div",{className:"flex gap-2 p-1 bg-black/20 rounded-xl",children:[{id:"single",label:"Участник",icon:dr},{id:"subset",label:"Определенных",icon:yt},{id:"all",label:"Всех",icon:jt}].map(S=>e.jsxs("button",{type:"button",onClick:()=>D(F=>({...F,targetType:S.id})),className:`flex-1 flex items-center justify-center gap-2 py-2 pr-3 pl-2 rounded-lg text-xs font-bold transition-all ${T.targetType===S.id?"bg-red-500 text-white shadow-lg":"text-gray-500 hover:text-gray-300"}`,children:[e.jsx(S.icon,{className:"w-4 h-4"}),e.jsx("span",{children:S.label})]},S.id))}),T.targetType==="single"&&e.jsxs("select",{value:T.userId,onChange:S=>D(F=>({...F,userId:S.target.value})),className:`w-full px-4 py-3 rounded-xl border ${t==="dark"?"bg-slate-900 border-white/10 text-white":"bg-white border-gray-200"} focus:ring-2 focus:ring-red-500 outline-none`,children:[e.jsx("option",{value:"",children:"Выберите участника..."}),Fe.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]}),T.targetType==="subset"&&e.jsx("div",{className:`grid grid-cols-2 gap-2 p-3 rounded-xl border ${t==="dark"?"bg-slate-900 border-white/10":"bg-white border-gray-200"}`,children:Fe.map(S=>e.jsxs("button",{type:"button",onClick:()=>j(S.id),className:`flex items-center gap-3 p-2 rounded-lg text-xs font-medium transition-all ${T.userIds.includes(S.id)?"bg-red-500/20 text-red-500":"text-gray-500 hover:bg-white/5"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${T.userIds.includes(S.id)?"bg-red-500 border-red-500":"border-gray-600"}`,children:T.userIds.includes(S.id)&&e.jsx(xr,{className:"w-3 h-3 text-white"})}),S.name]},S.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Причина и сроки"}),e.jsx("textarea",{value:T.reason,onChange:S=>D(F=>({...F,reason:S.target.value})),placeholder:"Администратор не указал причину...",className:`w-full px-4 py-3 rounded-xl border h-[120px] resize-none ${t==="dark"?"bg-slate-900 border-white/10 text-white":"bg-white border-gray-200"} focus:ring-2 focus:ring-red-500 outline-none`}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"datetime-local",value:T.expiresAt,onChange:S=>D(F=>({...F,expiresAt:S.target.value})),className:`w-full px-4 py-3 rounded-xl border ${t==="dark"?"bg-slate-900 border-white/10 text-white":"bg-white border-gray-200"} focus:ring-2 focus:ring-red-500 outline-none text-sm`}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-1 ml-1",children:"Пустое поле = Навсегда"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:T.isActive,onChange:S=>D(F=>({...F,isActive:S.target.checked})),className:"sr-only"}),e.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${T.isActive?"bg-green-500":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${T.isActive?"left-6":"left-1"}`})})]}),e.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Активна"})]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsx("label",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Что именно блокируем?"}),e.jsx("div",{className:"space-y-3",children:y3.map(S=>e.jsxs("div",{className:`rounded-xl border ${t==="dark"?"border-white/5 bg-black/20":"border-gray-200 bg-white"}`,children:[e.jsxs("button",{type:"button",onClick:()=>$(S.id),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h5",{className:`font-bold text-sm ${t==="dark"?"text-gray-200":"text-gray-700"}`,children:S.label}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/5 text-gray-500",children:[S.features.filter(F=>T.blockFeatures.includes(F.value)).length," выбрано"]})]}),I.has(S.id)?e.jsx(st,{className:"w-4 h-4 text-gray-500"}):e.jsx(Dn,{className:"w-4 h-4 text-gray-500"})]}),I.has(S.id)&&e.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 border-t border-white/5",children:S.features.map(F=>e.jsxs("label",{className:`flex items-start gap-4 p-3 rounded-xl border cursor-pointer transition-all ${T.blockFeatures.includes(F.value)?"border-red-500/50 bg-red-500/10":"border-white/5 hover:bg-white/5"}`,children:[e.jsx("input",{type:"checkbox",checked:T.blockFeatures.includes(F.value),onChange:()=>w(F.value),className:"mt-1 rounded border-gray-600 text-red-500 focus:ring-red-500 bg-transparent"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-xs font-bold ${T.blockFeatures.includes(F.value)?"text-white":"text-gray-400"}`,children:F.label}),e.jsx("p",{className:"text-[10px] text-gray-500 leading-tight mt-0.5",children:F.description})]})]},F.value))})]},S.id))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{_(),E(!1),y(null)},className:"px-6 py-3 rounded-xl border border-white/10 text-gray-400 font-bold hover:bg-white/5 transition-all text-sm",children:"Отмена"}),e.jsx("button",{type:"submit",disabled:d||T.blockFeatures.length===0,className:"px-10 py-3 rounded-xl bg-red-500 hover:bg-red-600 text-white font-black transition-all flex items-center justify-center gap-2 min-w-[200px] shadow-lg shadow-red-500/20 disabled:opacity-50",children:d?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/20 border-t-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ko,{className:"w-4 h-4"})," ",e.jsx("span",{children:g?"Сохранить изменения":"Подтвердить блокировку"})]})})]}),u&&e.jsx("p",{className:"text-sm text-red-500 text-center font-bold bg-red-500/10 p-3 rounded-xl border border-red-500/20",children:u})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("h4",{className:`text-lg font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:"История и активные блоки"}),!v&&!g&&e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-red-500 hover:bg-red-600 text-white text-xs font-black shadow-lg shadow-red-500/20 transition-all",children:[e.jsx(os,{className:"w-4 h-4"})," Добавить блок"]})]}),n.length===0?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(jt,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Нет активных или прошлых блокировок"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:n.map(S=>e.jsxs("div",{className:`group relative p-6 rounded-2xl border transition-all ${S.isActive&&!H(S.expiresAt)?"bg-red-500/5 border-red-500/30":"bg-white/2 border-white/5 grayscale opacity-60"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${S.isActive&&!H(S.expiresAt)?"bg-red-500 text-white":"bg-gray-700 text-white"}`,children:S.targetType==="single"?e.jsx(dr,{className:"w-5 h-5"}):e.jsx(yt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:k(S)}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:S.isActive&&!H(S.expiresAt)?"Активна":"Неактивна"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>L(S),className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(S.id),className:"p-2 hover:bg-red-500/10 rounded-lg text-red-500 transition-colors",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:`text-sm leading-relaxed ${t==="dark"?"text-gray-300":"text-gray-600"}`,children:S.reason}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[S.blockFeatures.slice(0,3).map(F=>e.jsx("span",{className:"text-[9px] font-black uppercase bg-white/5 px-2 py-0.5 rounded text-gray-500",children:F},F)),S.blockFeatures.length>3&&e.jsxs("span",{className:"text-[9px] font-black uppercase bg-white/5 px-2 py-0.5 rounded text-gray-500",children:["+",S.blockFeatures.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gray-500 font-bold",children:[e.jsx(wt,{className:"w-3 h-3"}),e.jsx("span",{children:S.expiresAt?`До ${new Date(S.expiresAt).toLocaleDateString("ru-RU")}`:"Навсегда"})]}),e.jsx("button",{onClick:()=>b(S),className:`text-[10px] font-black px-3 py-1 rounded-lg transition-all ${S.isActive&&!H(S.expiresAt)?"bg-green-500/10 text-green-500":"bg-white/5 text-gray-400"}`,children:S.isActive?"Выключить":"Включить"})]})]})]},S.id))})]})]})})]})})},j3=()=>{const{theme:s}=pe(),{isAdmin:t}=kt(),[r,a]=f.useState(!1),[n,i]=f.useState(!1),[l,c]=f.useState(!1),d=s==="dark"?"text-white":"text-gray-900",h=s==="dark"?"text-gray-400":"text-gray-600",u=s==="dark"?"bg-[#151a21]/50":"bg-white",m=s==="dark"?"border-white/10":"border-gray-200";if(!t)return e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(As,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${s==="dark"?"text-white":"text-gray-900"}`,children:"Доступ ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"У вас нет прав для доступа к панели управления администрированием."})]});const g=[{id:"restrictions",title:"Ограничения",description:"Управление запретами на создание слотов, отгулов и больничных для участников.",icon:e.jsx(sr,{className:"w-8 h-8 text-orange-500"}),action:()=>a(!0),color:"orange",badge:"Rules"},{id:"conflicts",title:"Конфликты",description:"Проверка пересечений графиков и выявление потенциальных проблем в расписании.",icon:e.jsx(Rt,{className:"w-8 h-8 text-amber-500"}),action:()=>i(!0),color:"amber",badge:"Sync"},{id:"access",title:"Блокировки",description:"Ограничение доступа к конкретным разделам и функциям панели для отдельных пользователей.",icon:e.jsx(Yo,{className:"w-8 h-8 text-rose-500"}),action:()=>c(!0),color:"rose",badge:"Access"}];return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-[#4E6E49]/10 rounded-2xl border border-[#4E6E49]/20",children:e.jsx(jt,{className:"w-6 h-6 text-[#4E6E49]"})}),e.jsx("h1",{className:`text-2xl md:text-4xl font-black tracking-tight ${d}`,children:"Admin Controls"})]}),e.jsx("p",{className:`text-sm md:text-base font-medium ${h} max-w-2xl`,children:"Центральная панель управления безопасностью и бизнес-логикой AVA - Team. Настройте ограничения, проверьте конфликты или управляйте доступом участников."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(y=>e.jsxs("button",{onClick:y.action,className:`group relative flex flex-col items-start p-8 rounded-[2.5rem] border text-left transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl ${u} ${m} hover:border-[#4E6E49]/30 overflow-hidden`,children:[e.jsx("div",{className:`absolute -right-8 -top-8 w-32 h-32 blur-3xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 bg-${y.color}-500`}),e.jsx("div",{className:`mb-6 p-4 rounded-3xl transition-transform duration-500 group-hover:scale-110 group-hover:rotate-3 ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:y.icon}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-black uppercase tracking-widest ${s==="dark"?"bg-white/10 text-gray-400":"bg-gray-100 text-gray-500"}`,children:y.badge}),e.jsx("div",{className:`w-1 h-1 rounded-full bg-${y.color}-500 animate-pulse`})]}),e.jsx("h3",{className:`text-xl font-black tracking-tight ${d}`,children:y.title}),e.jsx("p",{className:`text-sm leading-relaxed ${h} opacity-80 group-hover:opacity-100 transition-opacity`,children:y.description})]}),e.jsxs("div",{className:"mt-8 flex items-center gap-2 text-[11px] font-black uppercase tracking-tighter text-[#4E6E49] group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{children:"Открыть управление"}),e.jsx(Dn,{className:"w-3.5 h-3.5"})]})]},y.id))}),r&&e.jsx(b3,{onClose:()=>a(!1),onSave:()=>a(!1)}),n&&e.jsx(f3,{onClose:()=>i(!1)}),l&&e.jsx(v3,{onClose:()=>c(!1)})]})},w3=()=>{const{theme:s}=pe(),t=s==="dark"?"text-white":"text-gray-900",r=s==="dark"?"text-gray-400":"text-gray-500",a=[{title:"Финансовая грамотность",icon:J4,note:"Управление рисками и анализ вместо эмоций.",accent:"text-emerald-400",bg:"bg-emerald-500/5 border-emerald-500/20"},{title:"Приватность",icon:As,note:"Защита цифровой идентичности и личных границ.",accent:"text-blue-200",bg:"bg-blue-300/5 border-blue-300/20"},{title:"Образование",icon:Ur,note:"От основ блокчейна до  DeFi-стратегий.",accent:"text-amber-400",bg:"bg-amber-500/5 border-amber-500/20"},{title:"Прозрачность",icon:jt,note:"Честные сделки и открытость внутри клуба.",accent:"text-purple-400",bg:"bg-purple-500/5 border-purple-500/20"},{title:"Инновации",icon:lt,note:"Тестируем новые протоколы и не боимся быть первыми.",accent:"text-pink-400",bg:"bg-pink-500/5 border-pink-500/20"},{title:"Критическое мышление",icon:He,note:"Анализируем, проверяем, не следуем за хайпом.",accent:"text-cyan-400",bg:"bg-cyan-500/5 border-cyan-500/20"},{title:"Глобальность",icon:ir,note:"Сотрудничество ради свободы в рамках закона.",accent:"text-lime-400",bg:"bg-lime-500/5 border-lime-500/20"},{title:"Ответственность",icon:yt,note:"Зрелость и самоконтроль в принятии решений.",accent:"text-slate-400",bg:"bg-slate-500/5 border-slate-500/20"}],n=s==="dark"?"bg-[#151a21]/60 border-white/5 backdrop-blur-md":"bg-white border-gray-100 shadow-sm";return e.jsxs("div",{className:"space-y-8 animate-fade-in pb-12 font-sans",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-[#4E6E49]/10 border border-[#4E6E49]/20",children:e.jsx(ls,{className:"w-8 h-8 text-[#4E6E49]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-black ${t} flex items-center gap-3`,children:"INFO"}),e.jsx("p",{className:r,children:"О нас, наши ценности и правила сообщества"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`col-span-1 lg:col-span-2 rounded-3xl p-8 border relative overflow-hidden group ${n}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#4E6E49]/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none group-hover:bg-[#4E6E49]/20 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[#4E6E49]/10 border border-[#4E6E49]/20 text-[#4E6E49] text-xs font-bold uppercase tracking-wider",children:[e.jsx(mr,{className:"w-3 h-3"}),"Apex Community"]}),e.jsxs("h2",{className:`text-4xl sm:text-5xl font-black tracking-tight leading-tight ${t}`,children:["Где знания ",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#4E6E49] to-emerald-400",children:"превращаются в действие"})]}),e.jsxs("p",{className:`text-lg leading-relaxed max-w-2xl ${r}`,children:["AVA - Team — закрытая среда для тех, кто понимает рынок глубже заголовков и хайпа.",e.jsx("br",{}),e.jsx("br",{}),"Мы создаём пространство для аккуратного входа в рынок, глубокой аналитики и совместного роста, где во главу угла поставлены качество решений и ответственность за результат.",e.jsx("br",{}),e.jsx("br",{}),"Здесь решения принимаются осознанно, а рост строится системно."]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-3xl p-6 border ${n} relative overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${r}`,children:"Участников"}),e.jsx(yt,{className:"w-5 h-5 text-indigo-500"})]}),e.jsx("div",{className:`text-4xl font-black ${t}`,children:"50+"}),e.jsx("div",{className:"text-xs text-indigo-400 mt-2 font-medium",children:"Активное комьюнити"})]}),e.jsxs("div",{className:`rounded-3xl p-6 border ${n} relative overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${r}`,children:"Сессий / Неделю"}),e.jsx(Ss,{className:"w-5 h-5 text-emerald-500"})]}),e.jsx("div",{className:`text-4xl font-black ${t}`,children:"10+"}),e.jsx("div",{className:"text-xs text-emerald-400 mt-2 font-medium",children:"Регулярные созвоны"})]}),e.jsxs("div",{className:`rounded-3xl p-6 border ${n} relative overflow-hidden`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${r}`,children:"База знаний"}),e.jsx(Ur,{className:"w-5 h-5 text-amber-500"})]}),e.jsx("div",{className:`text-4xl font-black ${t}`,children:"100+"}),e.jsx("div",{className:"text-xs text-amber-400 mt-2 font-medium",children:"Уроков и материалов"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:`text-2xl font-black ${t} text-center md:text-left`,children:"Наши принципы"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((i,l)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${s==="dark"?`${i.bg} hover:border-opacity-50`:"bg-white border-gray-100 hover:border-emerald-500/20"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.icon,{className:`w-4 h-4 ${i.accent}`}),e.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:i.title})]})}),e.jsx("div",{className:"space-y-1",children:e.jsx("div",{className:`text-sm font-medium leading-relaxed ${r}`,children:i.note})})]},l))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`rounded-3xl border p-8 relative overflow-hidden flex flex-col justify-between ${n}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-xs font-bold uppercase tracking-wider mb-6",children:[e.jsx(Ys,{className:"w-3 h-3"}),"Стратегии"]}),e.jsx("h3",{className:`text-3xl font-black mb-4 ${t}`,children:"Наши стратегии"}),e.jsx("p",{className:`${r} mb-8 max-w-md`,children:"Авторские методики торговли и инвестирования, проверенные временем. Изучите наши подходы к рынку."})]}),e.jsxs(Ws,{to:"/strategies",className:"relative z-10 w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3.5 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-emerald-500/20 active:scale-95",children:[e.jsx("span",{children:"Смотреть стратегии"}),e.jsx(Oa,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:`rounded-3xl border p-8 relative overflow-hidden flex flex-col justify-between ${n}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs font-bold uppercase tracking-wider mb-6",children:[e.jsx(Ur,{className:"w-3 h-3"}),"Регламент"]}),e.jsx("h3",{className:`text-3xl font-black mb-4 ${t}`,children:"Правила сообщества"}),e.jsx("p",{className:`${r} mb-8 max-w-md`,children:"Мы подробно описали процессы, безопасность и принципы взаимодействия. Прозрачные правила — залог доверия и эффективности."})]}),e.jsxs(Ws,{to:"/rules",className:"relative z-10 w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3.5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-indigo-500/20 active:scale-95",children:[e.jsx("span",{children:"Читать правила"}),e.jsx(Oa,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`rounded-3xl p-6 border flex items-center gap-5 ${n} hover:border-[#4E6E49]/30 transition-colors`,children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-rose-500 to-orange-500 flex items-center justify-center text-white shadow-lg",children:e.jsx(yt,{className:"w-7 h-7"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase text-rose-500 mb-1",children:"Администратор"}),e.jsx("div",{className:`text-xl font-black ${t}`,children:"@artyommedoed"}),e.jsx("div",{className:`text-sm ${r} mt-1`,children:"Вопросы доступов и регламентов"})]})]}),e.jsxs("a",{href:"https://t.me/+vPZdPwPaaKI1MjAy",target:"_blank",rel:"noopener noreferrer",className:`rounded-3xl p-6 border flex items-center gap-5 group ${n} hover:border-emerald-500/30 transition-colors cursor-pointer`,children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-[#4E6E49] to-emerald-400 flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform",children:e.jsx(r_,{className:"w-7 h-7"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold uppercase text-emerald-500 mb-1",children:"Обратная связь"}),e.jsxs("div",{className:`text-xl font-black ${t} flex items-center gap-2`,children:["Командный чат",e.jsx(Oa,{className:"w-5 h-5 opacity-50 group-hover:opacity-100 group-hover:translate-x-1 group-hover:-translate-y-1 transition-all"})]}),e.jsx("div",{className:`text-sm ${r} mt-1`,children:"Оперативные вопросы и общение"})]})]})]})]})},Cr=({title:s,description:t,children:r})=>{const{theme:a}=pe(),n=a==="dark"?"text-white":"text-gray-900",i=a==="dark"?"text-gray-400":"text-gray-600";return e.jsx("div",{className:"section-card rounded-3xl p-6 sm:p-7 border border-white/60 dark:border-white/10 shadow-xl relative overflow-hidden",children:e.jsxs("div",{className:"relative z-10 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-[#4E6E49]/20 to-emerald-500/15 text-[#4E6E49]",children:e.jsx(Ur,{className:"w-5 h-5"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:`text-xl sm:text-2xl font-extrabold ${n}`,children:s}),t&&e.jsx("p",{className:`text-sm ${i}`,children:t})]})]}),r]})})},N3=()=>{const{theme:s}=pe(),t=s==="dark"?"text-white":"text-gray-900",r=s==="dark"?"text-gray-400":"text-gray-600",a=["последовательной эскалации","объективности и равного применения","недопустимости злоупотребления полномочиями","исключения спорных трактовок и субъективности"],n=["единичные опоздания (не более 1 раза за календарную неделю)","некорректное выполнение инструкций без последствий вследствие заболевания или сбоев в ПО","нарушение регламента общения, не приводящее к конфликту"],i=["повторяющиеся нарушения регламента","несоблюдение правил торговой сессии","недостаточная подготовка к сессии","игнорирование инструкций ведущего","нарушение процедур безопасности данных или доступа"],l=["оскорбления участников","провокации и попытки вызвать конфликт","манипуляции и мошеннические действия","действия, создающие финансовые, репутационные или организационные риски","подрыв дисциплины и порядка в сообществе"],c=[{term:"Нарушение",text:"любое действие или бездействие, противоречащее регламентам AVA - Team"},{term:"Предупреждение",text:"официальное уведомление о нарушении"},{term:"Выговор",text:"фиксируемая мера повышенной строгости при повторных нарушениях"},{term:"Ведущий торговой сессии",text:"управляет процессом и следит за соблюдением регламента на сессии"},{term:"Ответственный за сообщество",text:"назначенное лицо, управляющее дисциплиной и коммуникацией"},{term:"Повторное нарушение",text:"нарушение в течение 30 календарных дней после предыдущего"}];return e.jsxs("div",{className:"space-y-7 sm:space-y-8",children:[e.jsxs("div",{className:"section-card rounded-3xl p-6 sm:p-8 border border-white/60 dark:border-white/10 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"accent-dots"}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-1/3 pointer-events-none bg-gradient-to-l from-[#4E6E49]/12 to-transparent blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col gap-5 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"space-y-4 max-w-3xl",children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-white/50 dark:border-white/10 bg-white/70 dark:bg-white/5 text-xs font-semibold uppercase tracking-[0.16em] text-[#4E6E49]",children:"AVA - Team Operating Code — ASOC"}),e.jsx("h1",{className:`text-3xl sm:text-4xl lg:text-5xl font-extrabold leading-tight ${t}`,children:"Кодекс операционных процедур и регламентов платформы Alpha Vault : Apex"}),e.jsx("p",{className:`text-sm sm:text-base ${r}`,children:"Единые правила ответственности, дисциплинарных мер и прозрачных процедур для команды Alpha Vault : Apex."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Ответственность","Прозрачность","Безопасность","Справедливость"].map(d=>e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold border ${s==="dark"?"border-white/10 bg-white/5 text-white":"border-gray-200 bg-white text-gray-900"}`,children:d},d))})]}),e.jsxs("div",{className:`rounded-3xl border shadow-xl p-4 sm:p-5 w-full lg:max-w-sm ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-gradient-to-br from-[#4E6E49] to-emerald-600 text-white shadow-lg",children:e.jsx(Js,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-[#4E6E49] font-semibold",children:"Назначение раздела"}),e.jsx("p",{className:`text-base font-semibold ${t}`,children:"Поддержание порядка и профессионализма команды"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(Oa,{className:"w-4 h-4"}),"Публичная версия правил доступна на сайте"]}),e.jsx("p",{className:`text-xs ${r}`,children:"Используйте кнопку «Правила» в навигации или в профиле, чтобы быстро открыть этот раздел."}),e.jsxs("a",{href:"/rules.pdf",download:!0,className:`inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all shadow-sm hover:shadow-md hover:-translate-y-0.5 ${s==="dark"?"border-white/20 bg-white/10 text-white hover:bg-white/15":"border-[#4E6E49]/30 bg-[#4E6E49]/10 text-[#4E6E49] hover:bg-[#4E6E49]/15"}`,children:[e.jsx(Y4,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Скачать правила (PDF)"})]})]})]})]})]}),e.jsxs(Cr,{title:"Политика ответственности и меры дисциплинарного воздействия",description:"Единый порядок применения мер для поддержания порядка, прозрачности и профессионального уровня.",children:[e.jsxs("div",{className:`grid gap-4 sm:grid-cols-2 ${s==="dark"?"text-gray-200":"text-gray-900"}`,children:[e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(hx,{className:"w-4 h-4"}),"Цели дисциплинарной политики"]}),e.jsx("p",{className:`text-sm mt-2 ${r}`,children:"Обеспечить соблюдение регламентов, процедур и рабочих стандартов команды."})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(Hp,{className:"w-4 h-4"}),"Принципы применения мер"]}),e.jsx("ul",{className:`text-sm mt-2 space-y-1 ${r}`,children:a.map(d=>e.jsxs("li",{children:["• ",d]},d))})]})]}),e.jsx("div",{className:`mt-3 text-sm ${r}`,children:"Меры ответственности применяются в зависимости от тяжести, регулярности и последствий нарушения."})]}),e.jsx(Cr,{title:"Унифицированный регламент торговой деятельности Alpha Vault : Apex",description:"Нормы поведения на торговых сессиях, полномочия ведущего, перерывы, записи и конфиденциальность.",children:e.jsxs("div",{className:`space-y-4 text-sm ${r}`,children:[e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"1. Общие положения"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:"• Регламент задаёт нормы участия, дисциплину, полномочия ведущего и ответственность."}),e.jsx("li",{children:"• Все участники обязаны ознакомиться с разделом до начала торговой деятельности."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"2. Права и полномочия ведущего"}),e.jsx("p",{className:"mt-2 font-semibold text-[#4E6E49]",children:"Полномочия:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Давать обязательные распоряжения по порядку, действиям, стратегии и дисциплине."}),e.jsx("li",{children:"• Требовать соблюдения тайминга, регламента и корректного поведения."}),e.jsx("li",{children:"• Приостанавливать участие нарушающих участников."}),e.jsx("li",{children:"• Объявлять перерывы и завершение сессии."}),e.jsx("li",{children:"• Фиксировать нарушения, выдавать предупреждения/выговоры, вводить временный запрет на участие."})]}),e.jsx("p",{className:"mt-3 font-semibold text-[#4E6E49]",children:"Ограничения:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Не изменяет дисциплинарные меры, установленные регламентом."}),e.jsx("li",{children:"• Не принимает решения об исключении из команды (решает ответственный за команду)."}),e.jsx("li",{children:"• Не меняет торговую стратегию вне утверждённой методологии или плана сессии."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-3 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"3. Порядок проведения сессии"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Начало и окончание:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Старт строго по времени слота."}),e.jsx("li",{children:"• Подключение за 3–5 минут до старта обязательно."}),e.jsx("li",{children:"• Окончание объявляет ведущий, не позднее 30 минут после окончания слота."})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Поведение во время торгов:"}),e.jsx("p",{className:"text-xs uppercase tracking-wide opacity-70 mt-1",children:"Запрещено:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Перебивать ведущего или участников."}),e.jsx("li",{children:"• Отвлекать команду сторонними вопросами."}),e.jsx("li",{children:"• Включать микрофон без необходимости, создавать шум."}),e.jsx("li",{children:"• Саботировать процесс или предлагать несогласованные решения."}),e.jsx("li",{children:"• Коммуницировать с кем-либо вне участников сессии."})]}),e.jsx("p",{className:"text-xs uppercase tracking-wide opacity-70 mt-2",children:"Обязано:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Следовать инструкциям ведущего и оперативно исполнять распоряжения."}),e.jsx("li",{children:"• Сохранять корректность и нейтральность в коммуникации."}),e.jsx("li",{children:"• Обеспечивать техническую готовность: связь, устройство, ПО."})]})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"4. Политика перерывов"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Краткий перерыв — до 10 минут каждые 45 минут."}),e.jsx("li",{children:"• Большой перерыв — до 45 минут каждые 3 часа активной торговли."}),e.jsx("li",{children:"• Все перерывы объявляет ведущий."}),e.jsx("li",{children:"• Самовольные перерывы запрещены; нарушение дисциплины, если не согласовано в трекере слотов и с ответственным."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"5. Правила записи сессий"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Запись включает только ведущий или ответственный за сообщество."}),e.jsx("li",{children:"• Хранение — в закрытом архиве команды; доступ: ведущий, управляющий сообществом, ответственные аналитики."}),e.jsx("li",{children:"• Распространение вне команды запрещено."}),e.jsx("li",{children:"• Срок хранения определяет ведущий: до 3 лет, но ≥14 календарных дней."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"6. Конфликт интересов"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Запрещено действовать в интересах сторонних групп/конкурентов."}),e.jsx("li",{children:"• Запрещено передавать стратегию, аналитику, материалы, алгоритмы, сигналы и методики Alpha Vault : Apex третьим лицам."}),e.jsx("li",{children:"• Запрещено получать вознаграждение за внешние консультации, использующие опыт или данные Alpha Vault : Apex."}),e.jsx("li",{children:"• Запрещено участвовать в параллельных торговых группах, если это создаёт риск конфликта или утечки информации."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-base font-semibold text-[#4E6E49]",children:"7. Конфиденциальность"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Все материалы, данные, аналитика, торговые решения и внутренняя коммуникация — интеллектуальная собственность Alpha Vault : Apex."}),e.jsx("li",{children:"• Запрещено копировать, распространять или передавать информацию третьим лицам."}),e.jsx("li",{children:"• Запрещено создавать производные материалы без согласования с ответственным."}),e.jsx("li",{children:"• Запрещено публиковать скриншоты, отчёты или содержимое сессий в открытых источниках (кроме чата команды)."}),e.jsx("li",{children:"• Требование к среде: наушники и отсутствие посторонних рядом; не допускать, чтобы экран/звук были доступны третьим лицам."}),e.jsx("li",{className:"font-semibold text-[#4E6E49]",children:"Нарушение положений конфиденциальности — основание для немедленного исключения."})]})]})]})}),e.jsx(Cr,{title:"Классификация нарушений",description:"Три уровня тяжести определяют, как быстро применяются ограничения.",children:e.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-amber-100 bg-white/95"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-amber-600 dark:text-amber-300",children:[e.jsx(ls,{className:"w-4 h-4"}),"Незначительные"]}),e.jsx("ul",{className:`text-sm mt-2 space-y-1 ${r}`,children:n.map(d=>e.jsxs("li",{children:["• ",d]},d))})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-orange-100 bg-white/95"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-orange-600 dark:text-orange-300",children:[e.jsx(Rt,{className:"w-4 h-4"}),"Средние"]}),e.jsx("ul",{className:`text-sm mt-2 space-y-1 ${r}`,children:i.map(d=>e.jsxs("li",{children:["• ",d]},d))})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 ${s==="dark"?"border-white/10 bg-white/5":"border-rose-100 bg-white/95"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-rose-600 dark:text-rose-300",children:[e.jsx(As,{className:"w-4 h-4"}),"Грубые"]}),e.jsx("ul",{className:`text-sm mt-2 space-y-1 ${r}`,children:l.map(d=>e.jsxs("li",{children:["• ",d]},d))})]})]})}),e.jsx(Cr,{title:"Меры дисциплинарного воздействия и ограничения",description:"Применяются последовательно, кроме случаев грубых нарушений.",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(hx,{className:"w-4 h-4"}),"Порядок эскалации"]}),e.jsxs("ul",{className:`text-sm space-y-1 ${r}`,children:[e.jsx("li",{children:"• Напоминания — не более 1 в неделю, без последствий."}),e.jsx("li",{children:"• Предупреждения — не более 2 в неделю, при повторении незначительных или единичном среднем нарушении."}),e.jsx("li",{children:"• Выговоры — не более 2 в неделю, назначаются ведущим сессии или ответственным за сообщество."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(As,{className:"w-4 h-4"}),"Ограничительные меры"]}),e.jsxs("ul",{className:`text-sm space-y-1 ${r}`,children:[e.jsx("li",{children:"• Ограничение доступа к торговым сессиям: 1-е — ≥3 дней; повторное — 1 неделя; систематическое — 2 недели; дальше — исключение без восстановления."}),e.jsx("li",{children:"• Немедленное исключение без эскалации за грубое нарушение, оскорбления, провокации или угрозу финансам/безопасности/репутации."})]})]})]})}),e.jsx(Cr,{title:"Финансовые последствия",description:"Что происходит при систематических нарушениях и невыполнении мер.",children:e.jsx("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:e.jsxs("ul",{className:`text-sm space-y-2 ${r}`,children:[e.jsx("li",{children:"• При систематических нарушениях и игнорировании мер может быть отказано в удовлетворении заявки на вывод средств, включая заработок за успешные сессии."}),e.jsx("li",{children:"• Перераспределение заработка: удержанные средства делятся между участниками, кроме тех, кто допустил два и более нарушений в неделю или более 6 нарушений в месяц."}),e.jsx("li",{children:"• Добровольно внесённые в пул или кошелёк команды средства не возвращаются при досрочном выходе или исключении за нарушения."})]})})}),e.jsx(Cr,{title:"Фиксация нарушений и апелляции",description:"Прозрачный процесс учёта нарушений и возможность обжаловать решение.",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(Rl,{className:"w-4 h-4"}),"Порядок фиксации"]}),e.jsxs("ul",{className:`text-sm space-y-1 ${r}`,children:[e.jsx("li",{children:"• Все нарушения фиксируются ответственным за сообщество в отдельной ветви командного чата Telegram."}),e.jsx("li",{children:"• Обязательная фиксация: дата и время, тип нарушения, краткое описание ситуации, применённая мера."})]})]}),e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-[#4E6E49]",children:[e.jsx(wt,{className:"w-4 h-4"}),"Процедура апелляции"]}),e.jsxs("ul",{className:`text-sm space-y-1 ${r}`,children:[e.jsx("li",{children:"• Апелляция подаётся в течение 24 часов с момента уведомления о мере."}),e.jsx("li",{children:"• Подача: ответственному за сообщество или назначенному куратору."}),e.jsx("li",{children:"• Рассмотрение: до 60 часов; решение окончательное."})]})]})]})}),e.jsx(Cr,{title:"Принцип равного применения",description:"Меры действуют одинаково для всех участников.",children:e.jsx("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-1 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:e.jsx("p",{className:`text-sm ${r}`,children:"Дисциплинарные меры применяются ко всем участникам независимо от стажа, роли в проекте, вклада, личных отношений или результатов торговых сессий. Привилегии и исключения не допускаются."})})}),e.jsx(Cr,{title:"Определения",description:"Ключевые термины, чтобы избежать двусмысленностей.",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:c.map(d=>e.jsxs("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-1 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:[e.jsx("p",{className:"text-sm font-semibold text-[#4E6E49]",children:d.term}),e.jsx("p",{className:`text-sm ${r}`,children:d.text})]},d.term))})}),e.jsx(Cr,{title:"Заключительные положения",description:"Кто может обновлять раздел и обязанность ознакомления.",children:e.jsx("div",{className:`rounded-2xl border p-4 sm:p-5 space-y-2 ${s==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-white"}`,children:e.jsxs("ul",{className:`text-sm space-y-1 ${r}`,children:[e.jsx("li",{children:"• Ответственный за сообщество или исполняющий обязанности оставляет за собой право корректировать и обновлять раздел при изменении процессов или структуры платформы."}),e.jsx("li",{children:"• Все участники обязаны ознакомиться с настоящей политикой и соблюдать её безусловно."})]})})})]})},k3={create:"Создание",update:"Изменение",delete:"Удаление"},_3={slot:"Слот",status:"Статус",earning:"Заработок",referral:"Реферал",login:"Ник"},E3={pending:"bg-amber-50 text-amber-900 border border-amber-200 shadow-inner dark:bg-amber-900/25 dark:text-amber-50 dark:border-amber-700",approved:"bg-emerald-50 text-emerald-900 border border-emerald-200 shadow-inner dark:bg-emerald-900/25 dark:text-emerald-50 dark:border-emerald-700",rejected:"bg-rose-50 text-rose-900 border border-rose-200 shadow-inner dark:bg-rose-900/25 dark:text-rose-50 dark:border-rose-700"},$3={pending:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-900 dark:bg-amber-900/40 dark:text-amber-100",children:[e.jsx(wt,{className:"w-3 h-3"})," На согласовании"]}),approved:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-900 dark:bg-emerald-900/40 dark:text-emerald-100",children:[e.jsx(gs,{className:"w-3 h-3"})," Принято"]}),rejected:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-rose-100 text-rose-900 dark:bg-rose-900/40 dark:text-rose-100",children:[e.jsx(v_,{className:"w-3 h-3"})," Отклонено"]})},Mn=(s,t=!1)=>{if(!s)return"—";try{return oe(s,t?"dd.MM.yyyy HH:mm":"dd.MM.yyyy")}catch{return"—"}},kx=s=>{var a,n,i;if(!s)return"—";const t=(n=(a=s.slots)==null?void 0:a.map(l=>`${l.start}-${l.end}${l.endDate?` (до ${Mn(l.endDate)})`:""}`))==null?void 0:n.join(", "),r=s.category?` [${((i=_s[s.category])==null?void 0:i.label)||s.category}]`:"";return`${Mn(s.date)}${t?` · ${t}`:""}${r}`},_x=s=>{if(!s)return"—";const t=s.type==="dayoff"?"Выходной":s.type==="sick"?"Больничный":"Отпуск",r=s.endDate?` (${Mn(s.endDate)})`:"";return`${Mn(s.date)} · ${t}${r}`},T3=()=>{const{user:s}=Xe(),{isAdmin:t}=kt(),[r,a]=f.useState([]),[n,i]=f.useState([]),[l,c]=f.useState(!0),[d,h]=f.useState(null),[u,m]=f.useState(!1),[g,y]=f.useState([]),[v,E]=f.useState(null),[I,C]=f.useState("pending"),T=async()=>{c(!0),E(null);try{const _=await v4();let k=_;if(t){const F=new Date;F.setHours(F.getHours()-60),k=_.filter(Z=>new Date(Z.createdAt)>=F)}const H=new Date;H.setDate(H.getDate()-30);const S=_.filter(F=>F.status!=="pending"&&F.processedAt&&new Date(F.processedAt)>=H);a(k),i(S)}catch(_){console.error("Не удалось загрузить заявки на согласование",_),E("Не удалось загрузить заявки")}finally{c(!1)}};f.useEffect(()=>{T()},[]);const D=async _=>{if(!d){h(_),E(null);try{const k=r.find(H=>H.id===_);await nx(_,(s==null?void 0:s.id)||"admin"),(k==null?void 0:k.entity)==="login"&&(od(k.targetUserId),await cr(k.targetUserId),window.dispatchEvent(new CustomEvent("nicknameUpdated",{detail:{userId:k.targetUserId}}))),await T(),y(H=>H.filter(S=>S!==_))}catch(k){console.error("Ошибка при подтверждении",k),E(`Не удалось подтвердить заявку: ${(k==null?void 0:k.message)||k}`),await T()}finally{h(null)}}},M=async _=>{if(d)return;const k=prompt("Комментарий для отклонения заявки","Уточните детали")||"Отклонено без комментария";h(_),E(null);try{await ix(_,(s==null?void 0:s.id)||"admin",k),await T()}catch(H){console.error("Ошибка при отклонении",H),E("Не удалось отклонить заявку")}finally{h(null)}},se=async()=>{if(!(u||d||g.length===0)){m(!0),E(null);try{for(const _ of g){const k=r.find(H=>H.id===_);await nx(_,(s==null?void 0:s.id)||"admin"),(k==null?void 0:k.entity)==="login"&&(od(k.targetUserId),await cr(k.targetUserId),window.dispatchEvent(new CustomEvent("nicknameUpdated",{detail:{userId:k.targetUserId}})))}await T(),y([])}catch(_){console.error("Ошибка при подтверждении выбранных",_),E(`Не удалось подтвердить выбранные заявки: ${(_==null?void 0:_.message)||_}`),await T()}finally{m(!1)}}},L=async()=>{if(u||d||g.length===0)return;const _=prompt("Комментарий для отклонения выбранных заявок","Отклонено без комментария")||"Отклонено без комментария";if(_!==null){m(!0),E(null);try{for(const k of g)await ix(k,(s==null?void 0:s.id)||"admin",_);await T(),y([])}catch(k){console.error("Ошибка при отклонении выбранных",k),E(`Не удалось отклонить выбранные заявки: ${(k==null?void 0:k.message)||k}`),await T()}finally{m(!1)}}},N=_=>{y(k=>k.includes(_)?k.filter(H=>H!==_):[...k,_])},b=()=>{const _=r.filter(H=>H.status==="pending").map(H=>H.id),k=_.every(H=>g.includes(H));y(k?[]:_)},w=_=>{if(_.entity==="login"){const k=_.before,H=_.after,S=(k==null?void 0:k.nickname)||"—",F=(H==null?void 0:H.nickname)||"—";return`${S} → ${F}`}if(_.entity==="slot"){const k=_.before,H=_.after;return`${kx(k)} → ${kx(H)}`}if(_.entity==="status"){const k=_.before,H=_.after;return`${_x(k)} → ${_x(H)}`}return _.after?"Изменение":_.before?"Удаление":"Создание"},j=(_,k=!0)=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Статус"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Тип"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Действие"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Кто"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Изменение"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Время"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Комментарий"}),k&&e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:"Действия"}),k&&e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200",children:e.jsx("button",{onClick:b,className:"inline-flex items-center gap-1 text-sm text-[#4E6E49] hover:text-emerald-700",title:"Выбрать все на согласовании",children:r.some(H=>H.status==="pending")?e.jsxs(e.Fragment,{children:[r.filter(H=>H.status==="pending").every(H=>g.includes(H.id))?e.jsx(io,{className:"w-4 h-4"}):e.jsx(fi,{className:"w-4 h-4"})," Все"]}):e.jsx(fi,{className:"w-4 h-4 opacity-50"})})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:[_.map(H=>e.jsxs("tr",{className:`bg-white dark:bg-[#0f1624] ${E3[H.status]}`,children:[e.jsx("td",{className:"px-4 py-3 align-top",children:$3[H.status]}),e.jsx("td",{className:"px-4 py-3 align-top font-semibold",children:_3[H.entity]}),e.jsx("td",{className:"px-4 py-3 align-top",children:k3[H.action]}),e.jsx("td",{className:"px-4 py-3 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(hr,{userId:H.targetUserId})}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Автор: ",e.jsx(hr,{userId:H.authorId})]})]})}),e.jsxs("td",{className:"px-4 py-3 align-top",children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium",children:w(H)}),H.after&&H.entity==="slot"&&H.after.comment&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Комментарий слота: ",H.after.comment]}),H.after&&H.entity==="status"&&H.after.comment&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Комментарий статуса: ",H.after.comment]})]}),e.jsx("td",{className:"px-4 py-3 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Создано: ",e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:Mn(H.createdAt,!0)})]}),H.processedAt&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Обработано: ",e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:Mn(H.processedAt,!0)})]}),H.reviewedBy&&H.status!=="pending"&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Админ: ",e.jsx(hr,{userId:H.reviewedBy})]})]})}),e.jsxs("td",{className:"px-4 py-3 align-top",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-200 whitespace-pre-wrap",children:H.comment||"—"}),H.adminComment&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Ответ админа: ",H.adminComment]})]}),k&&e.jsx("td",{className:"px-4 py-3 align-top",children:H.status==="pending"?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>D(H.id),disabled:!!d,className:"px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white text-xs sm:text-sm font-semibold",children:d===H.id?"Применяем...":"Подтвердить"}),e.jsx("button",{onClick:()=>M(H.id),disabled:!!d,className:"px-3 py-2 rounded-lg bg-rose-600 hover:bg-rose-700 disabled:bg-rose-400 text-white text-xs sm:text-sm font-semibold",children:d===H.id?"Отклоняем...":"Отклонить"})]}):e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Выполнено"})}),k&&e.jsx("td",{className:"px-4 py-3 align-top",children:H.status==="pending"?e.jsxs("button",{onClick:()=>N(H.id),className:"inline-flex items-center gap-1 text-sm text-[#4E6E49] hover:text-emerald-700",children:[g.includes(H.id)?e.jsx(io,{className:"w-4 h-4"}):e.jsx(fi,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Выбрать заявку"})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"—"})})]},H.id)),_.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:k?8:7,className:"px-4 py-6 text-center text-sm text-gray-500 dark:text-gray-400",children:I==="pending"?"Нет заявок на согласование":"Нет заявок в архиве"})})]})]})});if(l)return e.jsx("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 p-6 text-center text-sm text-gray-600 dark:text-gray-300",children:"Загружаем заявки..."});const $=I==="pending"?r:n;return e.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 sm:p-5 border-b border-gray-200 dark:border-gray-800 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold",children:"Согласования"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Заявки на изменение слотов и статусов"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex rounded-lg bg-gray-100 dark:bg-gray-800 p-1",children:[e.jsxs("button",{onClick:()=>C("pending"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${I==="pending"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:["Ожидают (",r.filter(_=>_.status==="pending").length,")"]}),e.jsxs("button",{onClick:()=>C("archive"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${I==="archive"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(Ph,{className:"w-3.5 h-3.5"}),"Архив"]})]})})]}),I==="pending"&&e.jsxs("div",{className:"px-4 sm:px-5 py-3 bg-gray-50 dark:bg-gray-900/20 border-b border-gray-200 dark:border-gray-800 flex items-center gap-3 flex-wrap",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Выбрано: ",g.length]}),e.jsx("button",{onClick:se,disabled:u||d!==null||g.length===0,className:"text-sm px-3 py-1.5 rounded-lg bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white font-semibold",children:u?"Применяем...":`Принять (${g.length})`}),e.jsx("button",{onClick:L,disabled:u||d!==null||g.length===0,className:"text-sm px-3 py-1.5 rounded-lg bg-rose-600 hover:bg-rose-700 disabled:bg-rose-400 text-white font-semibold",children:u?"Отклоняем...":`Отклонить (${g.length})`})]}),v&&e.jsx("div",{className:"px-4 py-3 bg-rose-100 text-rose-900 dark:bg-rose-900/30 dark:text-rose-100 text-sm",children:v}),j($,I==="pending"),e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-800 flex justify-end",children:e.jsx("button",{onClick:T,className:"text-sm px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200",children:"Обновить"})})]})},S3=()=>{const{isAdmin:s}=kt();return s?e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Администрирование"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Согласования изменений"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Подтверждайте или отклоняйте изменения слотов, перерывов и статусов участников."})]}),e.jsx(T3,{})]}):e.jsx(wi,{to:"/about",replace:!0})},A3=({spheres:s,activeSphere:t,setActiveSphere:r})=>{const{theme:a}=pe(),[n,i]=f.useState(!1),l=f.useRef(null),c=s.find(h=>h.id===t);f.useEffect(()=>{const h=u=>{l.current&&!l.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{r(h),i(!1)};return e.jsxs("div",{className:"relative w-full lg:w-72",ref:l,children:[e.jsxs("button",{onClick:()=>i(!n),className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-2xl border transition-all duration-300 ${a==="dark"?"bg-[#151a21]/80 border-white/5 text-gray-300 hover:border-blue-500/30":"bg-white border-gray-200 text-gray-700 hover:border-blue-500"} shadow-xl backdrop-blur-xl group relative overflow-hidden`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 overflow-hidden relative z-10",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${a==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-500"} flex-shrink-0`,children:c==null?void 0:c.icon}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest font-bold text-blue-500/60 leading-none mb-1",children:"Сфера"}),e.jsx("span",{className:"text-sm font-black tracking-tight truncate block",children:c==null?void 0:c.label})]})]}),e.jsx(st,{size:16,className:`text-blue-500 transition-transform duration-300 relative z-10 ${n?"rotate-180":""}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/5 to-blue-500/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),n&&e.jsx("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[240px] rounded-2xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-300 ${a==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-2 space-y-1",children:s.map(h=>e.jsxs("button",{onClick:()=>d(h.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all ${t===h.id?a==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600":a==="dark"?"hover:bg-white/5 text-gray-400":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t===h.id?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":a==="dark"?"bg-white/5":"bg-gray-100"}`,children:h.icon}),e.jsx("span",{className:"text-sm font-bold tracking-tight",children:h.label}),t===h.id&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"})]},h.id))})})]})},Cc=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},I3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Nt,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA Late Volume"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"AVA Late Volume — это контекстная торговая стратегия, ориентированная на инструменты, которые уже реализовали основной импульс, но сохраняют повышенное внимание рынка. Стратегия допускает и структурно предусматривает глубокую временную просадку с последующим набором при сохранении ключевых рыночных метрик."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),"POST-IMPULSE"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Dt,{className:"w-3.5 h-3.5"}),"GMGN SCREENING"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(ls,{className:"w-3.5 h-3.5"}),"DEEP DISCOUNT"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Алгоритм работы"})]}),e.jsxs(Cc,{number:1,title:"Фильтрация: Капитализация и Просадка",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"На первом этапе применяются жёсткие количественные фильтры для отсева нежизнеспособных активов:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"ATH Cap"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"≥ 500k USD"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Просадка"}),e.jsx("p",{className:"text-lg font-black text-rose-500",children:"-50% ... -90%"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Current Cap"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"≥ 20k USD"})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm italic",children:[e.jsx("strong",{children:"Смысл:"})," Если токен уже достигал значимой капитализации, это означает, что рынок признавал ценность нарратива. Текущая глубокая просадка при сохранении минимальной капитализации формирует асимметричную зону входа — цену страха, а не отсутствия интереса."]})})]}),e.jsx(Cc,{number:2,title:"Проверка жизнеспособности нарратива",icon:e.jsx(yt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Qr,{className:"w-4 h-4 text-sky-400"}),e.jsx("h4",{className:"font-bold",children:"Социальный фильтр (X / Twitter)"})]}),e.jsxs("ul",{className:"space-y-2 list-disc list-inside text-sm pl-2",children:[e.jsx("li",{children:"Поиск по тикеру или адресу контракта"}),e.jsxs("li",{children:["Минимум ",e.jsx("strong",{children:"3 упоминания"})," за последние 24 часа"]}),e.jsxs("li",{children:["Источник — аккаунты с ",e.jsx("strong",{children:"5 000+ подписчиков"})]}),e.jsx("li",{children:"Приоритет: обзоры, обсуждения, аналитические треды"}),e.jsx("li",{className:"text-rose-400",children:"Исключаются автоматические call-каналы и спам"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Wp,{className:"w-4 h-4 text-blue-400"}),e.jsx("h4",{className:"font-bold",children:"Telegram-сообщество"})]}),e.jsxs("ul",{className:"space-y-2 list-disc list-inside text-sm pl-2",children:[e.jsxs("li",{children:["Онлайн-активность: ",e.jsx("strong",{children:"≥ 10%"})," от участников"]}),e.jsx("li",{children:"Характер: фокус на развитии и будущем"}),e.jsx("li",{className:"text-rose-400 text-[11px] uppercase font-bold mt-1",children:"Исключаем при:"}),e.jsx("li",{className:"text-rose-400/80 ml-4",children:'Панические настроения, "некрологи", полное молчание'})]})]})]})}),e.jsxs(Cc,{number:3,title:"Распределение холдеров и китов",icon:e.jsx(Js,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{className:"text-sm",children:"Цель — исключить активы с централизованным контролем ликвидности."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-emerald-500/5 border-emerald-500/20":"bg-emerald-50 border-emerald-500/20"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-500 mb-1",children:"Max Holder"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"≤ 3% эмиссии"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-emerald-500/5 border-emerald-500/20":"bg-emerald-50 border-emerald-500/20"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-500 mb-1",children:"Top-10 Holders"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"≤ 20% всего"})]})]}),e.jsx("p",{className:"text-sm font-medium mt-2 text-rose-400",children:"* При признаках массового распределения позиций крупными держателями актив исключается."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(or,{className:"w-6 h-6 text-amber-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Управление позицией"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Усреднение"}),e.jsxs("div",{className:`space-y-2 p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"1-й добор"}),e.jsx("span",{className:"font-bold text-amber-500",children:"-15%...-25%"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"2-й добор"}),e.jsx("span",{className:"font-bold text-amber-500",children:"-40%...-50%"})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-white/5 text-[11px] text-rose-400 font-bold uppercase",children:"3-й добор ЗАПРЕЩЕН"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Диверсификация"}),e.jsxs("div",{className:`space-y-2 p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-sm",children:"Дробление между адресами"}),e.jsxs("p",{className:"text-[11px] font-medium text-gray-400",children:["Max ",e.jsx("span",{className:"text-amber-500 font-bold",children:"0.5%"})," эмиссии на один кошелек"]})]})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Экспресс-чек"})]}),e.jsxs("div",{className:`space-y-1.5 ${s==="dark"?"text-gray-400":"text-gray-600"} text-sm`,children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"ATH-кап ≥ 500k USD"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Current кап ",">"," 20k USD"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Просадка 50–90%"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"3+ упоминания в X (5k+)"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Топ-1 ","<"," 3%, Топ-10 ≤ 20%"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Qt,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Итоговая логика стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Эта стратегия — это не охота за разворотами и не ставка на удачу. Это системная работа с активами, которые уже были признаны рынком, временно торгуются в зоне страха, но сохраняют интерес, ликвидность и распределённое владение. Любое отклонение от фильтров разрушает её статистическое преимущество."})]})]})})]})},en=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-300":"text-gray-600",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},C3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(lt,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA Intraday"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"AVA Intraday — это системная стратегия внутридневной торговли в Solana-сегменте, ориентированная на поиск и отработку свежих токенов с горизонтом удержания позиции от 1 часа до 1 торгового дня."}),e.jsx("p",{className:`text-sm opacity-80 ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Это не скальпинг и не погоня за хаями. Ключ — быстрое, но взвешенное принятие решений на основе чётких метрик и алгоритма."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(wt,{className:"w-3.5 h-3.5"}),"1H - 24H"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Dt,{className:"w-3.5 h-3.5"}),"SOLANA MIGRATED"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),"DCA / RETRACE"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{title:"Любая фаза",desc:"При слабых объёмах, стагнации и во флете.",icon:e.jsx(gs,{className:"w-5 h-5 text-emerald-500"})},{title:"Стабильность",icon:e.jsx(Pe,{className:"w-5 h-5 text-blue-500"}),desc:"Забираем повторяемую прибыль на умеренных сетапах."},{title:"Ежедневно",icon:e.jsx(wt,{className:"w-5 h-5 text-amber-500"}),desc:"Десятки новых мемов и раннеров каждый день в Solana."},{title:"Микро-деп",icon:e.jsx(Go,{className:"w-5 h-5 text-purple-500"}),desc:"Входы возможны от $5–10."}].map((i,l)=>e.jsxs("div",{className:`p-5 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-white border-gray-100"} shadow-sm`,children:[e.jsx("div",{className:"mb-3",children:i.icon}),e.jsx("h4",{className:"font-bold text-sm mb-1",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:i.desc})]},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"} flex gap-4 items-start`,children:[e.jsx(Mh,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Это не про угадывание, это рабочая рутина. Результат достигается анализом, а не спешкой. Один пропущенный красный флаг перечеркивает серию прибыльных сделок. Если токен требует оправданий — он не торгуется."})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} flex gap-4 items-start`,children:[e.jsx(sr,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Кому подходит?"}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Трейдерам, ценящим структуру и понятные правила. Новичкам с небольшим депо и опытным филлерам, желающим диверсифицировать стиль через 15–60 минут после старта токена."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Алгоритм работы"})]}),e.jsxs(en,{number:1,title:"Поиск свежих токенов",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Отбор на самой ранней стадии свободы:"}),e.jsxs("ul",{className:"space-y-2 text-sm list-disc list-inside pl-2",children:[e.jsxs("li",{children:["Открываем ",e.jsx("strong",{children:"GMGN"})," или ",e.jsx("strong",{children:"Axiom"})]}),e.jsxs("li",{children:["Вкладка ",e.jsx("strong",{children:"Migrated"})," (с Launchpad в торговлю)"]}),e.jsx("li",{children:"Фильтруем по интересующим Launchpad’ам"}),e.jsxs("li",{children:["Возраст токена: ",e.jsx("strong",{children:"1 – 60 минут"})]}),e.jsx("li",{className:"text-orange-400 font-bold",children:"Токены старше 1 часа — исключаются."})]})]}),e.jsx(en,{number:2,title:"Скрининг базовых метрик",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Market Cap"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"50k - 100k USD"}),e.jsxs("p",{className:"text-[10px] text-orange-400 font-medium",children:[">","100k — риск перегретости"]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Объёмы"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"Активные"}),e.jsx("p",{className:"text-[10px] text-emerald-500 font-medium",children:"Рост в 2-4 раза за короткий период"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Холдеры"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"+300 / 40м"}),e.jsx("p",{className:"text-[10px] text-emerald-500 font-medium",children:"Минимум +300 за 30-40 мин"})]})]})}),e.jsx(en,{number:3,title:"Проверка нарратива и социального фона",icon:e.jsx(Qr,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:e.jsx(Qr,{className:"w-5 h-5 text-sky-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm",children:"Анализ Twitter / X"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Наличие свежих постов, комментарии, репосты, поддержка со стороны реальных коллеров."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:e.jsx(Wp,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm",children:"Telegram-группа"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Активность админ-состава, живое обсуждение, отсутствие явной бот-активности."})]})]})]})}),e.jsx(en,{number:4,title:"Техническая оценка графика",icon:e.jsx(Nt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:e.jsxs("ul",{className:"space-y-3 text-sm list-disc list-inside pl-2",children:[e.jsx("li",{children:'Органичное движение: плавный рост, отсутствие "одной ракеты" (свеча 200%+).'}),e.jsxs("li",{children:["Сравнение объёмов на ",e.jsx("strong",{children:"1m TF"})," за последние 10–15 минут."]}),e.jsx("li",{className:"text-rose-400 font-bold p-3 rounded-xl bg-rose-400/5 border border-rose-400/20 list-none",children:"КРИТИЧЕСКИЙ СИГНАЛ: Если объёмы падают (напр. с 5k до 500), активность затухает — вход запрещён."})]})}),e.jsx(en,{number:5,title:"Уровни Фибоначчи + Структура",icon:e.jsx(or,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border border-l-4 border-blue-500/50 ${s==="dark"?"bg-blue-500/5":"bg-blue-50"}`,children:[e.jsx("p",{className:"text-sm font-bold text-blue-500 uppercase tracking-widest mb-1",children:"Правило входа"}),e.jsx("p",{className:"text-sm",children:"Вход только на подтверждённом откате. Вход в растущий график ЗАПРЕЩЁН."})]}),e.jsx("p",{className:"text-sm font-medium",children:"Тянем Фибу от начала импульса до хая. Ключевые уровни входа:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["0.5","0.618","0.786"].map(i=>e.jsx("div",{className:`px-4 py-2 rounded-lg border font-black text-sm ${s==="dark"?"bg-white/5 border-white/10 text-blue-400":"bg-blue-50 border-blue-200 text-blue-600"}`,children:i},i))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Приоритет — совпадение уровня с локальной поддержкой или проторговкой."})]})}),e.jsx(en,{number:6,title:"Контроль позиции и выход",icon:e.jsx(F4,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-emerald-500/5 border-emerald-500/20":"bg-emerald-50 border-emerald-500/20"}`,children:[e.jsx("h5",{className:"text-xs font-bold text-emerald-500 uppercase tracking-widest mb-2",children:"Цели (TP)"}),e.jsx("p",{className:"text-lg font-black ${headingColor}",children:"20% – 70%"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Основная прибыль в этом диапазоне, остаток по ситуации."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"}`,children:[e.jsx("h5",{className:"text-xs font-bold text-rose-500 uppercase tracking-widest mb-2",children:"Сигнал Выхода"}),e.jsx("p",{className:"text-sm font-bold",children:"Деградация объёмов"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Резкое снижение активности или ончейн-фиксация."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest opacity-50",children:"В процессе удержания:"}),e.jsxs("ul",{className:"text-xs space-y-2 list-disc list-inside text-gray-500",children:[e.jsx("li",{children:"Мониторинг X: прекращение активности = сигнал слабости."}),e.jsx("li",{children:"Ончейн: проверка фиксации прибыли топ-холдерами."}),e.jsx("li",{children:"Никаких пересиживаний минуса: стратегия не терпит ухудшения условий."})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zs,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Красные флаги"})]}),e.jsx("p",{className:"text-[10px] text-rose-400 uppercase font-black tracking-widest",children:"Автоматический отказ от сделки"}),e.jsx("div",{className:"space-y-3",children:[{label:"График",val:"Ракета 200%+ или пробой всех уровней Фибо одной свечой вниз."},{label:"Объём",val:"Резкое падение (напр. 40k → 3k за 10 мин)."},{label:"Ликвидность",val:"Объёмы значительно меньше капитализации (Cap 1M — Vol 100k)."},{label:"Холдеры",val:"Один холдер > 2%, бандлы > 30 SOL, или Top-10 > 20%."},{label:"PNL Холдеров",val:"Большинство уже сидит на x5+ при капе < 100k."},{label:"DEV",val:"Запускает 3–5 токенов в сутки без миграции."}].map((i,l)=>e.jsxs("div",{className:"space-y-1 pb-2 border-b border-rose-500/10 last:border-0",children:[e.jsx("p",{className:"text-[9px] font-black text-rose-500/70 uppercase",children:i.label}),e.jsx("p",{className:"text-xs font-medium text-gray-500 leading-tight",children:i.val})]},l))})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-amber-500/5 border-amber-500/20":"bg-amber-50 border-amber-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-amber-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Жёлтые флаги"})]}),e.jsx("p",{className:"text-[10px] text-amber-500 uppercase font-black tracking-widest",children:"Требуют осторожности"}),e.jsxs("div",{className:"space-y-3 text-xs text-gray-500",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-amber-500",children:"Бандлы 100–200 SOL:"})," Оценить, плавно ли команда ведёт график."]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-amber-500",children:"Нет ссылки на X:"})," Требуется ручной поиск. Если нарратив не читается — отказ."]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-amber-500",children:"Слабый нарратив:"})," Если идея не вызывает интереса, лучше переключиться."]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-white/5 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n_,{className:"w-6 h-6 text-gray-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("ul",{className:"space-y-2 text-xs text-gray-500 list-disc list-inside",children:[e.jsx("li",{children:"Вход в ракету вместо отката."}),e.jsx("li",{children:'Игнорирование падения объёмов "в надежде".'}),e.jsx("li",{children:"Заход при перегруженном распределении."}),e.jsx("li",{children:'Оправдание плохих метрик "сильным графиком".'}),e.jsx("li",{children:'Попытка "досидеть", когда сетап уже сломан.'})]})]})]})]})]})},tn=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},D3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(ka,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA FLIP-1S"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Scalping"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Flip на секундном таймфрейме — это сверхбыстрая стратегия скальпинга, заточенная под мгновенный откуп резких просадок на графике."}),e.jsxs("p",{className:`text-sm opacity-80 ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:["Цель — не угадать рост токена, а активно отработать момент сильного падения, которое с высокой вероятностью откупается. Сделки длятся ",e.jsx("strong",{children:"от 1 до 5 секунд"}),"."]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"} flex gap-4 items-start`,children:[e.jsx(Tt,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Почему это работает?"}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Большинство трейдеров используют медленные источники (DexScreener/DexTool), которые отстают на 5-7 секунд. Резкие сливы (10-20% эмиссии) создают глубокие просадки, видимые только в быстрых терминалах (GMGN, Alpha One, Fasol)."})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} flex gap-4 items-start`,children:[e.jsx(Go,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Кому подходит?"}),e.jsxs("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:["Любому трейдеру, готовому тренировать внимание и дисциплину. Работает на любом депозите, но идеальный старт — ",e.jsx("strong",{children:"от 50 долларов"}),". Важен только импульс и откуп в моменте."]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{title:"Освоение",desc:"От 1 недели до месяца. Не сравнивайте свой путь с чужим.",icon:e.jsx(ar,{className:"w-5 h-5 text-blue-500"})},{title:"Потенциал",icon:e.jsx(Pe,{className:"w-5 h-5 text-blue-500"}),desc:"Возможен выход на $1000/день через месяц практики."},{title:"Тайминг",icon:e.jsx(wt,{className:"w-5 h-5 text-blue-500"}),desc:"Сделки 1-5 сек. Важна концентрация, а не глубокий ресерч."}].map((i,l)=>e.jsxs("div",{className:`p-5 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-white border-gray-100"} shadow-sm`,children:[e.jsx("div",{className:"mb-3",children:i.icon}),e.jsx("h4",{className:"font-bold text-sm mb-1",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:i.desc})]},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Где искать и что делать"})]}),e.jsx(tn,{number:1,title:"Где искать токены?",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h5",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Миграции Axiom"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Jupiter Studio, Believe, Moonshot. Главное — открыть график до просадки."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h5",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Photon (Тренды)"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Вкладка тренды, режим 1м/5м. Сортировка по объёму для поиска резкой активности."})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-l-4 border-blue-500/50 ${theme === 'dark' ? 'bg-blue-500/5' : 'bg-blue-50'}",children:[e.jsx("p",{className:"text-xs font-bold uppercase mb-1",children:"Признаки нужного токена:"}),e.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside text-gray-600",children:[e.jsx("li",{children:"Зелёные свечи подряд"}),e.jsxs("li",{children:["Объём за 5 минут: ",e.jsx("strong",{children:"$50,000+"})]}),e.jsx("li",{children:"Резкий взлет цены (памп)"})]})]})]})}),e.jsxs(tn,{number:2,title:"Какой график и токен нужен?",icon:e.jsx(Nt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Секундный TF","Высокая волатильность","Просадка > 20%","Откуп 1-3 сек"].map(i=>e.jsx("span",{className:`px-3 py-1 rounded-lg border text-[10px] font-bold ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:i},i))}),e.jsx("p",{className:"text-sm",children:"Если таких признаков нет — токен не подходит для FLIP-1S."})]}),e.jsx(tn,{number:3,title:"Сигналы на вход",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsxs("div",{className:`p-4 rounded-xl border border-l-4 border-blue-500/50 ${s==="dark"?"bg-blue-500/5":"bg-blue-50"}`,children:[e.jsx("p",{className:"text-sm font-bold uppercase mb-2 tracking-widest text-blue-500",children:"Резкая просадка"}),e.jsxs("p",{className:"text-sm",children:["Трейд работает только при падении на ",e.jsx("strong",{children:"20% за 1-2 секунды"}),". Заходим, когда свеча падает или на мгновенном начале отскока."]})]})}),e.jsx(tn,{number:4,title:"Идеальный вход",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium",children:"Последовательность успеха:"}),e.jsx("div",{className:"flex flex-col gap-2",children:["Токен только вылетел в миграции","Появился всплеск объёма","График улетает вверх","Резкая просадка (1-2 сек)","Сильный откуп (1-3 сек)"].map((i,l)=>e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500/20 text-blue-500 flex items-center justify-center font-bold text-[10px]",children:l+1}),i]},l))}),e.jsx("p",{className:"text-xs text-blue-500 font-bold mt-2",children:"Важно: Купить на просадке, а не после того, как график уже вернулся на хай."})]})}),e.jsx(tn,{number:5,title:"Когда НЕ заходить?",icon:e.jsx(Kp,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:e.jsxs("ul",{className:"space-y-2 text-sm text-gray-500",children:[e.jsxs("li",{className:"flex gap-2",children:["❌ ",e.jsx("span",{children:"Момент пропущен и токен уже откупился."})]}),e.jsxs("li",{className:"flex gap-2",children:["❌ ",e.jsx("span",{children:"Просадка плавная, а не резкая."})]}),e.jsxs("li",{className:"flex gap-2",children:["❌ ",e.jsxs("span",{children:["Токен упал на ",e.jsx("strong",{children:"-50%"})," от хая (затяжной слив)."]})]}),e.jsxs("li",{className:"flex gap-2",children:["❌ ",e.jsx("span",{children:"Нет откупа за 2-3 секунды — выход в ноль/минус."})]})]})}),e.jsx(tn,{number:6,title:"Аномальные просадки (Advanced)",icon:e.jsx(Rt,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:e.jsxs("div",{className:`p-4 rounded-xl border border-dashed ${s==="dark"?"border-blue-500/30":"border-blue-500/20"}`,children:[e.jsx("p",{className:"text-xs italic text-gray-500 mb-3",children:"Только для профи. Сделки до 15-20 секунд при падении с 200к до 20к."}),e.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside text-gray-600",children:[e.jsx("li",{children:"Нормальный DEV (не скам)"}),e.jsx("li",{children:"Просадка 80-90%"}),e.jsx("li",{children:"Ликвидность не убита"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ls,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Экспресс-чек"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1 pb-2 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"Объёмы"}),e.jsx("p",{className:"text-xs text-gray-500",children:"За 5 мин — $50,000+. Серия зелёных свечей вверх."})]}),e.jsxs("div",{className:"space-y-1 pb-2 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"Метрики"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["DEV ","<"," 2%. Топ-10 холдеров ","<"," 50%. Ликвидность ",">"," $20k."]})]}),e.jsxs("div",{className:"space-y-1 pb-2 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"Позиция"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Вход ","<"," 1% от ликвидности. Макс 30% депозита."]})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zs,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типовые ошибки"})]}),e.jsxs("div",{className:"space-y-4 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-rose-500",children:"Вход после откупа"}),e.jsx("p",{className:"leading-relaxed",children:"Заход на росте приводит к потере на следующем сливе. Жди только дна."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-rose-500",children:"Засаживание (Hope)"}),e.jsx("p",{className:"leading-relaxed",children:"Надежда на отскок более 2-3 секунд. Не откупилось — выходи сразу."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-rose-500",children:"Тильт-усреднение"}),e.jsx("p",{className:"leading-relaxed",children:"Попытка отбиться после минуса через увеличение позы. Стоп после -30%."})]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border-2 border-dashed ${s==="dark"?"border-blue-500/30":"border-blue-500/20"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-bold text-sm",children:"Дисциплина рисков"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-bold",children:"СТОП СЕССИИ"}),e.jsx("p",{className:"text-xs font-black text-rose-500",children:"-30% (Пауза 2ч)"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-bold",children:"СТОП ДНЯ"}),e.jsx("p",{className:"text-xs font-black text-rose-500",children:"-50% (Отдых)"})]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Mh,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Финальное напутствие"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"FLIP-1S требует максимального спокойствия. Это механический процесс откупа неэффективности рынка. Если вы успеваете реагировать быстрее, чем DexScreener отображает свечу — вы уже в прибыли. Не торопите прогресс, результат придет через сотни микро-сделок."})]})]})})]})},sn=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i,badge:l})=>{const{theme:c}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${c==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${c==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:t})]})}),l&&e.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-blue-500/10 text-blue-500 text-[10px] font-bold uppercase tracking-wider border border-blue-500/20 mr-4",children:l})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${c==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${c==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},R3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?"":i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(lt,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA FLIP + FIBA"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Pre-Migration"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Интрадей-флип pre-migration токенов Solana. Авторская стратегия для сверхбыстрых сделок."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-bold",children:"Цель: 2–3x"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-bold",children:"Время: 1–10 мин"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(ar,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Основная идея"})]}),e.jsx("p",{className:"text-sm leading-relaxed opacity-80",children:"Ловля первичного импульса на старте выпуска токена через инфоповод: пост в Twitter (X), активное комьюнити, понятный и хайповый нарратив. Вошёл → забрал импульс → вышел. Не удерживаем позицию долго."})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(Tt,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Почему это работает?"})]}),e.jsxs("ul",{className:"text-xs space-y-3 opacity-90",children:[e.jsxs("li",{className:"flex gap-2",children:["🔹 ",e.jsxs("span",{children:[e.jsx("strong",{children:"Рынок изменился:"})," Большинство покупок совершаются эмоционально."]})]}),e.jsxs("li",{className:"flex gap-2",children:["🔹 ",e.jsxs("span",{children:[e.jsx("strong",{children:"Pre-migration сегмент:"})," Токены с минимальной капитализацией дают иксы за секунды."]})]}),e.jsxs("li",{className:"flex gap-2",children:["🔹 ",e.jsxs("span",{children:[e.jsx("strong",{children:"Скорость решает:"})," Решения принимаются молниеносно: увидел → понял → зашёл."]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Энциклопедия стратегии"})]}),e.jsxs(sn,{number:1,title:"Для кого подходит?",icon:e.jsx(yt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),badge:"Profile",children:[e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex justify-between items-center border-b border-white/5 pb-2",children:[e.jsx("span",{children:"Депозит:"}),e.jsx("span",{className:"font-bold text-blue-500",children:"до $500"})]}),e.jsxs("li",{className:"flex justify-between items-center border-b border-white/5 pb-2",children:[e.jsx("span",{children:"Кол-во сделок:"}),e.jsx("span",{className:"font-bold text-blue-500",children:"10–15 в день"})]}),e.jsxs("li",{className:"flex justify-between items-center border-b border-white/5 pb-2",children:[e.jsx("span",{children:"Вход:"}),e.jsx("span",{className:"font-bold text-blue-500",children:"20–30 секунд"})]}),e.jsxs("li",{className:"flex justify-between items-center pb-2",children:[e.jsx("span",{children:"Фиксация:"}),e.jsx("span",{className:"font-bold text-blue-500",children:"1–2 минуты"})]})]}),e.jsx("p",{className:"text-xs italic opacity-70 mt-2",children:"Требуется полное отсутствие эмоциональной привязанности к токенам и готовность быстро резать убытки."})]}),e.jsx(sn,{number:2,title:"Инструменты и Колонки",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),badge:"Setup",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h5",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Терминалы"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Axiom Terminal, GMGN"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h5",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Торговля & Графики"}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"Alpha One, Fasol, Frontrun"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/20",children:[e.jsx("p",{className:"text-xs font-bold uppercase mb-2",children:"Рабочие колонки (Axiom/GMGN):"}),e.jsxs("ul",{className:"text-xs space-y-2",children:[e.jsxs("li",{children:["🚀 ",e.jsx("strong",{children:"Final Stretch (Ключевая):"})," Капитализация $10K–30K. Токены до миграции, уже есть объёмы."]}),e.jsxs("li",{children:["🆕 ",e.jsx("strong",{children:"New Pairs:"})," Свежие токены с нулевой капой. Высокая доля мусора, но есть алмазы."]}),e.jsxs("li",{children:["🛑 ",e.jsx("strong",{children:"Migrated:"})," После миграции — для данной стратегии НЕ используются."]})]})]})]})}),e.jsx(sn,{number:3,title:"Чек-лист отбора токена",icon:e.jsx(Qr,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),badge:"Audit",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-bold text-blue-500 mb-3 flex items-center gap-2",children:[e.jsx(Qr,{className:"w-4 h-4"})," Социальный аудит (Обязательно)"]}),e.jsxs("ul",{className:"space-y-2 text-xs",children:[e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("span",{children:"Запуск из живого Twitter-комьюнити (пост свежий — 10–15 мин)."})]}),e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("span",{children:"У автора или комьюнити 1000+ живых подписчиков."})]}),e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("span",{children:"Контракт указан в посте или закрепленном сообщении чата."})]}),e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("span",{children:"Визуал и слоган соответствуют хайповой идее."})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h5",{className:"text-sm font-bold text-blue-500 mb-3 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"})," График и Метрики (Axiom)"]}),e.jsxs("ul",{className:"grid grid-cols-2 gap-y-2 text-[10px] uppercase font-bold",children:[e.jsx("li",{children:"Dev: 0%"}),e.jsx("li",{children:"Top-10: 25–30%"}),e.jsx("li",{children:"Снайперы: 6–7%"}),e.jsx("li",{children:"Инсайдеры: до 10%"}),e.jsx("li",{children:"Бандлеры: до 30%"})]}),e.jsx("p",{className:"text-xs mt-3 opacity-70 italic",children:"На графике должны быть объёмные свечи. Обязателен откуп после DevSell."})]})]})}),e.jsx(sn,{number:4,title:"Точка входа и выхода",icon:e.jsx(Go,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),badge:"Execution",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-green-500/5 border border-green-500/20",children:[e.jsx("h6",{className:"text-xs font-bold text-green-500 uppercase mb-2",children:"Где входим?"}),e.jsx("p",{className:"text-sm",children:"В первые минуты после появления токена, когда идея ясна и пошли объемы. Не входим на FOMO, если цена уже улетела без проторговки."})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-rose-500/5 border border-rose-500/20",children:[e.jsx("h6",{className:"text-xs font-bold text-rose-500 uppercase mb-2",children:"Где выходим? (Главное правило)"}),e.jsx("p",{className:"text-sm mb-2",children:"Фиксация на импульсе: обычно это 2–3x при росте капы с $7–8K до $20–30K."}),e.jsxs("ul",{className:"text-xs space-y-1 opacity-80 list-disc list-inside",children:[e.jsx("li",{children:"Цена вернулась к входу — выход в ноль."}),e.jsx("li",{children:"Не ждать «ещё чуть-чуть»."}),e.jsx("li",{children:"Убыток резать быстро: –10–15% максимум."})]})]})]})}),e.jsx(sn,{number:5,title:"Дополнительно: FIBA",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),badge:"Advanced",children:e.jsxs("div",{className:`p-4 rounded-xl border-2 border-dashed ${s==="dark"?"border-blue-500/30":"border-blue-500/20"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase text-blue-500 mb-2",children:"Работа на откате (15s / 1m TF)"}),e.jsx("p",{className:"text-sm mb-3",children:"Если основной импульс пропущен, строим сетку Фибо от лоя до хая."}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold opacity-50 uppercase",children:"Уровни входа"}),e.jsx("p",{className:"font-black text-blue-500",children:"0.618 / 0.786"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold opacity-50 uppercase",children:"Цель отскока"}),e.jsx("p",{className:"font-black text-green-500",children:"20–40%"})]})]})]})}),e.jsx(sn,{number:6,title:"Навык и Ошибки",icon:e.jsx(Ct,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-blue-500 mb-2",children:"Насмотренность"}),e.jsx("p",{className:"text-xs leading-relaxed opacity-80",children:"Ежедневно разбирайте токены, которые улетели. Анализируйте идею, вход и тайминг. «Торговля на бумаге» — отмечайте гипотетические входы. Постоянно будьте в инфополе (Twitter, чаты, стримеры)."})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-rose-500/5":"bg-rose-50"} border border-rose-500/20`,children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-rose-500 mb-2",children:"Типичные ошибки"}),e.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside opacity-80",children:[e.jsx("li",{children:"Вход без понимания идеи."}),e.jsx("li",{children:"FOMO и вера в токен (пересиживание профита)."}),e.jsx("li",{children:"Надежда в убыточной позиции."}),e.jsx("li",{children:"Игнорирование метрик DEV и холдеров."}),e.jsx("li",{children:"Отработка без дисциплины фиксации."})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fr,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Тех. настройки"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"pb-3 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest mb-1",children:"ГАЗ (PRIORITY)"}),e.jsx("p",{className:"text-xs font-bold",children:"0.002 SOL (СТАРТ)"})]}),e.jsxs("div",{className:"pb-3 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest mb-1",children:"JITO"}),e.jsx("p",{className:"text-xs font-bold",children:"ВСЕГДА ВКЛЮЧЕН ВРУЧНУЮ"})]}),e.jsxs("div",{className:"pb-3 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest mb-1",children:"SLIPPAGE (PRO)"}),e.jsx("p",{className:"text-xs font-bold",children:"20% КУПИТЬ / 20% ПРОДАТЬ"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-blue-500 uppercase tracking-widest mb-1",children:"ВХОД"}),e.jsx("p",{className:"text-xs font-bold",children:"ПО РЫНКУ, ОДНОЙ СУММОЙ"})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-[10px] text-rose-500 font-bold uppercase text-center",children:"АВТО-SL / TP НЕ ИСПОЛЬЗОВАТЬ"})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Потолок идеи"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold opacity-50 uppercase",children:"Слабая идея"}),e.jsx("p",{className:"text-xs font-bold tracking-tight",children:"ФИКСАЦИЯ ОКОЛО $50K КАПЫ"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold opacity-50 uppercase",children:"Сильная идея"}),e.jsx("p",{className:"text-xs font-bold tracking-tight",children:"ЖДАТЬ $100K–$150K"})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-[10px] font-black text-rose-500 uppercase mb-2 tracking-tighter underline",children:"ПРОПУСКАТЬ, ЕСЛИ:"}),e.jsxs("ul",{className:"text-[10px] space-y-1 opacity-70",children:[e.jsx("li",{children:"• Идея нечитаемая / дубликат"}),e.jsx("li",{children:"• Ошибки в названии"}),e.jsx("li",{children:"• Нет ясного нарратива"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"} flex gap-6 items-start shadow-inner`,children:[e.jsx("div",{className:`p-4 rounded-full ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(sr,{className:"w-10 h-10 text-blue-500 shrink-0"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-xl font-black ${n}`,children:"Итог стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Стратегия основана на скорости и дисциплине. Чек-лист важнее интуиции. На старте — меньше сделок, больше глубокого анализа. Прогресс приходит через ежедневную осознанную практику и наработку насмотренности."}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-500 font-black text-[10px] uppercase tracking-widest pt-2",children:["Действуйте хладнокровно ",e.jsx(Pe,{className:"w-3 h-3"})]})]})]})]})},fl=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i,badge:l})=>{const{theme:c}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${c==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${c==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:t})]})}),l&&e.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-blue-500/10 text-blue-500 text-[10px] font-bold uppercase tracking-wider border border-blue-500/20 mr-4",children:l})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${c==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${c==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},P3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?"":i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Ys,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA - FIBA MODE"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Counter-Trend"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Контртрендовая подстратегия для забора технического отката. Включается, когда импульс упущен, но актив жив и сохраняет интерес рынка."}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10 inline-block text-xs font-bold italic opacity-80",children:'"FIBA — это работа на чужой фиксации. Зарабатываем не на росте, а на реакции рынка на коррекцию."'})]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(sr,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"FIBA ЗАПРЕЩЕНА, если:"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Мёртвый актив",desc:"Нет объема, график — тонкие линии, пустые свечи."},{title:"Тишина в X",desc:"Twitter молчит, нет живого инфоповода и новых твитов."},{title:"Одиночный памп",desc:"Движение было разовым импульсом без поддержки комьюнити."},{title:"Агрессивный слив",desc:"Слив без откупов, Dev активно продает в коррекции."},{title:"Слом структуры",desc:"Цена ушла ниже старта импульса → стратегия отменяется."},{title:"Много отскоков от 0.7",desc:"Более одного-двух раза после миграции токен уже отскочил от 0.7."},{title:"Сильный пролив после миграции",desc:"Если после миграции токен полился слишком сильно."},{title:"Низкая капитализация vs ликвидность",desc:"Если капитализация и FDV меньше 2-3 ликвидности или равны ей (единое правило: MC и FDV должны быть в 2-3 раза больше ликвидности)."},{title:"Упало ниже 10 MC",desc:"Если упало ниже 10 MC, если нет ярой поддержки X и постоянных покупок."}].map((i,l)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-rose-600 font-bold uppercase",children:[e.jsx(Zs,{className:"w-3.5 h-3.5 shrink-0"}),i.title]}),e.jsx("p",{className:"text-[10px] opacity-70 ml-5 leading-relaxed",children:i.desc})]},l))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Технический регламент"})]}),e.jsx(fl,{number:1,title:"Обязательные условия",icon:e.jsx(Tt,{className:"w-5 h-5 text-blue-500"}),isOpen:t===1,onToggle:()=>a(1),badge:"Checklist",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h5",{className:"text-xs font-bold uppercase mb-3 text-blue-500 flex items-center gap-2",children:[e.jsx(Qr,{className:"w-4 h-4"})," Живой Twitter & Инфополе"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-[10px] font-bold uppercase text-gray-400 mb-2",children:"Обязательные условия:"}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-2 leading-relaxed",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 shrink-0"}),e.jsx("span",{children:"Запуск из живого Twitter-комьюнити, идут постоянные посты, последнему посту не более 3-4 минут"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 shrink-0"}),e.jsx("span",{children:"У автора или комьюнити 500-1000+ живых подписчиков"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 shrink-0"}),e.jsx("span",{children:"Контракт указан в посте или закрепленном сообщении чата"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 shrink-0"}),e.jsx("span",{children:"Визуал и слоган соответствуют хайповой идее"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 shrink-0"}),e.jsx("span",{children:"Должно быть актуальное инфо-сопровождение: продолжаются твиты, идут репосты, комьюнити обсуждает токен, появляются новые участники. Откат должен быть на фоне интереса, а не затухания"})]})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("h5",{className:"text-xs font-bold uppercase mb-2 text-blue-500 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"})," Объём — ключевой фильтр"]}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-2",children:"Перед построением Фибо: импульсный объём, видны свечи с телами, движение сформировано покупками."}),e.jsx("div",{className:"p-2 bg-blue-500/5 rounded border border-blue-500/10 text-[10px] font-bold italic opacity-70",children:'"Фибо имеет смысл только там, где есть ликвидность. Без объёма уровни — фикция."'})]})]})}),e.jsx(fl,{number:2,title:"Механика входа и Фибо",icon:e.jsx(Go,{className:"w-5 h-5 text-blue-500"}),isOpen:t===2,onToggle:()=>a(2),badge:"Technical",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black opacity-50 uppercase",children:"Таймфрейм"}),e.jsx("p",{className:"font-bold text-blue-500",children:"15s / 1m"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black opacity-50 uppercase",children:"Тип ордеров"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Только лимитки"})]})]}),e.jsxs("p",{className:"text-xs opacity-80 pt-2 border-t border-white/5",children:["Построение: Сетка строится от ",e.jsx("strong",{children:"лоя импульса"})," к его ",e.jsx("strong",{children:"хаю"}),"."]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h6",{className:"text-xs font-bold uppercase mb-3",children:"Рабочие уровни входа:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-black tracking-widest text-blue-500",children:"0.618"}),e.jsx("p",{className:"text-[9px] opacity-60 uppercase font-black",children:"Ликвидная зона 1"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-black tracking-widest text-blue-500",children:"0.786"}),e.jsx("p",{className:"text-[9px] opacity-60 uppercase font-black",children:"Ликвидная зона 2"})]})]})]})]})}),e.jsx(fl,{number:3,title:"Условия подтверждения",icon:e.jsx(He,{className:"w-5 h-5 text-blue-500"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsxs("div",{className:`p-6 rounded-xl border-l-4 border-blue-500 ${s==="dark"?"bg-blue-500/5":"bg-blue-50"}`,children:[e.jsx("p",{className:"text-sm font-bold text-blue-500 uppercase mb-3",children:"Сигнал — это реакция цены + объем"}),e.jsxs("ul",{className:"text-xs space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-500 mt-0.5",children:e.jsx(lt,{className:"w-3 h-3"})}),e.jsx("span",{children:"На уровне появляется объем на откуп."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-500 mt-0.5",children:e.jsx(lt,{className:"w-3 h-3"})}),e.jsx("span",{children:"Есть заметное замедление падения."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-500 mt-0.5",children:e.jsx(lt,{className:"w-3 h-3"})}),e.jsx("span",{children:"Нет агрессивного пролива маркетом."})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded bg-blue-500/20 text-blue-500 mt-0.5",children:e.jsx(lt,{className:"w-3 h-3"})}),e.jsx("span",{children:"Отсутствие DevSell в момент коррекции."})]})]})]})}),e.jsx(fl,{number:4,title:"Логика сделки и Риски",icon:e.jsx(sr,{className:"w-5 h-5 text-blue-500"}),isOpen:t===4,onToggle:()=>a(4),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-blue-500 border-b border-blue-500/20 pb-1",children:"Цель сделки"}),e.jsxs("p",{className:"text-[11px] opacity-80 leading-relaxed",children:["Целимся в технический отскок, а не в новый хай.",e.jsx("br",{}),"Фиксация: ",e.jsx("strong",{className:"text-green-500",children:"20–40%"})," без ожиданий продолжения тренда."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-rose-500 border-b border-rose-500/20 pb-1",children:"Риск-модель"}),e.jsxs("ul",{className:"text-[11px] space-y-2 opacity-80",children:[e.jsx("li",{children:"• Меньший объём позиции, чем в AVA FLIP"}),e.jsx("li",{children:"• Более быстрый стоп-лосс"}),e.jsx("li",{children:'• Никаких усреднений и "веры"'})]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-3xl p-6 border ${s==="dark"?"bg-[#151a21] border-white/5 shadow-xl":"bg-white border-gray-100 shadow-sm"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-6 h-6 text-blue-500"}),e.jsx("h4",{className:`font-black uppercase text-sm ${n}`,children:"Эффективность"})]}),e.jsx("p",{className:"text-[10px] leading-relaxed text-gray-500",children:"Максимально эффективно при: сильном нарративе, хайповой теме, активном Twitter и нескольких волнах объема."}),e.jsxs("div",{className:"pt-2 border-t border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black uppercase text-blue-500 mb-1",children:"Зона разворота"}),e.jsx("p",{className:"text-[10px] opacity-70 italic",children:"На 0.618 и 0.786 фиксируют ранние и добирают новые — это зоны локального разворота."})]})]}),e.jsxs("div",{className:"p-6 rounded-3xl bg-blue-500/5 border border-blue-500/10 text-center space-y-2",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-400",children:"Концептуальная формула:"}),e.jsx("p",{className:"text-xs font-black tracking-tighter leading-tight",children:"ЖИЗНЬ В АКТИВЕ + ОБЪЁМ + СТРУКТУРА + УРОВЕНЬ = СДЕЛКА"}),e.jsx("p",{className:"text-[9px] opacity-60 underline decoration-blue-500/30",children:"БЕЗ ЛЮБОГО ЭЛЕМЕНТА ВХОД ЗАПРЕЩЁН"})]}),e.jsxs("div",{className:"p-6 rounded-3xl border border-dashed border-gray-300 flex flex-col items-center justify-center opacity-60",children:[e.jsx(ls,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-[10px] font-black text-center uppercase tracking-widest",children:"FIBA — это короткий технический трейд, а не долгосрочная идея."})]})]})]}),e.jsxs("div",{className:`rounded-[2.5rem] p-8 border ${s==="dark"?"bg-blue-500/5 border-blue-500/10":"bg-blue-50 border-blue-500/5 shadow-sm"} flex flex-col items-center text-center space-y-4`,children:[e.jsx("div",{className:"p-4 rounded-2xl bg-blue-500 text-white shadow-lg shadow-blue-500/20",children:e.jsx(Pe,{className:"w-8 h-8"})}),e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h4",{className:`text-2xl font-black ${n} uppercase mb-2`,children:"Финальное правило FIBA"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Если AVA FLIP — это работа на импульсе, то FIBA — это хладнокровная работа на неэффективности рынка в момент страха коррекции. Отработал отскок → забрал профит → вышел без оглядки."})]})]})]})},Dc=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},M3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=l=>{r(t===l?null:l)},n=s==="dark"?"text-white":"text-gray-900",i=s==="dark"?"text-gray-300":"text-gray-600";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(yt,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Copy Trading AO"}),e.jsxs("p",{className:`text-lg leading-relaxed ${i}`,children:["AVA — Copy Trading AO — это стратегия торговли мемкоинами на основе сигналов HUB от ",e.jsxs("a",{href:"https://t.me/alpha_web3_bot?start=nbyO0C5R",target:"_blank",rel:"noopener noreferrer",className:"${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'} flex items-center gap-1 inline-flex",children:["Alpha One ",e.jsx(Ot,{className:"w-3 h-3"})]}),". Потенциал доходности — от 20% до практически неограниченных иксов, при условии строгого соблюдения регламента и риск-менеджмента."]}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(yt,{className:"w-3.5 h-3.5"}),"COPY TRADING"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-blue-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Nt,{className:"w-3.5 h-3.5"}),"ALPHA ONE HUB"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(ls,{className:"w-3.5 h-3.5"}),"RISK MANAGEMENT"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Технический регламент"})]}),e.jsxs(Dc,{number:1,title:"Появление сигнала",icon:e.jsx(Qt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsxs("p",{children:["Появляется сигнал в HUB ",e.jsxs("a",{href:"https://t.me/alpha_web3_bot?start=nbyO0C5R",target:"_blank",rel:"noopener noreferrer",className:"${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'} flex items-center gap-1 inline-flex",children:["Alpha One ",e.jsx(Ot,{className:"w-3 h-3"})]})]}),e.jsx("p",{className:"mt-4",children:"Моментально открываем:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsx("li",{children:"график токена;"}),e.jsxs("li",{children:["ленту сделок в ",e.jsxs("a",{href:"https://gmgn.ai/r/WHA0hJCg",target:"_blank",rel:"noopener noreferrer",className:"${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'} flex items-center gap-1 inline-flex",children:["GMGN ",e.jsx(Ot,{className:"w-3 h-3"})]}),"."]})]})]}),e.jsxs(Dc,{number:2,title:"Быстрая оценка ситуации",icon:e.jsx(Pe,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current text-blue-400"}),"после сигнала в токен заходят массово;"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current text-blue-400"}),"в этот момент девелопер может сделать рагпул (резкий слив ликвидности)."]})]}),e.jsx("h4",{className:`text-lg font-bold ${n} mt-4`,children:"Сценарии входа:"}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"} space-y-3`,children:[e.jsx("h5",{className:`font-semibold ${n}`,children:"1. График падает"}),e.jsx("p",{className:"text-sm",children:"Если цена падает не из‑за рагпула, а из‑за фиксаций:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsx("li",{children:"Twitter / X проекта активен;"}),e.jsx("li",{children:"кошельки выглядят реальными;"}),e.jsx("li",{children:"нет аномальных сливов ликвидности."})]}),e.jsx("p",{className:"text-sm font-bold mt-2",children:"Действия:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsx("li",{children:"дожидаемся окончания падения;"}),e.jsx("li",{children:"следим, чтобы объёмы покупок превышали продажи;"}),e.jsx("li",{children:"появляются первые уверенные зелёные свечи;"}),e.jsx("li",{children:"в ленте — покупки от $50–100+;"}),e.jsx("li",{children:"в идеале дев уже полностью зафиксировался."})]}),e.jsx("p",{className:"text-sm font-bold mt-2",children:"После этого:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsx("li",{children:"ищем точку входа (в том числе по Fibonacci);"}),e.jsx("li",{children:"заходим аккуратно, без FOMO;"})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"} space-y-3 mt-4`,children:[e.jsx("h5",{className:`font-semibold ${n}`,children:"2. График растёт"}),e.jsx("p",{className:"text-sm",children:"Если цена растёт сразу после сигнала, то важно убедиться, что рост не создаётся кошельками дева или команды."}),e.jsx("p",{className:"text-sm font-bold mt-2",children:"Действия:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsx("li",{children:"выжидаем 5–10-15 секунд;"}),e.jsx("li",{children:"смотрим, как заходят другие трейдеры Alpha One;"}),e.jsx("li",{children:"подтверждаем, что объёмы — органические."})]}),e.jsx("p",{className:"text-sm mt-2",children:"Только после этого рассматриваем вход."})]})]}),e.jsx(Dc,{number:3,title:"Рекомендации по риск-менеджменту",icon:e.jsx(or,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm ${textColor}",children:[e.jsx("li",{children:"Не более 10–20% депозита на торговлю мемкоинами."}),e.jsxs("li",{children:["При росте 30–50%:",e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[e.jsx("li",{children:"выводим тело;"}),e.jsx("li",{children:"далее работаем на «бесплатных» токенах."})]})]}),e.jsx("li",{children:"Не жадничать - лучше зафиксировать +50%, чем взять +10%, видя минуту назад +50%."}),e.jsx("li",{children:"Не заходим спустя 2-5 минут после сигнала по такой стратегии, если не заметили сразу токен - используем уже для принятия решения о входе элементы других стратегий."})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"ВАЖНЫЕ ОГОВОРКИ"})]}),e.jsx("div",{className:`space-y-4 ${i}`,children:e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsxs("li",{children:["У ",e.jsxs("a",{href:"https://t.me/alpha_web3_bot?start=nbyO0C5R",target:"_blank",rel:"noopener noreferrer",className:"${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'} flex items-center gap-1 inline-flex",children:["Alpha One ",e.jsx(Ot,{className:"w-3 h-3"})]})," есть функция автоповтора сделок («здесь и сейчас»). Мы её не используем."]}),e.jsx("li",{children:"Стратегия требует ручной проверки HUB-сигналов и самостоятельного входа в сделку при выполнении условий."}),e.jsxs("li",{children:["Коллеры ",e.jsxs("a",{href:"https://t.me/alpha_web3_bot?start=nbyO0C5R",target:"_blank",rel:"noopener noreferrer",className:"${theme === 'dark' ? 'text-blue-400' : 'text-blue-600'} flex items-center gap-1 inline-flex",children:["Alpha One ",e.jsx(Ot,{className:"w-3 h-3"})]})," не гарантируют 100% доходности, фиксированных иксов или отсутствия убытков."]}),e.jsx("li",{children:"Самостоятельный ресерч обязателен."})]})})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Итог"})]}),e.jsxs("div",{className:`space-y-1.5 ${i} text-sm`,children:[e.jsx("p",{className:i,children:"AVA — Copy Trading AO — это не автотрейдинг и не «кнопка бабла». Это:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[e.jsx("li",{children:"быстрые решения;"}),e.jsx("li",{children:"холодная голова;"}),e.jsx("li",{children:"строгий регламент;"}),e.jsx("li",{children:"дисциплина в фиксации прибыли."})]}),e.jsx("p",{className:"mt-4",children:"При правильном исполнении стратегия даёт редкую возможность участвовать в ранних движениях мемкоинов с опорой на опыт сильных трейдеров."})]})]})]})]})]})},Qo=({strategies:s,activeStrategy:t,setActiveStrategy:r,placeholder:a="Выберите стратегию..."})=>{const{theme:n}=pe(),[i,l]=f.useState(!1),[c,d]=f.useState(""),h=f.useRef(null),u=s.find(g=>g.id===t);f.useEffect(()=>{const g=y=>{h.current&&!h.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const m=s.filter(g=>{const y=g.name.toLowerCase(),v=c.toLowerCase();return y.includes(v)});return e.jsxs("div",{className:"relative w-full lg:w-72",ref:h,children:[e.jsxs("button",{onClick:()=>l(!i),className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-2xl border transition-all duration-300 ${n==="dark"?"bg-[#151a21]/80 border-white/5 text-gray-300 hover:border-blue-500/30":"bg-white border-gray-200 text-gray-700 hover:border-blue-500"} shadow-xl backdrop-blur-xl group relative overflow-hidden`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 overflow-hidden relative z-10",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${n==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-500"} flex-shrink-0`,children:(u==null?void 0:u.icon)||e.jsx(Dt,{size:16})}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-widest font-bold text-blue-500/60 leading-none mb-1",children:"Стратегия"}),e.jsx("span",{className:"text-sm font-black tracking-tight truncate block",children:(u==null?void 0:u.name)||a})]})]}),e.jsx(st,{size:16,className:`text-blue-500 transition-transform duration-300 relative z-10 ${i?"rotate-180":""}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/5 to-blue-500/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),i&&e.jsxs("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[240px] rounded-2xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-300 ${n==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"p-3 border-b border-white/5",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-500/60"}),e.jsx("input",{type:"text",placeholder:"Поиск стратегии...",value:c,onChange:g=>d(g.target.value),className:`w-full pl-9 pr-8 py-2.5 rounded-xl text-xs font-bold outline-none transition-all ${n==="dark"?"bg-blue-500/5 text-gray-300 focus:bg-blue-500/10 border border-blue-500/10 focus:border-blue-500/30":"bg-gray-50 text-gray-700 focus:bg-white border border-gray-200 focus:border-blue-500/30"}`,autoFocus:!0}),c&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 hover:text-rose-500 transition-colors",children:e.jsx(it,{size:14})})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-2 space-y-1 custom-scrollbar",children:[e.jsx(Ex,{name:"Все стратегии",icon:e.jsx(Dt,{size:14}),isSelected:!t,onClick:()=>{r(null),l(!1)},theme:n}),m.map(g=>e.jsx(Ex,{name:g.name,icon:g.icon,isSelected:t===g.id,onClick:()=>{r(g.id),l(!1)},theme:n},g.id)),m.length===0&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(Dt,{className:"w-8 h-8 text-blue-500/20 mx-auto mb-2"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"Ничего не найдено"})]})]})]})]})},Ex=({name:s,icon:t,isSelected:r,onClick:a,theme:n})=>e.jsxs("button",{onClick:a,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all text-left group ${r?n==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600":n==="dark"?"hover:bg-white/5 text-gray-400":"hover:bg-gray-50 text-gray-600"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${r?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":n==="dark"?"bg-white/5":"bg-gray-100"}`,children:t}),e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsx("span",{className:"text-sm font-bold truncate tracking-tight",children:s})})]}),O3=()=>{const{theme:s}=pe(),{user:t}=Xe(),{isAdmin:r}=kt(),[a,n]=f.useState(null),[i,l]=f.useState(null),[c,d]=f.useState(!0),[h,u]=f.useState(!0),[m,g]=f.useState(!0),y=s==="dark"?"text-white":"text-gray-900";f.useEffect(()=>{(async()=>{if(!t||r){g(!1);return}const[I,C]=await Promise.all([Cn(t.id,"tools_strategies_view"),Cn(t.id,"tools_items_view")]);d(I.hasAccess),u(C.hasAccess),g(!1)})()},[t,r]);const v=[{id:"late-volume",name:"AVA Late Volume",icon:e.jsx(Ec,{className:"w-4 h-4"})},{id:"intraday",name:"AVA Intraday",icon:e.jsx(lt,{className:"w-4 h-4"})},{id:"flip",name:"AVA FLIP-1S",icon:e.jsx(ka,{className:"w-4 h-4"})},{id:"flip-fiba",name:"AVA FLIP + FIBA",icon:e.jsx(lt,{className:"w-4 h-4"})},{id:"fiba-mode",name:"AVA - FIBA MODE",icon:e.jsx(Ys,{className:"w-4 h-4"})},{id:"copy-trading-ao",name:"AVA — Copy Trading AO",icon:e.jsx(yt,{className:"w-4 h-4"})}];return m?null:e.jsxs("div",{className:"space-y-16 pb-20",children:[c?e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(qs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${y}`,children:"Стратегии"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Проверенные методики отбора и управления позициями"})]})]}),a!==void 0&&e.jsx(Qo,{strategies:v,activeStrategy:a,setActiveStrategy:n,placeholder:"Выберите стратегию Memecoin"})]}),a?e.jsx("div",{className:`rounded-3xl border p-1 sm:p-2 ${s==="dark"?"bg-[#0b1015]/50 border-white/5":"bg-white border-gray-100"} shadow-xl animate-scale-up`,children:e.jsxs("div",{className:`p-6 sm:p-8 rounded-[2.5rem] ${s==="dark"?"bg-[#151a21]/50":"bg-gray-50/50"}`,children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx("button",{onClick:()=>n(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:"← К списку стратегий"})}),a==="late-volume"?e.jsx(I3,{}):a==="intraday"?e.jsx(C3,{}):a==="flip"?e.jsx(D3,{}):a==="flip-fiba"?e.jsx(R3,{}):a==="fiba-mode"?e.jsx(P3,{}):e.jsx(M3,{})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:v.map(E=>e.jsxs("button",{onClick:()=>n(E.id),className:"group p-8 rounded-[2.5rem] text-left transition-all duration-500 strategy-card",children:[e.jsx("div",{className:"p-4 rounded-2xl w-fit mb-6 transition-transform duration-500 group-hover:scale-110 strategy-card-icon text-blue-500/80 dark:text-blue-300",children:Os.cloneElement(E.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-xl font-black mb-2 ${y}`,children:E.name}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:E.id==="late-volume"?"Работа с аномальными объемами на поздних стадиях.":E.id==="intraday"?"Внутридневная торговля на основе технического анализа.":E.id==="flip"?"Скоростная торговля на изменениях цены в 1 секунду.":E.id==="flip-fiba"?"Интрадей-флип токенов Solana pre-migration.":E.id==="fiba-mode"?"Торговля по фибоначчи и уровням.":"Копирование высокопотенциальных сделок с ручной проверкой."}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-blue-500 font-bold text-xs uppercase tracking-wider",children:["Подробнее ",e.jsx(Ot,{className:"w-3 h-3"})]})]},E.id))})]}):e.jsxs("section",{className:`p-8 rounded-3xl border text-center space-y-4 ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx(As,{className:"w-12 h-12 text-gray-500 mx-auto"}),e.jsx("h3",{className:`text-lg font-bold ${y}`,children:"Доступ к стратегиям заблокирован"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Свяжитесь с администратором для получения доступа."})]}),h?e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-xl border border-amber-500/20",children:e.jsx(Ha,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${y}`,children:"Инструменты"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Вспомогательные сервисы и скрипты"})]})]}),e.jsx("div",{className:"space-y-12",children:i===null?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Терминалы и Исполнение",description:"Платформы для быстрой торговли и мониторинга",icon:e.jsx(yi,{className:"w-8 h-8 text-green-500"}),bgColor:"bg-green-500/10",borderColor:"border-green-500/20"},{title:"Ончейн-аналитика и блокчейны",description:"Блокчейн-эксплореры и данные о транзакциях",icon:e.jsx(xn,{className:"w-8 h-8 text-blue-500"}),bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"Безопасность и Речерч",description:"Проверка токенов и анализ связей кошельков",icon:e.jsx(Js,{className:"w-8 h-8 text-rose-500"}),bgColor:"bg-rose-500/10",borderColor:"border-rose-500/20"},{title:"Продвинутая Аналитика",description:'Трекинг "умных денег" и инфлюенсеров',icon:e.jsx(Ct,{className:"w-8 h-8 text-purple-500"}),bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20"},{title:"Нарративы",description:"Социальная аналитика и мониторинг внимания",icon:e.jsx(Sc,{className:"w-8 h-8 text-indigo-500"}),bgColor:"bg-indigo-500/10",borderColor:"border-indigo-500/20"}].map((E,I)=>e.jsxs("button",{onClick:()=>l(I),className:"group p-6 rounded-3xl text-left transition-all duration-500 strategy-card strategy-card-compact",children:[e.jsx("div",{className:`p-4 rounded-2xl w-fit mb-4 transition-transform duration-500 group-hover:scale-110 strategy-card-icon ${E.bgColor} ${E.borderColor} border`,children:E.icon}),e.jsx("h4",{className:`text-lg font-black mb-2 ${y}`,children:E.title}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:E.description}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-500 font-bold text-[10px] uppercase tracking-wider",children:["Смотреть инструменты ",e.jsx(Ot,{className:"w-3 h-3"})]})]},I))}):e.jsxs("div",{className:"space-y-8 animate-scale-up",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>l(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4"})," К категориям"]})}),[{title:"Терминалы и Исполнение",description:"Платформы для быстрой торговли и мониторинга",icon:e.jsx(yi,{className:"w-6 h-6 text-green-500"}),items:[{name:"Sniper",url:"https://www.sniper.xyz",desc:"Терминал с демо-торговлей для отработки навыков",icon:e.jsx(yi,{className:"w-5 h-5 text-green-400"})},{name:"Axiom",url:"https://axiom.trade",desc:"Профессиональный терминал для анализа и выбора монет",icon:e.jsx(Ec,{className:"w-5 h-5 text-blue-400"})},{name:"GMGN",url:"https://gmgn.ai",desc:"Профессиональный терминал для анализа и выбора монет",icon:e.jsx(lt,{className:"w-5 h-5 text-yellow-400"})},{name:"DexScreener",url:"https://dexscreener.com",desc:"Мониторинг графиков и поиск новых пар",icon:e.jsx(i_,{className:"w-5 h-5 text-slate-400"})},{name:"Alpha One",url:"https://t.me/alpha_web3_bot",desc:"ТГ-терминал с сигналами и AI-агентом",icon:e.jsx(no,{className:"w-5 h-5 text-purple-400"})},{name:"Fasol",url:"https://t.me/Fasol_robot",desc:"Торговый бот с гибкими алертами",icon:e.jsx(pd,{className:"w-5 h-5 text-red-400"})}]},{title:"Ончейн-аналитика и блокчейны",description:"Блокчейн-эксплореры и данные о транзакциях",icon:e.jsx(xn,{className:"w-6 h-6 text-blue-500"}),items:[{name:"Solscan",url:"https://solscan.io",desc:"Эксплорер блокчейна Solana",icon:e.jsx(Dt,{className:"w-5 h-5 text-teal-400"})},{name:"Etherscan",url:"https://etherscan.io",desc:"Эксплорер блокчейна Ethereum",icon:e.jsx(xn,{className:"w-5 h-5 text-indigo-400"})},{name:"BscScan",url:"https://bscscan.com",desc:"Эксплорер блокчейна BSC",icon:e.jsx(xn,{className:"w-5 h-5 text-yellow-500"})}]},{title:"Безопасность и Речерч",description:"Проверка токенов и анализ связей кошельков",icon:e.jsx(Js,{className:"w-6 h-6 text-rose-500"}),items:[{name:"Bubblemaps",url:"https://bubblemaps.io",desc:"Визуализация связей кошельков",icon:e.jsx(Sc,{className:"w-5 h-5 text-pink-400"})},{name:"Frontrun",url:"https://chromewebstore.google.com/detail/frontrun/kifcalgkjaphbpbcgokommchjiimejah",desc:"Анализ кошельков и защита от фронтрана",icon:e.jsx(sr,{className:"w-5 h-5 text-orange-400"})},{name:"RugCheck",url:"https://rugcheck.xyz",desc:"Проверка токенов на безопасность",icon:e.jsx(Js,{className:"w-5 h-5 text-red-500"})},{name:"SolSniffer",url:"https://www.solsniffer.com",desc:"Сниффер новых токенов Solana",icon:e.jsx(Tt,{className:"w-5 h-5 text-violet-400"})}]},{title:"Продвинутая Аналитика",description:'Трекинг "умных денег" и инфлюенсеров',icon:e.jsx(Ct,{className:"w-6 h-6 text-purple-500"}),items:[{name:"Nansen",url:"https://www.nansen.ai",desc:"Smart Money и глубокая аналитика",icon:e.jsx(Ct,{className:"w-5 h-5 text-cyan-400"})},{name:"HolderScan",url:"https://holderscan.com",desc:"Анализ холдеров и кластеров",icon:e.jsx(yt,{className:"w-5 h-5 text-emerald-400"})},{name:"KolScan",url:"https://kolscan.io",desc:"Трекинг KOL-ов и инфлюенсеров",icon:e.jsx(Pe,{className:"w-5 h-5 text-fuchsia-400"})}]},{title:"Нарративы",description:"Социальная аналитика и мониторинг внимания",icon:e.jsx(Sc,{className:"w-6 h-6 text-indigo-500"}),items:[{name:"LunarCrush",url:"https://lunarcrush.com/home?category=cryptocurrencies",desc:"Социальная и тренд-аналитика: метрики популярности, настроения и роста обсуждений.",icon:e.jsx(Tt,{className:"w-5 h-5 text-orange-400"})},{name:"Santiment",url:"https://app.santiment.net",desc:"Социальные и он-чейн метрики: упоминания, активность сообщества и поведение держателей.",icon:e.jsx(Ec,{className:"w-5 h-5 text-blue-400"})},{name:"Sharpe AI",url:"https://sharpe.ai/home/ru",desc:"Крипто mindshare и тренды: отслеживание доли обсуждений и внимания в реальном времени.",icon:e.jsx(Ct,{className:"w-5 h-5 text-purple-400"})},{name:"Coindar",url:"https://coindar.org",desc:"Календарь событий: листинги, аирдропы и мероприятия как триггеры нарративов.",icon:e.jsx(Ss,{className:"w-5 h-5 text-green-400"})}]}].filter((E,I)=>I===i).map((E,I)=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl transition-colors ${s==="dark"?"bg-white/5 border border-white/10":"bg-gray-100 border border-gray-200"}`,children:E.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-xl font-bold ${y}`,children:E.title}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:E.description})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:E.items.map((C,T)=>e.jsxs("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"group relative p-5 rounded-2xl transition-all duration-300 strategy-card strategy-card-compact",children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:"p-2.5 rounded-xl w-fit mb-4 group-hover:scale-110 transition-transform strategy-card-icon",children:C.icon}),e.jsx("h4",{className:`font-bold mb-1 ${y} flex items-center gap-2`,children:C.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:C.desc})]},T))})]},I))]})})]}):e.jsxs("section",{className:`p-8 rounded-3xl border text-center space-y-4 ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx(As,{className:"w-12 h-12 text-gray-500 mx-auto"}),e.jsx("h3",{className:`text-lg font-bold ${y}`,children:"Список инструментов скрыт"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Доступ ограничен администратором."})]})]})},rn=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},L3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(He,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Value Betting"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Стратегия поиска недооценённых событий на прогнозных рынках. Основана на выявлении расхождений между рыночной вероятностью события и вашей собственной обоснованной оценкой."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),"PROBABILITY ANALYSIS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"DEEP RESEARCH"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"MARKET INEFFICIENCY"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(qs,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Ключевой принцип"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Вы зарабатываете не на исходе события, а на ошибке рынка в оценке вероятности. Если рынок оценивает событие в 40%, а вы на основе ресёрча считаете, что реальная вероятность 70% — событие положительное, даже если в итоге оно не произойдёт."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Nt,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(rn,{number:1,title:"Выбор рынка",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Критерии отбора подходящего рынка для анализа:"}),e.jsxs("ul",{className:"space-y-2 list-disc list-inside text-sm pl-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Чётко сформулированное условие"})," — без двусмысленности"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Достаточная ликвидность"})," — возможность войти и выйти"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Понятный таймфрейм"})," — известная дата разрешения"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Доступность данных"})," — возможность провести анализ"]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Подходящие категории:"})," кино и медиа, политика, макроэкономика, технологии и продукты, долгосрочные спортивные маркеты"]})})]}),e.jsxs(rn,{number:2,title:"Рыночная оценка",icon:e.jsx(or,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Фиксация текущей рыночной оценки вероятности:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Цена YES"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"$0.40 = 40%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Рынок считает вероятность ≈ 40%"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Цена NO"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"$0.60 = 60%"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Вероятность «не случится» ≈ 60%"})]})]}),e.jsx("p",{className:"text-sm mt-4 italic",children:"Цена напрямую отражает коллективное мнение участников о вероятности события."})]}),e.jsxs(rn,{number:3,title:"Собственный ресёрч",icon:e.jsx(Ct,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Глубокий анализ для формирования независимой оценки:"}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"📊 Исторические данные"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Анализ прошлых аналогичных событий и их исходов"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"🔍 Аналоги"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Поиск похожих ситуаций и паттернов"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"⚙️ Фундаментальные факторы"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Объективные данные, влияющие на исход"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"🌍 Контекст"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Время, среда, стимулы участников"})]})]})]}),e.jsxs(rn,{number:4,title:"Формирование своей вероятности",icon:e.jsx(Qs,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("p",{children:"Создание аргументированной оценки на основе анализа:"}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-emerald-500/5 border-emerald-500/20":"bg-emerald-50 border-emerald-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"✅ Правильный подход:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Аргументированная оценка с обоснованием"}),e.jsx("li",{children:"• Лучше диапазон (60-75%), чем точка (67%)"}),e.jsx("li",{children:"• Учёт альтернативных сценариев"}),e.jsx("li",{children:"• Документирование логики"})]})]}),e.jsxs("div",{className:`mt-3 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"❌ Неправильный подход:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• «Мне кажется» без расчёта"}),e.jsx("li",{children:"• Оценка на основе одного источника"}),e.jsx("li",{children:"• Игнорирование контраргументов"}),e.jsx("li",{children:"• Путаница между верой и математикой"})]})]})]}),e.jsxs(rn,{number:5,title:"Сравнение и принятие решения",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Определение наличия value и принятие решения о входе:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 ${s==="dark"?"bg-emerald-500/10 border-emerald-500/30":"bg-emerald-50 border-emerald-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gs,{className:"w-5 h-5 text-emerald-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Value найден"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ваша вероятность ",e.jsx("strong",{children:"значимо выше"})," рыночной → вход в позицию"]}),e.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-2 font-mono",children:"Пример: Рынок 40%, ваша оценка 70% → +30% edge"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zs,{className:"w-5 h-5 text-gray-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Value отсутствует"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Разница мала или отсутствует → пропуск"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 font-mono",children:"Пример: Рынок 40%, ваша оценка 42% → недостаточно"})]})]})]}),e.jsxs(rn,{number:6,title:"Управление позицией",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"Два основных подхода к управлению позицией:"}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"📈 Фиксация при сужении спреда"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Рынок «догоняет» вашу оценку → YES растёт с $0.40 до $0.65 → фиксация прибыли без ожидания разрешения"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"🎯 Удержание до разрешения"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Держите позицию до финального исхода, если уверены в своём анализе и готовы к волатильности"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Почему работает"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Рынки не идеальны"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Реакция с запозданием"}),e.jsx("li",{children:"• Эмоциональные решения"}),e.jsx("li",{children:"• Копирование консенсуса"}),e.jsx("li",{children:"• Недооценка данных"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Неравенство экспертизы"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Глубокий анализ и экспертиза в нише дают преимущество над поверхностным взглядом большинства"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Цена = вероятность"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Математическая модель, где каждая ошибка рынка имеет стоимость"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Красные флаги"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Не можете объяснить, почему рынок ошибается"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Оценка на одном источнике"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"«Мне кажется» вместо расчёта"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Высоколиквидный рынок уже учёл всю информацию"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Путаете веру в исход с математическим преимуществом"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Кому подходит"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Аналитическое мышление"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Работа с вероятностями"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Готовность к ресёрчу"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Восприятие рынка как модели"]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(or,{className:"w-6 h-6 text-blue-500"}),"Практический пример"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Рынок"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"«Соберёт ли фильм Avatar более $450 млн до 31 января?»"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YES торгуется по $0.40 → рыночная вероятность 40%"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🔍 Ваш анализ"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Динамика сборов по неделям"}),e.jsx("li",{children:"• История релизов схожих франшиз"}),e.jsx("li",{children:"• Отзывы зрителей и критиков"}),e.jsx("li",{children:"• География проката и праздничный период"}),e.jsx("li",{children:"• Маркетинговая активность студии"})]}),e.jsx("p",{className:`text-sm mt-3 font-bold ${s==="dark"?"text-emerald-400":"text-emerald-600"}`,children:"Вывод: реальная вероятность ≈ 70%"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"💰 Действие"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Покупка YES по $0.40 с математическим преимуществом +30%"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Возможные сценарии"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold mb-1",children:"Сценарий 1"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Рынок догоняет вашу оценку → YES растёт до $0.65 → фиксация"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold mb-1",children:"Сценарий 2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Удержание до разрешения при уверенности в исходе"})]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(He,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Итоговая логика стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Value Betting — это не угадывание событий и не азартная игра. Это систематический поиск ситуаций, где ваш глубокий анализ выявляет расхождение между рыночной ценой и реальной вероятностью. Математическое преимущество реализуется через серию сделок, а не через отдельные ставки."})]})]})})]})},an=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},V3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(or,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Арбитраж"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Чистая математика на прогнозных рынках. Стратегия без прогнозов, без веры в исход и без субъективного анализа. Мы зарабатываем исключительно на ценовых дисбалансах между позициями YES и NO в одном и том же маркете."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(or,{className:"w-3.5 h-3.5"}),"PURE MATH"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(lt,{className:"w-3.5 h-3.5"}),"NO PREDICTIONS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"GUARANTEED PROFIT"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(qs,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Базовый принцип"}),e.jsxs("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["В любом рынке при разрешении: ",e.jsx("strong",{children:"YES = $1.00, NO = $0.00"})," или ",e.jsx("strong",{children:"YES = $0.00, NO = $1.00"})]}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Это означает, что одна из позиций всегда стоит $1.00. Если вы купили обе позиции дешевле $1.00 в сумме, разница — ваша прибыль."}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"} border ${s==="dark"?"border-white/10":"border-gray-200"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-blue-500 mb-2",children:"Условие арбитража"}),e.jsx("p",{className:`text-xl font-black font-mono ${n}`,children:"YES + NO < $1.00"})]})]})]})}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-6 flex items-center gap-3`,children:[e.jsx(Nt,{className:"w-6 h-6 text-blue-500"}),"Пример арбитража"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-3",children:"📊 Рынок"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"YES"}),e.jsx("p",{className:`text-2xl font-black ${n}`,children:"$0.45"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"NO"}),e.jsx("p",{className:`text-2xl font-black ${n}`,children:"$0.50"})]})]}),e.jsxs("div",{className:`mt-3 p-3 rounded-xl ${s==="dark"?"bg-blue-500/10":"bg-blue-50"}`,children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Сумма"}),e.jsx("p",{className:`text-lg font-black ${n}`,children:"$0.45 + $0.50 = $0.95"})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-3",children:"💰 Результат"}),e.jsxs("div",{className:`p-4 rounded-xl border-2 ${s==="dark"?"bg-emerald-500/10 border-emerald-500/30":"bg-emerald-50 border-emerald-500/30"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"При разрешении одна позиция = $1.00"}),e.jsx("p",{className:"text-lg font-black text-emerald-500 mb-1",children:"Прибыль: $0.05"}),e.jsx("p",{className:`text-sm font-bold ${s==="dark"?"text-emerald-400":"text-emerald-600"}`,children:"Доходность: 5.26%"})]}),e.jsx("p",{className:`text-xs italic mt-3 ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Никаких «если». Никаких сценариев. Чистая математика."})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Nt,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять — пошагово"})]}),e.jsxs(an,{number:1,title:"Выбор маркета",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Критерии отбора подходящего рынка:"}),e.jsxs("ul",{className:"space-y-2 list-disc list-inside text-sm pl-2",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Активный рынок"})," с торговлей по обеим сторонам"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Достаточная ликвидность"})," по YES и NO"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Чёткие условия разрешения"})," без двусмысленности"]})]})]}),e.jsxs(an,{number:2,title:"Проверка цен",icon:e.jsx(Br,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Фиксация текущих цен обеих позиций:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Цена YES"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Текущая цена позиции YES"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Цена NO"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Текущая цена позиции NO"})]})]})]}),e.jsxs(an,{number:3,title:"Расчёт",icon:e.jsx(or,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Проверка условия арбитража:"}),e.jsxs("div",{className:`mt-4 p-5 rounded-xl border-2 ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/30"}`,children:[e.jsxs("p",{className:"text-sm font-bold mb-3 flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4 text-blue-500"}),"Условие арбитража"]}),e.jsx("p",{className:`text-xl font-black font-mono ${n} mb-2`,children:"YES + NO < $1.00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Если условие выполнено → потенциальный арбитраж"})]})]}),e.jsxs(an,{number:4,title:"Учёт комиссий",icon:e.jsx(Qt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("p",{children:"Обязательно учитывайте все издержки:"}),e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-1",children:"💳 Комиссия платформы"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Polymarket берёт комиссию с каждой сделки"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-1",children:"⛓️ Комиссия сети"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Gas fees за транзакции в блокчейне"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-1",children:"📊 Проскальзывание"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Разница между ожидаемой и фактической ценой"})]})]})]}),e.jsxs(an,{number:5,title:"Одновременный вход",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Критически важно:"}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"⚡ Покупка обеих сторон максимально близко по времени"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Если между покупками пройдёт время, цены могут измениться и арбитраж исчезнет"})]})]}),e.jsxs(an,{number:6,title:"Фиксация",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"После входа в позицию:"}),e.jsx("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:e.jsx("p",{className:"text-sm",children:"Просто ждёте разрешения рынка. Никаких действий не требуется — математика работает за вас."})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(or,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевая формула"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10":"bg-blue-50"} border ${s==="dark"?"border-blue-500/20":"border-blue-200"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Прибыль ="}),e.jsx("p",{className:`text-sm font-black font-mono ${n} leading-relaxed`,children:"1 − (YES + NO) − Комиссии"})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("p",{className:`flex items-start gap-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(gs,{className:"w-4 h-4 text-blue-500 shrink-0 mt-0.5"}),e.jsx("span",{children:"Результат положительный → сделка имеет смысл"})]}),e.jsxs("p",{className:`flex items-start gap-2 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Zs,{className:"w-4 h-4 text-blue-500 shrink-0 mt-0.5"}),e.jsx("span",{children:"Результат отрицательный → пропуск, без эмоций"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Почему работает"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Асинхронность ордеров"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цены YES и NO формируются разными участниками и не всегда синхронизированы"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Поведенческие искажения"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Перекос в сторону популярного исхода"}),e.jsx("li",{children:"• Массовые ставки без пересчёта"}),e.jsx("li",{children:"• Паника, FOMO, резкие новости"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Ручной рынок"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Нет идеального маркет-мейкинга → арбитражные окна появляются регулярно"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Красные флаги"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Сумма < $1.00, но после комиссий ≥ $1.00"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Недостаточная ликвидность → частичное исполнение"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Большой спред в стакане"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Вы купили одну сторону, вторая «убежала»"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Маркет с неочевидными условиями разрешения"})]})]}),e.jsx("p",{className:`text-xs font-bold ${s==="dark"?"text-blue-400":"text-blue-600"} pt-2`,children:"Стратегия убивается не рынком, а плохим исполнением."})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-purple-500/5 border-purple-500/20":"bg-purple-50 border-purple-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yt,{className:"w-6 h-6 text-purple-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Кому подходит"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Любители точных расчётов"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Работа с цифрами, а не мнениями"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Ценители предсказуемости"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"0.5–3% стабильно > 50% случайно"]})]})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsx("h4",{className:`text-lg font-black ${n} mb-4`,children:"Когда использовать"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"} mb-4`,children:"Стратегия особенно эффективна:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"}`,children:e.jsx("p",{className:"text-xs",children:"📈 На волатильных рынках"})}),e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"}`,children:e.jsx("p",{className:"text-xs",children:"📰 При резких новостях"})}),e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"}`,children:e.jsx("p",{className:"text-xs",children:"🎯 В нишевых маркетах"})}),e.jsx("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"}`,children:e.jsx("p",{className:"text-xs",children:"👥 Когда толпа двигает одну сторону"})})]}),e.jsx("p",{className:`text-xs italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-600"}`,children:"Это стратегия не про ожидание, а про момент входа."})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(or,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Итоговая логика стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"AVA Арбитраж — это не ставка на исход, а эксплуатация математической неэффективности рынка. Вы не угадываете будущее — вы фиксируете гарантированную разницу между текущей ценой и финальным результатом. Единственный риск — ошибка в исполнении."})]})]})})]})},F3=()=>{const{theme:s}=pe(),[t,r]=f.useState(null),[a,n]=f.useState(null),i=s==="dark"?"text-white":"text-gray-900",l=s==="dark"?"bg-[#151a21]/50":"bg-gray-50/50",c=s==="dark"?"text-gray-400":"text-gray-500",d=[{id:"value-betting",name:"AVA Value Betting",icon:e.jsx(He,{className:"w-4 h-4"})},{id:"arbitrage",name:"AVA Арбитраж",icon:e.jsx(or,{className:"w-4 h-4"})}],h=[{name:"Polymarket",url:"https://polymarket.com/",fullDesc:"Децентрализованная платформа на блокчейне Polygon, на которой можно торговать вероятностями событий, покупая токены результата — YES или NO. Цена токена отражает рыночную вероятность события.",icon:e.jsx(He,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",tags:["Core","Trading"]},{name:"HashDive",url:"https://hashdive.com",fullDesc:"Аналитическая платформа для Polymarket и Kalshi. Отслеживайте Smart Scores трейдеров (–100 до +100) на основе их перфоманса. Мониторинг активности китов, крупных сделок, рыночных трендов, ликвидности и волатильности. Анализ позиций и PnL по кошелькам.",icon:e.jsx(Nt,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",tags:["Analytics","Whales","Scores"]},{name:"Polysights",url:"https://app.polysights.xyz",fullDesc:"Платформа аналитики для Polymarket с ML и AI. AI-driven insights и рыночные сводки. Поиск арбитражных возможностей и продвинутые торговые метрики. Анализ цен, объёмов и трендов. Smart фильтры по категориям, трендам и ликвидности. Telegram-бот и live feed событий. Leaderboard и performance metrics.",icon:e.jsx(Ct,{className:"w-5 h-5"}),color:"text-purple-400",bgColor:"bg-purple-500/10 border-purple-500/20",tags:["AI","ML","Arbitrage","Telegram"]},{name:"Munar AI",url:"https://app.munar.ai",fullDesc:"AI крипто-помощник (crypto copilot) для трейдеров. Помогает анализировать рынки, отвечает на вопросы о событиях и стратегиях, генерирует аналитические отчёты и торговые рекомендации.",icon:e.jsx(lt,{className:"w-5 h-5"}),color:"text-cyan-400",bgColor:"bg-cyan-500/10 border-cyan-500/20",tags:["AI","Assistant"]},{name:"Polymarket Analytics",url:"https://polymarketanalytics.com",fullDesc:"Глобальная платформа данных и аналитики для Polymarket. Live цены всех активных маркетов с обновлением каждые 5 минут. Top Traders с фильтрацией по категориям (Politics, Crypto, Sports). Unified Search — поиск маркетов на Polymarket и Kalshi в одном месте. Real-time Activity для отслеживания позиций топ-трейдеров. Portfolio Builder для управления несколькими кошельками и сводной PnL.",icon:e.jsx(Pe,{className:"w-5 h-5"}),color:"text-emerald-400",bgColor:"bg-emerald-500/10 border-emerald-500/20",tags:["Data","Live","Portfolio"]},{name:"PredictFolio",url:"https://predictfolio.com",fullDesc:"Портфолио и трейдер-аналитика для Polymarket. Portfolio Tracker для отслеживания позиций, PnL и odds в реальном времени. Trader Analytics для анализа стратегий других трейдеров. Benchmarking для сравнения win rate, volume и PnL с топ-кошельками. Follow Winners для копирования лучших сделок. Advanced Search по хендлу, маркету или метрикам.",icon:e.jsx(ja,{className:"w-5 h-5"}),color:"text-indigo-400",bgColor:"bg-indigo-500/10 border-indigo-500/20",tags:["Portfolio","Analytics","Copy Trading"]}];return e.jsxs("div",{className:"space-y-16 pb-20",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(qs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${i}`,children:"Стратегии"}),e.jsx("p",{className:`text-sm ${c}`,children:"Проверенные методики работы с прогнозными рынками"})]})]}),t!==void 0&&e.jsx(Qo,{strategies:d,activeStrategy:t,setActiveStrategy:r,placeholder:"Выберите стратегию Polymarket"})]}),t?e.jsx("div",{className:`rounded-3xl border p-1 sm:p-2 ${s==="dark"?"bg-[#0b1015]/50 border-white/5":"bg-white border-gray-100"} shadow-xl animate-scale-up`,children:e.jsxs("div",{className:`p-6 sm:p-8 rounded-[2.5rem] ${l}`,children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx("button",{onClick:()=>r(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:"← К списку стратегий"})}),t==="value-betting"?e.jsx(L3,{}):e.jsx(V3,{})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:d.map(u=>e.jsxs("button",{onClick:()=>r(u.id),className:"group p-8 rounded-[2.5rem] text-left transition-all duration-500 strategy-card",children:[e.jsx("div",{className:"p-4 rounded-2xl w-fit mb-6 transition-transform duration-500 group-hover:scale-110 strategy-card-icon text-blue-500/80 dark:text-blue-300",children:Os.cloneElement(u.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-xl font-black mb-2 ${i}`,children:u.name}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:u.id==="value-betting"?"Поиск математического ожидания и недооцененных исходов на рынках предсказаний.":"Заработок на разнице цен между Polymarket и другими платформами или реальностью."}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-blue-500 font-bold text-xs uppercase tracking-wider",children:["Подробнее ",e.jsx(Ot,{className:"w-3 h-3"})]})]},u.id))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(Ha,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${i}`,children:"Инструменты"}),e.jsx("p",{className:`text-sm ${c}`,children:"Вспомогательные сервисы и аналитика для прогнозных рынков"})]})]}),e.jsx("div",{className:"space-y-12",children:a===null?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Аналитика и Данные",description:"Отслеживание рынков, объёмов и активности китов",icon:e.jsx(Nt,{className:"w-8 h-8 text-blue-500"}),bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"AI и Смарт-Инсайты",description:"Интеллектуальные помощники и предсказательные модели",icon:e.jsx(Ct,{className:"w-8 h-8 text-purple-500"}),bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20"},{title:"Портфолио и Трекинг",description:"Управление позициями и мониторинг перфоманса",icon:e.jsx(ja,{className:"w-8 h-8 text-emerald-500"}),bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20"}].map((u,m)=>e.jsxs("button",{onClick:()=>n(m),className:"group p-6 rounded-3xl text-left transition-all duration-500 strategy-card strategy-card-compact",children:[e.jsx("div",{className:`p-4 rounded-2xl w-fit mb-4 transition-transform duration-500 group-hover:scale-110 strategy-card-icon ${u.bgColor} ${u.borderColor} border`,children:u.icon}),e.jsx("h4",{className:`text-lg font-black mb-2 ${i}`,children:u.title}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:u.description}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-500 font-bold text-[10px] uppercase tracking-wider",children:["Смотреть инструменты ",e.jsx(Ot,{className:"w-3 h-3"})]})]},m))}):e.jsxs("div",{className:"space-y-8 animate-scale-up",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>n(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4"})," К категориям"]})}),[{title:"Аналитика и Данные",items:h.filter(u=>u.tags.includes("Analytics")||u.tags.includes("Live"))},{title:"AI и Смарт-Инсайты",items:h.filter(u=>u.tags.includes("AI")||u.tags.includes("Scores"))},{title:"Портфолио и Трекинг",items:h.filter(u=>u.tags.includes("Portfolio"))}].filter((u,m)=>m===a).map((u,m)=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl ${s==="dark"?"bg-white/5 border border-white/10":"bg-gray-100 border border-gray-200"}`,children:e.jsx(Ha,{className:"w-6 h-6 text-blue-500"})}),e.jsx("h4",{className:`text-xl font-bold ${i}`,children:u.title})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.items.map((g,y)=>e.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"group relative p-5 rounded-2xl transition-all duration-300 strategy-card strategy-card-compact",children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:`p-2.5 rounded-xl w-fit mb-4 group-hover:scale-110 transition-transform strategy-card-icon ${g.bgColor}`,children:e.jsx("div",{className:g.color,children:g.icon})}),e.jsx("h4",{className:`font-bold mb-1 ${i} flex items-center gap-2`,children:g.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:g.fullDesc})]},y))})]},m))]})})]})]})},yl=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i,badge:l})=>{const{theme:c}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${c==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${c==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:t})]})}),l&&e.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-blue-500/10 text-blue-500 text-[10px] font-bold uppercase tracking-wider border border-blue-500/20 mr-4",children:l})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${c==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${c==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},U3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?"":i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(He,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA снайпинг NFT"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Sniper Mode"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Снайпинг — это покупка NFT дешевле текущей рыночной цены (флора) с целью перепродажи по рыночной цене или чуть ниже неё."}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10 inline-block text-xs font-bold italic opacity-80",children:'"Ты покупаешь, когда кто-то паникует или ошибается, и продаёшь, когда рынок возвращается в норму."'})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(Ct,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Суть стратегии"})]}),e.jsx("p",{className:"text-sm leading-relaxed opacity-80",children:"Это не про хайп, а про механику рынка. Заработок на панических продажах и ошибках владельцев (Panic Sell). Когда владелец срочно выходит или фиксирует убыток, снайпер забирает актив ниже флора."})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(tr,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Базовые термины"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Secondary market"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"OpenSea, Blur, Magic Eden — платформы перепродажи."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Floor price (Флор)"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Минимальная цена — индикатор спроса здесь и сейчас."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Liquidity"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Скорость продажи без обвала цены."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Panic sell"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Срочная продажа ниже рынка."})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Tt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Рыночный фильтр"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-green-500 flex items-center gap-2",children:"Лучшие условия"}),e.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[e.jsx("li",{children:"🔹 Боковой рынок (Sideways)"}),e.jsx("li",{children:"🔹 Умеренный медвежий рынок"}),e.jsx("li",{children:"🔹 Коллекции с постоянным объёмом торгов"}),e.jsx("li",{className:"text-[11px] italic opacity-60",children:"Почему: Меньше хайпа, больше ошибок у продавцов."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-rose-500 flex items-center gap-2",children:"Когда НЕ использовать"}),e.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[e.jsx("li",{children:"❌ Полностью мёртвые проекты"}),e.jsx("li",{children:"❌ Коллекции без объёма"}),e.jsx("li",{children:"❌ NFT «надежды и молитвы»"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Пошаговая инструкция"})]}),e.jsx(yl,{number:1,title:"Выбор коллекции",icon:e.jsx(vd,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),badge:"Selection",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/10 bg-blue-500/5",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase mb-2",children:"Минимальные критерии:"}),e.jsx("p",{className:"text-sm",children:"Есть ежедневные продажи, живой Discord / Twitter, флор не стоит на одном месте неделями."})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"Проверка объёма (Stats):"}),e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Смотреть: volume 24h, volume 7d. Правило: если нет продаж — нет снайпинга."})]})]})}),e.jsxs(yl,{number:2,title:"Определение реального флора",icon:e.jsx(Nt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),badge:"Audit",children:[e.jsx("p",{className:"text-sm mb-4",children:"Ошибка новичков: смотреть только на минимальный листинг."}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-[#151a21] border-white/5":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h6",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Как определить:"}),e.jsxs("ul",{className:"text-xs space-y-1 list-inside list-disc opacity-80",children:[e.jsx("li",{children:"Открыть последние 10–20 продаж"}),e.jsx("li",{children:"Посмотреть диапазон цен"}),e.jsx("li",{children:"Определить среднее значение"})]}),e.jsx("p",{className:"text-[10px] mt-3 font-bold uppercase tracking-widest text-blue-500/60",children:"Это и есть реальный флор"})]})]}),e.jsx(yl,{number:3,title:"Поиск и Сделка",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border border-green-500/20 bg-green-500/5",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-green-500 mb-2",children:"Хорошая сделка:"}),e.jsxs("ul",{className:"text-[11px] space-y-1 opacity-80",children:[e.jsx("li",{children:"✅ Цена на 10–30% ниже флора"}),e.jsx("li",{children:"✅ NFT без ограничений"}),e.jsx("li",{children:"✅ Стандартные traits"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-rose-500/20 bg-rose-500/5",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-rose-500 mb-2",children:"Пропустить:"}),e.jsxs("ul",{className:"text-[11px] space-y-1 opacity-80",children:[e.jsx("li",{children:"❌ Заблокированные NFT"}),e.jsx("li",{children:"❌ Странные метаданные"}),e.jsx("li",{children:'❌ "Уникальные" без спроса'})]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/10 bg-blue-500/5",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"Проверка (Обязательно):"}),e.jsx("p",{className:"text-sm",children:"История продаж, отсутствие резких дампов и wash trading. Если продавали сами себе — пропускаем."})]})]})}),e.jsxs(yl,{number:4,title:"Покупка и Перепродажа",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),badge:"Execution",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-blue-500",children:"Вход:"}),e.jsxs("ul",{className:"text-xs list-disc list-inside opacity-80",children:[e.jsx("li",{children:"Не на весь баланс"}),e.jsx("li",{children:"Одна сделка = одна идея"}),e.jsx("li",{children:"Фиксировать цену входа"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-green-500",children:"Выход:"}),e.jsxs("ul",{className:"text-xs list-disc list-inside opacity-80",children:[e.jsx("li",{children:"По текущему флору"}),e.jsx("li",{children:"Или на 1–3% ниже"}),e.jsx("li",{children:"Ждать: часы — дни"})]})]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-[10px] text-rose-500 font-bold uppercase text-center mt-4",children:"Если флор падает или объёмы исчезают — выходить в ноль."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Диагноз коллекции"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"pb-3 border-b border-white/5",children:[e.jsx("p",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest mb-1",children:"Живая"}),e.jsx("p",{className:"text-xs opacity-70",children:"Ежедневные сделки, живые обсуждения, реакция на апдейты."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-rose-500 uppercase tracking-widest mb-1",children:"Мёртвая"}),e.jsx("p",{className:"text-xs opacity-70",children:"Флор стоит неделями, Discord пуст, Twitter молчит. Флор без объёма = иллюзия."})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ошибки новичков"})]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:"🚩 Покупать «самое дешёвое»"}),e.jsx("li",{children:"🚩 Игнорировать объём"}),e.jsx("li",{children:"🚩 Ловить дно без спроса"})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-blue-500/5 border border-blue-500/20 text-center space-y-2",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-500",children:"Снайпинг — это:"}),e.jsxs("div",{className:"flex justify-center gap-4 py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ka,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Терпение"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Ct,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Расчёт"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Холод"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"} flex gap-6 items-start shadow-inner`,children:[e.jsx("div",{className:`p-4 rounded-full ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Pe,{className:"w-10 h-10 text-blue-500 shrink-0"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-xl font-black ${n}`,children:"Итог стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Стратегия снайпинга требует дисциплины и быстрого принятия решений. Это не азартная игра, а работа с неэффективностью рынка. Входите хладнокровно, выходите вовремя."})]})]})]})},vl=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i,badge:l})=>{const{theme:c}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${c==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${c==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:t})]})}),l&&e.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-blue-500/10 text-blue-500 text-[10px] font-bold uppercase tracking-wider border border-blue-500/20 mr-4",children:l})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${c==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${c==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},B3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?"":i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Up,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA Mint → Flip"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Primary Market"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Стратегия заработка на первичном спросе и хайпе: покупка напрямую у создателей (mint) и быстрая перепродажа на вторичном рынке."}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10 inline-block text-xs font-bold italic opacity-80",children:'"Цель — заработать на импульсе запуска, а не на долгосрочном владении актива."'})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(Ct,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Суть стратегии"})]}),e.jsxs("ul",{className:"text-sm space-y-3 opacity-80",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"1."})," ",e.jsx("strong",{children:"Mинт:"})," Покупка напрямую по фиксированной цене."]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{children:"2."})," ",e.jsx("strong",{children:"Флип:"})," Быстрая перепродажа в первые часы/дни."]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(tr,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Обязательные термины"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Gas (Газ)"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Комиссия сети. Опасайтесь Gas Wars."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Supply (Саплай)"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Общее кол-во NFT. Чем меньше, тем лучше."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Floor Price"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Минимальная цена рынка. Ориентир выхода."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase text-blue-500",children:"Whitelist (WL)"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Право на покупку без очереди и дешевле."})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Tt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Циклы рынка"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-blue-500 flex items-center gap-2",children:"Бычий рынок (NFT Bull)"}),e.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[e.jsx("li",{children:"📈 Коллекции быстро растут в цене"}),e.jsx("li",{children:"📊 Высокий объём торгов и приток новых лиц"}),e.jsx("li",{children:"✅ Стратегия работает часто, риски снижены"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-xs font-bold uppercase text-rose-500 flex items-center gap-2",children:"Медвежий рынок (NFT Bear)"}),e.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[e.jsx("li",{children:"📉 Новые минты не продаются"}),e.jsx("li",{children:"📉 Низкий объём, флоры падают"}),e.jsx("li",{children:"❌ Стратегия крайне рискованна"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Инструкция Mint → Flip"})]}),e.jsx(vl,{number:1,title:"Поиск и отбор проекта",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),badge:"Research",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase mb-1",children:"Где искать:"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Twitter (X), Discord, NFT-календари."})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase mb-1",children:"Рекоменация:"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Минт до 0.08 ETH для новичков."})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h6",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Чек-лист отсева:"}),e.jsxs("ul",{className:"text-xs space-y-2",children:[e.jsxs("li",{children:["📊 ",e.jsx("strong",{children:"Supply:"})," Всегда проверяйте общее кол-во. Нет числа = красный флаг."]}),e.jsxs("li",{children:["🎨 ",e.jsx("strong",{children:"Арт:"}),' Должен быть показан до минта. Опасайтесь "рендеров в тумане".']})]})]})]})}),e.jsx(vl,{number:2,title:"Глубокая аналитика (Антискам)",icon:e.jsx(Js,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),badge:"Security",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border border-rose-500/20 bg-rose-500/5",children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-rose-500 mb-2",children:"Красные флаги команды:"}),e.jsx("p",{className:"text-xs",children:"Полная анонимность без репутации, пустые обещания «гарантий», фразы «скоро раскроемся»."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500",children:"Discord Аудит:"}),e.jsx("p",{className:"text-[11px] opacity-70",children:'Живое общение против ботов и бесконечных "gm".'})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500",children:"Roadmap:"}),e.jsx("p",{className:"text-[11px] opacity-70",children:"Конкретика без фантазий про метавселенные завтра."})]})]})]})}),e.jsx(vl,{number:3,title:"Минт и Подготовка",icon:e.jsx(ja,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:`p-4 rounded-xl border-l-4 border-blue-500 ${s==="dark"?"bg-[#151a21]":"bg-gray-50"}`,children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-blue-500 mb-2",children:"Техника безопасности:"}),e.jsxs("ul",{className:"text-xs space-y-2",children:[e.jsx("li",{children:"🛡️ Используйте отдельный чистый кошелёк (MetaMask)."}),e.jsx("li",{children:"🔗 Ссылки только из ОФИЦИАЛЬНОГО Discord проекта."}),e.jsx("li",{children:"🔍 Проверяйте адрес контракта на Etherscan."})]})]})})}),e.jsx(vl,{number:4,title:"Продажа (Flip Mode)",icon:e.jsx(Es,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),badge:"Final Call",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-1",children:"Тайминг:"}),e.jsx("p",{className:"font-bold",children:"Первые 24–72 часа"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-1",children:"Цель:"}),e.jsx("p",{className:"font-bold",children:"1.3–2x от минта"})]})]}),e.jsxs("p",{className:"text-xs opacity-70 pt-2 border-t border-white/5",children:["Как продавать: выставить NFT по флору или на 1–3% ниже, чтобы выйти первым. ",e.jsx("strong",{children:"Хайп быстро умирает — ликвидность исчезает первой."})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5 shadow-xl":"bg-white border-gray-100 shadow-sm"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-6 h-6 text-blue-500"}),e.jsx("h4",{className:`font-black uppercase text-sm ${n}`,children:"Золотые правила"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] opacity-70 italic",children:"Перед минтом задай себе вопросы:"}),e.jsxs("ul",{className:"text-[10px] space-y-2 opacity-80 list-disc list-inside",children:[e.jsx("li",{children:"Купил бы я это на вторичке?"}),e.jsx("li",{children:"Есть ли покупатели кроме меня?"}),e.jsx("li",{children:"КТО будет следующим покупателем?"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ошибки"})]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:"🚩 Минт без плана выхода"}),e.jsx("li",{children:"🚩 Вера в «уникальный арт»"}),e.jsx("li",{children:"🚩 Жадность при 1.3x доходе"})]})]}),e.jsx("div",{className:"p-6 rounded-2xl bg-blue-500/5 border border-blue-500/10 text-center space-y-2",children:e.jsxs("div",{className:"flex justify-center gap-4 py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Скорость"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Q4,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Хайп"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Dt,{className:"w-5 h-5 text-blue-500 mx-auto"}),e.jsx("span",{className:"text-[10px] font-bold",children:"Анализ"})]})]})})]})]}),e.jsxs("div",{className:`rounded-2xl p-8 border ${s==="dark"?"bg-blue-500/5 border-blue-500/10":"bg-blue-50 border-blue-500/5 shadow-sm"} flex flex-col items-center text-center space-y-4`,children:[e.jsx("div",{className:"p-4 rounded-2xl bg-blue-500 text-white shadow-lg shadow-blue-500/20",children:e.jsx(Pe,{className:"w-8 h-8"})}),e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h4",{className:`text-xl font-black ${n} uppercase mb-2`,children:"Итог стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Mint → Flip — это не инвестиция, а высокорисковая спекуляция. Она требует постоянного мониторинга рынка, быстрых действий и отсутствия эмоциональной привязанности к картинкам."})]})]})]})},jl=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i,badge:l})=>{const{theme:c}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${c==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${c==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${c==="dark"?"text-white":"text-gray-900"}`,children:t})]})}),l&&e.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-blue-500/10 text-blue-500 text-[10px] font-bold uppercase tracking-wider border border-blue-500/20 mr-4",children:l})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${c==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${c==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},z3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?"":i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-12 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Lh,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA торговля NFT на нарративах"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Narrative Trading"})]}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Стратегия работы с темами, в которые рынок начинает верить. Заработок на импульсе внимания к теме, а не на долгосрочном качестве актива."}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/5 border border-blue-500/10 inline-block text-xs font-bold italic opacity-80",children:'"Ты покупаешь раньше, продаёшь когда внимание становится массовым."'})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(Ct,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Что такое нарратив"})]}),e.jsxs("p",{className:"text-sm opacity-80 leading-relaxed",children:["Это устойчивая тема, которая активно обсуждается, привлекает свежий капитал и порождает новые проекты.",e.jsx("strong",{children:" Не технология, а фокус внимания рынка."})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100 shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-500",children:[e.jsx(tr,{className:"w-6 h-6"}),e.jsx("h4",{className:"font-black text-lg tracking-tight",children:"Примеры нарративов"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["AI + крипта","Bitcoin Ordinals","GameFi","RWA","NFT Membership"].map(i=>e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-100"}`,children:i},i))})]})]}),e.jsxs("div",{className:`p-6 rounded-2xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Tt,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Жизненный цикл нарратива"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"1. Ранняя фаза"}),e.jsxs("p",{className:"text-xs opacity-70",children:["Обсуждают единицы, цены низкие, мало проектов. ",e.jsx("strong",{children:"Идеально для входа."})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"2. Фаза роста"}),e.jsx("p",{className:"text-xs opacity-70",children:"Появляются инфлюенсеры, растёт объём, флоры начинают двигаться."})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"3. Массовая фаза"}),e.jsxs("p",{className:"text-xs opacity-70",children:["Тема в каждом посте, куча копий, рост замедляется. ",e.jsx("strong",{children:"Поздний вход."})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/10",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-blue-500 mb-2",children:"4. Угасание"}),e.jsx("p",{className:"text-xs opacity-70",children:'Объёмы падают, внимание уходит. Остаются "багхолдеры".'})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(tr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Инструкция"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(jl,{number:1,title:"Поиск и Проверка нарратива",icon:e.jsx(Dt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),badge:"Step 1-2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h6",{className:"text-xs font-bold uppercase mb-2 text-blue-500",children:"Где искать ранние сигналы:"}),e.jsxs("ul",{className:"text-xs space-y-2",children:[e.jsxs("li",{children:["🐦 ",e.jsx("strong",{children:"Twitter (X):"})," Аналитика разработчиков и специализированных аккаунтов."]}),e.jsxs("li",{children:["💻 ",e.jsx("strong",{children:"GitHub:"})," Рост активности и новых репозиториев по теме."]}),e.jsxs("li",{children:["🏗️ ",e.jsx("strong",{children:"Анонсы:"})," Крупные фонды инвестируют в инфраструктуру под тему."]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/20 bg-blue-500/5",children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-blue-500 mb-2",children:"Критический вопрос для входа:"}),e.jsx("p",{className:"text-xs",children:"Решает ли тема задачу, есть ли в ней реальные деньги и заходит ли она широкому рынку?"})]})]})}),e.jsx(jl,{number:2,title:"Отбор и Проверка проекта",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),badge:"Step 3-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("ul",{className:"text-xs space-y-3",children:[e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("strong",{children:"Связь:"})," Понятная и прямая связь NFT с нарративом."]}),e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("strong",{children:"Саплай:"})," Ограниченное количество токенов."]}),e.jsxs("li",{className:"flex gap-2",children:["✅ ",e.jsx("strong",{children:"Команда:"})," Живая активность и отсутствие анонимности (или сильное портфолио)."]})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-orange-500/10 border border-orange-500/20 text-[11px] text-orange-500",children:[e.jsx("strong",{children:"Опасайтесь:"}),' Проектов с общими формулировками или без внятного продукта ("мы тоже AI").']})]})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5 shadow-xl":"bg-white border-gray-100 shadow-sm"} space-y-4 h-full`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sr,{className:"w-6 h-6 text-blue-500"}),e.jsx("h4",{className:`font-black uppercase text-sm ${n}`,children:"А когда не работает?"})]}),e.jsxs("ul",{className:"text-[10px] space-y-2 opacity-80 list-disc list-inside",children:[e.jsx("li",{children:'В глубоком "медведе"'}),e.jsx("li",{children:"При общей усталости рынка от историй"}),e.jsx("li",{children:"Когда нарратив слишком сложен для понимания"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(jl,{number:3,title:"Вход и Мониторинг",icon:e.jsx(ja,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),badge:"Step 5-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-1",children:"Точка входа:"}),e.jsx("p",{className:"font-bold text-xs uppercase tracking-tight",children:"До массовых обзоров"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h6",{className:"text-[10px] font-black uppercase text-blue-500 mb-1",children:"Подтверждение:"}),e.jsx("p",{className:"font-bold text-xs uppercase tracking-tight",children:"Рост флора + объёма"})]})]})})}),e.jsx(jl,{number:4,title:"Дисциплинированный Выход",icon:e.jsx(Es,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),badge:"Step 7",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs opacity-70",children:"Продажа происходит по факту перегрева рынка, а не по обещаниям."}),e.jsxs("div",{className:"p-4 rounded-xl border border-rose-500/20 bg-rose-500/5",children:[e.jsx("h6",{className:"text-xs font-bold uppercase text-rose-500 mb-2",children:"Сигналы к выходу:"}),e.jsxs("ul",{className:"text-[11px] space-y-1.5 list-disc list-inside",children:[e.jsx("li",{children:"Тема стала массовой и вездесущей"}),e.jsx("li",{children:"Появились сотни клонов-однодневок"}),e.jsx("li",{children:"Внимание инвесторов сместилось на другие мемы"})]})]})]})})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} space-y-4 h-full`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Риски"})]}),e.jsxs("ul",{className:"text-xs space-y-2 opacity-80",children:[e.jsx("li",{children:"🚩 Вход после всех инфлюенсеров"}),e.jsx("li",{children:"🚩 Удержание при потере внимания"}),e.jsx("li",{children:"🚩 Путаница между нарративом и пустышкой"})]})]})})]})]}),e.jsxs("div",{className:`rounded-2xl p-8 border ${s==="dark"?"bg-blue-500/5 border-blue-500/10":"bg-blue-50 border-blue-500/5 shadow-sm"} flex flex-col items-center text-center space-y-4`,children:[e.jsx("div",{className:"p-4 rounded-2xl bg-blue-500 text-white shadow-lg shadow-blue-500/20",children:e.jsx(Pe,{className:"w-8 h-8"})}),e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h4",{className:`text-xl font-black ${n} uppercase mb-2`,children:"Краткий вывод"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-500"}`,children:"Торговля на нарративах — это анализ внимания, максимально ранний вход и дисциплинированный выход при первых признаках перегрева."})]})]})]})},$x=({text:s,isChecked:t,onToggle:r,isRedFlag:a})=>{const{theme:n}=pe();return e.jsxs("button",{onClick:r,className:`flex items-start gap-3 p-3 rounded-xl transition-all duration-200 text-left w-full ${t?a?"bg-rose-500/10 border-rose-500/20":"bg-blue-500/10 border-blue-500/20":n==="dark"?"hover:bg-white/5 border-transparent":"hover:bg-gray-50 border-transparent"} border`,children:[e.jsx("div",{className:`mt-0.5 flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center transition-colors ${t?a?"bg-rose-500 border-rose-500 text-white":"bg-blue-500 border-blue-500 text-white":n==="dark"?"border-white/20":"border-gray-300"}`,children:t&&(a?e.jsx(Zs,{className:"w-4 h-4"}):e.jsx(xr,{className:"w-4 h-4"}))}),e.jsx("span",{className:`text-sm leading-tight ${n==="dark"?"text-gray-300":"text-gray-600"} ${t?a?"text-rose-400 font-medium":"text-blue-400 font-medium":""}`,children:s})]})},q3=()=>{const{theme:s}=pe(),[t,r]=f.useState({}),a=h=>{r(u=>({...u,[h]:!u[h]}))},n=[{title:"Контент",icon:e.jsx(Dt,{className:"w-5 h-5"}),items:[{id:"c1",text:"Пишет до роста интереса, а не в момент хайпа"},{id:"c2",text:"Формулирует мысли как гипотезы, а не утверждения"},{id:"c3",text:"Объясняет, почему тема может сработать"},{id:"c4",text:"Пишет редко и по делу"},{id:"c5",text:"Есть старые твиты, которые оказались правдой"}]},{title:"Поведение",icon:e.jsx(Tt,{className:"w-5 h-5"}),items:[{id:"b1",text:"Не даёт прямых сигналов «покупай / продавай»"},{id:"b2",text:"Не обещает доходность"},{id:"b3",text:"Может публично написать, что ошибся"},{id:"b4",text:"Не повторяет одни и те же тезисы каждый день"}]},{title:"Социальные признаки",icon:e.jsx(yt,{className:"w-5 h-5"}),items:[{id:"s1",text:"В ответах — разработчики, аналитики, инвесторы"},{id:"s2",text:"Его ретвитят без взаимного пиара"},{id:"s3",text:"Нет однотипных комментариев и ботов"}]}],i=[{id:"r1",text:"Каждый пост — реклама"},{id:"r2",text:"Продажа курсов, закрытых чатов, сигналов"},{id:"r3",text:"Формулировки «100x», «гарантировано», «инсайд»"},{id:"r4",text:"Постоянная уверенность без оговорок"}],l=Object.entries(t).filter(([h,u])=>u&&!h.startsWith("r")).length,c=Object.entries(t).filter(([h,u])=>u&&h.startsWith("r")).length,d=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsx("div",{className:`p-8 rounded-[2.5rem] border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center",children:[e.jsx("div",{className:`p-5 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"} scale-110`,children:e.jsx(Qr,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${d}`,children:"Как определить «умный» аккаунт?"}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 text-[10px] font-black uppercase tracking-widest border border-blue-500/20",children:"Checklist"})]}),e.jsx("p",{className:"text-lg opacity-70 leading-relaxed",children:"Короткий чек-лист для фильтрации инфо-шума в Twitter (X). Отмечайте пункты, чтобы оценить качество источника."}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg border font-bold text-xs ${l>=5?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":"bg-blue-500/10 border-blue-500/20 text-blue-500"}`,children:[e.jsx(Ct,{className:"w-4 h-4"}),"Счёт: ",l," из 12"]}),l>=5&&e.jsxs("div",{className:"animate-bounce-subtle flex items-center gap-2 px-3 py-1.5 rounded-lg bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 font-bold text-xs uppercase",children:[e.jsx(Js,{className:"w-4 h-4"})," Стоит читать"]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((h,u)=>e.jsxs("div",{className:`p-6 rounded-3xl border ${s==="dark"?"bg-white/5 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"} space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-xl ${s==="dark"?"bg-blue-500/10":"bg-blue-50"}`,children:Os.cloneElement(h.icon,{className:"text-blue-500"})}),e.jsx("h4",{className:`font-black text-sm uppercase tracking-tight ${d}`,children:h.title})]}),e.jsx("div",{className:"space-y-1",children:h.items.map(m=>e.jsx($x,{text:m.text,isChecked:!!t[m.id],onToggle:()=>a(m.id)},m.id))})]},u))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`p-6 rounded-3xl border ${s==="dark"?"bg-rose-500/5 border-rose-500/10":"bg-rose-50/50 border-rose-100"} space-y-4 relative overflow-hidden`,children:[e.jsx("div",{className:"absolute -top-6 -right-6 opacity-10",children:e.jsx(Rt,{className:"w-32 h-32 text-rose-500"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-2 relative",children:[e.jsx("div",{className:"p-2 rounded-xl bg-rose-500/20",children:e.jsx(Zs,{className:"w-6 h-6 text-rose-500"})}),e.jsx("h4",{className:"font-black text-sm uppercase tracking-tight text-rose-500",children:"Красные флаги (1–2 — повод не читать)"})]}),e.jsx("div",{className:"space-y-1 relative",children:i.map(h=>e.jsx($x,{text:h.text,isChecked:!!t[h.id],onToggle:()=>a(h.id),isRedFlag:!0},h.id))}),c>0&&e.jsxs("div",{className:"p-3 rounded-xl bg-rose-500/10 border border-rose-500/20 text-rose-500 text-xs font-medium animate-pulse-subtle",children:["Внимание: обнаружено ",c," красных флага!"]})]}),e.jsxs("div",{className:`p-8 rounded-3xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/10"} flex flex-col justify-center items-center text-center space-y-6`,children:[e.jsx("div",{className:`p-4 rounded-full ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Mh,{className:"w-12 h-12 text-blue-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-xl font-black ${d} uppercase`,children:"Быстрая проверка (1 вопрос)"}),e.jsx("p",{className:`text-sm italic leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"«Если убрать ник и аватарку, текст всё ещё полезен?»"})]}),e.jsxs("div",{className:"flex items-center gap-8 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-emerald-500 font-black text-xs uppercase mb-1",children:"Если да"}),e.jsx("div",{className:"px-4 py-2 rounded-xl border border-emerald-500/30 bg-emerald-500/10 text-emerald-500 font-bold text-xs",children:"Аккаунт умный"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-rose-500 font-black text-xs uppercase mb-1",children:"Если нет"}),e.jsx("div",{className:"px-4 py-2 rounded-xl border border-rose-500/30 bg-rose-500/10 text-rose-500 font-bold text-xs",children:"Это маркетинг"})]})]})]})]}),e.jsx("div",{className:`p-4 rounded-2xl border text-center ${s==="dark"?"bg-white/5 border-white/5":"bg-gray-50 border-gray-100"}`,children:e.jsxs("p",{className:"text-xs text-gray-500",children:["💡 ",e.jsx("span",{className:"font-bold",children:"Логика:"})," 5–6 совпадений — аккаунт стоит вашего времени."]})})]})},H3=()=>{const{theme:s}=pe(),t=s==="dark"?"text-white":"text-gray-900",[r,a]=f.useState(null),[n,i]=f.useState(null),l=[{id:"nft-sniping",name:"AVA снайпинг NFT",icon:e.jsx(He,{className:"w-4 h-4"}),desc:"Покупка NFT ниже текущей рыночной цены (флора) с целью быстрой перепродажи."},{id:"nft-mint-flip",name:"AVA Mint → Flip",icon:e.jsx(Up,{className:"w-4 h-4"}),desc:"Покупка на первичном рынке (минт) и перепродажа на хайпе запуска."},{id:"nft-narrative",name:"AVA торговля NFT на нарративах",icon:e.jsx(Lh,{className:"w-4 h-4"}),desc:"Работа с темами, в которые рынок начинает верить. Покупка раньше, продажа на массовом внимании."},{id:"twitter-checklist",name:"Чек-лист: Smart Twitter",icon:e.jsx(Qr,{className:"w-4 h-4"}),desc:"Как отличить «умный» аккаунт в Twitter (X) от маркетингового шума. 5–6 совпадений — аккаунт стоит внимания."}],c=[{title:"NFT-маркетплейсы",description:"Площадки для покупки, продажи и минта NFT",icon:e.jsx(vd,{className:"w-6 h-6 text-blue-500"}),bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",tools:[{name:"OpenSea",url:"https://opensea.io",desc:"Крупнейший универсальный NFT-маркетплейс (Ethereum, Polygon, Base и др.). Базовая ликвидность.",icon:e.jsx(vd,{className:"w-5 h-5 text-blue-400"})},{name:"Blur",url:"https://blur.io",desc:"Профессиональный маркетплейс для трейдеров. Быстрый флиппинг, агрегация листингов, sweep-покупки.",icon:e.jsx(lt,{className:"w-5 h-5 text-yellow-400"})},{name:"Rarible",url:"https://rarible.com",desc:"Упор на creator-экономику и мультичейн. Поиск недооценённых коллекций и арбитраж.",icon:e.jsx(Ys,{className:"w-5 h-5 text-purple-400"})},{name:"Magic Eden",url:"https://magiceden.io",desc:"Крупнейший маркетплейс Solana. Высокая скорость сделок, ранние минта, активный рынок SOL.",icon:e.jsx(c_,{className:"w-5 h-5 text-pink-400"})},{name:"Foundation",url:"https://foundation.app",desc:"Кураторская арт-платформа с отбором художников. Инвестиции в арт-NFT.",icon:e.jsx(xx,{className:"w-5 h-5 text-emerald-400"})}]},{title:"Аналитика NFT-рынка",description:"Инструменты для анализа трендов, холдеров и объемов",icon:e.jsx(Nt,{className:"w-6 h-6 text-purple-500"}),bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",tools:[{name:"NFTGo",url:"https://nftgo.io",desc:'Глубокая аналитика: анализ холдеров, распределения токенов и "здоровья" коллекции.',icon:e.jsx(Nt,{className:"w-5 h-5 text-indigo-400"})},{name:"Arkham",url:"https://www.arkhamintelligence.com",desc:"Связывает Twitter с on-chain действиями. Просмотр транзакций по Twitter-нику и анализ кошельков.",icon:e.jsx(Dt,{className:"w-5 h-5 text-blue-400"})},{name:"DeBank",url:"https://debank.com/",desc:"Отслеживает активы кошельков в разных сетях, полезен для проверки активности крупных адресов.",icon:e.jsx(Tt,{className:"w-5 h-5 text-emerald-400"})},{name:"NFTBirdies",url:"https://nftbirdies.com",desc:"Календарь NFT-дропов и аналитика. Помогает планировать участие в дропах.",icon:e.jsx(Ss,{className:"w-5 h-5 text-sky-400"})},{name:"DappRadar",url:"https://dappradar.com",desc:"Трекер dApps и NFT. Оценка реального пользовательского спроса.",icon:e.jsx(Tt,{className:"w-5 h-5 text-rose-400"})},{name:"Nansen",url:"https://nansen.ai",desc:'Ончейн-аналитика "умных денег". Отслеживание действий китов и инсайдерских кошельков.',icon:e.jsx(Ct,{className:"w-5 h-5 text-cyan-400"})}]},{title:"Редкость и оценка",description:"Оценка уникальности и ценности конкретных токенов",icon:e.jsx(xx,{className:"w-6 h-6 text-emerald-500"}),bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",tools:[{name:"HowRare.is",url:"https://howrare.is",desc:"Инструмент оценки редкости Solana-NFT. База для SOL-флиппинга.",icon:e.jsx(Dt,{className:"w-5 h-5 text-teal-400"})}]},{title:"Алерты и сигналы",description:"Мгновенные уведомления о событиях на рынке",icon:e.jsx(pd,{className:"w-6 h-6 text-amber-500"}),bgColor:"bg-amber-500/10",borderColor:"border-amber-500/20",tools:[{name:"Twitter (X) Advanced Search",url:"https://twitter.com/search-advanced",desc:"Расширенный поиск для фильтрации твитов по пользователю, словам и датам. Поиск ранних упоминаний.",icon:e.jsx(Qr,{className:"w-5 h-5 text-blue-400"})},{name:"Ninjalerts",url:"https://ninjalerts.com",desc:"Алерты по кошелькам и коллекциям. Реакция на сделки китов в реальном времени.",icon:e.jsx(pd,{className:"w-5 h-5 text-red-400"})},{name:"ИИ-чат NFTBirdies",url:"https://chat.nftbirdies.com",desc:"Помогает отслеживать дропы и анализировать коллекции через ИИ.",icon:e.jsx(no,{className:"w-5 h-5 text-purple-400"})}]}];return e.jsxs("div",{className:"space-y-16 pb-20",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(qs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${t}`,children:"Стратегии"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Проверенные методики работы с NFT рынком"})]})]}),n!==void 0&&e.jsx(Qo,{strategies:l,activeStrategy:n,setActiveStrategy:i,placeholder:"Выберите стратегию NFT"})]}),n?e.jsx("div",{className:`rounded-3xl border p-1 sm:p-2 ${s==="dark"?"bg-[#0b1015]/50 border-white/5":"bg-white border-gray-100"} shadow-xl animate-scale-up`,children:e.jsxs("div",{className:`p-6 sm:p-8 rounded-[2.5rem] ${s==="dark"?"bg-[#151a21]/50":"bg-gray-50/50"}`,children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("button",{onClick:()=>i(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:[e.jsx(qa,{className:"w-3 h-3"})," К списку стратегий"]})}),n==="nft-sniping"&&e.jsx(U3,{}),n==="nft-mint-flip"&&e.jsx(B3,{}),n==="nft-narrative"&&e.jsx(z3,{}),n==="twitter-checklist"&&e.jsx(q3,{})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:l.map(d=>e.jsxs("button",{onClick:()=>i(d.id),className:"group p-8 rounded-[2.5rem] text-left transition-all duration-500 strategy-card",children:[e.jsx("div",{className:"p-4 rounded-2xl w-fit mb-6 transition-transform duration-500 group-hover:scale-110 strategy-card-icon text-blue-500/80 dark:text-blue-300",children:Os.cloneElement(d.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-xl font-black mb-2 ${t}`,children:d.name}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:d.desc}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-blue-500 font-bold text-xs uppercase tracking-wider",children:["Подробнее ",e.jsx(Ot,{className:"w-3 h-3"})]})]},d.id))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-xl border border-amber-500/20",children:e.jsx(Ha,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${t}`,children:"Инструменты"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Основные сервисы для работы with NFT"})]})]}),e.jsx("div",{className:"space-y-12",children:r===null?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((d,h)=>e.jsxs("button",{onClick:()=>a(h),className:`group p-6 rounded-3xl border text-left transition-all duration-500 hover:-translate-y-2 ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30 hover:bg-blue-500/5":"bg-white border-gray-100 hover:border-blue-500/20 hover:shadow-xl"}`,children:[e.jsx("div",{className:`p-4 rounded-2xl w-fit mb-4 transition-transform duration-500 group-hover:scale-110 ${d.bgColor} ${d.borderColor} border`,children:Os.cloneElement(d.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-lg font-black mb-2 ${t}`,children:d.title}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:d.description}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-500 font-bold text-[10px] uppercase tracking-wider",children:["Смотреть инструменты ",e.jsx(Ot,{className:"w-3 h-3"})]})]},h))}):e.jsxs("div",{className:"space-y-8 animate-scale-up",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>a(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:[e.jsx(qa,{className:"w-3 h-3"})," Все категории"]})}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 ${c[r].bgColor} rounded-2xl border ${c[r].borderColor}`,children:Os.cloneElement(c[r].icon,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-black ${t}`,children:c[r].title}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:c[r].description})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c[r].tools.map((d,h)=>e.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:`group relative p-5 rounded-2xl border transition-all duration-300 hover:shadow-lg ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30":"bg-white border-gray-100 hover:border-blue-500/20"}`,children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:`p-2.5 rounded-xl w-fit mb-4 ${s==="dark"?"bg-white/5":"bg-gray-50"} group-hover:scale-110 transition-transform`,children:d.icon}),e.jsx("h4",{className:`font-bold mb-1 ${t} flex items-center gap-2`,children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-3 leading-relaxed",children:d.desc})]},h))})]})]})})]})]})},nn=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},W3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(Pe,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Тренд-фолловинг"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Торговля по тренду. Самая базовая логика из тех, что стабильно работают."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"PRICE ACTION"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"STRUCTURE ANALYSIS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"MARKET EDGE"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Ct,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Что такое тренд для нас"}),e.jsxs("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Для нас тренд — это не линия и не скользящая. Тренд — это ",e.jsx("strong",{children:"поведение цены"}),". Если по сути, рынок движется волнами в одну сторону. В лонге это выглядит так: цена обновляет максимум, затем откатывается, но не уходит ниже прошлого минимума, после чего снова растёт. И так несколько раз подряд."]}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"} border border-blue-500/20`,children:[e.jsx("p",{className:"text-sm font-bold text-blue-500 mb-2",children:"Структура тренда:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 flex-wrap",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Максимум"}),e.jsx("span",{className:"text-gray-400",children:"→"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Откат"}),e.jsx("span",{className:"text-gray-400",children:"→"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Максимум выше прошлого"}),e.jsx("span",{className:"text-gray-400",children:"→"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Откат выше прошлого"})]})]}),e.jsx("p",{className:`text-sm mt-4 italic ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Пока эта структура сохраняется — тренд есть. Как только она ломается — тренда нет, даже если индикаторы выглядят привлекательно."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Qs,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(nn,{number:1,title:"Определение наличия тренда",icon:e.jsx(Tt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsxs("p",{children:["Чтобы не гадать и не подгонять картинку под ожидания, мы используем один простой фильтр — ",e.jsx("strong",{children:"EMA 200"}),":"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oa,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Цена выше EMA 200"})]}),e.jsxs("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Работаем только в ",e.jsx("strong",{children:"лонг"}),". EMA 200 — это граница интереса крупного капитала."]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-rose-500/10 border-rose-500/30":"bg-rose-50 border-rose-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Mp,{className:"w-5 h-5 text-rose-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Цена ниже EMA 200"})]}),e.jsxs("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Рассматриваем только ",e.jsx("strong",{children:"шорты"}),". Фильтр убирает большую часть случайных сделок."]})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," EMA 200 — это не точка входа. Это фильтр и граница интереса крупного капитала."]})})]}),e.jsxs(nn,{number:2,title:"Где мы НЕ работаем",icon:e.jsx(Qt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsxs("p",{children:["Если цена постоянно пересекает EMA 200 туда-сюда, нет чётких максимумов и минимумов, движение рваное и без импульса — в таком рынке мы ",e.jsx("strong",{children:"не работаем"}),"."]}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-rose-500/10 border border-rose-500/20":"bg-rose-50 border border-rose-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold text-rose-500 mb-2",children:"Признаки флэта:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Цена пересекает EMA 200 туда-сюда"}),e.jsx("li",{children:"• Нет чётких максимумов и минимумов"}),e.jsx("li",{children:"• Движение рваное и без импульса"}),e.jsx("li",{children:"• Нет чёткой структуры HH/LL или LH/LL"})]})]}),e.jsx("p",{className:`text-sm mt-4 italic ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Это флэт. И в нём тренд-фолловинг статистически не даёт преимущества."})]}),e.jsxs(nn,{number:3,title:"Где мы ищем вход",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ключевое правило:"})," в тренде мы не покупаем рост. Мы работаем от отката."]}),e.jsx("div",{className:"space-y-3 mt-4",children:e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"📍 Шаблон входа:"}),e.jsxs("ol",{className:"space-y-1 text-xs text-gray-500 list-decimal list-inside",children:[e.jsxs("li",{children:["Сначала рынок должен показать ",e.jsx("strong",{children:"импульс"})]}),e.jsxs("li",{children:["После этого цена откатывается — ",e.jsx("strong",{children:"спокойно"}),", без агрессии"]}),e.jsxs("li",{children:["Откаты доходят до ",e.jsx("strong",{children:"EMA 20 или EMA 50"})]}),e.jsx("li",{children:"Мы рассматриваем эти зоны как рабочие, но не как автоматический сигнал"})]})]})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/5 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," откат должен быть медленным, свечи небольшими, без резких объёмов против движения. Это нормальная пауза внутри тренда."]})})]}),e.jsxs(nn,{number:4,title:"Как выглядит корректный вход",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("p",{children:"Паттерн входа должен соответствовать всем критериям:"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mt-4",children:e.jsxs("div",{className:`p-4 rounded-xl border-2 ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gs,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Условия для входа в лонг"})]}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("li",{children:["• Цена находится ",e.jsx("strong",{children:"выше EMA 200"})]}),e.jsxs("li",{children:["• Был ",e.jsx("strong",{children:"импульс вверх"})]}),e.jsxs("li",{children:["• Начался ",e.jsx("strong",{children:"откат к EMA 20 или EMA 50"})]}),e.jsxs("li",{children:["• Откат ",e.jsx("strong",{children:"медленный"}),", свечи небольшие"]}),e.jsxs("li",{children:["• Появляется ",e.jsx("strong",{children:"свеча в сторону основного движения"})]})]})]})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Момент входа:"})," Мы входим ",e.jsx("strong",{children:"только после того, как рынок подтвердил окончание отката"}),". Не раньше и не «на опережение»."]})})]}),e.jsxs(nn,{number:5,title:"Куда мы ставим стоп",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Стоп всегда ставится по логике рынка, а не «чтобы был короткий». Мы используем два варианта:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-2",children:"Вариант 1"}),e.jsx("p",{className:"font-bold text-sm mb-2",children:"За последний локальный минимум отката"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Логичный стоп, который не выбьет при нормальной коррекции."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-2",children:"Вариант 2"}),e.jsx("p",{className:"font-bold text-sm mb-2",children:"На расстоянии 1–1.5 ATR от точки входа"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Адаптивный стоп, учитывающий волатильность инструмента."})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Если стоп регулярно выбивает"})," — проблема не в стопе, а в месте входа. Качественный вход = комфортный стоп."]})})]}),e.jsxs(nn,{number:6,title:"Где мы выходим",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"Часто мы фиксируем часть позиции, а остальное ведём до момента, когда рынок ломает структуру или выбивает по трейлинг-стопу."}),e.jsx("div",{className:"space-y-3 mt-4",children:e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:"📈 Стратегия выхода"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("li",{children:["• Фиксация ",e.jsx("strong",{children:"части позиции"})," на промежуточных целях"]}),e.jsxs("li",{children:["• Остаток ведём до ",e.jsx("strong",{children:"слома структуры"})]}),e.jsxs("li",{children:["• Использование ",e.jsx("strong",{children:"трейлинг-стопа"})," для защиты прибыли"]})]})]})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно понимать:"})," Одна качественная трендовая сделка способна перекрыть пять–семь убыточных. На этом и держится стратегия."]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"EMA для фильтра"}),e.jsx("p",{className:"font-bold text-blue-500",children:"EMA 200"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Граница интереса крупного капитала"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Зоны отката"}),e.jsx("p",{className:"font-bold text-blue-500",children:"EMA 20 / EMA 50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Рабочие зоны для входа"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Стоп-лосс"}),e.jsx("p",{className:"font-bold text-blue-500",children:"1–1.5 ATR"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Или за локальный минимум отката"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Минимальная цель"}),e.jsx("p",{className:"font-bold text-blue-500",children:"1:3"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Risk/Reward не менее 1 к 3"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Вход в середине импульса"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Попытка поймать разворот"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Работа во флэте"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Слишком ранняя фиксация прибыли"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Увеличение объёма после серии минусов"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(He,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: BTC"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Условие"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена выше EMA 200"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Импульс"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Был сильный рост"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Откат"}),e.jsx("p",{className:"text-xs text-gray-500",children:"К EMA 20, медленный"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Объём"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Снижается на откате"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Появляется уверенная свеча в сторону тренда → ",e.jsx("strong",{children:"входим в лонг"})," → стоп ставим под минимум отката."]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx("strong",{children:"Не ниже 1:3"}),". Без угадываний и прогнозов. Мы работаем только с тем, что рынок уже показал."]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Pe,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Тренд-фолловинг — это не магия индикаторов, а понимание рыночной структуры. Мы не пытаемся угадать развороты, а следуем за крупным капиталом. Терпение и дисциплина — единственные индикаторы, которые действительно работают. Одна правильная сделка компенсирует серию мелких убытков."})]})]})})]})},Sa=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},G3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(vn,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Пробой с возвратом"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Работаем не на сам пробой, а на подтверждение того, что рынок действительно выбрал направление. Эта стратегия хорошо дополняет тренд-фолловинг."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"BREAKOUT CONFIRMATION"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"STRUCTURE ANALYSIS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"MARKET EDGE"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Ct,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём здесь логика"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Когда рынок долго стоит в диапазоне, внутри него накапливаются позиции. Одни покупают, другие продают, но цена никуда не уходит. В какой-то момент баланс ломается — появляется импульс. Пробой сам по себе ещё ничего не гарантирует. Важно другое: готов ли рынок принять новый уровень как нормальный. Именно это мы и проверяем через возврат."}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-white/5":"bg-white"} border border-blue-500/20`,children:[e.jsx("p",{className:"text-sm font-bold text-blue-500 mb-2",children:"Дополнение тренд-фолловинга:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 flex-wrap",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Тренд-фолловинг"}),e.jsx("span",{className:"text-gray-400",children:"→"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Зарабатывает на продолжении"}),e.jsx("span",{className:"text-gray-400",children:"→"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 rounded-lg text-blue-600",children:"Мы подключаемся в начале движения"})]})]}),e.jsx("p",{className:`text-sm mt-4 italic ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Если первая стратегия зарабатывает на продолжении движения, то здесь мы подключаемся в момент, когда рынок только начинает идти."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Qs,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(Sa,{number:1,title:"Что мы считаем диапазоном",icon:e.jsx(k_,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Перед входом мы всегда видим диапазон. Это:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K4,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Узкий коридор"})]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Цена ходит в узком коридоре, верх и низ читаются без фантазии, несколько касаний границ, волатильность сжимается."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-rose-500/10 border-rose-500/30":"bg-rose-50 border-rose-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qt,{className:"w-5 h-5 text-rose-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Что мы НЕ берём"})]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Если диапазон «рваный» и постоянно расширяется — мы его не трогаем. Это может быть накопление перед сессией, перед новостями или просто пауза после движения."})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," Диапазон должен быть чётким, с понятными границами, которые легко определить визуально."]})})]}),e.jsxs(Sa,{number:2,title:"Что мы считаем пробоем",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Для нас пробой — это не просто свеча за уровнем. Мы ждём:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oa,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Выход за границу"})]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Цена выходит за границу диапазона"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Tt,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Импульсное движение"})]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Должен быть импульс, а не простое «выползание»"})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(va,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Рост объёма"})]}),e.jsx("p",{className:`text-xs ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Желательно — рост объёма на пробое"})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-rose-500/10 border-rose-500/50":"bg-rose-50 border-rose-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," Если цена «выползает» за уровень без энергии, такой пробой нас не интересует."]})})]}),e.jsxs(Sa,{number:3,title:"Почему мы не входим сразу",icon:e.jsx(Qt,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Потому что значительная часть пробоев — ложные. Рынок часто выносит стопы за границей диапазона и возвращается обратно."}),e.jsxs("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-rose-500/10 border border-rose-500/20":"bg-rose-50 border border-rose-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold text-rose-500 mb-2",children:"Почему пробои ломаются:"}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Маркетмейкеры выносят стопы за границей диапазона"}),e.jsx("li",{children:"• Трейдеры входят «на пробой» и создают давление"}),e.jsx("li",{children:"• Крупные игроки разворачивают рынок в обратную сторону"}),e.jsx("li",{children:"• Истинный пробой требует подтверждения"})]})]}),e.jsx("p",{className:`text-sm mt-4 italic ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Поэтому мы не покупаем сам пробой. Мы ждём, что рынок сделает дальше."})]}),e.jsxs(Sa,{number:4,title:"Что такое ретест",icon:e.jsx(vn,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsxs("p",{children:["После пробоя цена возвращается к уровню, который раньше был границей диапазона. Важно, ",e.jsx("strong",{children:"как именно"})," она возвращается:"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mt-4",children:e.jsxs("div",{className:`p-4 rounded-xl border-2 ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gs,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Признаки качественного ретеста"})]}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Возврат без агрессии"}),e.jsx("li",{children:"• Без резких объёмов против движения"}),e.jsx("li",{children:"• Часто медленно, с паузами"}),e.jsx("li",{children:"• Уровень удерживается и рынок не «проваливается» обратно в диапазон"})]})]})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Если уровень удерживается"})," — это наш сигнал. Рынок подтвердил, что пробой был истинным."]})})]}),e.jsxs(Sa,{number:5,title:"Где мы входим",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Вход происходит при выполнении всех условий:"}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mt-4",children:e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(gs,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Условия для входа"})]}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-500",children:[e.jsx("li",{children:"• Цена находилась в диапазоне"}),e.jsx("li",{children:"• Произошёл импульсный пробой"}),e.jsx("li",{children:"• Цена вернулась к пробитому уровню"}),e.jsx("li",{children:"• На возврате нет сильного давления"}),e.jsx("li",{children:"• Появляется реакция в сторону пробоя"})]})]})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Момент входа:"})," Мы входим от уровня, а не в погоне за движением. Это ключевое отличие от входа «на пробой»."]})})]}),e.jsxs(Sa,{number:6,title:"Куда мы ставим стоп",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"Здесь всё достаточно жёстко. Основной вариант:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-2",children:"Основной вариант"}),e.jsx("p",{className:"font-bold text-sm mb-2",children:"За пробитый уровень"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Чуть глубже зоны ретеста. Если цена уверенно возвращается обратно в диапазон, идея сделки сломана."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-2",children:"Преимущество"}),e.jsx("p",{className:"font-bold text-sm mb-2",children:"Короткий стоп"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Стоп в этой стратегии обычно короткий. Это одно из её преимуществ перед другими подходами."})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-rose-500/10 border-rose-500/50":"bg-rose-50 border-rose-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," Мы выходим без колебаний, если цена возвращается обратно в диапазон. Идея сломана — сделка закрыта."]})})]}),e.jsxs(Sa,{number:7,title:"Где мы выходим",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===7,onToggle:()=>a(7),children:[e.jsx("p",{children:"Есть два рабочих подхода, мы используем оба в зависимости от контекста:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(He,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Цель по диапазону"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Откладываем высоту предыдущего диапазона от точки пробоя. Это логичная цель, основанная на структуре движения."})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-500"}),e.jsx("p",{className:"font-bold text-sm",children:"Риск/Прибыль"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Минимум 1:3. Если движение импульсное, часть позиции можно сопровождать дальше."})]})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," Мы не гонимся за максимумами. Фиксация части прибыли на 1:3 защищает результат."]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Диапазон"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Узкий коридор"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Чёткие границы, сжатая волатильность"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Пробой"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Импульс + объём"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Выход за границу с энергией"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Вход"}),e.jsx("p",{className:"font-bold text-blue-500",children:"На ретесте уровня"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"От уровня, а не в погоне"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Стоп"}),e.jsx("p",{className:"font-bold text-blue-500",children:"За уровнем"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Глубже зоны ретеста"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Минимальная цель"}),e.jsx("p",{className:"font-bold text-blue-500",children:"1:3"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Risk/Reward не менее 1 к 3"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Вход в первый пробой без ожидания возврата"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Торговля расширяющегося диапазона"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Попытка «добавляться», если цена вернулась внутрь диапазона"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Работа без чёткого уровня"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"FOMO после сильной свечи"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(He,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: BTC"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Диапазон"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена несколько часов стоит в коридоре"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Граница"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Верхняя граница читается чётко"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Пробой"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Импульсная свеча вверх с объёмом"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Ретест"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена возвращается к уровню"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Через несколько минут цена возвращается к пробитому уровню, но продавцы не давят. Появляется свеча вверх от уровня. ",e.jsx("strong",{children:"Мы входим в лонг."})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🛡️ Стоп"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Сразу под уровнем. Если цена возвращается в диапазон — выходим без колебаний."})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Минимум в три раза больше стопа или проекция диапазона. При импульсном движении — часть позиции ведём дальше."})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(vn,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Пробой с возвратом — это способ подтвердить, что рынок действительно выбрал направление. Мы не пытаемся угадать пробой, а ждём, когда рынок сам покажет, что движение продолжится. Терпение и дисциплина в ожидании ретеста — ключ к успеху. Короткий стоп и чёткое соотношение риск/прибыль делают эту стратегию математически обоснованной."})]})]})})]})},ln=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},K3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(gd,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Mean Reversion"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Контртрендовая работа. Самая коварная и одновременно самая «денежная», если применять её строго по условиям. Эта стратегия не про героизм и не про угадывание разворотов. Мы используем её только там, где рынок сам зашёл слишком далеко и начинает выдыхаться."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"CONTRARIAN"]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200",children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"EXTREME ANALYSIS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"SWING TRADING"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Hp,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём здесь логика"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Большая часть реальных объёмов в течение дня проходит около справедливой цены. Для нас это VWAP или, в более простом виде, средняя зона диапазона. Когда цена резко уходит слишком далеко от этой зоны, она часто возвращается. Не потому что «должна», а потому что:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"новые покупатели уже не спешат входить,"}),e.jsx("li",{children:"старые начинают фиксироваться,"}),e.jsx("li",{children:"импульс ослабевает."})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Qs,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(ln,{number:1,title:"В каких рынках мы используем эту стратегию",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Только при выполнении условий:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"рынок во флэте или в умеренном тренде,"}),e.jsx("li",{children:"нет сильных новостей,"}),e.jsx("li",{children:"нет ускоряющегося импульса."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-rose-500/10 border-rose-500/30":"bg-rose-50 border-rose-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно: "})," Если рынок летит без остановок — мы не лезем. Mean reversion в сильном тренде — самый быстрый способ слить."]})})]}),e.jsxs(ln,{number:2,title:"Нам нужны экстремумы",icon:e.jsx(Rt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Мы не торгуем каждый откат. Нам нужны экстремумы. Обычно это сочетание факторов:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"сильное отклонение от VWAP,"}),e.jsx("li",{children:"выход за границы Bollinger Bands,"}),e.jsx("li",{children:"ускорение движения без пауз."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно:"})," Сам по себе ни один из этих факторов не является сигналом. Важно их совпадение."]})})]}),e.jsxs(ln,{number:3,title:"Почему мы не входим сразу",icon:e.jsx(Rt,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Потому что рынок может оставаться иррациональным дольше, чем мы готовы терпеть убыток. Мы ждём не «дорого» или «дёшево», а признаки ослабления:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"замедление движения,"}),e.jsx("li",{children:"более короткие свечи,"}),e.jsx("li",{children:"потерю объёма,"}),e.jsx("li",{children:"иногда — дивергенцию."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Пока импульс жив"})," — мы просто наблюдаем."]})})]}),e.jsxs(ln,{number:4,title:"Где мы входим",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("p",{children:"Мы входим, когда:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Цена сильно ушла от VWAP."}),e.jsx("li",{children:"Произошёл выход за границы диапазона."}),e.jsx("li",{children:"Импульс начинает затухать."}),e.jsx("li",{children:"Появляется первая реакция в противоположную сторону."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"В этот момент мы заходим контртрендово"}),", понимая, что берём не движение «на сотни пунктов», а возврат к среднему."]})})]}),e.jsxs(ln,{number:5,title:"Куда мы ставим стоп",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Стоп всегда:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"короткий,"}),e.jsx("li",{children:"жёсткий,"}),e.jsx("li",{children:"за экстремум."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-rose-500/10 border-rose-500/50":"bg-rose-50 border-rose-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Если рынок обновляет экстремум"})," — идея сделки отменяется. Никаких усреднений, никаких «ещё немного подожду»."]})})]}),e.jsxs(ln,{number:6,title:"Где мы выходим",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"Цель почти всегда одна — возврат к VWAP или к середине диапазона. Мы не ждём чуда и не пересиживаем. Это стратегия быстрых, понятных движений."}),e.jsx("p",{className:`text-sm mt-4 italic ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"По математике: риск/прибыль чаще всего 1:1 или 1:2, процент прибыльных сделок выше, чем в трендовых стратегиях."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Условия рынка"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Флэт или умеренный тренд. Нет сильных новостей."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Крайне важен правильный контекст рынка"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Сигналы входа"}),e.jsx("p",{className:"font-bold text-blue-500",children:"VWAP, Bollinger Bands, Затухание импульса"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Совпадение нескольких факторов"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Стоп-лосс"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Короткий, жёсткий, за экстремум"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Идея отменяется при обновлении экстремума"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Цель"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Возврат к VWAP / середине диапазона"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Быстрое движение, не пересиживаем"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Попытка ловить каждый экстремум"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Работа против сильного тренда"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Усреднение убыточной позиции"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Ожидание «разворота дня» вместо возврата к среднему"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Игнор новостей и времени сессии"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(qs,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: ES"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Контекст"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Рынок во флэте"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Отклонение"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена ушла от VWAP"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Импульс"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Начинает затухать"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Реакция"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Первая реакция в противоположную сторону"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Цена резко улетела вверх от VWAP, прошла несколько импульсных свечей подряд. Объём начинает снижаться, свечи укорачиваются, появляется первая красная реакция. Мы входим в шорт. Стоп — сразу за максимум."})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Возврат к VWAP. Если рынок не идёт сразу — мы не держим. Эта стратегия не про терпение, а про точность."})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(gd,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Mean Reversion — это стратегия работы от экстремумов, но не вслепую. Мы ловим момент, когда рынок выдохся, и ждём отката к среднему. Это требует дисциплины и точечного входа, но даёт высокий процент прибыльных сделок."})]})]})})]})},on=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},Y3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(jd,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Session Open"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Торговля первых минут активной фазы рынка, когда в стакан заходят основные объёмы. Это не стратегия «весь день в рынке». Это стратегия чёткого окна, в котором мы либо зарабатываем, либо закрываем терминал."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"VOLATILITY SPIKE"]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200",children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"RANGE BREAKOUT"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(wt,{className:"w-3.5 h-3.5"}),"SESSION TRADING"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Qs,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём здесь логика"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Основные деньги приходят в рынок в начале сессии. Причины простые:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"открываются фонды,"}),e.jsx("li",{children:"включаются институционалы,"}),e.jsx("li",{children:"отрабатываются новости,"}),e.jsx("li",{children:"происходит перераспределение позиций."})]}),e.jsx("p",{className:`text-sm leading-relaxed mt-4 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"В результате:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"волатильность резко растёт,"}),e.jsx("li",{children:"появляются импульсы,"}),e.jsx("li",{children:"рынок часто выбирает направление на весь день."})]}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Наша задача — не ловить всё движение, а взять самый понятный кусок."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(wt,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(on,{number:1,title:"Какие сессии мы используем",icon:e.jsx(wt,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Зависит от инструмента, но чаще всего:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Лондон"}),e.jsx("li",{children:"Нью-Йорк"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/30":"bg-blue-50 border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Для индексов США и крипты"})," основной фокус — открытие Нью-Йорка."]})}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Мы не распыляем внимание на все сессии подряд. Лучше один качественный сетап, чем три сомнительных."})]}),e.jsxs(on,{number:2,title:"Как мы готовимся перед открытием",icon:e.jsx(rs,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Перед открытием сессии мы:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"отмечаем high и low азиатской или ночной сессии,"}),e.jsx("li",{children:"смотрим, был ли флэт,"}),e.jsx("li",{children:"оцениваем общий контекст: тренд, диапазон, новостной фон."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Наша задача"})," — понять: рынок накопил энергию или уже её потратил."]})})]}),e.jsxs(on,{number:3,title:"Что мы считаем рабочей моделью",icon:e.jsx(fi,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Классический вариант:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"В первые 15–30 минут формируется диапазон."}),e.jsx("li",{children:"Цена консолидируется."}),e.jsx("li",{children:"Происходит импульсный пробой."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Этот диапазон"})," становится нашей опорной зоной."]})})]}),e.jsx(on,{number:4,title:"Где мы входим: два базовых варианта",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-bold mb-2 ${s==="dark"?"text-white":"text-gray-900"}`,children:"Вариант 1 — вход по пробою:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Цена выходит из диапазона открытия."}),e.jsx("li",{children:"Импульс сильный, объём растёт."}),e.jsx("li",{children:"Мы входим по рынку или лимитом на небольшом откате."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-bold mb-2 ${s==="dark"?"text-white":"text-gray-900"}`,children:"Вариант 2 — вход по ретесту:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Цена пробивает диапазон."}),e.jsx("li",{children:"Затем возвращается к его границе."}),e.jsx("li",{children:"Появляется реакция в сторону пробоя."}),e.jsx("li",{children:"Мы входим от уровня."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Этот вариант"})," мы используем чаще, потому что он даёт более короткий стоп."]})})]})]})}),e.jsxs(on,{number:5,title:"Куда мы ставим стоп",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Стоп ставится за противоположную границу диапазона, либо за уровень ретеста."}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-rose-500/10 border-rose-500/50":"bg-rose-50 border-rose-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Если рынок возвращается внутрь диапазона"})," — сценарий сломан, мы выходим без обсуждений."]})})]}),e.jsxs(on,{number:6,title:"Где мы выходим",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===6,onToggle:()=>a(6),children:[e.jsx("p",{children:"Есть три основных подхода:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Фиксированная цель — 1:2 или 1:3."}),e.jsx("li",{children:"Работа по импульсу — держим до его затухания."}),e.jsx("li",{children:"Частичная фиксация + трейлинг."})]}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Выбор зависит от силы движения и общего фона."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Рабочие сессии"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Лондон, Нью-Йорк"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Основной фокус на открытии Нью-Йорка для индексов США и крипты"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Подготовка"}),e.jsx("p",{className:"font-bold text-blue-500",children:"High/Low ночной сессии, контекст рынка, новостной фон"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Понять, накопил ли рынок энергию"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Рабочая модель"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Диапазон 15-30 минут, пробой, ретест"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Диапазон открытия как опорная зона"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Стоп-лосс"}),e.jsx("p",{className:"font-bold text-blue-500",children:"За границу диапазона / уровень ретеста"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Сценарий ломается при возвращении внутрь диапазона"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Торговля без диапазона"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Ожидание движения каждый день"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Переторговка после первой неудачной сделки"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Вход на эмоциях в середине импульса"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Игнор времени сессии"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(qs,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: NQ"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Сессия"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Открытие Нью-Йорка"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Начало"}),e.jsx("p",{className:"text-xs text-gray-500",children:"20 минут рынок в узком диапазоне"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Пробой"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена пробивает верхнюю границу после статистики"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Ретест"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ждем откат к уровню, появляется зеленая свеча"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Продавцов нет, появляется зелёная свеча. ",e.jsx("strong",{children:"Входим в лонг"}),". Стоп — за границу диапазона."]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx("strong",{children:"1:3 или сопровождение импульса"}),". Максимально эффективно использовать движение."]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(jd,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Session Open — это стратегия, ориентированная на высокую волатильность и импульс на открытии ключевых торговых сессий. Она требует тщательной подготовки, точного определения диапазона и быстрого принятия решений, чтобы взять самый «сочный» кусок движения и уйти с рынка."})]})]})})]})},ni=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},Q3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(fd,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Event Trading"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Это стратегия для особых случаев. Мы её используем только тогда, когда есть крупный катализатор, и точно знаем, как реагировать на рынок. Здесь нет места угадывания — всё о реакции на факт."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"CATALYST DRIVEN"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"IMPULSE REACTION"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(Pe,{className:"w-3.5 h-3.5"}),"QUICK MOVES"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Pe,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём логика"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Рынок очень чувствителен к крупным событиям: отчёты компаний, макроэкономика, новости регуляторов, неожиданные заявления. В первые минуты после новости часто происходят резкие движения: цена скачет, импульс может быть огромным. Наша задача — сразу понять, кто управляет движением, и подключиться к уже сформированному импульсу."}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Это не «догоняющая» торговля. Мы не пытаемся предугадать реакцию. Мы работаем с тем, что рынок уже показал."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(px,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(ni,{number:1,title:"Какие новости мы отслеживаем",icon:e.jsx(px,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Мы фокусируемся на событиях, которые реально двигают инструменты:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Макроэкономические данные: NFP, CPI, процентные ставки"}),e.jsx("li",{children:"Результаты крупных компаний, особенно в секторе, где торгуем"}),e.jsx("li",{children:"Внеплановые заявления регуляторов или центробанков"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-amber-500/10 border-amber-500/30":"bg-amber-50 border-amber-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Важно: "})," Не каждая новость нам подходит. Если она слабая или рынок уже «скипнул» реакцию, мы просто наблюдаем."]})})]}),e.jsxs(ni,{number:2,title:"Перед выходом новости мы:",icon:e.jsx(u_,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"отмечаем ключевые уровни и диапазон последнего часа"}),e.jsx("li",{children:"смотрим на общий тренд и недавние движения"}),e.jsx("li",{children:"оцениваем волатильность и потенциальные стопы"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Мы знаем заранее"}),", куда будет логично поставить стоп и куда цель. Это не «всё зависит от свечи»."]})})]}),e.jsxs(ni,{number:3,title:"Где мы входим:",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Мы делаем это по правилу:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Новости выходят, рынок даёт первый импульс."}),e.jsx("li",{children:"Импульс подтверждается объёмом или повторной свечой в сторону движения."}),e.jsx("li",{children:"Цена корректируется, возвращаясь к ключевому уровню (иногда — к VWAP, иногда — к последнему локальному максимуму/минимуму)."})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-blue-500/10 border-blue-500/20":"bg-blue-50 border-blue-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"В этот момент мы входим по движению"}),", а не на догадке «куда пойдёт цена»."]})})]}),e.jsxs(ni,{number:4,title:"Куда ставим стоп:",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:e.jsx("li",{children:"Стоп короткий, строго за локальный экстремум перед импульсом."})}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-rose-500/10 border-rose-500/50":"bg-rose-50 border-rose-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Если цена ломает этот уровень"})," — сделка отменяется. Мы не пересиживаем. Новости могут выкинуть рынок резко в обе стороны, и важно держать потери маленькими."]})})]}),e.jsxs(ni,{number:5,title:"Где мы выходим:",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsx("p",{children:"Выход зависит от ситуации:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Иногда фиксируем прибыль после движения в 1–2 стопа"}),e.jsx("li",{children:"Иногда держим часть позиции до конца первых 15–30 минут, если импульс устойчив"}),e.jsx("li",{children:"Частично можно сопровождать движение по трейлингу"})]}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Главное правило — мы не держим новостные позиции весь день, если только это не совпадает с другой стратегией (например, тренд-фолловинг)."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Катализатор"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Крупные новости: макроэкономика, отчёты, регуляторы"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Только события, которые реально двигают рынок"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Подготовка"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Ключевые уровни, диапазон, волатильность"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Заранее знаем стоп и цель"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Вход"}),e.jsx("p",{className:"font-bold text-blue-500",children:"По импульсу после коррекции к уровню"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Работаем с тем, что рынок уже показал"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Стоп-лосс"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Короткий, за локальный экстремум"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Сделка отменяется при пробое уровня"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Вход на самом старте импульса без подтверждения"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Торговля «для экшена», а не по уровню"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Игнор коротких стопов и риска"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Попытка удерживать позицию слишком долго"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Непонимание контекста: тренд или флэт"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(qs,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: NQ"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Событие"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Выход CPI США"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Реакция"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Рынок резко вверх, объем высокий"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Коррекция"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена корректируется к локальному максимуму"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Подтверждение"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Давления против нет, появляется подтверждающая свеча"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx("strong",{children:"Входим в лонг."})," Стоп — под экстремум перед импульсом."]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx("strong",{children:"Движение минимум 1:2–1:3"}),". Если рынок резко разворачивается против нас — стоп срабатывает мгновенно, мы остаёмся вне позиции."]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(fd,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Event Trading — это высокодисциплинированная стратегия, ориентированная на извлечение прибыли из первой реакции рынка на значимые новости. Она требует тщательной подготовки, точного входа на подтвержденном импульсе и жесткого управления риском, чтобы максимизировать прибыль и минимизировать потери в условиях повышенной волатильности."})]})]})})]})},wl=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},X3=()=>{const{theme:s}=pe(),[t,r]=f.useState(1),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(ga,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA — Scalping"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Суть скальпинга — ловить микродвижения на графике 1–5 минут. Мы берём маленькие профиты много раз в течение дня, не пытаясь «поймать тренд» на 50–100 пунктов. Это дисциплина, скорость и точность, а не прогнозирование."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"HIGH FREQUENCY"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}`,children:[e.jsx(Ct,{className:"w-3.5 h-3.5"}),"MICRO TRENDS"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}`,children:[e.jsx(ga,{className:"w-3.5 h-3.5"}),"PRECISION & SPEED"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Qs,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём логика"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Цена почти всегда делает маленькие колебания, которые можно использовать для прибыли. Мы не ждём больших движений — нас интересует чистое соотношение риск/прибыль и повторяемость."}),e.jsx("p",{className:`text-sm leading-relaxed mt-4 ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Основные моменты:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"быстрые входы и выходы"}),e.jsx("li",{children:"малые стопы"}),e.jsx("li",{children:"объём и ликвидность критичны"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(fr,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(wl,{number:1,title:"Какие инструменты подходят",icon:e.jsx(fr,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Мы выбираем инструменты с:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"высоким объёмом (фьючерсы)"}),e.jsx("li",{children:"низким спредом (валютные пары)"}),e.jsx("li",{children:"низкой комиссией и высокой ликвидностью"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-rose-500/10 border-rose-500/30":"bg-rose-50 border-rose-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Мы не скальпим"})," малоликвидные активы — там слишком много шумов."]})})]}),e.jsx(wl,{number:2,title:"Где мы входим: базовые подходы",icon:e.jsx(lt,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-bold mb-2 ${s==="dark"?"text-white":"text-gray-900"}`,children:"Откат внутри тренда:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Берём маленький откат на 1–2 свечи против импульса"}),e.jsx("li",{children:"Цена возвращается к движению, мы заходим в сторону тренда"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-md font-bold mb-2 ${s==="dark"?"text-white":"text-gray-900"}`,children:"Ловим импульсные свечи после флэта:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Цена в узком диапазоне"}),e.jsx("li",{children:"Появляется сильная свеча с объёмом"}),e.jsx("li",{children:"Входим на продолжение движения"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-blue-500/10 border-blue-500/50":"bg-blue-50 border-blue-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Главное"})," — не угадывать, а реагировать на подтверждённое движение."]})})]})]})}),e.jsxs(wl,{number:3,title:"Куда ставим стоп:",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("p",{children:"Стоп:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Очень короткий, обычно 1–2 ATR или чуть за ближайшую свечу"}),e.jsx("li",{children:"Если стоп срабатывает — быстро выходим"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border ${s==="dark"?"bg-rose-500/10 border-rose-500/20":"bg-rose-50 border-rose-500/20"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Никогда не усредняем"})," убыточные позиции."]})})]}),e.jsxs(wl,{number:4,title:"Где мы выходим:",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"Малый профит: 1–2 стопа"}),e.jsx("li",{children:"Часто фиксируем сразу, иногда сопровождаем трейлингом"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-xl border-l-4 ${s==="dark"?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-500/30"}`,children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Не держим позиции"})," больше нескольких минут, иначе стратегия ломается."]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые особенности"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-blue-500 uppercase tracking-widest mb-1",children:"Основной таймфрейм"}),e.jsx("p",{className:"font-bold text-blue-500",children:"1–5 минут"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ловим микродвижения"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-blue-500 uppercase tracking-widest mb-1",children:"Цель"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Маленькие профиты много раз в день"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Повторяемость и соотношение риск/прибыль"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-blue-500 uppercase tracking-widest mb-1",children:"Вход"}),e.jsx("p",{className:"font-bold text-blue-500",children:"На подтвержденном импульсе или откат"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Не угадываем, а реагируем"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold text-blue-500 uppercase tracking-widest mb-1",children:"Риск"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Очень короткий стоп"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Быстрый выход при ошибке"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"} shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Ловить каждый тик — выгораем морально и финансово"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Игнорировать комиссии и спреды — профит съедается"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Держать позицию слишком долго"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Увеличивать объём после минусов"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"Скальпить на малоликвидных инструментах"})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(qs,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: ES (1 минута)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Контекст"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена во флэте 5 минут"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Импульс"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Импульсная зеленая свеча с объёмом"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Вход"}),e.jsx("p",{className:"text-xs text-gray-500",children:"В лонг на следующей свече"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Цель"}),e.jsx("p",{className:"text-xs text-gray-500",children:"1-2 тика профита, моментальная фиксация"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Вход"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:["Появляется импульсная ",e.jsx("strong",{children:"зелёная свеча с объёмом выше среднего"}),". Мы входим в лонг на следующей свече. Стоп — под свечой начала импульса."]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📈 Цель"}),e.jsxs("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:[e.jsx("strong",{children:"1–2 тика профита"}),", фиксируем моментально. Так повторяем несколько раз в час."]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(ga,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Scalping — это стратегия, ориентированная на извлечение небольших, но частых прибылей из микродвижений рынка. Она требует высокой скорости реакции, железной дисциплины при установке стопов и фиксации прибыли, а также глубокого понимания ликвидности инструмента. Это не про угадывание, а про точное реагирование на подтвержденные импульсы."})]})]})})]})},ii=({number:s,title:t,children:r,icon:a,isOpen:n,onToggle:i})=>{const{theme:l}=pe();return e.jsxs("div",{className:`overflow-hidden rounded-2xl border transition-all duration-300 ${l==="dark"?"bg-[#1a212a]/50 border-white/5 shadow-inner":"bg-white border-gray-100 shadow-sm"}`,children:[e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-5 text-left transition-colors hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-xl font-black text-lg ${l==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-50 text-blue-600"}`,children:s}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:l==="dark"?"text-gray-400":"text-gray-500",children:a}),e.jsx("h3",{className:`text-lg font-bold ${l==="dark"?"text-white":"text-gray-900"}`,children:t})]})]}),n?e.jsx(Xt,{className:"w-5 h-5 text-gray-500"}):e.jsx(st,{className:"w-5 h-5 text-gray-500"})]}),n&&e.jsx("div",{className:`p-6 pt-0 border-t ${l==="dark"?"border-white/5":"border-gray-50"}`,children:e.jsx("div",{className:`mt-4 space-y-4 ${l==="dark"?"text-gray-300":"text-gray-600"}`,children:r})})]})},J3=()=>{const{theme:s}=pe(),[t,r]=f.useState(null),a=i=>{r(t===i?null:i)},n=s==="dark"?"text-white":"text-gray-900";return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20 shadow-2xl":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10 shadow-xl"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 blur-3xl rounded-full -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row gap-8 items-start",children:[e.jsx("div",{className:`p-4 rounded-2xl ${s==="dark"?"bg-blue-500/10":"bg-blue-500/5"}`,children:e.jsx(lt,{className:`w-12 h-12 ${s==="dark"?"text-blue-400":"text-blue-500"}`})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("h2",{className:`text-2xl md:text-3xl font-black ${n}`,children:"AVA - Intraday"}),e.jsx("p",{className:`text-lg leading-relaxed ${s==="dark"?"text-gray-300":"text-gray-600"}`,children:"Интрадей — это стиль торговли, при котором все сделки открываются и закрываются в течение одного торгового дня. Позиции не переносятся на следующий день, чтобы избежать ночных рисков, гэпов и неожиданных новостей."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-white/5 text-gray-400 border border-white/10":"bg-gray-100 text-gray-600 border border-gray-200"}
                                }`,children:[e.jsx(wt,{className:"w-3.5 h-3.5"}),"Активный рынок"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200
                                }`,children:[e.jsx(Tt,{className:"w-3.5 h-3.5"}),"Контролируемый риск"]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold ${s==="dark"?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-600 border border-blue-200"}
                                }`,children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"Чёткий план"]})]})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-blue-500/5 border-blue-500/50":"bg-blue-50 border-blue-500/30"}
                }`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(Qs,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"В чём идея стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"В течение дня рынок формирует: импульсы, откаты, диапазоны, уровни, вокруг которых концентрируется ликвидность."}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Наша задача — не угадывать будущее, а:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"дождаться формирования понятной рыночной ситуации;"}),e.jsx("li",{children:"войти в сделку с ограниченным риском;"}),e.jsx("li",{children:"выйти по заранее определённому плану."})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(wt,{className:`w-6 h-6 ${s==="dark"?"text-blue-400":"text-blue-500"}`}),e.jsx("h3",{className:`text-xl font-black ${n}`,children:"Как применять стратегию"})]}),e.jsxs(ii,{number:1,title:"Кто может применять Интрадей",icon:e.jsx(qs,{className:"w-5 h-5"}),isOpen:t===1,onToggle:()=>a(1),children:[e.jsx("p",{children:"Интрадей подходит тем, кто:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"хочет активно участвовать в рынке,"}),e.jsx("li",{children:"готов следить за графиком в течение сессии,"}),e.jsx("li",{children:"предпочитает контролируемый риск и понятную логику сделок."})]})]}),e.jsxs(ii,{number:2,title:"Таймфреймы и подготовка",icon:e.jsx(rs,{className:"w-5 h-5"}),isOpen:t===2,onToggle:()=>a(2),children:[e.jsx("p",{children:"Перед началом торгов:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"15 минут — общий контекст дня;"}),e.jsx("li",{children:"5 минут — рабочий таймфрейм;"}),e.jsx("li",{children:"1 минута — уточнение точки входа (по необходимости)."})]}),e.jsx("p",{className:"mt-4",children:"Перед открытием сессии отмечаются:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"максимум и минимум предыдущего дня;"}),e.jsx("li",{children:"ключевые уровни внутри диапазона;"}),e.jsx("li",{children:"области, где цена уже проявляла активность."})]})]}),e.jsxs(ii,{number:3,title:"Где мы входим в сделку",icon:e.jsx(fi,{className:"w-5 h-5"}),isOpen:t===3,onToggle:()=>a(3),children:[e.jsx("h4",{className:`text-md font-bold mb-2 ${n}`,children:"Сетап 1: Откат внутри тренда"}),e.jsx("p",{className:"text-sm mb-2",children:"Используется, когда рынок движется в одном направлении."}),e.jsx("p",{className:"text-sm font-bold mb-1",children:"Условия:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"есть выраженный импульс вверх или вниз;"}),e.jsx("li",{children:"цена корректируется без сильного давления;"}),e.jsx("li",{children:"откат останавливается у значимого уровня."})]}),e.jsx("p",{className:"text-sm mt-4",children:"Логика входа: Мы входим по направлению основного движения, когда рынок показывает готовность продолжить тренд."}),e.jsx("h4",{className:`text-md font-bold mt-6 mb-2 ${n}`,children:"Сетап 2: Ложный пробой диапазона"}),e.jsx("p",{className:"text-sm mb-2",children:"Используется во флэте или на границах дневного диапазона."}),e.jsx("p",{className:"text-sm font-bold mb-1",children:"Условия:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"цена пробивает максимум или минимум дня;"}),e.jsx("li",{children:"не появляется продолжения движения;"}),e.jsx("li",{children:"цена возвращается обратно в диапазон."})]}),e.jsx("p",{className:"text-sm mt-4",children:"Логика входа: Мы работаем против пробоя, когда рынок показывает, что движение было ложным."})]}),e.jsxs(ii,{number:4,title:"Куда ставим стоп-лосс",icon:e.jsx(Ys,{className:"w-5 h-5"}),isOpen:t===4,onToggle:()=>a(4),children:[e.jsx("p",{children:"Стоп-лосс — обязательная часть каждой сделки. Он ставится:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"за ближайший локальный экстремум;"}),e.jsx("li",{children:"за уровень, при пробое которого сценарий становится неверным."})]}),e.jsx("p",{className:"text-sm font-bold mt-4",children:"Если стоп сработал:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"сделка считается завершённой;"}),e.jsx("li",{children:"повторный вход возможен только при новом сетапе."})]}),e.jsx("p",{className:`text-sm italic mt-4 ${s==="dark"?"text-gray-500":"text-gray-400"}`,children:"Усреднение убыточных позиций запрещено."})]}),e.jsxs(ii,{number:5,title:"Где мы выходим из сделки",icon:e.jsx(He,{className:"w-5 h-5"}),isOpen:t===5,onToggle:()=>a(5),children:[e.jsxs("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"фиксация части позиции на ближайшем уровне;"}),e.jsx("li",{children:"полный выход при достижении цели;"}),e.jsx("li",{children:"сопровождение сделки, если рынок развивается в нашу сторону."})]}),e.jsx("p",{className:"text-sm italic mt-4",children:"Мы не держим позицию «на авось» — выход всегда запланирован заранее."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-[#151a21]/80 border-white/5":"bg-white border-gray-100"}
                        } shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(va,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Ключевые параметры"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Основные принципы"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Активные часы, ограниченность сделок, контролируемый риск"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Интрадей — это не постоянное «сидение в позиции», а выборочные, осознанные входы."})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Инструменты"}),e.jsx("p",{className:"font-bold text-blue-500",children:"Ликвидные фьючерсы (ES, NQ, YM, CL, BTC, ETH, SOL)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Важна ликвидность для узкого спреда и быстрого исполнения ордеров"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Подготовка"}),e.jsx("p",{className:"font-bold text-blue-500",children:"15м (контекст), 5м (рабочий), 1м (вход)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Отмечаем Max/Min дня, ключевые уровни, области активности"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Стоп-лосс"}),e.jsx("p",{className:"font-bold text-blue-500",children:"За локальный экстремум / уровень"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Усреднение убыточных позиций запрещено"})]})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${s==="dark"?"bg-rose-500/5 border-rose-500/20":"bg-rose-50 border-rose-500/20"}
                        } shadow-lg space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qt,{className:"w-6 h-6 text-rose-500"}),e.jsx("h3",{className:`text-lg font-black ${n}`,children:"Типичные ошибки новичков"})]}),e.jsxs("div",{className:`space-y-2 ${s==="dark"?"text-gray-400":"text-gray-600"} text-xs`,children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"торговля без чёткого плана;"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"вход «потому что цена пошла»;"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"перенос позиции на следующий день;"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"увеличение объёма после убытков;"})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 mt-1.5 shrink-0"}),e.jsx("span",{children:"игнорирование стоп-лосса."})]})]})]})]})]}),e.jsxs("div",{className:`rounded-3xl p-8 border ${s==="dark"?"bg-gradient-to-br from-[#1a212a] to-[#0f1216] border-blue-500/20":"bg-gradient-to-br from-white to-blue-50/30 border-blue-500/10"} shadow-xl`,children:[e.jsxs("h3",{className:`text-xl font-black ${n} mb-4 flex items-center gap-3`,children:[e.jsx(qs,{className:"w-6 h-6 text-blue-500"}),"Пример сделки"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"📊 Инструмент: SOL"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mt-3",children:[e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Движение"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Цена формирует импульс вверх"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Откат"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Происходит откат к уровню, где ранее был максимум"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Вход"}),e.jsx("p",{className:"text-xs text-gray-500",children:"После подтверждения на 1-минутном графике открывается лонг"})]}),e.jsxs("div",{className:`p-3 rounded-xl ${s==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 mb-1",children:"Стоп и цель"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Стоп за минимум отката, Цель — обновление локального максимума"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${s==="dark"?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-500/20"}`,children:[e.jsx("p",{className:"text-sm font-bold mb-2",children:"🎯 Результат"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-600"}`,children:"Пример успешной сделки, подтверждающий важность понятной рыночной ситуации и ограниченного риска."})]})]})]}),e.jsx("div",{className:`rounded-2xl p-6 border-l-8 ${s==="dark"?"bg-[#0b1015] border-blue-500/50":"bg-gray-50 border-blue-500/30"}
                }`,children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx(lt,{className:"w-8 h-8 text-blue-500 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:`text-lg font-black ${n}`,children:"Суть стратегии"}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Интрадей — это не постоянное «сидение в позиции», а выборочные, осознанные входы. Торговля в активные часы сессии с заранее известным риском и строгой дисциплиной выхода из рынка."})]})]})})]})},Z3=()=>{const{theme:s}=pe(),[t,r]=f.useState(null),[a,n]=f.useState(null),i=s==="dark"?"text-white":"text-gray-900",l=s==="dark"?"bg-[#151a21]/50":"bg-gray-50/50",c=[{id:"trend-following",name:"AVA тренд-фолловинг",icon:e.jsx(Pe,{className:"w-4 h-4"}),desc:"Торговля по тренду. Самая базовая логика из тех, что стабильно работают."},{id:"breakout-retest",name:"AVA пробой с возвратом",icon:e.jsx(vn,{className:"w-4 h-4"}),desc:"Работаем не на сам пробой, а на подтверждение того, что рынок действительно выбрал направление."},{id:"mean-reversion",name:"AVA - Mean Reversion",icon:e.jsx(gd,{className:"w-4 h-4"}),desc:"Контртрендовая работа. Самая коварная и одновременно самая «денежная», если применять её строго по условиям."},{id:"session-open",name:"AVA - Session Open",icon:e.jsx(jd,{className:"w-4 h-4"}),desc:"Торговля первых минут активной фазы рынка, когда в стакан заходят основные объёмы."},{id:"event-trading",name:"AVA - Event Trading",icon:e.jsx(fd,{className:"w-4 h-4"}),desc:"Это стратегия для особых случаев. Мы её используем только тогда, когда есть крупный катализатор."},{id:"scalping",name:"AVA - Scalping",icon:e.jsx(ga,{className:"w-4 h-4"}),desc:"Суть скальпинга — ловить микродвижения на графике 1–5 минут. Мы берём маленькие профиты много раз в течение дня."},{id:"intraday-futures",name:"AVA - Intraday",icon:e.jsx(lt,{className:"w-4 h-4"}),desc:"Все сделки открываются и закрываются в течение одного торгового дня, чтобы избежать ночных рисков, гэпов и неожиданных новостей."}],d=[{title:"Биржи с фьючерсами",description:"Ведущие платформы для торговли деривативами",icon:e.jsx(ir,{className:"w-6 h-6 text-blue-500"}),bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",tools:[{name:"Bybit",url:"https://bybit.com",desc:"Одна из ведущих криптобирж. Низкие комиссии, удобный UI/UX, мощный стакан и маржинальная торговля. Доступна через P2P.",icon:e.jsx(Oh,{className:"w-5 h-5 text-yellow-400"})},{name:"MEXC",url:"https://www.mexc.com",desc:"Биржа с огромным выбором контрактов. Низкие комиссии и отличная ликвидность на редких парах.",icon:e.jsx(Nt,{className:"w-5 h-5 text-green-400"})},{name:"BingX",url:"https://www.bingx.com",desc:"Биржа с социальным трейдингом и копитрейдингом. Интегрированные сигналы и ИИ-метрики.",icon:e.jsx(lt,{className:"w-5 h-5 text-blue-400"})}]},{title:"Демо-трейдинг и Тесты",description:"Безопасная практика без реальных рисков",icon:e.jsx(yi,{className:"w-6 h-6 text-emerald-500"}),bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20",tools:[{name:"MEXC Demo Futures",url:"https://www.mexc.com",desc:"Торговля бессрочными контрактами в учебном режиме с виртуальными средствами.",icon:e.jsx(yi,{className:"w-5 h-5 text-green-500"})},{name:"CryptoRobotics (Demo)",url:"https://cryptorobotics.ai",desc:"Универсальный терминал с демо-торговлей на Binance, Bybit, Bitget. Бесплатный демо-баланс ~3000 USDT.",icon:e.jsx(no,{className:"w-5 h-5 text-purple-400"})}]},{title:"Аналитика и Данные",description:"Инструменты для анализа рынка и трендов",icon:e.jsx(Ct,{className:"w-6 h-6 text-purple-500"}),bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",tools:[{name:"CryptoRobotics",url:"https://cryptorobotics.ai",desc:"Терминал с ИИ-сигналами и ML-алгоритмами. Автоматическая торговля 24/7.",icon:e.jsx(no,{className:"w-5 h-5 text-purple-500"})},{name:"TradingView",url:"https://tradingview.com",desc:"Мировой стандарт графиков. Подключение к фьючерсам через API, скрипты Pine Script и теханализ.",icon:e.jsx(Pe,{className:"w-5 h-5 text-blue-500"})},{name:"ForkLog",url:"https://forklog.com",desc:"Аналитическое издание. Новости и исследования для фундаментального понимания трендов.",icon:e.jsx(Ur,{className:"w-5 h-5 text-orange-400"})}]}];return e.jsxs("div",{className:"space-y-16 pb-20",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(qs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${i}`,children:"Стратегии"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Проверенные методики фьючерсной торговли"})]})]}),a!==void 0&&e.jsx(Qo,{strategies:c,activeStrategy:a,setActiveStrategy:n,placeholder:"Выберите стратегию Futures"})]}),a?e.jsx("div",{className:`rounded-3xl border p-1 sm:p-2 ${s==="dark"?"bg-[#0b1015]/50 border-white/5":"bg-white border-gray-100"} shadow-xl animate-scale-up`,children:e.jsxs("div",{className:`p-6 sm:p-8 rounded-[2.5rem] ${l}`,children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx("button",{onClick:()=>n(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:"← К списку стратегий"})}),a==="trend-following"&&e.jsx(W3,{}),a==="breakout-retest"&&e.jsx(G3,{}),a==="mean-reversion"&&e.jsx(K3,{}),a==="session-open"&&e.jsx(Y3,{}),a==="event-trading"&&e.jsx(Q3,{}),a==="scalping"&&e.jsx(X3,{})," ",a==="intraday-futures"&&e.jsx(J3,{})," "]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:c.map(h=>e.jsxs("button",{onClick:()=>n(h.id),className:"group p-8 rounded-[2.5rem] text-left transition-all duration-500 strategy-card",children:[e.jsx("div",{className:"p-4 rounded-2xl w-fit mb-6 transition-transform duration-500 group-hover:scale-110 strategy-card-icon text-blue-500/80 dark:text-blue-300",children:Os.cloneElement(h.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-xl font-black mb-2 ${i}`,children:h.name}),e.jsx("p",{className:`text-sm leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:h.desc}),e.jsxs("div",{className:"mt-6 flex items-center gap-2 text-blue-500 font-bold text-xs uppercase tracking-wider",children:["подробнее ",e.jsx(Ot,{className:"w-3 h-3"})]})]},h.id))})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/10 rounded-xl border border-amber-500/20",children:e.jsx(Ha,{className:"w-6 h-6 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${i}`,children:"Инструменты"}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:"Биржи, аналитика и терминалы для фьючерсной торговли"})]})]}),e.jsx("div",{className:"space-y-12",children:t===null?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map((h,u)=>e.jsxs("button",{onClick:()=>r(u),className:`group p-6 rounded-3xl border text-left transition-all duration-500 hover:-translate-y-2 ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30 hover:bg-blue-500/5":"bg-white border-gray-100 hover:border-blue-500/20 hover:shadow-xl"}`,children:[e.jsx("div",{className:`p-4 rounded-2xl w-fit mb-4 transition-transform duration-500 group-hover:scale-110 ${h.bgColor} ${h.borderColor} border`,children:Os.cloneElement(h.icon,{className:"w-8 h-8"})}),e.jsx("h4",{className:`text-lg font-black mb-2 ${i}`,children:h.title}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:h.description}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-500 font-bold text-[10px] uppercase tracking-wider",children:["Смотреть инструменты ",e.jsx(Ot,{className:"w-3 h-3"})]})]},u))}):e.jsxs("div",{className:"space-y-8 animate-scale-up",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>r(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-1",children:[e.jsx(qa,{className:"w-3 h-3"})," Все категории"]})}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 ${d[t].bgColor} rounded-2xl border ${d[t].borderColor}`,children:Os.cloneElement(d[t].icon,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-black ${i}`,children:d[t].title}),e.jsx("p",{className:`text-sm ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:d[t].description})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d[t].tools.map((h,u)=>e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:`group relative p-5 rounded-2xl border transition-all duration-300 hover:shadow-lg ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30":"bg-white border-gray-100 hover:border-blue-500/20"}`,children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:`p-2.5 rounded-xl w-fit mb-4 ${s==="dark"?"bg-white/5":"bg-gray-50"} group-hover:scale-110 transition-transform`,children:h.icon}),e.jsx("h4",{className:`font-bold mb-1 ${i} flex items-center gap-2`,children:h.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:h.desc})]},u))})]})]})})]})]})},eE=()=>{const{theme:s}=pe(),[t,r]=f.useState(null),a=s==="dark"?"text-white":"text-gray-900",n=s==="dark"?"text-gray-400":"text-gray-500",i=[{name:"Airdrops.io",url:"https://airdrops.io",fullDesc:"Агрегатор активных и потенциальных airdrop’ов с базовой фильтрацией по блокчейнам и кратким описанием условий участия.",icon:e.jsx(jr,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",tags:["Aggregator"]},{name:"CoinMarketCap Airdrops",url:"https://coinmarketcap.com/airdrop",fullDesc:"Официальный раздел CoinMarketCap с маркетинговыми и партнёрскими airdrop’ами, ориентированными на массового пользователя.",icon:e.jsx(Pe,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",tags:["Aggregator"]},{name:"AirdropAlert",url:"https://airdropalert.com",fullDesc:"Агрегатор крипто-airdrop’ов с каталогом активных, потенциальных и завершённых раздач, категориями проектов и пошаговыми инструкциями.",icon:e.jsx(jr,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20",tags:["Aggregator"]},{name:"Drops Bot",url:"https://drops.bot",fullDesc:"Сервис для отслеживания криптовалютных айрдропов, который позволяет проверять публичные адреса кошельков на предмет доступных, пропущенных и потенциальных будущих наград.",icon:e.jsx(jr,{className:"w-5 h-5"}),color:"text-purple-400",bgColor:"bg-purple-500/10 border-purple-500/20",tags:["Aggregator"]},{name:"Coindar",url:"https://coindar.org",fullDesc:"Календарь событий: листинги, аирдропы и мероприятия как триггеры нарративов.",icon:e.jsx(Nt,{className:"w-5 h-5"}),color:"text-emerald-400",bgColor:"bg-emerald-500/10 border-emerald-500/20",tags:["Calendar"]},{name:"Reddit",url:"https://www.reddit.com",fullDesc:"Форумная платформа, где обсуждаются новые протоколы, testnet'ы и потенциальные airdrop-активности.",icon:e.jsx(yt,{className:"w-5 h-5"}),color:"text-orange-400",bgColor:"bg-orange-500/10 border-orange-500/20",tags:["Community"]},{name:"Discord",url:"https://discord.com",fullDesc:"Основной коммуникационный канал криптопроектов, где публикуются testnet-активности, роли за участие и ранние пользовательские задания.",icon:e.jsx(Bp,{className:"w-5 h-5"}),color:"text-indigo-400",bgColor:"bg-indigo-500/10 border-indigo-500/20",tags:["Community"]}];return e.jsx("div",{className:"space-y-16 pb-20",children:e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(Ha,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${a}`,children:"Инструменты AirDrop"}),e.jsx("p",{className:`text-sm ${n}`,children:"Агрегаторы, календари и платформы для поиска раздач"})]})]}),e.jsx("div",{className:"space-y-12",children:t===null?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Агрегаторы и Календари",description:"Поиск активных раздач и событий",icon:e.jsx(jr,{className:"w-8 h-8 text-blue-500"}),bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{title:"Комьюнити",description:"Обсуждения и инсайды",icon:e.jsx(yt,{className:"w-8 h-8 text-orange-500"}),bgColor:"bg-orange-500/10",borderColor:"border-orange-500/20"}].map((l,c)=>e.jsxs("button",{onClick:()=>r(c),className:`group p-6 rounded-3xl border text-left transition-all duration-500 hover:-translate-y-2 ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30 hover:bg-blue-500/5":"bg-white border-gray-100 hover:border-blue-500/20 hover:shadow-xl"}`,children:[e.jsx("div",{className:`p-4 rounded-2xl w-fit mb-4 transition-transform duration-500 group-hover:scale-110 ${l.bgColor} ${l.borderColor} border`,children:l.icon}),e.jsx("h4",{className:`text-lg font-black mb-2 ${a}`,children:l.title}),e.jsx("p",{className:`text-xs leading-relaxed ${s==="dark"?"text-gray-400":"text-gray-500"}`,children:l.description}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-blue-500 font-bold text-[10px] uppercase tracking-wider",children:["Смотреть инструменты ",e.jsx(Ot,{className:"w-3 h-3"})]})]},c))}):e.jsxs("div",{className:"space-y-8 animate-scale-up",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>r(null),className:"text-xs font-bold text-gray-500 hover:text-blue-500 transition-colors flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4"})," К категориям"]})}),[{title:"Агрегаторы и Календари",items:i.filter(l=>l.tags.includes("Aggregator")||l.tags.includes("Calendar"))},{title:"Комьюнити",items:i.filter(l=>l.tags.includes("Community"))}].filter((l,c)=>c===t).map((l,c)=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-2xl ${s==="dark"?"bg-white/5 border border-white/10":"bg-gray-100 border border-gray-200"}`,children:e.jsx(Ha,{className:"w-6 h-6 text-blue-500"})}),e.jsx("h4",{className:`text-xl font-bold ${a}`,children:l.title})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.items.map((d,h)=>e.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:`group relative p-5 rounded-2xl border transition-all duration-300 hover:shadow-lg ${s==="dark"?"bg-[#151a21]/50 border-white/5 hover:border-blue-500/30":"bg-white border-gray-100 hover:border-blue-500/20"}`,children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:`p-2.5 rounded-xl w-fit mb-4 ${d.bgColor} group-hover:scale-110 transition-transform`,children:e.jsx("div",{className:d.color,children:d.icon})}),e.jsx("h4",{className:`font-bold mb-1 ${a} flex items-center gap-2`,children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:d.fullDesc})]},h))})]},c))]})})]})})},tE=()=>{const{theme:s}=pe(),t=s==="dark"?"text-white":"text-gray-900",r=s==="dark"?"text-gray-400":"text-gray-500",a=s==="dark"?"bg-[#151a21]/50 border-white/5":"bg-white border-gray-100",n=[{name:"Лента новостей TV",url:"https://ru.tradingview.com/news-flow/",description:"Новостная лента TradingView с аналитикой рынков, макроэкономическими событиями и криптоновостями в реальном времени с профессиональной оценкой влияния на цену.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-green-400",bgColor:"bg-green-500/10 border-green-500/20"},{name:"CoinMarketCap News",url:"https://coinmarketcap.com/headlines/news/",description:"Новостной раздел CoinMarketCap с публикациями о запусках проектов, обновлениях экосистем, инвестиционных раундах и анонсах в криптоиндустрии.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20"},{name:"Dropstab News",url:"https://dropstab.com/news",description:"Новостной раздел Dropstab, агрегирующий события и обновления криптопроектов, включая запуск продуктов, изменения в экосистемах и рыночные анонсы.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-blue-400",bgColor:"bg-blue-500/10 border-blue-500/20"},{name:"CoinDesk",url:"https://www.coindesk.com",description:"Крупное криптомедиа, публикующее новости о запуске протоколов, развитии блокчейн-сетей, инфраструктурных проектах и Web3-стартапах.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-orange-400",bgColor:"bg-orange-500/10 border-orange-500/20"},{name:"The Block",url:"https://www.theblock.co",description:"Аналитическое новостное издание с фокусом на Web3, DeFi, Layer 2, инфраструктуру и новые криптопроекты.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-emerald-400",bgColor:"bg-emerald-500/10 border-emerald-500/20"},{name:"Coindar",url:"https://coindar.org",description:"Криптокалендарь событий с анонсами запусков, обновлений, релизов продуктов, testnet'ов и других значимых этапов развития проектов.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-cyan-400",bgColor:"bg-cyan-500/10 border-cyan-500/20"},{name:"Reddit",url:"https://www.reddit.com",description:"Форумная платформа с тематическими сабреддитами, где публикуются новости о запуске проектов, обновлениях сетей и потенциальных airdrop'ах.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-orange-500",bgColor:"bg-orange-500/10 border-orange-500/20"},{name:"X / Twitter",url:"https://x.com",description:"Социальная платформа, где проекты, разработчики и комьюнити публикуют анонсы запусков, testnet'ов и экосистемных инициатив.",icon:e.jsx(ir,{className:"w-5 h-5"}),color:"text-gray-400",bgColor:"bg-gray-500/10 border-gray-500/20"}];return e.jsx("div",{className:"space-y-16 pb-20",children:e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsx(ir,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-black ${t}`,children:"Новостные ресурсы и календари событий"}),e.jsx("p",{className:`text-sm ${r}`,children:"Источники информации о запусках, обновлениях и значимых событиях криптопроектов"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map((i,l)=>e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:`group relative p-5 rounded-2xl border transition-all duration-300 hover:shadow-lg ${a} hover:border-blue-500/30`,children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ot,{className:`w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})}),e.jsx("div",{className:`p-2.5 rounded-xl w-fit mb-4 ${i.bgColor} group-hover:scale-110 transition-transform`,children:e.jsx("div",{className:i.color,children:i.icon})}),e.jsx("h4",{className:`font-bold mb-1 ${t} flex items-center gap-2`,children:i.name}),e.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:i.description})]},l))})]})})},sE=()=>{var D;const{theme:s}=pe(),[t,r]=f.useState("memecoins_trading"),a=s==="dark"?"text-white":"text-gray-900",n=ze("tools_strategies_view"),i=ze("tools_kontur_memecoins_trading"),l=ze("tools_kontur_memecoins_deving"),c=ze("tools_kontur_polymarket"),d=ze("tools_kontur_nft"),h=ze("tools_kontur_staking"),u=ze("tools_kontur_spot"),m=ze("tools_kontur_futures"),g=ze("tools_kontur_airdrop"),y=ze("tools_kontur_prop_trading"),v=ze("tools_kontur_other"),E=[{id:"memecoins_trading",label:"Мемкоины (торговля)",icon:e.jsx(Pe,{className:"w-4 h-4"}),access:i},{id:"memecoins_deving",label:"Мемкоины (девинг)",icon:e.jsx(ux,{className:"w-4 h-4"}),access:l},{id:"polymarket",label:"Polymarket",icon:e.jsx(Nt,{className:"w-4 h-4"}),access:c},{id:"futures",label:"Фьючерсы",icon:e.jsx(lt,{className:"w-4 h-4"}),access:m},{id:"prop_trading",label:"Проп-трейдинг",icon:e.jsx(ox,{className:"w-4 h-4"}),access:y},{id:"spot",label:"Спот",icon:e.jsx(fx,{className:"w-4 h-4"}),access:u},{id:"nft",label:"NFT",icon:e.jsx(gr,{className:"w-4 h-4"}),access:d},{id:"staking",label:"Стейкинг",icon:e.jsx(xn,{className:"w-4 h-4"}),access:h},{id:"airdrop",label:"AirDrop",icon:e.jsx(jr,{className:"w-4 h-4"}),access:g},{id:"other",label:"Прочее",icon:e.jsx(l_,{className:"w-4 h-4"}),access:v}],I=E.filter(M=>M.access.hasAccess),C=E.some(M=>M.access.loading)||n.loading;f.useEffect(()=>{!C&&I.length>0&&!I.find(M=>M.id===t)&&r(I[0].id)},[C,I,t]);const T=I.map(M=>({id:M.id,label:M.label,icon:M.icon}));return C?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"})}):!n.hasAccess||I.length===0?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-700 mx-auto opacity-20"}),e.jsx("h3",{className:`text-xl font-black ${a}`,children:"Доступ ограничен"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:n.reason||"У вас нет доступа к разделам AVA Контур. Свяжитесь с администрацией."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6 pb-6 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-2xl border border-blue-500/20",children:e.jsx(Pe,{className:"w-8 h-8 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl md:text-3xl font-black tracking-tight ${a}`,children:"Contour"}),e.jsx("p",{className:`text-sm font-medium ${s==="dark"?"text-gray-400":"text-gray-500"} whitespace-nowrap`,children:"Авторские материалы AVA - Team"})]})]}),e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(A3,{spheres:T,activeSphere:t,setActiveSphere:M=>r(M)})})]}),e.jsx("div",{className:"animate-fade-in",children:t==="memecoins_trading"?e.jsx(O3,{}):t==="memecoins_deving"?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ux,{className:"w-16 h-16 text-gray-700 animate-pulse"})}),e.jsxs("h3",{className:`text-xl font-black ${a}`,children:["Мемкоины (девинг)"," — В разработке"]}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto px-4",children:"Мы готовим новые контентные модули и стратегии для данного направления. Следите за обновлениями в AVA Контур."})]}):t==="polymarket"?e.jsx(F3,{}):t==="futures"?e.jsx(Z3,{}):t==="prop_trading"?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ox,{className:"w-16 h-16 text-gray-700 animate-pulse"})}),e.jsxs("h3",{className:`text-xl font-black ${a}`,children:["Проп-трейдинг"," — В разработке"]}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto px-4",children:"Мы готовим новые контентные модули и стратегии для данного направления. Следите за обновлениями в AVA Контур."})]}):t==="spot"?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(fx,{className:"w-16 h-16 text-gray-700 animate-pulse"})}),e.jsxs("h3",{className:`text-xl font-black ${a}`,children:["Спот"," — В разработке"]}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto px-4",children:"Мы готовим новые контентные модули и стратегии для данного направления. Следите за обновлениями в AVA Контур."})]}):t==="nft"?e.jsx(H3,{}):t==="staking"?e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(xn,{className:"w-16 h-16 text-gray-700 animate-pulse"})}),e.jsxs("h3",{className:`text-xl font-black ${a}`,children:["Стейкинг"," — В разработке"]}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto px-4",children:"Мы готовим новые контентные модули и стратегии для данного направления. Следите за обновлениями в AVA Контур."})]}):t==="airdrop"?e.jsx(eE,{}):t==="other"?e.jsx(tE,{}):e.jsxs("div",{className:"py-20 text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(Qs,{className:"w-16 h-16 text-gray-700 animate-pulse"})}),e.jsxs("h3",{className:`text-xl font-black ${a}`,children:[(D=E.find(M=>M.id===t))==null?void 0:D.label," — В разработке"]}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto px-4",children:"Мы готовим новые контентные модули и стратегии для данного направления. Следите за обновлениями в AVA Контур."})]})})]})},rE=async s=>{const t=rt(je,"events");let r;return r=ht(t,Gr("createdAt","desc")),(await bs(r)).docs.map(i=>{const l=i.data();return{id:i.id,title:l.title||"",description:l.description||"",category:l.category||"memecoins",dates:l.dates||[],time:l.time||"",endTime:l.endTime||"",recurrence:l.recurrence||{type:"none",startDate:""},links:l.links||[],requiredParticipants:l.requiredParticipants||[],recommendedParticipants:l.recommendedParticipants||[],going:l.going||[],notGoing:l.notGoing||[],files:l.files||[],isHidden:l.isHidden||!1,isActualForce:l.isActualForce||!1,createdBy:l.createdBy||"",createdAt:l.createdAt||new Date().toISOString(),updatedAt:l.updatedAt||new Date().toISOString()}})},aE=async s=>{const t=rt(je,"events"),r=new Date().toISOString(),a={...s,requiredParticipants:s.requiredParticipants||[],recommendedParticipants:s.recommendedParticipants||[],going:[],notGoing:[],createdAt:r,updatedAt:r};return(await Vs(t,a)).id},sa=async(s,t)=>{const r=Ze(je,"events",s),a={...t,updatedAt:new Date().toISOString()};await Is(r,a)},nE=async s=>{const t=Ze(je,"events",s);await Ls(t)},iE=s=>{const t=rt(je,"events"),r=ht(t,Gr("createdAt","desc"));return xh(r,a=>{const n=a.docs.map(i=>{const l=i.data();return{id:i.id,title:l.title||"",description:l.description||"",category:l.category||"memecoins",dates:l.dates||[],time:l.time||"",endTime:l.endTime||"",recurrence:l.recurrence||{type:"none",startDate:""},links:l.links||[],requiredParticipants:l.requiredParticipants||[],recommendedParticipants:l.recommendedParticipants||[],going:l.going||[],notGoing:l.notGoing||[],files:l.files||[],isHidden:l.isHidden||!1,isActualForce:l.isActualForce||!1,createdBy:l.createdBy||"",createdAt:l.createdAt||new Date().toISOString(),updatedAt:l.updatedAt||new Date().toISOString()}});s(n)})},lE={memecoins:ar,polymarket:Nt,nft:gr,staking:jt,spot:Es,futures:Pe,airdrop:jr},oE=()=>{const s=new Date,t=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours()+3,s.getUTCMinutes(),s.getUTCSeconds()),r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,a=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`;return{date:r,time:a}},hi=()=>{const s=new Date;return s.getTime()+s.getTimezoneOffset()*60*1e3+3*60*60*1e3},cE=s=>{const t=hi(),r=s-t;return r>0&&r<=30*60*1e3},dE=f.memo(({event:s,isAdmin:t,onEdit:r,onDelete:a,isEditable:n=!0})=>{const{theme:i}=pe(),{user:l}=Xe(),{users:c}=Xr(),d=mn[s.category],h=lE[s.category]||ar,u=i==="dark"?"text-white":"text-gray-900",m=i==="dark"?"text-gray-400":"text-gray-600",g=i==="dark"?"border-white/10":"border-gray-100",y=i==="dark"?"bg-white/5 backdrop-blur-md":"bg-white",{date:v}=oE(),E=new Date(`${v}T${s.time}`).getTime(),I=s.endTime?new Date(`${v}T${s.endTime}`).getTime():E+2*60*60*1e3,C=s.dates.includes(v)&&E<=hi()&&I>hi(),T=!s.dates.includes(v)||s.dates.includes(v)&&I<=hi(),M=s.dates.filter(P=>P>=v).sort()[0],L=(()=>{if(!M)return null;const U=new Date(`${M}T${s.time}`).getTime()-hi();if(U<0)return null;const z=Math.floor(U/(1e3*60*60*24)),B=Math.floor(U%(1e3*60*60*24)/(1e3*60*60)),G=Math.floor(U%(1e3*60*60)/(1e3*60)),O=Math.floor(U%(1e3*60)/1e3),V=[];return z>0&&V.push(`${z}д`),B>0&&V.push(`${B}ч`),(G>0||B>0)&&V.push(`${G}м`),V.push(`${O}с`),V.join(" ")})(),N=M&&cE(new Date(`${M}T${s.time}`).getTime()),b=s.requiredParticipants.map(P=>{const U=c.find(z=>z.id===P);return(U==null?void 0:U.name)||"Unknown"}).filter(Boolean),w=l&&s.requiredParticipants.includes(l.id),j=l&&(s.recommendedParticipants||[]).includes(l.id),$=P=>lr(Ms(P),"dd.MM.yyyy"),_=async()=>{if(t)try{await sa(s.id,{isHidden:!s.isHidden})}catch(P){console.error("Failed to toggle visibility:",P)}},k=async()=>{if(t)try{await sa(s.id,{isActualForce:!s.isActualForce})}catch(P){console.error("Failed to toggle actual status:",P)}},H=async P=>{if(!l||!n)return;const U=[...s.going],z=[...s.notGoing];try{if(P)if(U.includes(l.id)){const B=U.filter(G=>G!==l.id);await sa(s.id,{going:B})}else{const B=[...U,l.id],G=z.filter(O=>O!==l.id);await sa(s.id,{going:B,notGoing:G})}else if(z.includes(l.id)){const B=z.filter(G=>G!==l.id);await sa(s.id,{notGoing:B})}else{const B=[...z,l.id],G=U.filter(O=>O!==l.id);await sa(s.id,{going:G,notGoing:B})}}catch(B){console.error("Failed to RSVP:",B),alert(B.message||"Ошибка при сохранении ответа")}},S=s.going.map(P=>{var U;return(U=c.find(z=>z.id===P))==null?void 0:U.name}).filter(Boolean),F=s.notGoing.map(P=>{var U;return(U=c.find(z=>z.id===P))==null?void 0:U.name}).filter(Boolean),Z=l&&s.going.includes(l.id),ie=l&&s.notGoing.includes(l.id);return e.jsxs("div",{className:`relative p-3 rounded-lg border ${g} ${y} shadow-sm hover:shadow-lg transition-all group overflow-hidden ${n?"":"opacity-75"} ${s.isHidden?"opacity-50 ring-1 ring-red-500/20":""}`,children:[e.jsx("div",{className:`absolute -right-8 -top-8 w-24 h-24 bg-gradient-to-br ${d.cardGradient} blur-2xl opacity-25 group-hover:opacity-50 transition-opacity duration-500`}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br ${d.gradient} shadow-lg shadow-emerald-500/10 text-white shrink-0`,children:e.jsx(h,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-sm font-bold ${u} tracking-tight leading-tight line-clamp-2`,children:s.title}),e.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-wider bg-gradient-to-r ${d.gradient} text-white shadow-sm`,children:d.label})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ss,{size:12,className:"text-emerald-500"}),e.jsx("span",{className:`font-medium ${m}`,children:s.dates.length===1?$(s.dates[0]):`${$(s.dates[0])} — ${$(s.dates[s.dates.length-1])}`})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(wt,{size:12,className:"text-emerald-500"}),e.jsxs("span",{className:`font-medium ${m}`,children:[s.time,s.endTime?` — ${s.endTime}`:""]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[C&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-emerald-500 tracking-wider",children:"Идёт сейчас"})]}),N&&!C&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-amber-500/10 border border-amber-500/20",children:[e.jsx(Qt,{size:10,className:"text-amber-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-amber-500",children:"Скоро начнётся"})]}),L&&!C&&!N&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-amber-500/10 border border-amber-500/20",children:[e.jsx(ka,{size:10,className:"text-amber-500"}),e.jsx("span",{className:"text-[9px] font-bold text-amber-500",children:L})]}),Z&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx(gs,{size:10,className:"text-emerald-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-emerald-500",children:"Вы идёте"})]}),ie&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-rose-500/10 border border-rose-500/20",children:[e.jsx(Zs,{size:10,className:"text-rose-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-rose-500",children:"Вас не будет"})]}),!Z&&!ie&&(w||j)&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-blue-500/10 border border-blue-500/20",children:[e.jsx(yt,{size:10,className:"text-blue-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-blue-500",children:w?"Вы участник":"Рекомендовано"})]}),s.isActualForce&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-cyan-500/10 border border-cyan-500/20",children:[e.jsx(bx,{size:10,className:"text-cyan-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-cyan-500",children:"Закреплено"})]}),s.isHidden&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-gray-500/10 border border-gray-500/20",children:[e.jsx(Pi,{size:10,className:"text-gray-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-gray-500",children:"Скрыто"})]}),!n&&(C||T)&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-gray-500/10 border border-gray-500/20",children:[e.jsx(Qt,{size:10,className:"text-gray-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase text-gray-500",children:C?"Сейчас идёт":"Завершено"})]})]}),s.description&&e.jsx("p",{className:`mt-2 text-xs ${i==="dark"?"text-gray-400":"text-gray-600"} line-clamp-2`,children:s.description}),s.links.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:s.links.map((P,U)=>e.jsxs("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-bold transition-all ${i==="dark"?"bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:[e.jsx(Ot,{size:10}),P.name]},U))}),e.jsxs("div",{className:"mt-2 space-y-1.5",children:[S.length>0&&e.jsxs("div",{className:`p-2 rounded-lg ${i==="dark"?"bg-emerald-500/5 border border-emerald-500/10":"bg-emerald-50 border border-emerald-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx(gs,{size:10,className:"text-emerald-500"}),e.jsxs("span",{className:"text-[9px] font-bold uppercase text-emerald-500",children:["Будут (",S.length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[S.slice(0,4).map((P,U)=>e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-medium ${i==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-white text-emerald-700 border border-emerald-100"}`,children:P},U)),S.length>4&&e.jsxs("span",{className:`text-[9px] font-medium ${m}`,children:["+",S.length-4]})]})]}),F.length>0&&e.jsxs("div",{className:`p-2 rounded-lg ${i==="dark"?"bg-rose-500/5 border border-rose-500/10":"bg-rose-50 border border-rose-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx(Zs,{size:10,className:"text-rose-500"}),e.jsxs("span",{className:"text-[9px] font-bold uppercase text-rose-500",children:["Не смогут (",F.length,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[F.slice(0,3).map((P,U)=>e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-medium ${i==="dark"?"bg-rose-500/10 text-rose-400":"bg-white text-rose-700 border border-rose-100"}`,children:P},U)),F.length>3&&e.jsxs("span",{className:`text-[9px] font-medium ${m}`,children:["+",F.length-3]})]})]})]}),b.length>0&&e.jsxs("div",{className:`mt-2 p-2 rounded-lg ${i==="dark"?"bg-white/5":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx(yt,{size:10,className:m}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider text-gray-500",children:"Участники"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.slice(0,3).map((P,U)=>e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-medium ${i==="dark"?"bg-white/10 text-gray-300":"bg-white text-gray-600"}`,children:P},U)),b.length>3&&e.jsxs("span",{className:`text-[9px] font-medium ${m}`,children:["+",b.length-3]})]})]}),s.files.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:s.files.map(P=>e.jsxs("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-bold transition-all ${i==="dark"?"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:[e.jsx(lo,{size:10}),P.name]},P.id))}),l&&n&&e.jsxs("div",{className:"flex gap-1.5 mt-3",children:[e.jsxs("button",{onClick:()=>H(!0),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg text-[10px] font-bold transition-all ${Z?"bg-emerald-500 text-white shadow-emerald-500/20":"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20"}`,children:[e.jsx(gs,{size:12}),"Я буду"]}),e.jsxs("button",{onClick:()=>H(!1),className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded-lg text-[10px] font-bold transition-all ${ie?"bg-rose-500 text-white shadow-rose-500/20":"bg-rose-500/10 text-rose-500 hover:bg-rose-500/20"}`,children:[e.jsx(Zs,{size:12}),"Не буду"]})]}),t&&e.jsxs("div",{className:"flex items-center gap-1.5 mt-3 pt-2 border-t border-white/5",children:[e.jsx("button",{onClick:k,title:s.isActualForce?"Убрать из актуальных":"Добавить в актуальные",className:`p-1.5 rounded-lg transition-all ${s.isActualForce?"bg-cyan-500/20 text-cyan-400":"bg-white/5 text-gray-400 hover:text-white"}`,children:s.isActualForce?e.jsx(g_,{size:14}):e.jsx(bx,{size:14})}),e.jsx("button",{onClick:_,title:s.isHidden?"Показать пользователям":"Скрыть от пользователей",className:`p-1.5 rounded-lg transition-all ${s.isHidden?"bg-rose-500/20 text-rose-400":"bg-white/5 text-gray-400 hover:text-white"}`,children:s.isHidden?e.jsx(Pn,{size:14}):e.jsx(Pi,{size:14})}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:()=>r(s),className:`flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${i==="dark"?"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white":"bg-gray-100 hover:bg-gray-200 text-gray-500"}`,children:[e.jsx(rs,{size:12}),"Изменить"]}),e.jsx("button",{onClick:()=>a(s.id),className:`p-1.5 rounded-lg transition-all ${i==="dark"?"bg-red-500/10 hover:bg-red-500/20 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:e.jsx(Lt,{size:12})})]})]})]})}),hE=async(s,t)=>{const r=hp(up,t),a=await Y1(r,s);return{url:await Q1(a.ref),fileName:s.name}},uE=async s=>{const t=hp(up,s);await X1(t)},Tx={memecoins:ar,polymarket:Nt,nft:gr,staking:jt,spot:Es,futures:Pe,airdrop:jr},xE=({event:s,onClose:t})=>{var at;const{user:r}=Xe(),{theme:a}=pe(),{users:n}=Xr(),{lockScroll:i,unlockScroll:l}=Sr();f.useEffect(()=>(i(),l),[i,l]);const[c,d]=f.useState(!1),[h,u]=f.useState(!1),[m,g]=f.useState((s==null?void 0:s.title)||""),[y,v]=f.useState((s==null?void 0:s.description)||""),[E,I]=f.useState((s==null?void 0:s.category)||"memecoins"),[C,T]=f.useState((s==null?void 0:s.dates)||[]),[D,M]=f.useState((s==null?void 0:s.time)||"12:00"),[se,L]=f.useState((s==null?void 0:s.endTime)||""),[N,b]=f.useState((s==null?void 0:s.recurrence)||{type:"none",startDate:""}),[w,j]=f.useState((s==null?void 0:s.links)||[]),[$,_]=f.useState((s==null?void 0:s.requiredParticipants)||[]),[k,H]=f.useState((s==null?void 0:s.recommendedParticipants)||[]),[S]=f.useState((s==null?void 0:s.going)||[]),[F]=f.useState((s==null?void 0:s.notGoing)||[]),[Z,ie]=f.useState((s==null?void 0:s.files)||[]),[P,U]=f.useState((s==null?void 0:s.isHidden)||!1),[z,B]=f.useState((s==null?void 0:s.isActualForce)||!1),[G,O]=f.useState(((at=s==null?void 0:s.recurrence)==null?void 0:at.endDate)||""),[V,R]=f.useState([]),[q,K]=f.useState(""),[J,ce]=f.useState(""),[he,te]=f.useState(""),ae=f.useRef(null),[ge,le]=f.useState([]),W=a==="dark"?"text-white":"text-gray-900",ne=a==="dark"?"text-gray-400":"text-gray-600",fe=a==="dark"?"border-white/10":"border-gray-200",We=a==="dark"?"bg-gray-800":"bg-white",Se=a==="dark"?"bg-white/5":"bg-gray-50",ke=mn[E],$e=Tx[E],ye=()=>{q&&!C.includes(q)&&(T(de=>[...de,q].sort()),K(""))},Ce=()=>{if(!N||N.type==="none"||!N.startDate||!G){alert("Укажите дату начала и дату окончания повторения");return}const de=gt=>{const[$t,Mt,cs]=gt.split("-").map(Number);return new Date($t,Mt-1,cs)},Ee=gt=>{const $t=gt.getFullYear(),Mt=String(gt.getMonth()+1).padStart(2,"0"),cs=String(gt.getDate()).padStart(2,"0");return`${$t}-${Mt}-${cs}`},De=de(N.startDate),mt=de(G);if(De>mt){alert("Дата начала не может быть позже даты окончания");return}const vt=[],Re=new Date(De);for(;Re<=mt;){const gt=Re.getDay();if(V.includes(gt)||vt.push(Ee(Re)),N.type==="weekly"?Re.setDate(Re.getDate()+7):Re.setDate(Re.getDate()+1),vt.length>730||Re.getTime()>De.getTime()+1e3*60*60*24*365*2)break}vt.length>0?(T(gt=>Array.from(new Set([...gt,...vt])).sort()),alert(`Добавлено дат: ${vt.length}`)):alert("Не удалось сгенерировать даты. Проверьте диапазон.")},Ge=de=>{T(Ee=>Ee.filter(De=>De!==de))},ot=()=>{J&&!w.find(de=>de.url===J)&&(j(de=>[...de,{url:J.trim(),name:he.trim()||`Ссылка ${de.length+1}`}]),ce(""),te(""))},ue=de=>{j(Ee=>Ee.filter(De=>De.url!==de))},Y=de=>{const Ee=Array.from(de.target.files||[]);le(De=>[...De,...Ee])},we=de=>{le(Ee=>Ee.filter((De,mt)=>mt!==de))},Oe=async de=>{if(window.confirm(`Удалить файл "${de.name}"?`))try{await uE(de.url),ie(Ee=>Ee.filter(De=>De.id!==de.id))}catch(Ee){console.error("Failed to delete file:",Ee)}},Ae=async de=>{if(ge.length===0)return[];u(!0);const Ee=[];try{for(const De of ge){const mt=`events/${de}/${Date.now()}_${De.name}`,vt=await hE(De,mt);Ee.push({id:Date.now().toString()+Math.random().toString(36).slice(2),name:vt.fileName,url:vt.url,type:De.type,size:De.size})}return Ee}finally{u(!1)}},qe=async de=>{if(de.preventDefault(),!m.trim()||C.length===0){alert("Заполните обязательные поля: название и даты");return}d(!0);try{let Ee=s==null?void 0:s.id;if(s){const De=await Ae(s.id),mt=[...Z,...De];await sa(s.id,{title:m,description:y,category:E,dates:C,time:D,endTime:se,recurrence:{type:(N==null?void 0:N.type)||"none",startDate:(N==null?void 0:N.startDate)||"",endDate:G},links:w.map(vt=>({...vt,url:vt.url.trim()})),requiredParticipants:$,recommendedParticipants:k,going:S,notGoing:F,files:mt})}else{Ee=await aE({title:m,description:y,category:E,dates:C,time:D,endTime:se,recurrence:{type:(N==null?void 0:N.type)||"none",startDate:(N==null?void 0:N.startDate)||"",endDate:G},links:w.map(mt=>({...mt,url:mt.url.trim()})),requiredParticipants:$,recommendedParticipants:k,going:[],notGoing:[],files:[],isHidden:P,isActualForce:z,createdBy:(r==null?void 0:r.id)||""});const De=await Ae(Ee);De.length>0&&await sa(Ee,{files:De})}t()}catch(Ee){console.error("Failed to save event:",Ee),alert(Ee.message||"Ошибка при сохранении события")}finally{d(!1)}},ut=de=>{H(Ee=>Ee.includes(de)?Ee.filter(De=>De!==de):(_(De=>De.filter(mt=>mt!==de)),[...Ee,de]))},_t=de=>{_(Ee=>Ee.includes(de)?Ee.filter(De=>De!==de):(H(De=>De.filter(mt=>mt!==de)),[...Ee,de]))};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),e.jsxs("div",{className:`relative w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl ${We} shadow-2xl`,children:[e.jsxs("div",{className:`sticky top-0 z-10 flex items-center justify-between p-6 border-b ${fe}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${ke.gradient} bg-opacity-10 text-white`,children:e.jsx($e,{size:20})}),e.jsx("h2",{className:`text-xl font-bold ${W}`,children:s?"Редактирование события":"Новое событие"})]}),e.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-all ${a==="dark"?"hover:bg-white/10":"hover:bg-gray-100"}`,children:e.jsx(it,{size:20,className:ne})})]}),e.jsxs("form",{onSubmit:qe,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Название *"}),e.jsx("input",{type:"text",value:m,onChange:de=>g(de.target.value),placeholder:"Введите название события",className:`w-full px-4 py-3 rounded-xl border ${fe} ${Se} ${W} placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500`,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Категория"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(mn).map(de=>{const Ee=mn[de],De=Tx[de];return e.jsxs("button",{type:"button",onClick:()=>I(de),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${E===de?`bg-gradient-to-r ${Ee.gradient} text-white`:a==="dark"?"bg-white/10 text-gray-300 hover:bg-white/20":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(De,{size:16}),Ee.label]},de)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Описание"}),e.jsx("textarea",{value:y,onChange:de=>v(de.target.value),placeholder:"Опишите событие...",rows:3,className:`w-full px-4 py-3 rounded-xl border ${fe} ${Se} ${W} placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 resize-none`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 p-4 rounded-xl border border-emerald-500/20 bg-emerald-500/5",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:de=>U(de.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-10 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-rose-500"})]}),e.jsx("span",{className:`text-sm font-bold ${W}`,children:"Скрыть от всех"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:de=>B(de.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-10 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),e.jsx("span",{className:`text-sm font-bold ${W}`,children:"Закрепить в актуальных"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Даты *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ss,{size:18,className:`absolute left-4 top-1/2 -translate-y-1/2 ${ne} sm:block hidden`}),e.jsx("input",{type:"date",value:q,onChange:de=>K(de.target.value),className:`w-full sm:pl-12 px-4 py-2.5 rounded-xl border ${fe} ${Se} ${W} focus:outline-none focus:ring-2 focus:ring-emerald-500`})]}),e.jsx("button",{type:"button",onClick:ye,disabled:!q,className:"px-4 py-2.5 rounded-xl bg-emerald-500 text-white font-bold hover:bg-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-500/20",children:e.jsx(os,{size:20})})]}),C.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(de=>e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-sm bg-emerald-500/10 text-emerald-500 border border-emerald-500/20",children:[e.jsx(Ss,{size:12}),new Date(de).toLocaleDateString("ru-RU"),e.jsx("button",{type:"button",onClick:()=>Ge(de),className:"ml-1 hover:text-red-400",children:e.jsx(it,{size:12})})]},de))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Время начала"}),e.jsx("input",{type:"time",value:D,onChange:de=>M(de.target.value),className:`w-full px-4 py-3 rounded-xl border ${fe} ${Se} ${W} focus:outline-none focus:ring-2 focus:ring-emerald-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Время окончания"}),e.jsx("input",{type:"time",value:se,onChange:de=>L(de.target.value),className:`w-full px-4 py-3 rounded-xl border ${fe} ${Se} ${W} focus:outline-none focus:ring-2 focus:ring-emerald-500`})]})]}),e.jsxs("div",{className:`p-4 rounded-xl border ${fe} ${Se}`,children:[e.jsx("label",{className:`block text-sm font-bold mb-4 ${W} uppercase tracking-wider`,children:"Повторение события"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"none",label:"Нет"},{id:"daily",label:"Ежедневно"},{id:"weekly",label:"Еженедельно"},{id:"range",label:"Диапазон дат"},{id:"until",label:"До даты"}].map(de=>e.jsx("button",{type:"button",onClick:()=>b(Ee=>({...Ee,type:de.id})),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${(N==null?void 0:N.type)===de.id?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":a==="dark"?"bg-white/10 text-gray-300 hover:bg-white/20":"bg-white text-gray-700 hover:bg-gray-50"}`,children:de.label},de.id))}),(N==null?void 0:N.type)!=="none"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1.5 ${ne}`,children:"Дата начала"}),e.jsx("input",{type:"date",value:N==null?void 0:N.startDate,onChange:de=>b(Ee=>({...Ee,startDate:de.target.value})),className:`w-full px-3 py-2 rounded-lg border ${fe} ${a==="dark"?"bg-gray-800":"bg-white"} ${W} focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm`})]}),((N==null?void 0:N.type)==="daily"||(N==null?void 0:N.type)==="weekly"||(N==null?void 0:N.type)==="range"||(N==null?void 0:N.type)==="until")&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-1.5 ${ne}`,children:N.type==="range"?"Дата окончания":"Повторять до"}),e.jsx("input",{type:"date",value:G,onChange:de=>O(de.target.value),className:`w-full px-3 py-2 rounded-lg border ${fe} ${a==="dark"?"bg-gray-800":"bg-white"} ${W} focus:outline-none focus:ring-2 focus:ring-emerald-500 text-sm`})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:`block text-xs font-medium mb-2 ${ne}`,children:"Исключить дни недели"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:1,label:"Пн"},{id:2,label:"Вт"},{id:3,label:"Ср"},{id:4,label:"Чт"},{id:5,label:"Пт"},{id:6,label:"Сб"},{id:0,label:"Вс"}].map(de=>e.jsx("button",{type:"button",onClick:()=>R(Ee=>Ee.includes(de.id)?Ee.filter(De=>De!==de.id):[...Ee,de.id]),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${V.includes(de.id)?"bg-rose-500 text-white shadow-md":a==="dark"?"bg-gray-800 text-gray-400 hover:text-white":"bg-white text-gray-500 hover:bg-gray-50"} border ${fe}`,children:de.label},de.id))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{type:"button",onClick:Ce,disabled:!(N!=null&&N.startDate)||!G,className:"w-full py-2.5 rounded-lg bg-emerald-500/10 text-emerald-500 font-bold hover:bg-emerald-500/20 transition-all text-sm border border-emerald-500/20 disabled:opacity-50",children:"Применить и добавить даты"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Ссылки"}),w.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:w.map((de,Ee)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${fe}`,children:[e.jsx(gx,{size:16,className:ne}),e.jsxs("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",className:`flex-1 text-sm truncate ${a==="dark"?"text-emerald-400 hover:text-emerald-300":"text-emerald-600 hover:text-emerald-500"}`,children:[de.name," ",e.jsxs("span",{className:"text-[10px] opacity-50 ml-1",children:["(",de.url,")"]})]}),e.jsx("button",{type:"button",onClick:()=>ue(de.url),className:`p-1.5 rounded-lg transition-all ${a==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:e.jsx(it,{size:14})})]},Ee))}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-[2]",children:[e.jsx(gx,{size:18,className:`absolute left-4 top-1/2 -translate-y-1/2 ${ne}`}),e.jsx("input",{type:"url",value:J,onChange:de=>ce(de.target.value),placeholder:"https://...",className:`w-full pl-12 pr-4 py-3 rounded-xl border ${fe} ${Se} ${W} placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500`})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",value:he,onChange:de=>te(de.target.value),placeholder:"Название",className:`w-full px-4 py-3 rounded-xl border ${fe} ${Se} ${W} placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500`})}),e.jsx("button",{type:"button",onClick:ot,disabled:!J.trim(),className:"px-5 py-3 rounded-xl bg-emerald-500 text-white font-bold hover:bg-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-500/20",children:e.jsx(os,{size:20})})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Обязательные участники"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(de=>e.jsx("button",{type:"button",onClick:()=>_t(de.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${$.includes(de.id)?"bg-emerald-500 text-white":a==="dark"?"bg-white/10 text-gray-300 hover:bg-white/20":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:de.name},de.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Рекомендованные участники"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(de=>e.jsx("button",{type:"button",onClick:()=>ut(de.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${k.includes(de.id)?"bg-blue-500 text-white":a==="dark"?"bg-white/10 text-gray-300 hover:bg-white/20":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:de.name},de.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${W}`,children:"Файлы"}),Z.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:Z.map(de=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${fe}`,children:[e.jsx(lo,{size:18,className:ne}),e.jsx("span",{className:`flex-1 text-sm truncate ${W}`,children:de.name}),e.jsx("button",{type:"button",onClick:()=>Oe(de),className:`p-1.5 rounded-lg transition-all ${a==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:e.jsx(Lt,{size:14})})]},de.id))}),ge.length>0&&e.jsx("div",{className:"space-y-2 mb-4",children:ge.map((de,Ee)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border ${fe}`,children:[e.jsx(lo,{size:18,className:ne}),e.jsx("span",{className:`flex-1 text-sm truncate ${W}`,children:de.name}),e.jsxs("span",{className:`text-xs ${ne}`,children:[(de.size/1024).toFixed(1)," KB"]}),e.jsx("button",{type:"button",onClick:()=>we(Ee),className:`p-1.5 rounded-lg transition-all ${a==="dark"?"hover:bg-red-500/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:e.jsx(it,{size:14})})]},Ee))}),e.jsxs("button",{type:"button",onClick:()=>{var de;return(de=ae.current)==null?void 0:de.click()},className:`flex items-center gap-2 px-4 py-3 rounded-xl border border-dashed ${fe} ${a==="dark"?"hover:bg-white/5":"hover:bg-gray-50"} transition-all`,children:[e.jsx(N_,{size:18,className:ne}),e.jsx("span",{className:`text-sm ${ne}`,children:"Загрузить файлы"})]}),e.jsx("input",{ref:ae,type:"file",multiple:!0,onChange:Y,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.7z,.rar,.png,.jpg,.jpeg,.gif"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-3 pt-6 border-t ${borderColor}",children:[e.jsx("button",{type:"button",onClick:t,className:`w-full sm:w-auto px-8 py-3 rounded-xl font-bold transition-all ${a==="dark"?"hover:bg-white/10 text-gray-400":"hover:bg-gray-100 text-gray-600"}`,children:"Отмена"}),e.jsx("button",{type:"submit",disabled:c||h,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-10 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-black shadow-lg shadow-emerald-500/25 transition-all hover:shadow-emerald-500/40 disabled:opacity-50",children:c||h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Сохранение..."})]}):e.jsx(e.Fragment,{children:"Сохранить"})})]})]})]})]})},mE={memecoins:ar,polymarket:Nt,nft:gr,staking:jt,spot:Es,futures:Pe,airdrop:jr},gE=3,pE=()=>{const s=new Date,t=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours()+3,s.getUTCMinutes(),s.getUTCSeconds())),r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,a=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`;return{date:r,time:a}},bE=()=>Date.now()+3*60*60*1e3,fE=()=>{const{user:s}=Xe(),{isAdmin:t}=kt(),{theme:r}=pe(),[a,n]=f.useState([]),[i,l]=f.useState(!0),[c,d]=f.useState(null),[h,u]=f.useState(!1),[m,g]=f.useState("all"),[y,v]=f.useState(!1),[E,I]=f.useState(!1),C=async()=>{try{const j=await rE();n(j)}catch(j){console.error("Failed to fetch events:",j)}finally{l(!1)}};f.useEffect(()=>{const j=iE($=>{n($),l(!1)});return()=>j()},[]);const T=f.useMemo(()=>{const{date:j}=pE(),$=bE();let _=[...a];if(m!=="all"&&(_=_.filter(H=>H.category===m)),E&&s&&(_=_.filter(H=>H.requiredParticipants.includes(s.id))),!t){const S=new Date($+(gE+1)*24*60*60*1e3).toISOString().split("T")[0];_=_.filter(F=>F.isHidden?!1:F.dates.some(Z=>Z>=j&&Z<=S))}const k=H=>{const S=new Date(`${j}T${H.time}`).getTime(),F=H.endTime?new Date(`${j}T${H.endTime}`).getTime():S+2*60*60*1e3,ie=H.dates.includes(j)&&S<=$&&F>$;if(H.isActualForce||ie)return 0;const P=H.dates.filter(U=>U>=j).sort()[0];return P===j?1:P?2:3};return _.sort((H,S)=>{const F=k(H),Z=k(S);if(F!==Z)return F-Z;const ie=H.dates.filter(U=>U>=j).sort()[0]||"9999-99-99",P=S.dates.filter(U=>U>=j).sort()[0]||"9999-99-99";return ie!==P?ie.localeCompare(P):H.time.localeCompare(S.time)}),_},[a,m,E,s,t]),D=async j=>{if(window.confirm("Удалить это событие?"))try{await nE(j),n($=>$.filter(_=>_.id!==j))}catch($){console.error("Failed to delete event:",$)}},M=()=>{u(!1),d(null),C()},se=r==="dark"?"text-white":"text-gray-900",L=r==="dark"?"text-gray-400":"text-gray-600",N=r==="dark"?"border-white/10":"border-gray-200",b=r==="dark"?"bg-gray-900":"bg-gray-50",w=r==="dark"?"bg-gray-800":"bg-white";return e.jsx("div",{className:`min-h-screen ${b} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 text-white shadow-lg shadow-emerald-500/20",children:e.jsx(Ss,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${se}`,children:"Events"}),e.jsx("p",{className:`text-sm ${L}`,children:"Event announcements and important dates"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>v(!y),className:`p-3 rounded-xl border ${N} transition-all ${r==="dark"?"hover:bg-white/5":"hover:bg-gray-100"} ${y?"bg-emerald-500/10 border-emerald-500/30":""}`,children:e.jsx(Fp,{size:20,className:y?"text-emerald-500":L})}),t&&e.jsxs("button",{onClick:()=>u(!0),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold hover:shadow-lg hover:shadow-emerald-500/25 transition-all",children:[e.jsx(os,{size:20}),e.jsx("span",{className:"hidden sm:inline",children:"Создать"}),e.jsx("span",{className:"sm:hidden text-sm",children:"Создать"})]})]})]}),e.jsx("div",{className:`mb-6 p-5 rounded-2xl border ${N} ${w} shadow-sm transition-all duration-300 ${y?"opacity-100 translate-y-0":"hidden opacity-0 -translate-y-4"}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("span",{className:`text-xs font-black uppercase tracking-widest ${L}`,children:"По категории"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${m==="all"?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":r==="dark"?"bg-white/5 text-gray-400 hover:bg-white/10":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Все"}),Object.keys(mn).map(j=>{const $=mE[j],_=mn[j];return e.jsxs("button",{onClick:()=>g(j),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${m===j?`bg-gradient-to-r ${_.gradient} text-white shadow-lg shadow-emerald-500/20`:r==="dark"?"bg-white/5 text-gray-400 hover:bg-white/10":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx($,{size:16}),_.label]},j)})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-xl cursor-pointer hover:bg-white/5 transition-all",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:j=>I(j.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-10 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]}),e.jsx("span",{className:`text-sm font-bold ${se}`,children:"Только мои"})]})})]})}),i?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-emerald-500"})}):e.jsxs("div",{className:`rounded-2xl border ${N} ${w} overflow-hidden shadow-sm`,children:[e.jsx("div",{className:`p-4 border-b ${N} bg-gradient-to-r from-emerald-500/5 to-cyan-500/5`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-cyan-500 text-white shadow-lg",children:e.jsx(Pe,{size:18})}),e.jsx("h2",{className:`text-lg font-bold ${se}`,children:"Список событий"})]}),e.jsxs("p",{className:`text-xs ${L}`,children:["Найдено: ",T.length]})]})}),e.jsx("div",{className:"p-4 sm:p-6",children:T.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-500/10 mb-6",children:e.jsx(Ss,{size:32,className:"text-gray-500"})}),e.jsx("h3",{className:`text-xl font-bold ${se} mb-2`,children:"Список пуст"}),e.jsx("p",{className:`text-sm ${L} max-w-xs mx-auto`,children:"На ближайшее время событий не запланировано или они скрыты."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:T.map(j=>e.jsx(dE,{event:j,isAdmin:t,onEdit:$=>{d($),u(!0)},onDelete:D},j.id))})})]}),h&&e.jsx(xE,{event:c,onClose:M})]})})},yE=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M18 6 6 18"}),e.jsx("path",{d:"m6 6 12 12"})]}),vE=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e.jsx("path",{d:"m15 5 4 4"})]}),jE=({count:s,theme:t})=>{const r=l=>l>=30?100:l>=20?75:l>=10?50:l>=5?25:l/5*25,a=l=>l>=30?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.5)]":l>=20?"bg-yellow-500 shadow-[0_0_15px_rgba(234,179,8,0.5)]":l>=10?"bg-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.5)]":l>=5?"bg-rose-500 shadow-[0_0_15px_rgba(244,63,94,0.5)]":"bg-gray-400",n=r(s),i=a(s);return e.jsxs("div",{className:`relative p-6 rounded-[2rem] border transition-all duration-500 ${t==="dark"?"bg-[#0b1015] border-white/5 hover:border-emerald-500/20":"bg-white border-gray-100 hover:border-emerald-500/10"} shadow-2xl group overflow-hidden`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/5 blur-[50px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${t==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-emerald-50 text-emerald-600"}`,children:e.jsx(B4,{className:"w-5 h-5"})}),e.jsx("div",{children:e.jsx("h4",{className:`text-sm font-black uppercase tracking-widest ${t==="dark"?"text-white":"text-gray-900"}`,children:"Месячный драйв"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-3xl font-black tracking-tighter ${t==="dark"?"text-white":"text-gray-900"}`,children:s}),e.jsx("span",{className:"text-sm font-bold text-gray-500",children:" / 30"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative h-14 w-full rounded-2xl overflow-hidden p-1.5 ${t==="dark"?"bg-white/5 border border-white/5":"bg-gray-100 border border-gray-200"}`,children:[e.jsx("div",{className:`h-full rounded-xl transition-all duration-1000 ease-out ${i}`,style:{width:`${n}%`}}),[5,10,20,30].map(l=>e.jsx("div",{className:"absolute top-0 bottom-0 border-r border-white/10 dark:border-white/5",style:{left:`${l/30*100}%`}},l))]}),e.jsx("div",{className:"flex justify-between px-1",children:[5,10,20,30].map(l=>e.jsxs("div",{className:`flex flex-col items-center gap-1 transition-all duration-300 ${s>=l?"opacity-100":"opacity-40"}`,children:[e.jsx("span",{className:`text-[10px] font-black tracking-tighter ${t==="dark"?"text-gray-400":"text-gray-600"}`,children:l}),e.jsx("div",{className:`w-1 h-1 rounded-full ${s>=l?"bg-emerald-500":"bg-gray-500"}`})]},l))})]})]})},wE=({referral:s,onClose:t,onSave:r,theme:a})=>{const{user:n}=Xe(),{isAdmin:i}=kt(),[l,c]=f.useState({name:"",phone:"",tgAccount:"",source:"",status:"active"}),[d,h]=f.useState(!1),[u,m]=f.useState(""),[g,y]=f.useState(!1),v=f.useMemo(()=>(s==null?void 0:s.referralId)||`REF-${Math.random().toString(36).slice(2,8).toUpperCase()}`,[s]);f.useEffect(()=>{s&&c({name:s.name,phone:s.phone||"",tgAccount:s.tgAccount||"",source:s.source||"",status:s.status||"active"})},[s]);const E=async C=>{C.preventDefault(),h(!0),m("");const T={...l,referralId:v,ownerId:(s==null?void 0:s.ownerId)||(n==null?void 0:n.id)||"",age:18,createdAt:(s==null?void 0:s.createdAt)||new Date().toISOString()};try{s?i?await Ip(s.id,T):await ts({entity:"referral",action:"update",authorId:(n==null?void 0:n.id)||"",targetUserId:s.ownerId,before:s,after:{id:s.id,...T}}):i?await Ap(T):await ts({entity:"referral",action:"create",authorId:(n==null?void 0:n.id)||"",targetUserId:(n==null?void 0:n.id)||"",before:null,after:{id:"",...T}}),r()}catch{m("Ошибка при сохранении")}finally{h(!1)}},I=`w-full px-5 py-4 rounded-2xl border transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-emerald-500/10 ${a==="dark"?"bg-white/5 border-white/10 text-white placeholder-gray-600 focus:border-emerald-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 focus:border-emerald-500"}`;return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:t}),e.jsx("div",{className:`relative w-full max-w-lg overflow-hidden rounded-[2.5rem] ${a==="dark"?"bg-[#0b0f17]":"bg-white"} shadow-2xl border ${a==="dark"?"border-white/10":"border-gray-200"} animate-in zoom-in duration-300`,children:e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:`text-2xl font-black tracking-tight ${a==="dark"?"text-white":"text-gray-900"}`,children:[s?"Редактировать":"Добавить"," реферала"]}),e.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/5 transition-colors",children:e.jsx(yE,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"Имя"}),e.jsx("input",{required:!0,className:I,value:l.name,onChange:C=>c(T=>({...T,name:C.target.value})),placeholder:"Имя Фамилия"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"Телефон"}),e.jsx("input",{required:!0,className:I,value:l.phone,onChange:C=>c(T=>({...T,phone:C.target.value})),placeholder:"79000000000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"Telegram"}),e.jsx("input",{required:!0,className:I,value:l.tgAccount,onChange:C=>c(T=>({...T,tgAccount:C.target.value})),placeholder:"@username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"Источник"}),e.jsx("input",{required:!0,className:I,value:l.source,onChange:C=>c(T=>({...T,source:C.target.value})),placeholder:"Откуда узнал?"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"ID (Авто)"}),e.jsx("input",{readOnly:!0,className:`${I} opacity-50 cursor-not-allowed`,value:v})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-2",children:"Статус"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!g),className:`${I} flex items-center justify-between text-left`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${l.status==="active"?"bg-emerald-500":l.status==="inactive"?"bg-amber-500":"bg-rose-500"}`}),l.status==="active"?"Активный":l.status==="inactive"?"Неактивный":"Удаленный"]}),e.jsx(st,{className:`w-4 h-4 transition-transform ${g?"rotate-180":""}`})]}),g&&e.jsx("div",{className:`absolute top-full left-0 right-0 mt-2 rounded-xl border overflow-hidden z-50 ${a==="dark"?"bg-[#0b1015] border-white/10":"bg-white border-gray-200"} shadow-xl`,children:[{value:"active",label:"Активный",color:"bg-emerald-500"},{value:"inactive",label:"Неактивный",color:"bg-amber-500"},{value:"deleted",label:"Удаленный",color:"bg-rose-500"}].map(C=>e.jsxs("button",{onClick:()=>{c(T=>({...T,status:C.value})),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-colors ${l.status===C.value?a==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900":a==="dark"?"text-gray-400 hover:text-white hover:bg-white/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${C.color}`}),C.label]},C.value))})]})]})]}),u&&e.jsx("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-xs font-bold text-center",children:u}),e.jsx("button",{type:"submit",disabled:d,className:"w-full relative group overflow-hidden py-5 rounded-[1.25rem] bg-emerald-500 text-white font-black transition-all duration-300 shadow-[0_20px_40px_-10px_rgba(16,185,129,0.3)] hover:shadow-[0_25px_50px_-12px_rgba(16,185,129,0.4)] hover:-translate-y-0.5 active:translate-y-0 active:scale-95 disabled:opacity-50",children:e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:d?"Сохранение...":s?"Обновить данные":"Создать реферала"})})]})]})})]})},NE=()=>{const{theme:s}=pe(),{user:t}=Xe(),{isAdmin:r}=kt(),{users:a}=Xr(),[n,i]=f.useState([]),[l,c]=f.useState(!0),[d,h]=f.useState(!1),[u,m]=f.useState(null),[g,y]=f.useState(!1),[v,E]=f.useState(null),I=async b=>{if(confirm("Вы уверены, что хотите удалить этого реферала?")){E(b);try{await Cp(b),C()}catch(w){console.error("Ошибка при удалении:",w)}finally{E(null)}}},C=async()=>{c(!0);const b=await Dh();i(b),c(!1)};f.useEffect(()=>{C()},[]);const T=f.useMemo(()=>n.filter(b=>b.ownerId===(t==null?void 0:t.id)),[n,t]),D=f.useMemo(()=>a.map(b=>{const w=n.filter(j=>j.ownerId===b.id);return{userId:b.id,user:b,total:w.length,active:w.filter(j=>j.status==="active"||!j.status).length,inactive:w.filter(j=>j.status==="inactive").length,deleted:w.filter(j=>j.status==="deleted").length}}).sort((b,w)=>w.total-b.total),[a,n]),M=f.useMemo(()=>{const b=new Date,w=new Date(b.getFullYear(),b.getMonth(),1).toISOString();return T.filter(j=>j.createdAt>=w&&(j.status==="active"||!j.status)).length},[T]),se=()=>{if(!r)return;const b=`Кто пригласил	ID	Имя	Телефон	Источник	TG	Статус
`,w=n.map(j=>{const $=a.find(k=>k.id===j.ownerId);return`${$?Yt($.id):"—"}	${j.referralId}	${j.name}	${j.phone||"—"}	${j.source||"—"}	${j.tgAccount||"—"}	${j.status||"active"}`}).join(`
`);navigator.clipboard.writeText(b+w),y(!0),setTimeout(()=>y(!1),2e3)},L=s==="dark"?"text-white":"text-gray-900",N=s==="dark"?"text-gray-400":"text-gray-500";return l?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500/20 border-t-emerald-500 rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-pink-500/20 blur-2xl rounded-full"}),e.jsx("div",{className:`relative p-4 rounded-2xl border ${s==="dark"?"bg-pink-500/10 border-pink-500/20 text-pink-400":"bg-pink-50 border-pink-100 text-pink-600 shadow-sm"}`,children:e.jsx(yt,{className:"w-8 h-8"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl md:text-4xl font-black tracking-tight ${L}`,children:"Referrals"}),e.jsx("p",{className:`text-sm font-medium ${N}`,children:"Система приглашений и управления рефералами"})]})]}),e.jsxs("button",{onClick:()=>{m(null),h(!0)},className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-emerald-500 text-white font-black transition-all duration-300 shadow-[0_20px_40px_-10px_rgba(16,185,129,0.3)] hover:shadow-[0_25px_50px_-12px_rgba(16,185,129,0.4)] hover:-translate-y-1 active:translate-y-0 active:scale-95",children:[e.jsx(Gp,{className:"w-5 h-5"}),e.jsx("span",{children:"Добавить реферала"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(jE,{count:M,theme:s})}),e.jsxs("div",{className:`lg:col-span-2 rounded-[2rem] border p-8 flex flex-col justify-center gap-6 ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} shadow-2xl`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(jt,{className:"w-6 h-6 text-emerald-500"}),e.jsx("h3",{className:`text-xl font-black tracking-tight ${L}`,children:"Ваша активность"})]}),e.jsxs("p",{className:`text-sm leading-relaxed ${N}`,children:["Приглашайте новых участников и заряжайте батарею! Каждые 5 рефералов открывают новый уровень энергии. Максимальный заряд — ",e.jsx("span",{className:"text-emerald-500 font-black",children:"100% (30 рефералов)"}),". Статистика обнуляется каждое 1-е число месяца."]}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:["RED: 5 (25%)","ORANGE: 10 (50%)","YELLOW: 20 (75%)","GREEN: 30 (100%)"].map((b,w)=>e.jsx("div",{className:`px-4 py-2 rounded-xl text-[10px] font-black tracking-widest uppercase ${s==="dark"?"bg-white/5 text-gray-400":"bg-gray-50 text-gray-600"}`,children:b},w))})]})]}),e.jsxs("div",{className:"space-y-12",children:[r&&e.jsxs("div",{className:`rounded-[2.5rem] border overflow-hidden ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} shadow-2xl`,children:[e.jsxs("div",{className:"p-8 border-b border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-emerald-500"}),e.jsx("h3",{className:`text-xl font-black tracking-tight ${L}`,children:"Панель управления (Admin)"})]}),e.jsx("button",{onClick:se,className:`p-3 rounded-xl transition-all ${g?"bg-emerald-500 text-white":s==="dark"?"bg-white/5 text-gray-400 hover:text-white":"bg-gray-50 text-gray-500 hover:text-emerald-500"}`,children:g?e.jsx(xr,{className:"w-5 h-5"}):e.jsx(Rn,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:s==="dark"?"bg-white/[0.02]":"bg-gray-50",children:["Кто пригласил","ID","Имя","Телефон","Источник","TG","Статус",""].map(b=>e.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black text-gray-500",children:b},b))})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(b=>{var _;const w=a.find(k=>k.id===b.ownerId),j=w?Yt(w.id):"—",$=b.status==="active"||!b.status?"bg-emerald-500/10 text-emerald-500":b.status==="inactive"?"bg-amber-500/10 text-amber-500":"bg-rose-500/10 text-rose-500";return e.jsxs("tr",{className:`group transition-colors ${s==="dark"?"hover:bg-white/[0.02]":"hover:bg-gray-50/50"}`,children:[e.jsxs("td",{className:"px-6 py-4 flex items-center justify-center gap-3",children:[w!=null&&w.avatar?e.jsx("img",{src:w.avatar,alt:j,className:"w-8 h-8 rounded-lg object-cover",onError:k=>{var H;k.currentTarget.style.display="none",(H=k.currentTarget.nextElementSibling)==null||H.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-black text-xs ${s==="dark"?"bg-white/5 text-emerald-400":"bg-emerald-50 text-emerald-600"} ${w!=null&&w.avatar?"hidden":""}`,children:(_=j[0])==null?void 0:_.toUpperCase()}),e.jsx("span",{className:`text-sm font-bold ${L}`,children:j})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-xs font-mono font-bold text-emerald-500",children:b.referralId})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.name}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.phone||"—"}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.source||"—"}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-xs font-bold text-pink-500",children:b.tgAccount||"—"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${$}`,children:b.status||"active"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{m(b),h(!0)},className:`p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all ${s==="dark"?"hover:bg-white/10 text-gray-400 hover:text-white":"hover:bg-emerald-50 text-gray-400 hover:text-emerald-500"}`,children:e.jsx(vE,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(b.id),disabled:v===b.id,className:`p-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all ${s==="dark"?"hover:bg-white/10 text-gray-400 hover:text-rose-500":"hover:bg-rose-50 text-gray-400 hover:text-rose-500"} ${v===b.id?"animate-spin opacity-50":""}`,children:e.jsx(Lt,{className:"w-4 h-4"})})]})})]},b.id)})})]})})]}),!r&&e.jsxs("div",{className:`rounded-[2.5rem] border overflow-hidden ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} shadow-2xl`,children:[e.jsx("div",{className:"p-8 border-b border-white/5 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dr,{className:"w-5 h-5 text-pink-500"}),e.jsx("h3",{className:`text-xl font-black tracking-tight ${L}`,children:"Ваши рефералы"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:s==="dark"?"bg-white/[0.02]":"bg-gray-50",children:["ID","Имя","Телефон","Источник","TG","Статус"].map(b=>e.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black text-gray-500",children:b},b))})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:T.length>0?T.map(b=>{const w=b.status==="active"||!b.status?"bg-emerald-500/10 text-emerald-500":b.status==="inactive"?"bg-amber-500/10 text-amber-500":"bg-rose-500/10 text-rose-500";return e.jsxs("tr",{className:`group transition-colors ${s==="dark"?"hover:bg-white/[0.02]":"hover:bg-gray-50/50"}`,children:[e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-xs font-mono font-bold text-emerald-500",children:b.referralId})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.name}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.phone||"—"}),e.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium",children:b.source||"—"}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"text-xs font-bold text-pink-500",children:b.tgAccount||"—"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${w}`,children:b.status||"active"})})]},b.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 font-bold uppercase tracking-widest text-xs",children:"Рефералов пока нет"})})})]})})]}),e.jsxs("div",{className:`rounded-[2.5rem] border overflow-hidden ${s==="dark"?"bg-[#0b1015] border-white/5":"bg-white border-gray-100"} shadow-2xl`,children:[e.jsx("div",{className:"p-8 border-b border-white/5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-emerald-500"}),e.jsx("h3",{className:`text-xl font-black tracking-tight ${L}`,children:"Общая статистика"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:s==="dark"?"bg-white/[0.02]":"bg-gray-50",children:["Участник","Всего","Активные","Неактивные","Удаленные"].map(b=>e.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black text-gray-500",children:b},b))})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:D.map(b=>{var j;const w=Yt(b.userId);return e.jsxs("tr",{className:`group transition-colors ${s==="dark"?"hover:bg-white/[0.02]":"hover:bg-gray-50/50"} ${b.userId===(t==null?void 0:t.id)?s==="dark"?"bg-emerald-500/5":"bg-emerald-50/50":""}`,children:[e.jsxs("td",{className:"px-6 py-4 flex items-center justify-center gap-3",children:[b.user.avatar?e.jsx("img",{src:b.user.avatar,alt:w,className:"w-8 h-8 rounded-lg object-cover",onError:$=>{var _;$.currentTarget.style.display="none",(_=$.currentTarget.nextElementSibling)==null||_.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-black text-xs ${s==="dark"?"bg-white/5 text-emerald-400":"bg-emerald-50 text-emerald-600"} ${b.user.avatar?"hidden":""}`,children:(j=w[0])==null?void 0:j.toUpperCase()}),e.jsx("span",{className:`text-sm font-bold ${L}`,children:w})]}),e.jsx("td",{className:"px-6 py-4 text-center font-black",children:b.total}),e.jsx("td",{className:"px-6 py-4 text-center text-emerald-500 font-bold",children:b.active}),e.jsx("td",{className:"px-6 py-4 text-center text-amber-500 font-bold",children:b.inactive}),e.jsx("td",{className:"px-6 py-4 text-center text-rose-500 font-bold",children:b.deleted})]},b.userId)})})]})})]})]}),d&&e.jsx(wE,{referral:u,onClose:()=>{h(!1),m(null)},onSave:()=>{h(!1),m(null),C()},theme:s})]})},Ya="analytics",kE=async()=>{const s=rt(je,Ya),t=await bs(s),r=new Set;t.docs.forEach(n=>{const i=n.data();i.number!==void 0&&r.add(i.number)});let a=1;for(;r.has(a);)a++;return a},Rc=async s=>{const t=Ze(je,Ya,s),r=await Sn(t);return r.exists()?{id:r.id,...r.data()}:null},_E=(s,t,r)=>{const a=rt(je,Ya);let n=ht(a,Gr("createdAt","desc"));const i=[Gr("createdAt","desc")];return n=ht(a,...i),xh(n,l=>{const c=l.docs.map(d=>({id:d.id,...d.data()}));s(c)})},EE=async s=>{const t=rt(je,Ya),r=new Date().toISOString(),a=await kE();return(await Vs(t,{...s,number:a,createdAt:r,updatedAt:r,ratings:[]})).id},$E=async(s,t)=>{const r=Ze(je,Ya,s);await Is(r,{...t,updatedAt:new Date().toISOString()})},Jp=async s=>{const t=Ze(je,Ya,s);await Ls(t)},Zp=async(s,t,r)=>{const a=Ze(je,Ya,s),n=await Sn(a);if(n.exists()){const l=n.data().ratings||[],c=l.findIndex(h=>h.userId===t);let d;c!==-1?d=l.map((h,u)=>u===c?{...h,value:r}:h):d=[...l,{userId:t,value:r}],await Is(a,{ratings:d,updatedAt:new Date().toISOString()})}else throw new Error("Аналитический обзор не найден")},TE=({value:s,onChange:t,options:r,placeholder:a="Select...",searchable:n=!1,icon:i})=>{const{theme:l}=pe(),[c,d]=f.useState(!1),[h,u]=f.useState(""),m=f.useRef(null);f.useEffect(()=>{const v=E=>{m.current&&!m.current.contains(E.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const g=r.filter(v=>v.label.toLowerCase().includes(h.toLowerCase())||v.meta&&v.meta.toLowerCase().includes(h.toLowerCase())),y=v=>{s.includes(v)?t(s.filter(E=>E!==v)):t([...s,v])};return e.jsxs("div",{className:"relative min-w-[180px]",ref:m,children:[e.jsxs("button",{type:"button",onClick:()=>d(!c),className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 rounded-xl border transition-all ${l==="dark"?"bg-[#151a21] border-white/5 text-gray-300 hover:border-emerald-500/30":"bg-white border-gray-200 text-gray-700 hover:border-emerald-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 overflow-hidden flex-wrap",children:[i&&e.jsx("div",{className:s.length>0?"text-emerald-500":"text-gray-500",children:i}),s.length>0?s.map(v=>{const E=r.find(I=>I.value===v);return E?e.jsxs("div",{className:"flex items-center gap-1 bg-emerald-500/10 text-emerald-400 rounded-lg pl-2 pr-1 py-1 text-xs font-bold",children:[E.icon&&e.jsx("div",{className:"flex items-center justify-center",children:E.icon}),e.jsx("span",{className:"truncate",children:E.label}),e.jsx(it,{size:12,className:"cursor-pointer",onClick:I=>{I.stopPropagation(),y(v)}})]},v):null}):e.jsx("span",{className:"text-sm font-semibold text-gray-500",children:a})]}),e.jsx(st,{size:16,className:`text-gray-500 transition-transform ${c?"rotate-180":""}`})]}),c&&e.jsxs("div",{className:`absolute z-50 top-full mt-2 w-full min-w-[200px] rounded-2xl border shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200 ${l==="dark"?"bg-[#1a1f26] border-white/10":"bg-white border-gray-200"}`,children:[n&&e.jsx("div",{className:"p-3 border-b border-white/5",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Поиск...",value:h,onChange:v=>u(v.target.value),className:`w-full pl-9 pr-8 py-2 rounded-lg text-xs font-medium outline-none transition-all ${l==="dark"?"bg-black/20 text-gray-300 focus:bg-black/40":"bg-gray-100 text-gray-700 focus:bg-gray-200"}`,autoFocus:!0}),h&&e.jsx("button",{type:"button",onClick:()=>u(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:text-rose-500",children:e.jsx(it,{size:12})})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1.5 custom-scrollbar",children:[g.map(v=>e.jsxs("button",{type:"button",onClick:()=>y(v.value),className:`w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg transition-all text-left ${s.includes(v.value)?l==="dark"?"bg-emerald-500/10 text-emerald-400":"bg-emerald-50 text-emerald-600":l==="dark"?"hover:bg-white/5 text-gray-300":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[v.icon&&e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-[10px] ${v.chip||(l==="dark"?"bg-white/5":"bg-gray-100")}`,children:v.icon}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-xs font-bold truncate",children:v.label}),v.meta&&e.jsx("span",{className:"text-[9px] opacity-50 truncate",children:v.meta})]})]}),s.includes(v.value)&&e.jsx(xr,{size:14})]},v.value)),g.length===0&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-[10px] text-gray-500",children:"Ничего не найдено"})})]})]})]})},Uh=({ratings:s,theme:t})=>{if(!s||s.length===0)return e.jsx("span",{className:t==="dark"?"text-gray-400":"text-gray-500",children:"Нет оценок"});const a=(s.reduce((n,i)=>n+i.value,0)/s.length).toFixed(1);return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ho,{size:16,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:t==="dark"?"text-white":"text-gray-900",children:a}),e.jsxs("span",{className:t==="dark"?"text-gray-400":"text-gray-500",children:["(",s.length,")"]})]})},eb=({currentRating:s,onRate:t,theme:r,disabled:a=!1})=>{const[n,i]=f.useState(0),l=d=>a?r==="dark"?"text-gray-600":"text-gray-300":n>=d?"text-yellow-400":s&&s>=d?"text-yellow-500":r==="dark"?"text-gray-600":"text-gray-300",c=d=>a?r==="dark"?"fill-gray-700":"fill-gray-200":n>=d?"fill-yellow-400":s&&s>=d?"fill-yellow-500":r==="dark"?"fill-gray-700":"fill-gray-200";return e.jsx("div",{className:"flex cursor-pointer",onMouseLeave:()=>i(0),children:[1,2,3,4,5].map(d=>e.jsx(ho,{size:20,className:`transition-colors duration-200 ${l(d)} ${c(d)}`,onMouseEnter:()=>!a&&i(d),onClick:()=>!a&&t(d)},d))})},SE=({isOpen:s,onClose:t,review:r,sphereOptions:a})=>{var H,S;const{theme:n}=pe(),{user:i}=Xe(),[l,c]=f.useState(!1),[d,h]=f.useState({sphere:[],expertComment:"",importantDetails:"",strategy:"",currentPrice:"",deadline:"",asset:"",links:[],ratings:[],screenshot:""}),[u,m]=f.useState([]),[g,y]=f.useState(""),[v,E]=f.useState(""),I=F=>{var ie;const Z=(ie=F.target.files)==null?void 0:ie[0];if(Z){const P=new FileReader;P.onloadend=()=>h({...d,screenshot:P.result}),P.readAsDataURL(Z)}},C=F=>{const Z=F.clipboardData.files[0];if(Z&&Z.type.startsWith("image/")){const ie=new FileReader;ie.onloadend=()=>h({...d,screenshot:ie.result}),ie.readAsDataURL(Z)}},T=F=>{F.preventDefault();const Z=F.dataTransfer.files[0];if(Z&&Z.type.startsWith("image/")){const ie=new FileReader;ie.onloadend=()=>h({...d,screenshot:ie.result}),ie.readAsDataURL(Z)}};if(f.useEffect(()=>{var F;if(r){h({sphere:Array.isArray(r.sphere)?r.sphere:r.sphere?[r.sphere]:[],expertComment:r.expertComment||"",importantDetails:r.importantDetails||"",strategy:r.strategy||"",currentPrice:r.currentPrice||"",asset:r.asset||"",deadline:r.deadline||"",links:r.links||[],ratings:r.ratings||[],screenshot:r.screenshot||""});const Z=((F=r.links)==null?void 0:F.map(ie=>{const P=ie.slice(-1)==="-"?[ie.slice(0,-1).trim()]:ie.split(" - ");return{url:P[0]||"",title:P[1]||""}}))||[];if(m(Z.length>0?Z:[{url:"",title:""}]),r.deadline){const ie=Ms(r.deadline);y(lr(ie,"yyyy-MM-dd")),E(lr(ie,"HH:mm"))}else y(""),E("")}else{h({sphere:[],expertComment:"",importantDetails:"",strategy:"",currentPrice:"",asset:"",deadline:"",links:[],ratings:[],screenshot:""}),m([{url:"",title:""}]);const Z=new Date;y(lr(Z,"yyyy-MM-dd")),E(lr(Z,"HH:mm"))}},[r,s]),!s)return null;const D=()=>{u.length<10&&m([...u,{url:"",title:""}])},M=F=>{const Z=u.filter((ie,P)=>P!==F);m(Z)},se=(F,Z,ie)=>{const P=[...u];P[F]={...P[F],[Z]:ie},m(P)},L=async F=>{if(!(!i||!(r!=null&&r.id))){c(!0);try{if(await Zp(r.id,i.id,F),d.ratings){const Z=d.ratings.findIndex(P=>P.userId===i.id);let ie;Z!==-1?ie=d.ratings.map((P,U)=>U===Z?{...P,value:F}:P):ie=[...d.ratings,{userId:i.id,value:F}],h(P=>({...P,ratings:ie}))}else h(Z=>({...Z,ratings:[{userId:i.id,value:F}]}));console.log("Оценка успешно сохранена!")}catch(Z){console.error("Ошибка при сохранении оценки:",Z)}finally{c(!1)}}},N=async F=>{F.preventDefault(),c(!0);try{const Z=u.filter(P=>!(P.url.trim()===""&&P.title.trim()==="")).map(P=>`${P.url.trim()} - ${P.title.trim()}`);let ie="";if(g&&v&&(ie=`${g}T${v}:00`),r){const P={sphere:d.sphere,expertComment:d.expertComment,importantDetails:d.importantDetails,strategy:d.strategy,currentPrice:d.currentPrice,links:Z,deadline:ie||void 0,asset:d.asset,screenshot:d.screenshot};await $E(r.id,P)}else{const P={sphere:d.sphere||[],expertComment:d.expertComment||"",importantDetails:d.importantDetails||"",strategy:d.strategy||"",currentPrice:d.currentPrice||"",asset:d.asset||"",links:Z,deadline:ie||void 0,screenshot:d.screenshot,createdBy:(i==null?void 0:i.id)||""};await EE(P)}t()}catch(Z){console.error("Ошибка при сохранении обзора:",Z)}finally{c(!1)}},b=n==="dark"?"bg-[#0f141a]":"bg-white",w=n==="dark"?"text-white":"text-gray-900",j=n==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200",$=n==="dark"?"text-gray-400":"text-gray-500",_=a.map(F=>({value:F.id||"",label:F.name,icon:F.icon})),k=((S=(H=d.ratings)==null?void 0:H.find(F=>F.userId===(i==null?void 0:i.id)))==null?void 0:S.value)||null;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:`${b} w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl border ${n==="dark"?"border-white/10":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[e.jsx("h2",{className:`text-xl font-black tracking-tight ${w}`,children:r?"Редактировать обзор":"Добавить аналитический обзор"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(it,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[r&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-white/5 bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rr,{userId:r.createdBy,size:"md"}),e.jsxs("div",{children:[e.jsx(hr,{userId:r.createdBy,className:`text-sm font-bold ${w}`}),e.jsx("p",{className:`text-[10px] uppercase font-bold tracking-widest ${n==="dark"?"text-gray-400":"text-gray-500"}`,children:"Автор обзора"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(Uh,{ratings:d.ratings,theme:n}),e.jsx(eb,{currentRating:k,onRate:L,theme:n,disabled:l||!i||i.id===r.createdBy})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Актив"}),e.jsx("input",{type:"text",placeholder:"Например: BTC, ETH, S&P 500",value:d.asset,onChange:F=>h({...d,asset:F.target.value}),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Актуальная цена"}),e.jsx("input",{type:"text",placeholder:"Например: $45,000",value:d.currentPrice,onChange:F=>h({...d,currentPrice:F.target.value}),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Сфера"}),e.jsx(TE,{value:d.sphere,onChange:F=>h({...d,sphere:F}),options:_,placeholder:"Выберите сферы",searchable:!0,icon:e.jsx(Nt,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Дата"}),e.jsx("input",{type:"date",value:g,onChange:F=>y(F.target.value),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Время"}),e.jsx("input",{type:"time",value:v,onChange:F=>E(F.target.value),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"1ч",value:1,type:"hour"},{label:"3ч",value:3,type:"hour"},{label:"6ч",value:6,type:"hour"},{label:"9ч",value:9,type:"hour"},{label:"12ч",value:12,type:"hour"},{label:"1д",value:1,type:"day"},{label:"2д",value:2,type:"day"},{label:"3д",value:3,type:"day"},{label:"7д",value:7,type:"day"},{label:"14д",value:14,type:"day"},{label:"30д",value:30,type:"day"}].map(F=>e.jsxs("button",{type:"button",onClick:()=>{const Z=new Date,ie=F.type==="hour"?i2(Z,F.value):a2(Z,F.value);y(lr(ie,"yyyy-MM-dd")),E(lr(ie,"HH:mm"))},className:`px-3 py-1.5 text-xs font-bold rounded-lg border transition-all ${n==="dark"?"bg-white/5 border-white/10 hover:bg-white/10 text-gray-300":"bg-gray-50 border-gray-200 hover:bg-gray-100 text-gray-600"}`,children:["+",F.label]},`${F.type}-${F.value}`))})}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Комментарий эксперта"}),e.jsx("textarea",{rows:3,placeholder:"Введите ваш аналитический обзор...",value:d.expertComment,onChange:F=>h({...d,expertComment:F.target.value}),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all resize-none ${j} ${w}`})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Стратегия"}),e.jsx("textarea",{rows:2,placeholder:"Опишите стратегию трейдинга...",value:d.strategy,onChange:F=>h({...d,strategy:F.target.value}),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all resize-none ${j} ${w}`})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Скриншот"}),e.jsxs("div",{className:"space-y-3",children:[d.screenshot&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d.screenshot,alt:"Screenshot preview",className:"w-full h-40 object-cover rounded-xl border border-white/10"}),e.jsx("button",{type:"button",onClick:()=>h({...d,screenshot:""}),className:"absolute top-2 right-2 p-1.5 rounded-lg bg-rose-500 text-white hover:bg-rose-600 transition-colors",children:e.jsx(it,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:`relative flex items-center justify-center gap-2 px-4 py-4 rounded-xl border border-dashed cursor-pointer transition-all ${n==="dark"?"border-white/20 hover:border-emerald-500/50 hover:bg-white/5":"border-gray-300 hover:border-emerald-500/50 hover:bg-gray-50"}`,onPaste:C,onDrop:T,onDragOver:F=>F.preventDefault(),children:[e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(gr,{className:`w-5 h-5 ${$}`}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:`text-sm ${$}`,children:d.screenshot?"Заменить файл":"Перетащите, вставьте или загрузите"}),e.jsx("p",{className:`text-xs ${$} mt-1 opacity-60`,children:"Поддерживается drag & drop, Ctrl+V, загрузка файла"})]})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Ссылки"}),u.map((F,Z)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Ссылка",value:F.url,onChange:ie=>se(Z,"url",ie.target.value),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`}),e.jsx("input",{type:"text",placeholder:"Название",value:F.title,onChange:ie=>se(Z,"title",ie.target.value),className:`w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-emerald-500 outline-none transition-all ${j} ${w}`}),u.length>1&&e.jsx("button",{type:"button",onClick:()=>M(Z),className:"p-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-all",children:e.jsx(Lt,{className:"w-5 h-5"})})]},Z)),u.length<10&&e.jsxs("button",{type:"button",onClick:D,className:"w-full px-4 py-3 mt-2 rounded-xl border border-dashed border-emerald-500 text-emerald-500 hover:bg-emerald-500/10 transition-all flex items-center justify-center gap-2",children:[e.jsx(os,{className:"w-5 h-5"})," Добавить ссылку"]})]}),e.jsxs("div",{className:"pt-4 flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:`px-6 py-3 rounded-xl font-bold transition-all ${n==="dark"?"bg-white/5 text-gray-400 hover:bg-white/10":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Отмена"}),e.jsxs("button",{type:"submit",disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 text-white rounded-xl font-bold shadow-lg shadow-emerald-500/20 transition-all active:scale-95",children:[l?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsx(Ko,{className:"w-4 h-4"}),r?"Обновить обзор":"Сохранить обзор"]})]})]})]})})},AE=({isOpen:s,onClose:t,review:r,onEditFromView:a,onRatingSuccess:n})=>{var D,M,se;const{theme:i}=pe(),{user:l}=Xe(),{isAdmin:c}=kt(),[d,h]=f.useState(!1),[u,m]=f.useState(!1);if(!s||!r)return null;const g=async L=>{if(!(!l||!(r!=null&&r.id))){h(!0);try{await Zp(r.id,l.id,L),console.log("Оценка успешно сохранена!"),n(r.id)}catch(N){console.error("Ошибка при сохранении оценки:",N)}finally{h(!1)}}},y=L=>{if(c)return!0;if((l==null?void 0:l.id)!==L.createdBy)return!1;const N=new Date(L.createdAt).getTime();return new Date().getTime()-N<30*60*1e3},v=i==="dark"?"bg-[#0f141a]":"bg-white",E=i==="dark"?"text-white":"text-gray-900",I=i==="dark"?"text-gray-400":"text-gray-500",C=((M=(D=r.ratings)==null?void 0:D.find(L=>L.userId===(l==null?void 0:l.id)))==null?void 0:M.value)||null,T=((se=r.links)==null?void 0:se.map(L=>{const N=L.slice(-1)==="-"?[L.slice(0,-1).trim()]:L.split(" - ");return{url:N[0]||"",title:N[1]||""}}))||[];return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:`${v} w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl border ${i==="dark"?"border-white/10":"border-gray-100"} max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5 sticky top-0 bg-inherit z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:`text-xl font-black tracking-tight ${E}`,children:"Аналитический обзор"}),r.number&&e.jsxs("span",{className:`text-xs font-black px-2 py-1 rounded-lg ${i==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:["#",r.number]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y(r)&&e.jsx("button",{onClick:()=>a(r),className:"p-2 hover:bg-white/10 rounded-xl transition-colors",title:"Редактировать",children:e.jsx(rs,{className:"w-5 h-5 text-gray-500"})}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:e.jsx(it,{className:"w-5 h-5 text-gray-500"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[r.screenshot&&e.jsx("div",{className:"space-y-1.5",children:e.jsx("div",{className:`p-4 rounded-xl border border-white/10 bg-white/5 ${E}`,children:u?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.screenshot,alt:"Screenshot",className:"w-full h-auto rounded-lg"}),e.jsx("button",{onClick:()=>m(!1),className:"absolute top-2 right-2 p-2 rounded-lg bg-black/50 text-white hover:bg-black/70 transition-colors",children:e.jsx(it,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center justify-center gap-3 py-8",children:[e.jsx(Lp,{className:`w-6 h-6 ${I}`}),e.jsx("button",{onClick:()=>m(!0),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="dark"?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"bg-emerald-100 text-emerald-600 hover:bg-emerald-200"}`,children:"Показать скриншот"})]})})}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-white/5 bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rr,{userId:r.createdBy,size:"md"}),e.jsxs("div",{children:[e.jsx(hr,{userId:r.createdBy,className:`text-sm font-bold ${E}`}),e.jsx("p",{className:`text-[10px] uppercase font-bold tracking-widest ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:"Автор обзора"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(Uh,{ratings:r.ratings,theme:i}),l&&l.id!==r.createdBy&&e.jsx(eb,{currentRating:C,onRate:g,theme:i,disabled:d})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Сфера"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sphere.map((L,N)=>{var b;return e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium ${i==="dark"?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-emerald-50 text-emerald-600 border border-emerald-100"}`,children:((b=_s[L])==null?void 0:b.label)||L},N)})})]}),r.deadline&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Дедлайн"}),e.jsx("div",{className:`px-4 py-3 rounded-xl border border-white/10 bg-white/5 ${E}`,children:oe(new Date(r.deadline),"dd.MM.yyyy HH:mm")})]}),r.currentPrice&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Актуальная цена"}),e.jsxs("div",{className:`px-4 py-3 rounded-xl border border-white/10 bg-emerald-500/10 ${E} font-bold`,children:["$",r.currentPrice]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Комментарий эксперта"}),e.jsx("div",{className:`px-4 py-3 rounded-xl border border-white/10 bg-white/5 ${E} whitespace-pre-wrap`,children:r.expertComment})]}),r.strategy&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Стратегия"}),e.jsx("div",{className:`px-4 py-3 rounded-xl border border-white/10 bg-white/5 ${E} whitespace-pre-wrap`,children:r.strategy})]}),r.importantDetails&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Важные детали"}),e.jsx("div",{className:`px-4 py-3 rounded-xl border border-white/10 bg-white/5 ${E} whitespace-pre-wrap`,children:r.importantDetails})]}),T.length>0&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-500",children:"Ссылки"}),e.jsx("div",{className:"space-y-2",children:T.map((L,N)=>L.url&&e.jsxs("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 px-4 py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all ${E}`,children:[e.jsx(Ot,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:L.title||"Ссылка"}),e.jsx("div",{className:`text-xs ${I} truncate`,children:L.url})]})]},N))})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("p",{className:`text-[10px] uppercase font-bold tracking-widest ${i==="dark"?"text-gray-500":"text-gray-400"}`,children:["Создано: ",lr(Ms(r.createdAt),"dd.MM.yyyy HH:mm")]})})]})]})})},IE=({activeFilter:s,setActiveFilter:t})=>{const{theme:r}=pe(),a=[{label:"Все",value:"all"},{label:"< 24 ч",value:"<24h"},{label:"24-48 ч",value:"<48h"},{label:"48-72 ч",value:"<72h"}];return e.jsx("div",{className:`inline-flex items-center rounded-xl p-1 ${r==="dark"?"bg-white/5":"bg-gray-100"}`,children:a.map(n=>e.jsx("button",{onClick:()=>t(n.value),className:`px-3 py-1.5 rounded-lg flex items-center gap-2 text-sm font-medium transition-all ${s===n.value?r==="dark"?"bg-white/10 text-white":"bg-white text-gray-900 shadow":"text-gray-500 hover:text-gray-300"}`,children:n.label},n.value))})},CE=({deadline:s})=>{const t=()=>{const d=+new Date(s)-+new Date;let h={days:0,hours:0,minutes:0,seconds:0};return d>0&&(h={days:Math.floor(d/864e5),hours:Math.floor(d/36e5%24),minutes:Math.floor(d/1e3/60%60),seconds:Math.floor(d/1e3%60)}),h},[r,a]=f.useState(t());f.useEffect(()=>{const d=setTimeout(()=>{a(t())},1e3);return()=>clearTimeout(d)});const{days:n,hours:i,minutes:l,seconds:c}=r;return e.jsxs("span",{children:[n>0&&`${n}д `,i.toString().padStart(2,"0"),":",l.toString().padStart(2,"0"),":",c.toString().padStart(2,"0")]})},DE=s=>{const r=(+new Date(s)-+new Date)/(1e3*60*60);return r<24?"text-red-500":r<48?"text-yellow-500":r<72?"text-emerald-500":"text-gray-500"},Sx=({reviews:s,isArchive:t,onEdit:r,onView:a})=>{const{theme:n}=pe(),{isAdmin:i}=kt(),{user:l}=Xe(),[c,d]=f.useState(null),h=n==="dark"?"bg-[#0f141a]":"bg-white",u=n==="dark"?"text-white":"text-gray-900",m=n==="dark"?"text-gray-400":"text-gray-500",g=n==="dark"?"border-white/10":"border-gray-200",y=C=>{const T=`${window.location.origin}/analytics?reviewId=${C}`;navigator.clipboard.writeText(T).then(()=>{console.log("Ссылка скопирована!",T)}).catch(D=>{console.error("Не удалось скопировать ссылку: ",D)})},v=C=>t?!1:!!(i||(l==null?void 0:l.id)===C.createdBy),E=C=>t?i:i||(l==null?void 0:l.id)===C.createdBy,I=async C=>{confirm("Вы уверены, что хотите удалить этот обзор?")&&await Jp(C)};return s.length===0?e.jsx("div",{className:`p-10 text-center rounded-2xl border border-dashed ${n==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"}`,children:e.jsx("p",{className:m,children:"Аналитических обзоров в этой сфере не найдено."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(C=>e.jsxs("div",{onClick:()=>a(C.id),className:`${h} rounded-2xl p-5 pt-12 border ${g} shadow-lg transition-all hover:shadow-xl cursor-pointer relative`,children:[e.jsxs("div",{className:"absolute top-4 left-5 right-5 flex items-center justify-between bg-transparent z-10",children:[C.number&&e.jsxs("span",{className:`text-xs font-black px-2 py-1 rounded-lg ${n==="dark"?"bg-blue-500/20 text-blue-400":"bg-blue-100 text-blue-600"}`,children:["#",C.number]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C.screenshot&&e.jsx("button",{onClick:T=>{T.stopPropagation(),d({url:C.screenshot,asset:C.asset||"Без названия"})},className:"p-1.5 rounded-lg text-gray-400 hover:bg-white/10 transition-all",title:"Просмотреть скриншот",children:e.jsx(Lp,{className:"w-4 h-4"})}),e.jsx("button",{onClick:T=>{T.stopPropagation(),y(C.id)},className:"p-1.5 rounded-lg text-gray-400 hover:bg-white/10 transition-all",title:"Копировать ссылку",children:e.jsx(b_,{className:"w-4 h-4"})}),v(C)&&e.jsx("button",{onClick:T=>{T.stopPropagation(),r(C)},className:"p-1.5 rounded-lg text-gray-400 hover:bg-white/10 transition-all",title:"Редактировать",children:e.jsx(rs,{className:"w-4 h-4"})}),E(C)&&e.jsx("button",{onClick:T=>{T.stopPropagation(),I(C.id)},className:"p-1.5 rounded-lg text-gray-400 hover:bg-white/10 transition-all",title:"Удалить",children:e.jsx(Lt,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex flex-col gap-3 mb-4",children:e.jsx("span",{className:`text-[10px] px-2 py-1 rounded-lg font-bold uppercase tracking-wider border ${n==="dark"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":"bg-emerald-50 border-emerald-100 text-emerald-600"}`,children:C.sphere.map((T,D)=>{var M;return((M=_s[T])==null?void 0:M.label)||T}).join(", ")})}),C.asset&&e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:`text-lg font-black tracking-tight ${u}`,children:C.asset}),C.currentPrice&&e.jsxs("span",{className:`text-sm font-bold px-2 py-1 rounded-lg ${n==="dark"?"bg-emerald-500/20 text-emerald-400":"bg-emerald-100 text-emerald-600"}`,children:["$",C.currentPrice]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Uh,{ratings:C.ratings,theme:n})}),e.jsxs("div",{className:"flex items-center justify-between border-t border-b py-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{userId:C.createdBy,size:"sm"}),e.jsx(hr,{userId:C.createdBy,className:`text-sm font-bold ${u}`})]}),C.deadline&&e.jsxs("div",{className:`text-right ${DE(C.deadline)}`,children:[e.jsx("div",{className:"text-xs font-bold",children:oe(new Date(C.deadline),"dd.MM.yyyy HH:mm")}),e.jsx("div",{className:"text-[10px] font-medium",children:e.jsx(CE,{deadline:C.deadline})})]})]})]},C.id))}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>d(null),children:e.jsxs("div",{className:`relative max-w-4xl w-full rounded-3xl overflow-hidden ${h} shadow-2xl animate-in zoom-in-95 duration-300`,onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:`p-4 border-b ${n==="dark"?"border-white/10":"border-gray-100"} flex items-center justify-between`,children:[e.jsx("span",{className:`font-bold ${u}`,children:c.asset}),e.jsx("button",{onClick:()=>d(null),className:`p-2 rounded-lg hover:bg-white/10 ${m}`,children:e.jsx(it,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("img",{src:c.url,alt:"Screenshot",className:"w-full h-auto rounded-xl"})})]})})]})},RE=({reviews:s})=>{const{theme:t}=pe(),r=oe(new Date,"yyyy-MM-dd"),a=s.filter(h=>oe(new Date(h.createdAt),"yyyy-MM-dd")===r),n={topAnalysts:[],topSpheres:[],mostPopularReview:null},i={};a.forEach(h=>{if(h.ratings&&h.ratings.length>0){const u=h.ratings.filter(m=>m.value>=4).length;i[h.createdBy]=(i[h.createdBy]||0)+u}}),n.topAnalysts=Object.entries(i).map(([h,u])=>({userId:h,positiveRatings:u})).sort((h,u)=>u.positiveRatings-h.positiveRatings).slice(0,3);const l={};a.forEach(h=>{h.sphere.forEach(u=>{l[u]=(l[u]||0)+1})}),n.topSpheres=Object.entries(l).map(([h,u])=>({sphere:h,count:u})).sort((h,u)=>u.count-h.count).slice(0,3);const c=a.filter(h=>h.ratings&&h.ratings.length>0);if(c.length>0){const h=c.reduce((u,m)=>{const g=m.ratings.length;return g>u.ratingCount?{review:m,ratingCount:g}:u},{review:c[0],ratingCount:c[0].ratings.length});n.mostPopularReview=h}const d=[{label:"3 лучших аналитика",icon:e.jsx(w_,{className:"w-5 h-5 text-amber-400"}),tone:"amber",bgClass:"bg-amber-500/5",borderClass:"border-amber-500/20",content:e.jsx("div",{className:"space-y-2",children:n.topAnalysts.length>0?n.topAnalysts.map((h,u)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-amber-500 text-white":u===1?"bg-gray-400 text-white":"bg-amber-700 text-white"}`,children:u+1}),e.jsx(hr,{userId:h.userId,className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`})]}),e.jsxs("span",{className:`text-sm font-bold ${t==="dark"?"text-amber-400":"text-amber-600"}`,children:["+",h.positiveRatings]})]},h.userId)):e.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-500":"text-gray-400"}`,children:"Нет данных за сегодня"})})},{label:"3 самых популярных сферы",icon:e.jsx(Pe,{className:"w-5 h-5 text-emerald-400"}),tone:"emerald",bgClass:"bg-emerald-500/5",borderClass:"border-emerald-500/20",content:e.jsx("div",{className:"space-y-2",children:n.topSpheres.length>0?n.topSpheres.map((h,u)=>{var m;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-emerald-500 text-white":u===1?"bg-emerald-600 text-white":"bg-emerald-700 text-white"}`,children:u+1}),e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-white":"text-gray-900"}`,children:((m=_s[h.sphere])==null?void 0:m.label)||h.sphere})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t==="dark"?"bg-emerald-500/20 text-emerald-400":"bg-emerald-100 text-emerald-600"}`,children:h.count})]},h.sphere)}):e.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-500":"text-gray-400"}`,children:"Нет данных за сегодня"})})},{label:"Популярный разбор",icon:e.jsx(ho,{className:"w-5 h-5 text-yellow-400"}),tone:"yellow",bgClass:"bg-yellow-500/5",borderClass:"border-yellow-500/20",content:e.jsx("div",{className:"space-y-2",children:n.mostPopularReview?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:`text-sm font-bold truncate ${t==="dark"?"text-white":"text-gray-900"}`,children:["#",n.mostPopularReview.review.number||"—"," ",n.mostPopularReview.review.asset||"Без названия"]}),e.jsx("p",{className:`text-xs truncate ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:n.mostPopularReview.review.sphere.map(h=>{var u;return((u=_s[h])==null?void 0:u.label)||h}).join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx(ho,{size:14,className:"text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:`text-sm font-bold ${t==="dark"?"text-yellow-400":"text-yellow-600"}`,children:n.mostPopularReview.ratingCount})]})]}),e.jsxs("a",{href:`/analytics?reviewId=${n.mostPopularReview.review.id}`,className:`flex items-center gap-1 text-xs font-medium transition-colors ${t==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,onClick:h=>h.stopPropagation(),children:[e.jsx(Ot,{size:12}),"Открыть разбор"]})]}):e.jsx("p",{className:`text-xs ${t==="dark"?"text-gray-500":"text-gray-400"}`,children:"Нет данных за сегодня"})})},{label:"Разборов за сегодня",icon:e.jsx(Nt,{className:"w-5 h-5 text-blue-400"}),tone:"blue",bgClass:"bg-blue-500/5",borderClass:"border-blue-500/20",content:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`text-3xl font-black ${t==="dark"?"text-white":"text-gray-900"}`,children:a.length}),e.jsxs("div",{className:`text-xs ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:["за ",oe(new Date,"dd.MM.yyyy")]})]})}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((h,u)=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 border transition-all duration-300 hover:shadow-lg group ${t==="dark"?`${h.bgClass} ${h.borderClass} hover:border-opacity-50`:"bg-white border-gray-100 hover:border-blue-500/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${t==="dark"?"text-gray-400":"text-gray-500"}`,children:h.label}),e.jsx("div",{className:`p-2 rounded-xl transition-colors ${t==="dark"?"bg-white/5 group-hover:bg-white/10":"bg-gray-100 group-hover:bg-gray-200"}`,children:h.icon})]}),h.content]},u))})},Nl={memecoins:e.jsx(ar,{size:20}),polymarket:e.jsx(ga,{size:20}),nft:e.jsx(gr,{size:20}),staking:e.jsx(jt,{size:20}),spot:e.jsx(Es,{size:20}),futures:e.jsx(Qs,{size:20}),airdrop:e.jsx(mr,{size:20}),other:e.jsx(Br,{size:20}),all:e.jsx(Nt,{size:20})},PE=()=>{const{theme:s}=pe(),{user:t}=Xe(),[r,a]=f.useState("all"),[n,i]=f.useState(""),[l,c]=f.useState(null),[d,h]=f.useState([]),[u,m]=f.useState(!1),[g,y]=f.useState(!1),[v,E]=f.useState(!1),[I,C]=f.useState(null),T=Ed(),D=mo(),M=s==="dark"?"text-white":"text-gray-900",se=()=>{C(null),E(!1),m(!0),D(T.pathname,{replace:!0})},L=async P=>{const U=await Rc(P);U?(C(U),E(!0),m(!0),D(`${T.pathname}?reviewId=${P}`,{replace:!0})):console.error("Обзор не найден:",P)},N=P=>{C(P),E(!1),m(!0),D(`${T.pathname}?reviewId=${P.id}`,{replace:!0})},b=async P=>{const U=await Rc(P);U&&C(U)};f.useEffect(()=>{const U=new URLSearchParams(T.search).get("reviewId");U&&!u?(async B=>{const G=await Rc(B);G&&(C(G),E(!0),m(!0))})(U):!U&&u&&I&&(m(!1),C(null),E(!1))},[T.search,u,I]),f.useEffect(()=>{if(!(t!=null&&t.id))return;const P=_E(h);return()=>P()},[t]),f.useEffect(()=>{[...new Set(d.map(U=>U.createdBy))].forEach(U=>{cr(U)})},[d]);const w=()=>{m(!1),C(null),E(!1),D(T.pathname,{replace:!0})},j=[{id:"all",name:"Все",icon:Nl.all},...Object.keys(_s).map(P=>({id:P,name:_s[P].label,icon:Nl[P]||Nl.all}))].sort((P,U)=>{const z=["Крипто-рынок","Мемкоины","Polymarket","NFT","Стейкинг","Спот","Фьючерсы","AirDrop"];if(P.id==="all")return-1;if(U.id==="all")return 1;const B=z.indexOf(P.name),G=z.indexOf(U.name);return B===-1&&G===-1?0:B===-1?1:G===-1?-1:B-G}),$=P=>{const U=new Date().getTime();return P.filter(z=>{if(!z.deadline||r==="all")return!0;const O=(new Date(z.deadline).getTime()-U)/(1e3*60*60);return r==="<24h"?O<24:r==="<48h"?O>=24&&O<48:r==="<72h"?O>=48&&O<72:!0})},_=P=>{if(!n)return P;const U=n.toLowerCase();return P.filter(z=>{var V;const B=(V=z.number)==null?void 0:V.toString();if(B&&(`#${B}`.includes(U)||`№${B}`.includes(U)||B.includes(U)))return!0;const G=Fe.find(R=>R.id===z.createdBy);if(G&&G.name.toLowerCase().includes(U))return!0;const O=Yt(z.createdBy);return!!(O&&O.toLowerCase().includes(U)||z.createdBy.toLowerCase().includes(U)||z.asset&&z.asset.toLowerCase().includes(U)||z.expertComment&&z.expertComment.toLowerCase().includes(U)||z.links&&z.links.some(R=>R.toLowerCase().includes(U))||z.sphere&&z.sphere.some(R=>{var q;return R.toLowerCase().includes(U)||(((q=_s[R])==null?void 0:q.label)||"").toLowerCase().includes(U)}))})},k=P=>l?P.filter(U=>U.createdBy===l):P,H=P=>{if(!P.deadline)return!1;const U=new Date().getTime();return new Date(P.deadline).getTime()<=U},S=P=>{if(!P.deadline)return!1;const U=new Date().getTime(),z=new Date(P.deadline).getTime(),B=7*24*60*60*1e3;return U-z>B};f.useEffect(()=>{(async()=>{const U=d.filter(z=>H(z)&&S(z));for(const z of U)try{await Jp(z.id),console.log(`Автоматически удалён архивный обзор: ${z.id}`)}catch(B){console.error(`Ошибка при удалении архивного обзора ${z.id}:`,B)}})()},[d]);let F=$(d);F=_(F),F=k(F);const Z=F.filter(P=>!H(P)),ie=F.filter(P=>H(P));return e.jsx("div",{className:"flex min-h-screen",children:e.jsxs("div",{className:"w-full space-y-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("h1",{className:`flex items-center gap-2 text-2xl md:text-3xl font-black tracking-tight ${M}`,children:[e.jsx("span",{className:s==="dark"?"text-emerald-400":"text-emerald-500",children:Nl.all}),"Analytics"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-full md:w-48",children:e.jsx(Vh,{selectedUserId:l,onSelect:c})}),e.jsxs("div",{className:"relative w-48",children:[e.jsx("input",{type:"text",placeholder:"Поиск",value:n,onChange:P=>i(P.target.value),className:`w-full pl-9 pr-3 py-2 rounded-xl border outline-none transition-all ${s==="dark"?"bg-white/5 border-white/10 text-white focus:border-emerald-500/50":"bg-gray-50 border-gray-200 text-gray-900 focus:border-emerald-500/30"}`}),e.jsx(Dt,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${s==="dark"?"text-gray-400":"text-gray-500"}`})]}),e.jsx("button",{onClick:se,className:`flex items-center justify-center w-10 h-10 rounded-xl font-medium transition-all ${s==="dark"?"bg-emerald-600 hover:bg-emerald-500 text-white":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,title:"Add Review",children:e.jsx(os,{size:20})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(IE,{activeFilter:r,setActiveFilter:a}),e.jsxs("button",{onClick:()=>y(!g),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${g?s==="dark"?"bg-amber-600 hover:bg-amber-500 text-white":"bg-amber-500 hover:bg-amber-600 text-white":s==="dark"?"bg-white/10 hover:bg-white/20 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,title:"Показать/скрыть архив",children:[e.jsx(Ph,{size:18}),e.jsx("span",{children:"Архив"})]})]}),e.jsx(RE,{reviews:g?ie:Z}),g?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:`text-xl font-bold ${M} mt-6`,children:"Архив - Analytics"}),e.jsx(Sx,{reviews:ie,isArchive:!0,onEdit:P=>{C(P),E(!1),m(!0),D(`${T.pathname}?reviewId=${P.id}`,{replace:!0})},onView:L})]}):e.jsx(Sx,{reviews:Z,isArchive:!1,onEdit:P=>{C(P),E(!1),m(!0),D(`${T.pathname}?reviewId=${P.id}`,{replace:!0})},onView:L}),v?e.jsx(AE,{isOpen:u,onClose:w,review:I,onEditFromView:N,onRatingSuccess:b}):e.jsx(SE,{isOpen:u,onClose:w,review:I,sphereOptions:j})]})})},ME="/assets/404_mascot-CxFi_10-.png",OE=()=>{const{theme:s}=pe(),t=mo();return e.jsxs("div",{className:`min-h-screen w-full flex flex-col relative overflow-hidden font-sans selection:bg-[#10b981]/30 ${s==="dark"?"bg-[#06080c] text-white":"bg-slate-50 text-slate-900"}`,children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[60%] h-[60%] bg-[#10b981]/5 rounded-full blur-[120px] animate-pulse"}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-[#06b6d4]/3 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:`absolute inset-0 opacity-[0.03] ${s==="dark"?"invert-0":"invert"}`,style:{backgroundImage:"linear-gradient(#10b981 1px, transparent 1px), linear-gradient(90deg, #10b981 1px, transparent 1px)",backgroundSize:"80px 80px"}}),e.jsx("div",{className:`absolute inset-0 ${s==="dark"?"bg-[radial-gradient(circle_at_50%_50%,transparent_0%,#06080c_100%)]":"bg-[radial-gradient(circle_at_50%_50%,transparent_0%,#f8fafc_100%)]"}`})]}),e.jsx("header",{className:"relative w-full p-8 lg:p-12 flex justify-between items-center z-50",children:e.jsxs("div",{className:"flex items-center gap-3 group cursor-pointer",onClick:()=>t("/"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#10b981] to-[#06b6d4] flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.4)] transition-transform group-hover:scale-110",children:e.jsx(e_,{className:"w-5 h-5 text-black"})}),e.jsxs("span",{className:"text-xl font-black tracking-tighter uppercase whitespace-nowrap",children:["AVA ",e.jsx("span",{className:"text-[#10b981]",children:"TEAM"})]})]})}),e.jsx("main",{className:"flex-1 flex items-center justify-center relative z-10 px-6 sm:px-12 pb-24 lg:pb-0",children:e.jsxs("div",{className:"max-w-7xl w-full grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"relative flex justify-center items-center order-1 lg:order-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center lg:hidden pointer-events-none z-0",children:e.jsx("h1",{className:"text-[14rem] sm:text-[18rem] font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-[#10b981] via-[#06b6d4] to-transparent opacity-10 select-none",children:"404"})}),e.jsxs("div",{className:"relative w-full max-w-[500px] aspect-square flex items-center justify-center animate-float group z-10",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[#10b981]/15 to-transparent rounded-full blur-3xl scale-75 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 border border-[#10b981]/10 rounded-full scale-90 animate-[spin_20s_linear_infinite]"}),e.jsx("div",{className:"absolute inset-4 border border-[#06b6d4]/5 rounded-full scale-110 animate-[spin_30s_linear_infinite_reverse]"}),e.jsxs("div",{className:"relative z-20 w-[85%] h-[85%] rounded-full overflow-hidden border border-[#10b981]/10 backdrop-blur-[2px]",children:[e.jsx("img",{src:ME,alt:"AVA - Team Mascot",className:"w-full h-full object-cover transition-all duration-700 hover:scale-110",style:{maskImage:"radial-gradient(circle, black 65%, transparent 95%)",WebkitMaskImage:"radial-gradient(circle, black 65%, transparent 95%)"}}),e.jsx("div",{className:"absolute inset-0 shadow-[inset_0_0_40px_20px_#06080c] pointer-events-none"})]}),e.jsx("div",{className:"absolute top-10 right-0 p-3 bg-[#10b981]/10 backdrop-blur-md rounded-2xl border border-[#10b981]/20 shadow-2xl animate-bounce",style:{animationDuration:"4s"},children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10b981] animate-ping"})})]})]}),e.jsxs("div",{className:"flex flex-col items-center lg:items-start text-center lg:text-left space-y-6 lg:space-y-10 order-2 lg:order-1 mt-4 lg:mt-0",children:[e.jsxs("div",{className:"relative w-full flex flex-col items-center lg:items-start",children:[e.jsx("h1",{className:"hidden lg:block text-[14rem] sm:text-[18rem] font-black leading-none tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-[#10b981] via-[#06b6d4] to-transparent opacity-10 select-none",children:"404"}),e.jsxs("div",{className:"relative lg:absolute lg:top-1/2 lg:left-1/2 lg:-translate-x-1/2 lg:-translate-y-1/2 w-full px-4 lg:px-0",children:[e.jsxs("h2",{className:"text-3xl sm:text-6xl font-black uppercase tracking-tight mb-2 drop-shadow-sm leading-tight",children:["ПОТЕРЯЛИСЬ В ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#10b981] to-[#06b6d4]",children:"ХРАНИЛИЩЕ?"})]}),e.jsx("p",{className:"text-base sm:text-2xl font-medium opacity-50 max-w-xl mx-auto lg:mx-0",children:"Указанные координаты не соответствуют ни одному известному сектору в нашей инфраструктуре."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full max-w-md lg:max-w-none pt-4 pb-12 lg:pb-0",children:[e.jsxs("button",{onClick:()=>{const r=window.innerWidth<1024;t("/about",{state:{openMenu:r}})},className:"group relative flex items-center justify-center gap-4 px-12 py-6 bg-gradient-to-r from-[#10b981] to-[#06b6d4] text-black font-black uppercase tracking-widest text-sm rounded-2xl transition-all duration-300 hover:scale-105 active:scale-95 shadow-[0_20px_40px_rgba(16,185,129,0.2)] hover:shadow-[0_20px_60px_rgba(16,185,129,0.4)] overflow-hidden",children:[e.jsx(qa,{className:"w-5 h-5 transition-transform group-hover:-translate-x-2"}),"ВЕРНУТЬСЯ ДОМОЙ",e.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300 pointer-events-none"})]}),e.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center gap-4 px-12 py-6 border-2 border-[#10b981]/20 hover:border-[#10b981]/50 text-[#10b981] font-black uppercase tracking-widest text-sm rounded-2xl transition-all duration-300 hover:bg-[#10b981]/5",children:"НАЗАД"})]})]})]})}),e.jsx("style",{children:`
                @keyframes float {
                    0%, 100% { transform: translateY(0); }
                    50% { transform: translateY(-20px); }
                }
                .animate-float {
                    animation: float 6s ease-in-out infinite;
                }
            `})]})},Ps=({children:s,adminOnly:t})=>{const{isAuthenticated:r,user:a}=Xe(),{isAdmin:n}=kt(),{theme:i}=pe(),l=Ed(),[c,d]=f.useState(null),[h,u]=f.useState(""),[m,g]=f.useState();if(!r&&!n)return e.jsx(wi,{to:"/login",replace:!0});if(t&&!n)return e.jsx(wi,{to:"/about",replace:!0});const y=v=>v==="/admin"?"admin":v==="/management"?"slots":v==="/earnings"?"earnings":v==="/tasks"?"tasks":v==="/rating"?"rating":v==="/profile"?"profile":v==="/approvals"?"admin":v==="/call"?"ava_hub":v==="/about"?"about":v==="/meme-evaluation"?"tools_meme_evaluation":v==="/ai-ao-alerts"?"tools_ai_ao_alerts":v==="/signals-trigger-bot"?"tools_signals_trigger_bot":v.startsWith("/tools")?"tools":"login";if(f.useEffect(()=>{(async()=>{if(!a||n){d(!0);return}const E=y(l.pathname);try{const I=await Cn(a.id,E);d(I.hasAccess),u(I.reason||"Доступ запрещен"),g(I.expiresAt)}catch(I){console.error("Error checking access:",I),d(!0)}})()},[a,n,l.pathname]),c===null)return e.jsx("div",{className:`flex items-center justify-center min-h-screen ${i==="dark"?"bg-slate-950":"bg-gray-100"}`,children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-[#4E6E49] border-t-transparent"})});if(!c){const v=L=>{if(!L)return"навсегда";const N=new Date(L);return N<=new Date?"навсегда":N.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},E=i==="dark"?"bg-slate-950":"bg-gray-100",I=i==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-white border-slate-200",C=i==="dark"?"text-white":"text-gray-900",T=i==="dark"?"text-gray-400":"text-gray-600",D=i==="dark"?"bg-red-900/30":"bg-red-100",M=i==="dark"?"text-red-400":"text-red-600",se=i==="dark"?"bg-gray-800":"bg-gray-50";return e.jsx("div",{className:`flex items-center justify-center min-h-screen p-4 ${E}`,children:e.jsxs("div",{className:`max-w-md w-full ${I} rounded-2xl shadow-2xl border p-8 text-center`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:`w-16 h-16 ${D} rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Yo,{className:`w-8 h-8 ${M}`})}),e.jsx("h2",{className:`text-xl font-bold ${C} mb-2`,children:"Доступ запрещен"}),e.jsx("p",{className:`${T}`,children:h})]}),m&&e.jsx("div",{className:`${se} rounded-lg p-4 mb-4`,children:e.jsxs("div",{className:`flex items-center justify-center gap-2 text-sm ${T}`,children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Блокировка до: ",v(m)]})]})})]})})}return e.jsx(e.Fragment,{children:s})},tb=()=>{const{user:s}=Xe(),{theme:t}=pe(),[r,a]=f.useState(""),[n,i]=f.useState(),[l,c]=f.useState(!0),[d,h]=f.useState(!1);if(f.useEffect(()=>{(async()=>{if(!s){c(!1);return}try{const N=await Cn(s.id,"all");N.hasAccess?h(!1):(a(N.reason||"Доступ заблокирован"),i(N.expiresAt),h(!0))}catch(N){console.error("Error checking access:",N),a("Ошибка проверки доступа"),h(!0)}finally{c(!1)}})()},[s]),!d)return null;if(l)return e.jsx("div",{className:`fixed inset-0 flex items-center justify-center z-50 ${t==="dark"?"bg-slate-950":"bg-gray-100"}`,children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-[#4E6E49] border-t-transparent"})});if(!r)return null;const u=L=>{if(!L)return"навсегда";const N=new Date(L);return N<=new Date?"навсегда":N.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},m=t==="dark"?"bg-slate-950":"bg-gray-100",g=t==="dark"?"bg-gradient-to-br from-[#0c1320] via-[#0b1220] to-[#08111b] border-white/10":"bg-white border-slate-200",y=t==="dark"?"text-white":"text-gray-900",v=t==="dark"?"text-gray-400":"text-gray-600",E=t==="dark"?"bg-red-900/30":"bg-red-100",I=t==="dark"?"text-red-400":"text-red-600",C=t==="dark"?"bg-gray-800":"bg-gray-50",T=t==="dark"?"bg-amber-900/20 border-amber-800":"bg-amber-50 border-amber-200",D=t==="dark"?"text-amber-200":"text-amber-800",M=t==="dark"?"text-amber-300":"text-amber-700",se=t==="dark"?"text-amber-400":"text-amber-600";return e.jsx("div",{className:`fixed inset-0 ${m} flex items-center justify-center z-50 p-4`,children:e.jsxs("div",{className:`max-w-md w-full ${g} rounded-2xl shadow-2xl border p-8 text-center`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:`w-16 h-16 ${E} rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Yo,{className:`w-8 h-8 ${I}`})}),e.jsx("h1",{className:`text-2xl font-bold ${y} mb-2`,children:"Доступ заблокирован"}),e.jsx("p",{className:`${v} mb-4`,children:r})]}),e.jsx("div",{className:`${C} rounded-lg p-4 mb-6`,children:e.jsxs("div",{className:`flex items-center justify-center gap-2 text-sm ${v}`,children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsxs("span",{children:["Блокировка до: ",u(n)]})]})}),e.jsx("div",{className:`${T} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Rt,{className:`w-5 h-5 ${se} flex-shrink-0 mt-0.5`}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`text-sm font-medium ${D} mb-1`,children:"Свяжитесь с администратором"}),e.jsx("p",{className:`text-sm ${M}`,children:"Для восстановления доступа обратитесь к администратору системы"})]})]})}),e.jsx("div",{className:"mt-6 text-xs text-gray-500 dark:text-gray-500",children:"AVA — Team"})]})})},LE=s=>s.includes("Chrome")&&!s.includes("Edg")&&!s.includes("OPR")?"Chrome":s.includes("Firefox")?"Firefox":s.includes("Safari")&&!s.includes("Chrome")?"Safari":s.includes("Edg")?"Edge":s.includes("OPR")?"Opera":"Unknown",VE=()=>{const{user:s}=Xe(),t=f.useRef(null),r=f.useRef(Date.now()),a=f.useRef(!1);f.useEffect(()=>{if(!(s!=null&&s.id)||a.current)return;(async()=>{a.current=!0,r.current=Date.now();const d=navigator.userAgent,h=LE(d);try{const u=await $4({userId:s.id,loginAt:new Date().toISOString(),browser:h,userAgent:d,isActive:!0,pageViews:[]});t.current=u}catch(u){console.error("Failed to track user activity:",u)}})();const i=()=>{if(t.current){const d=Date.now(),h=Math.floor((d-r.current)/1e3);_c(t.current,new Date().toISOString(),h).catch(u=>console.error("Failed to update activity on unload:",u))}},l=setInterval(async()=>{if(t.current&&!document.hidden){const d=Date.now(),h=Math.floor((d-r.current)/1e3);try{await ud(t.current,{sessionDuration:h,isActive:!0})}catch(u){console.error("Failed to update activity duration:",u)}}},3e4),c=async()=>{if(document.hidden&&t.current){const d=Date.now(),h=Math.floor((d-r.current)/1e3);try{await _c(t.current,new Date().toISOString(),h)}catch(u){console.error("Failed to update activity on visibility change:",u)}}else if(!document.hidden&&t.current)try{await ud(t.current,{isActive:!0})}catch(d){console.error("Failed to reactivate activity:",d)}};return window.addEventListener("beforeunload",i),document.addEventListener("visibilitychange",c),()=>{if(clearInterval(l),window.removeEventListener("beforeunload",i),document.removeEventListener("visibilitychange",c),t.current){const d=Date.now(),h=Math.floor((d-r.current)/1e3);_c(t.current,new Date().toISOString(),h).catch(u=>console.error("Failed to update activity on unmount:",u))}}},[s==null?void 0:s.id])},FE=({children:s})=>{const{theme:t,toggleTheme:r}=pe(),{isAdmin:a,activateAdmin:n,deactivateAdmin:i}=kt(),{user:l,logout:c}=Xe(),{viewedUserId:d}=Fh(),h=Ed(),[u,m]=f.useState(!1),[g,y]=f.useState(!1),[v,E]=f.useState(()=>localStorage.getItem("sidebarCollapsed")==="true"),[I,C]=f.useState(new Set),[T,D]=f.useState(!0),M=Xp(l==null?void 0:l.id,a,d);VE(),f.useEffect(()=>{var S;(S=h.state)!=null&&S.openMenu&&window.innerWidth<1024&&(y(!0),window.history.replaceState({},document.title))},[h.state]),f.useEffect(()=>{(async()=>{D(!0);try{if(!l||a){C(new Set(["ava_schedule","ava_profit","ava_tasks","ava_rating","ava_referrals","profile","admin","tools","tools_strategies","tools_events","ava_hub","ava_info"]));return}const F=["ava_schedule","ava_profit","ava_tasks","ava_rating","ava_referrals","profile","ava_info","tools","tools_strategies","tools_events","ava_hub","slots","earnings","tasks","rating","about"],Z=new Set;for(const ie of F)try{(await Cn(M||"",ie)).hasAccess&&Z.add(ie)}catch{Z.add(ie)}C(Z)}finally{D(!1)}})()},[l,a,M]);const se=[{path:"/call",label:"HUB",icon:zp,feature:"ava_hub"},{path:"/management",label:"Lead",icon:Ss,feature:"ava_schedule"},{path:"/earnings",label:"Profit",icon:Br,feature:"ava_profit"},{path:"/tasks",label:"Tasks",icon:io,feature:"ava_tasks"},{path:"/rating",label:"Score",icon:Pe,feature:"ava_rating"},{path:"/referrals",label:"Referrals",icon:yt,feature:"ava_referrals"}],L=se.filter(S=>!S.feature||I.has(S.feature)||a),N=[{path:"/strategies",label:"Contour",icon:Pe,feature:"tools_strategies"},{path:"/calendar-dev",label:"Calendar",icon:wt,feature:"tools_events",isDev:!0},{path:"/events",label:"Events",icon:Op,feature:"tools_events"},{path:"/about",label:"INFO",icon:ls,feature:"ava_info"},{path:"/docs",label:"Docs",icon:Ur,feature:"tools_events"},{path:"/analytics",label:"Analytics",icon:Nt,feature:"tools_strategies"}],b=[{path:"/controls",label:"Controls",icon:jt},{path:"/approvals",label:"Check",icon:gs},{path:"/admin",label:"Team",icon:yt}],[w,j]=f.useState(!1),$=b.some(S=>h.pathname===S.path),_=N.filter(S=>I.has(S.feature)||a),k=N.some(S=>h.pathname===S.path),H=()=>{const S=!v;E(S),localStorage.setItem("sidebarCollapsed",String(S))};return e.jsxs("div",{className:`min-h-screen ${t==="dark"?"dark bg-[#0b0f17]":"bg-[#f8fafc]"}`,children:[e.jsx(tb,{}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none -z-10 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-24 -left-12 w-80 h-80 bg-gradient-to-br from-[#4E6E49]/25 via-transparent to-transparent blur-3xl"}),e.jsx("div",{className:"absolute top-8 right-0 w-[520px] h-[520px] bg-gradient-to-bl from-blue-500/12 via-purple-500/10 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute bottom-[-120px] left-12 w-96 h-96 bg-gradient-to-tr from-amber-400/10 to-[#4E6E49]/12 blur-3xl"}),e.jsx("div",{className:"floating-grid"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen",children:[e.jsxs("aside",{className:`hidden xl:flex ${v?"w-20":"w-72"} h-screen fixed left-0 top-0 flex-col glass-panel border-r border-white/40 dark:border-white/10 z-50 transition-all duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ${v?"overflow-visible":""}`,children:[e.jsx("div",{className:"accent-dots"}),e.jsx("button",{onClick:H,className:`absolute top-6 -right-0 transition-all duration-500 z-50 ${v?"right-1/2 translate-x-1/2":"right-4"} p-2 rounded-xl bg-[#4E6E49]/10 hover:bg-[#4E6E49]/20 text-[#4E6E49] dark:text-gray-400 dark:hover:text-white border border-[#4E6E49]/20 dark:border-white/10 group`,children:v?e.jsx(h_,{className:"w-5 h-5 transition-transform group-hover:scale-110"}):e.jsx(d_,{className:"w-5 h-5 transition-transform group-hover:scale-110"})}),e.jsx("div",{className:`p-6 pb-2 transition-all duration-500 origin-left overflow-hidden ${v?"opacity-0 scale-90 w-0 px-0 translate-x-[-100%]":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("img",{src:vi,alt:"AVA - Team",className:"w-9 h-9 object-contain rounded-xl filter drop-shadow-[0_0_8px_rgba(78,110,73,0.3)]"})}),e.jsx("div",{className:"flex flex-col whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-black tracking-widest text-[#4E6E49] dark:text-white uppercase transition-opacity duration-300",children:"AVA - Team"})})]})}),e.jsx("div",{className:`relative z-10 px-6 pb-4 flex items-center gap-2 transition-all duration-500 ${v?"flex-col px-4 items-center":""}`,children:e.jsx("button",{onClick:r,className:"flex-1 flex items-center justify-center p-2 rounded-xl border border-gray-200 dark:border-white/10 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors w-full",children:t==="dark"?e.jsx(uo,{className:"w-4 h-4 text-amber-300"}):e.jsx(co,{className:"w-4 h-4 text-gray-700"})})}),e.jsx("div",{className:`h-px w-full bg-gradient-to-r from-transparent via-gray-200/50 dark:via-white/10 to-transparent my-2 transition-opacity duration-500 ${v?"opacity-0":"opacity-100"}`}),e.jsx("nav",{className:"relative z-10 flex-1 px-4 py-4 space-y-1 overflow-visible no-scrollbar",children:e.jsxs(e.Fragment,{children:[(a||I.has("tools")||T)&&e.jsxs("div",{className:"space-y-1 relative group/tools",children:[e.jsxs("button",{onClick:()=>!v&&m(!u),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 ${k?"bg-[#4E6E49]/15 text-[#4E6E49]":"text-gray-500 hover:bg-gray-100/50 dark:hover:bg-white/5"} ${v?"justify-center px-0":""}`,children:[e.jsx(fr,{className:`w-4 h-4 transition-transform duration-500 ${v?"group-hover/tools:rotate-90":""}`}),!v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold flex-1 text-left",children:"Tools"}),e.jsx(st,{className:`w-4 h-4 transition-transform ${u?"rotate-180":""}`})]})]}),v&&e.jsx("div",{className:"absolute left-full top-0 invisible group-hover/tools:visible opacity-0 group-hover/tools:opacity-100 transition-all duration-300 translate-x-3 group-hover/tools:translate-x-1 z-[100]",children:e.jsxs("div",{className:"ml-2 glass-panel border border-white/40 dark:border-white/10 rounded-2xl p-2 min-w-[200px] shadow-2xl backdrop-blur-2xl",children:[e.jsx("div",{className:"px-3 py-2 mb-1 border-b border-white/10",children:e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#4E6E49]",children:"Tools"})}),_.map(S=>e.jsxs(Ws,{to:S.isDev?"#":S.path,onClick:F=>S.isDev&&F.preventDefault(),className:`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold transition-all relative ${h.pathname===S.path?"bg-[#4E6E49] text-white":"text-gray-500 hover:bg-[#4E6E49]/10 hover:text-[#4E6E49]"} ${S.isDev?"cursor-not-allowed opacity-80":""}`,children:[e.jsx(S.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:S.label}),S.isDev&&e.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 rounded-full bg-amber-500 text-[8px] text-white font-black animate-pulse",children:"DEV"})]},S.path))]})}),u&&!v&&e.jsxs("div",{className:"absolute left-0 top-full mt-1 pl-4 pr-2 py-2 glass-panel border border-white/40 dark:border-white/10 rounded-xl shadow-2xl backdrop-blur-2xl z-[100] min-w-[200px] animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"px-3 py-2 mb-1 border-b border-white/10",children:e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#4E6E49]",children:"Tools"})}),_.map(S=>e.jsxs(Ws,{to:S.isDev?"#":S.path,onClick:F=>{S.isDev?F.preventDefault():m(!1)},className:`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold transition-all relative ${h.pathname===S.path?"bg-[#4E6E49] text-white":"text-gray-500 hover:bg-[#4E6E49]/10 hover:text-[#4E6E49]"} ${S.isDev?"cursor-not-allowed opacity-80":""}`,children:[e.jsx(S.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:S.label}),S.isDev&&e.jsx("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 rounded-full bg-amber-500 text-[8px] text-white font-black animate-pulse",children:"DEV"})]},S.path))]})]}),a&&e.jsxs("div",{className:"space-y-1 relative group/admin",children:[e.jsxs("button",{onClick:()=>!v&&j(!w),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 ${$?"bg-[#4E6E49]/15 text-[#4E6E49]":"text-gray-500 hover:bg-gray-100/50 dark:hover:bg-white/5"} ${v?"justify-center px-0":""}`,children:[e.jsx(jt,{className:`w-4 h-4 transition-transform duration-500 ${v?"group-hover/admin:scale-110":""}`}),!v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold flex-1 text-left",children:"Admin"}),e.jsx(st,{className:`w-4 h-4 transition-transform ${w?"rotate-180":""}`})]})]}),v&&e.jsx("div",{className:"absolute left-full top-0 invisible group-hover/admin:visible opacity-0 group-hover/admin:opacity-100 transition-all duration-300 translate-x-3 group-hover/admin:translate-x-1 z-[100]",children:e.jsxs("div",{className:"ml-2 glass-panel border border-white/40 dark:border-white/10 rounded-2xl p-2 min-w-[200px] shadow-2xl backdrop-blur-2xl",children:[e.jsx("div",{className:"px-3 py-2 mb-1 border-b border-white/10",children:e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#4E6E49]",children:"Admin Panel"})}),b.map(S=>e.jsxs(Ws,{to:S.path,className:`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold transition-all ${h.pathname===S.path?"bg-[#4E6E49] text-white":"text-gray-500 hover:bg-[#4E6E49]/10 hover:text-[#4E6E49]"}`,children:[e.jsx(S.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:S.label})]},S.path))]})}),w&&!v&&e.jsxs("div",{className:"absolute left-0 top-full mt-1 pl-4 pr-2 py-2 glass-panel border border-white/40 dark:border-white/10 rounded-xl shadow-2xl backdrop-blur-2xl z-[100] min-w-[200px] animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsx("div",{className:"px-3 py-2 mb-1 border-b border-white/10",children:e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-[#4E6E49]",children:"Панель управления"})}),b.map(S=>e.jsxs(Ws,{to:S.path,onClick:()=>y(!1),className:`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold transition-all ${h.pathname===S.path?"bg-[#4E6E49] text-white":"text-gray-500 hover:bg-[#4E6E49]/10 hover:text-[#4E6E49]"}`,children:[e.jsx(S.icon,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:S.label})]},S.path))]})]}),se.filter(S=>a||T?!0:!S.feature||I.has(S.feature)).map(S=>e.jsxs(Ws,{to:S.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 ${h.pathname===S.path?"bg-[#4E6E49] text-white shadow-lg shadow-[#4E6E49]/30":"text-gray-500 hover:bg-gray-100/50 dark:hover:bg-white/5 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"} ${v?"justify-center px-0":""}`,children:[e.jsx(S.icon,{className:"w-4 h-4"}),!v&&e.jsx("span",{className:"font-bold text-sm tracking-tight",children:S.label})]},S.path))]})}),e.jsxs("div",{className:`relative z-10 m-4 space-y-2 transition-all duration-500 ${v?"m-2 space-y-4":""}`,children:[e.jsxs(Ws,{to:"/profile",className:`p-4 rounded-2xl flex items-center gap-3 transition-all group ${h.pathname==="/profile"?"bg-[#4E6E49]/10 border border-[#4E6E49]/30":"border border-gray-200/50 dark:border-white/5 hover:bg-gray-100/50 dark:hover:bg-white/5"} ${v?"p-0 h-12 w-12 items-center justify-center mx-auto border-0":""}`,children:[e.jsx("div",{className:"w-10 h-10 shrink-0",children:e.jsx(rr,{userId:l==null?void 0:l.id,user:l||void 0,size:"sm"})}),!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold truncate dark:text-white",children:(l==null?void 0:l.name)||"Administrator"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-medium truncate",children:(l==null?void 0:l.login)||"admin@ava-apex.io"})]}),e.jsx(Dn,{className:"w-4 h-4 text-gray-400 group-hover:text-[#4E6E49] transition-colors"})]})]}),e.jsxs("div",{className:"flex gap-2 transition-all duration-500 flex-col gap-4 px-2",children:[e.jsxs("button",{onClick:()=>{c(),i(),window.location.href="/login"},className:`flex items-center justify-center gap-2 py-2.5 rounded-xl border border-red-500/20 bg-red-500/5 text-red-500 hover:bg-red-500/10 transition-colors text-xs font-bold ${v?"w-10 h-10 px-0 border-0":"w-full"}`,children:[e.jsx(bd,{className:"w-3.5 h-3.5"}),!v&&e.jsx("span",{children:"Выйти"})]}),(l==null?void 0:l.name)==="Артём"&&!a&&e.jsxs("button",{onClick:()=>n(md),className:`flex items-center justify-center gap-2 py-2.5 rounded-xl border border-[#4E6E49]/20 bg-[#4E6E49]/5 text-[#4E6E49] hover:bg-[#4E6E49]/10 transition-colors text-xs font-bold ${v?"w-10 h-10 px-0 border-0":"w-full"}`,children:[e.jsx(jt,{className:"w-4 h-4"}),!v&&e.jsx("span",{children:"Админ"})]}),a&&e.jsxs("button",{onClick:i,className:`flex items-center justify-center gap-2 py-2.5 rounded-xl border border-amber-500/20 bg-amber-500/5 text-amber-500 hover:bg-amber-500/10 transition-colors text-xs font-bold ${v?"w-10 h-10 px-0 border-0":"w-full"}`,children:[e.jsx(Kp,{className:"w-3.5 h-3.5"}),!v&&e.jsx("span",{children:"Стоп"})]})]})]})]}),e.jsx("div",{className:`flex-1 ${v?"xl:pl-20":"xl:pl-72"} min-h-screen transition-all duration-500 ease-[cubic-bezier(0.4,0,0.2,1)]`,children:e.jsxs("main",{className:"page-shell lg:pb-14 pb-6 lg:pt-3 transition-all duration-300",children:[e.jsx("div",{className:"xl:hidden h-[65px]"})," ",s]})}),e.jsxs("div",{className:`xl:hidden fixed top-0 left-0 right-0 z-50 px-4 py-3 border-b flex items-center justify-between transition-colors duration-300 backdrop-blur-xl ${t==="dark"?"bg-[#0b0f17]/80 border-white/10":"bg-white/80 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("img",{src:vi,alt:"AVA - Team",className:"w-7 h-7 object-contain rounded-xl filter drop-shadow-[0_0_8px_rgba(78,110,73,0.3)]"})}),e.jsx("span",{className:`text-sm font-black tracking-widest uppercase ${t==="dark"?"text-white":"text-gray-900"}`,children:"AVA - Team"})]}),e.jsx("button",{onClick:()=>y(!0),className:`p-2 rounded-xl transition-colors ${t==="dark"?"bg-[#4E6E49]/10 text-white hover:bg-[#4E6E49]/20":"bg-[#4E6E49]/10 text-[#4E6E49] hover:bg-[#4E6E49]/20"}`,children:e.jsx(a_,{className:"w-6 h-6"})})]}),g&&e.jsxs("div",{className:`fixed inset-0 z-[100] flex flex-col animate-in slide-in-from-right duration-300 ${t==="dark"?"bg-[#0b0f17]":"bg-white"}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b ${t==="dark"?"border-white/10":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("img",{src:vi,alt:"AVA - Team",className:"w-7 h-7 object-contain rounded-xl"})}),e.jsx("span",{className:`text-sm font-black tracking-widest uppercase ${t==="dark"?"text-white":"text-gray-900"}`,children:"Menu"})]}),e.jsx("button",{onClick:()=>y(!1),className:`p-2 rounded-xl transition-colors ${t==="dark"?"bg-white/5 text-white hover:bg-white/10":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:e.jsx(it,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-2xl border ${t==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-100"}`,children:[e.jsx("div",{className:"w-8 h-8 shrink-0",children:e.jsx(rr,{userId:l==null?void 0:l.id,user:l||void 0,size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold truncate dark:text-white",children:(l==null?void 0:l.name)||"Guest"}),e.jsx(Ws,{to:"/profile",onClick:()=>y(!1),className:"text-xs text-[#4E6E49] hover:underline",children:"Перейти в профиль"})]})]}),(l==null?void 0:l.name)==="Артём"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider px-2",children:"Режим доступа"}),e.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-2xl",children:[e.jsxs("button",{onClick:()=>{a&&i()},className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold transition-all ${a?"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300":"bg-white dark:bg-[#4E6E49] text-[#4E6E49] dark:text-white shadow-sm"}`,children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"Участник"})]}),e.jsxs("button",{onClick:()=>{a||n(md)},className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-bold transition-all ${a?"bg-white dark:bg-[#4E6E49] text-[#4E6E49] dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Админ"})]})]})]}),(a||I.has("tools"))&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider px-2",children:"Инструменты"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:_.map(S=>e.jsxs(Ws,{to:S.isDev?"#":S.path,onClick:F=>{S.isDev?F.preventDefault():y(!1)},className:`flex flex-col items-center justify-center gap-2 p-3 rounded-xl border transition-all ${h.pathname===S.path?"border-[#4E6E49]/50 bg-[#4E6E49]/10":t==="dark"?"border-white/10 bg-white/5 hover:bg-white/10":"border-gray-100 bg-gray-50 hover:bg-gray-100"} ${S.isDev?"opacity-70 grayscale":""}`,children:[e.jsx(S.icon,{className:`w-6 h-6 ${h.pathname===S.path?"text-[#4E6E49]":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium text-center ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:S.label}),S.isDev&&e.jsx("span",{className:"absolute top-1 right-1 px-1.5 py-0.5 rounded-full bg-amber-500 text-[8px] text-white font-black",children:"DEV"})]},S.path))})]}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider px-2",children:"Панель управления"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(S=>e.jsxs(Ws,{to:S.path,onClick:()=>y(!1),className:`flex flex-col items-center justify-center gap-2 p-3 rounded-xl border transition-all ${h.pathname===S.path?"border-[#4E6E49]/50 bg-[#4E6E49]/10":t==="dark"?"border-white/10 bg-white/5 hover:bg-white/10":"border-gray-100 bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx(S.icon,{className:`w-6 h-6 ${h.pathname===S.path?"text-[#4E6E49]":"text-gray-400"}`}),e.jsx("span",{className:`text-xs font-medium text-center ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:S.label})]},S.path))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider px-2 pt-2",children:"Функции"}),e.jsx("div",{className:"space-y-2",children:L.map(S=>e.jsxs(Ws,{to:S.path,onClick:()=>y(!1),className:`flex items-center gap-3 p-3 rounded-xl transition-all ${h.pathname===S.path?"bg-[#4E6E49] text-white shadow-lg":t==="dark"?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(S.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-sm",children:S.label}),e.jsx(Dn,{className:"w-4 h-4 ml-auto opacity-50"})]},S.path))})]}),e.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-4 rounded-xl border ${t==="dark"?"border-white/10 bg-white/5":"border-gray-200 bg-gray-50"}`,children:[e.jsx("span",{className:`text-sm font-medium ${t==="dark"?"text-gray-300":"text-gray-700"}`,children:"Тема оформления"}),t==="dark"?e.jsx(uo,{className:"w-4 h-4 text-amber-300"}):e.jsx(co,{className:"w-4 h-4 text-gray-600"})]}),e.jsxs("button",{onClick:()=>{c(),i(),window.location.href="/login"},className:`w-full flex items-center justify-center gap-2 p-4 rounded-xl border font-bold ${t==="dark"?"border-red-500/20 bg-red-500/10 text-red-500":"border-red-200 bg-red-50 text-red-600"}`,children:[e.jsx(bd,{className:"w-4 h-4"}),e.jsx("span",{children:"Выйти из аккаунта"})]})]})]})]})]})},UE=()=>e.jsx(FE,{children:e.jsx(kb,{})}),BE=()=>{const{user:s,isAuthenticated:t,logout:r}=Xe();f.useEffect(()=>{if(!t||!(s!=null&&s.id))return;const a=Ze(je,"users",s.id),n=xh(a,i=>{if(i.exists()){const l=i.data(),c=l.login!==s.login,d=l.password!==s.password,h=l.recoveryCode!==s.recoveryCode;(c||d||h)&&(console.log("Security check failed: credentials changed. Logging out."),r())}else console.log("Security check failed: user document deleted. Logging out."),r()},i=>{console.error("Auth security listener error:",i)});return()=>n()},[t,s==null?void 0:s.id,s==null?void 0:s.login,s==null?void 0:s.password,s==null?void 0:s.recoveryCode,r])};function zE(){const{isAuthenticated:s}=Xe(),{isAdmin:t}=kt(),{theme:r}=pe();return BE(),f.useEffect(()=>{document.body.classList.toggle("dark",r==="dark")},[r]),f.useEffect(()=>{h4().catch(a=>console.error("Cleanup failed",a))},[]),e.jsxs(_b,{children:[e.jsx(tb,{}),e.jsxs(Eb,{children:[e.jsx(es,{path:"/login",element:!s&&!t?e.jsx(E_,{}):e.jsx(wi,{to:"/about",replace:!0})}),e.jsxs(es,{element:e.jsx(UE,{}),children:[e.jsx(es,{path:"/call",element:e.jsx(Ps,{children:e.jsx(P_,{})})}),e.jsx(es,{path:"/management",element:e.jsx(Ps,{children:e.jsx(q_,{})})}),e.jsx(es,{path:"/earnings",element:e.jsx(Ps,{children:e.jsx(Z_,{})})}),e.jsx(es,{path:"/rating",element:e.jsx(Ps,{children:e.jsx(n3,{})})}),e.jsx(es,{path:"/referrals",element:e.jsx(Ps,{children:e.jsx(NE,{})})}),e.jsx(es,{path:"/tasks",element:e.jsx(Ps,{children:e.jsx(d3,{})})}),e.jsx(es,{path:"/about",element:e.jsx(Ps,{children:e.jsx(w3,{})})}),e.jsx(es,{path:"/rules",element:e.jsx(Ps,{children:e.jsx(N3,{})})}),e.jsx(es,{path:"/controls",element:e.jsx(Ps,{adminOnly:!0,children:e.jsx(j3,{})})}),e.jsx(es,{path:"/approvals",element:e.jsx(Ps,{children:e.jsx(S3,{})})}),e.jsx(es,{path:"/admin",element:e.jsx(Ps,{children:e.jsx(m3,{})})}),e.jsx(es,{path:"/profile",element:e.jsx(Ps,{children:e.jsx(p3,{})})}),e.jsx(es,{path:"/strategies",element:e.jsx(Ps,{children:e.jsx(sE,{})})}),e.jsx(es,{path:"/events",element:e.jsx(Ps,{children:e.jsx(fE,{})})}),e.jsx(es,{path:"/analytics",element:e.jsx(Ps,{children:e.jsx(PE,{})})})]}),e.jsx(es,{path:"/",element:e.jsx(wi,{to:s||t?"/about":"/login",replace:!0})}),e.jsx(es,{path:"*",element:e.jsx(OE,{})})]})]})}Pc.createRoot(document.getElementById("root")).render(e.jsx(Os.StrictMode,{children:e.jsx(zE,{})}));
