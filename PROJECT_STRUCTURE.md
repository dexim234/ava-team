# Структура проекта ApeVault

## Описание компонентов

### Основные страницы (`src/pages/`)

- **Login.tsx** - Страница авторизации с проверкой логина и пароля
- **Call.tsx** - Заглушка для раздела Call (не разрабатывается до момента разработки торгового терминала)
- **Management.tsx** - Главная страница управления слотами, выходными, больничными и отпусками
- **Earnings.tsx** - Страница заработка с возможностью добавления и просмотра статистики
- **Rating.tsx** - Страница рейтинга с автоматическим расчетом и визуализацией

### Компоненты Management (`src/components/Management/`)

- **ManagementTable.tsx** - Табличное отображение расписания по участникам и дням
  - Показывает слоты (зеленый), выходные (желтый), больничные (фиолетовый), отпуска (оранжевый)
  - Статистика по каждому участнику (часы, выходные, больничные, отпуска)
  - Навигация по неделям
  - Фильтрация по участникам

- **ManagementWeekView.tsx** - Недельное отображение расписания
  - Показывает дни недели с слотами и статусами
  - Комментарии видны при наведении на иконку информации
  - Навигация по неделям

- **SlotForm.tsx** - Форма добавления/редактирования слотов
  - Валидация минимального количества часов (5 часов)
  - Проверка максимального количества участников на слот (3)
  - Возможность повторения слотов на месяц вперед
  - Комментарии к слотам

- **DayStatusForm.tsx** - Форма добавления/редактирования статусов дней
  - Выходные: максимум 2 в неделю, нельзя на сегодня
  - Больничные: максимум 14 дней в месяц, только текущая дата + 2 дня
  - Отпуска: максимум 14 дней в месяц, максимум 6 в год
  - Комментарии к статусам

- **AdminModeButton.tsx** - Кнопка активации режима администратора
  - Защищена паролем: 9119ApeVault
  - Сохраняется во всех разделах до деактивации

### Компоненты Earnings (`src/components/Earnings/`)

- **EarningsForm.tsx** - Форма добавления заработка
  - Выбор слота на день
  - Ввод суммы заработка и суммы в пул
  - Возможность отметить несколько участников
  - Валидация времени (после 21:00 МСК или после окончания слота)
  - Ограничение редактирования (500 рублей, кроме админа)

- **EarningsTable.tsx** - Таблица статистики заработка
  - Статистика за неделю и за месяц
  - Общая сумма команды
  - Редактирование записей (с ограничениями)

### Компоненты Rating (`src/components/Rating/`)

- **RatingCard.tsx** - Карточка рейтинга участника
  - Цветовая индикация рейтинга (1-10% красный, 11-30% оранжевый, 31-59% желтый, 60-80% синий, 81-100% зеленый)
  - Полоса прогресса с процентами
  - Детальная статистика по всем параметрам

### Утилиты (`src/utils/`)

- **dateUtils.ts** - Функции работы с датами
  - `formatDate` - форматирование дат
  - `calculateHours` - расчет часов в слотах
  - `timeOverlaps` - проверка пересечения временных интервалов
  - `canAddEarnings` - проверка возможности добавления заработка
  - `getMoscowTime` - получение московского времени

- **ratingUtils.ts** - Функции расчета рейтинга
  - `calculateRating` - расчет рейтинга по формуле
  - `getRatingColor` - получение цвета по рейтингу

### Хранилища состояния (`src/store/`)

- **authStore.ts** - Хранилище авторизации
  - Сохранение состояния пользователя
  - Функции логина/логаута
  - Проверка учетных данных

- **themeStore.ts** - Хранилище темы
  - Переключение между светлой и темной темой
  - Сохранение выбранной темы

- **adminStore.ts** - Хранилище режима администратора
  - Активация/деактивация режима админа
  - Проверка пароля администратора

### Сервисы (`src/services/`)

- **firestoreService.ts** - Сервис работы с Firestore
  - CRUD операции для слотов
  - CRUD операции для статусов дней
  - CRUD операции для заработка
  - Операции с рейтингом

### Типы (`src/types/`)

- **index.ts** - TypeScript типы и интерфейсы
  - `User` - пользователь
  - `WorkSlot` - рабочий слот
  - `DayStatus` - статус дня
  - `Earnings` - заработок
  - `RatingData` - данные рейтинга
  - `TEAM_MEMBERS` - список участников команды

## Формула рейтинга

Рейтинг рассчитывается по следующим параметрам:

1. **Заработок > 3000 руб/неделю** → +15%
2. **Выходные:**
   - 0 выходных → +10%
   - 1-2 выходных → +5%
   - >2 выходных → 0%
3. **Больничные:**
   - 0 или <7 дней → +10%
   - ≥7 дней → +3%
4. **Отпуска:**
   - 0 или <4 дня → +15%
   - ≥4 дня → +1%
5. **Инициативы > 3** → +10%
6. **Сигналы ≥ 10** → +15% (пока не учитывается)
7. **Приглашено ≥ 3** → +20% (постоянно)
8. **Пул ≥ 5000 руб/7 дней** → +10%, иначе +3%
9. **Сообщений > 30** → +10%

Максимальный рейтинг: 100%

## Цветовая схема

- **Слоты:** Зеленый (#10b981)
- **Выходные:** Желтый (#fbbf24)
- **Больничные:** Фиолетовый (#a855f7)
- **Отпуска:** Оранжевый (#f97316)

## Учетные данные

- Артём: `artyom03` / `248artdex`
- Адель: `adel05` / `058adeldex`
- Ксения: `ksen03` / `907ksendex`
- Ольга: `olga04` / `638olgadex`
- Анастасия: `anastasia05` / `638anastadex`

## Пароль администратора

`9119ApeVault`



